(self.webpackChunklsbiz_ui=self.webpackChunklsbiz_ui||[]).push([[340],{9813:function(Ze,hn,Pe){"use strict";Pe.d(hn,{ZP:function(){return Qu}});var q=Pe(97605),N=Pe(73727),Oe=Pe(50959),A=Pe(87708),ee=Pe(15543);const fn=1024;let Ot=0;class un{constructor(e,i){this.from=e,this.to=i}}class Be{constructor(e={}){this.id=Ot++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Wt.match(e)),i=>{let l=e(i);return l===void 0?null:[this,l]}}}Be.closedBy=new Be({deserialize:s=>s.split(" ")}),Be.openedBy=new Be({deserialize:s=>s.split(" ")}),Be.group=new Be({deserialize:s=>s.split(" ")}),Be.contextHash=new Be({perNode:!0}),Be.lookAhead=new Be({perNode:!0}),Be.mounted=new Be({perNode:!0});class ct{constructor(e,i,l){this.tree=e,this.overlay=i,this.parser=l}static get(e){return e&&e.props&&e.props[Be.mounted.id]}}const It=Object.create(null);class Wt{constructor(e,i,l,a=0){this.name=e,this.props=i,this.id=l,this.flags=a}static define(e){let i=e.props&&e.props.length?Object.create(null):It,l=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),a=new Wt(e.name||"",i,e.id,l);if(e.props){for(let c of e.props)if(Array.isArray(c)||(c=c(a)),c){if(c[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[c[0].id]=c[1]}}return a}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let i=this.prop(Be.group);return i?i.indexOf(e)>-1:!1}return this.id==e}static match(e){let i=Object.create(null);for(let l in e)for(let a of l.split(" "))i[a]=e[l];return l=>{for(let a=l.prop(Be.group),c=-1;c<(a?a.length:0);c++){let m=i[c<0?l.name:a[c]];if(m)return m}}}}Wt.none=new Wt("",Object.create(null),0,8);class Dt{constructor(e){this.types=e;for(let i=0;i<e.length;i++)if(e[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let i=[];for(let l of this.types){let a=null;for(let c of e){let m=c(l);m&&(a||(a=Object.assign({},l.props)),a[m[0].id]=m[1])}i.push(a?new Wt(l.name,a,l.id,l.flags):l)}return new Dt(i)}}const je=new WeakMap,Qt=new WeakMap;var me;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(me||(me={}));class We{constructor(e,i,l,a,c){if(this.type=e,this.children=i,this.positions=l,this.length=a,this.props=null,c&&c.length){this.props=Object.create(null);for(let[m,w]of c)this.props[typeof m=="number"?m:m.id]=w}}toString(){let e=ct.get(this);if(e&&!e.overlay)return e.tree.toString();let i="";for(let l of this.children){let a=l.toString();a&&(i&&(i+=","),i+=a)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(e=0){return new Xr(this.topNode,e)}cursorAt(e,i=0,l=0){let a=je.get(this)||this.topNode,c=new Xr(a);return c.moveTo(e,i),je.set(this,c._tree),c}get topNode(){return new zt(this,0,0,null)}resolve(e,i=0){let l=Cn(je.get(this)||this.topNode,e,i,!1);return je.set(this,l),l}resolveInner(e,i=0){let l=Cn(Qt.get(this)||this.topNode,e,i,!0);return Qt.set(this,l),l}resolveStack(e,i=0){return jr(this,e,i)}iterate(e){let{enter:i,leave:l,from:a=0,to:c=this.length}=e,m=e.mode||0,w=(m&me.IncludeAnonymous)>0;for(let C=this.cursor(m|me.IncludeAnonymous);;){let I=!1;if(C.from<=c&&C.to>=a&&(!w&&C.type.isAnonymous||i(C)!==!1)){if(C.firstChild())continue;I=!0}for(;I&&l&&(w||!C.type.isAnonymous)&&l(C),!C.nextSibling();){if(!C.parent())return;I=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let i in this.props)e.push([+i,this.props[i]]);return e}balance(e={}){return this.children.length<=8?this:ir(Wt.none,this.children,this.positions,0,this.children.length,0,this.length,(i,l,a)=>new We(this.type,i,l,a,this.propValues),e.makeTree||((i,l,a)=>new We(Wt.none,i,l,a)))}static build(e){return en(e)}}We.empty=new We(Wt.none,[],[],0);class kt{constructor(e,i){this.buffer=e,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new kt(this.buffer,this.index)}}class gn{constructor(e,i,l){this.buffer=e,this.length=i,this.set=l}get type(){return Wt.none}toString(){let e=[];for(let i=0;i<this.buffer.length;)e.push(this.childString(i)),i=this.buffer[i+3];return e.join(",")}childString(e){let i=this.buffer[e],l=this.buffer[e+3],a=this.set.types[i],c=a.name;if(/\W/.test(c)&&!a.isError&&(c=JSON.stringify(c)),e+=4,l==e)return c;let m=[];for(;e<l;)m.push(this.childString(e)),e=this.buffer[e+3];return c+"("+m.join(",")+")"}findChild(e,i,l,a,c){let{buffer:m}=this,w=-1;for(let C=e;C!=i&&!(Ht(c,a,m[C+1],m[C+2])&&(w=C,l>0));C=m[C+3]);return w}slice(e,i,l){let a=this.buffer,c=new Uint16Array(i-e),m=0;for(let w=e,C=0;w<i;){c[C++]=a[w++],c[C++]=a[w++]-l;let I=c[C++]=a[w++]-l;c[C++]=a[w++]-e,m=Math.max(m,I)}return new gn(c,m,this.set)}}function Ht(s,e,i,l){switch(s){case-2:return i<e;case-1:return l>=e&&i<e;case 0:return i<e&&l>e;case 1:return i<=e&&l>e;case 2:return l>e;case 4:return!0}}function Cn(s,e,i,l){for(var a;s.from==s.to||(i<1?s.from>=e:s.from>e)||(i>-1?s.to<=e:s.to<e);){let m=!l&&s instanceof zt&&s.index<0?null:s.parent;if(!m)return s;s=m}let c=l?0:me.IgnoreOverlays;if(l)for(let m=s,w=m.parent;w;m=w,w=m.parent)m instanceof zt&&m.index<0&&((a=w.enter(e,i,c))===null||a===void 0?void 0:a.from)!=m.from&&(s=w);for(;;){let m=s.enter(e,i,c);if(!m)return s;s=m}}class Vn{cursor(e=0){return new Xr(this,e)}getChild(e,i=null,l=null){let a=$n(this,e,i,l);return a.length?a[0]:null}getChildren(e,i=null,l=null){return $n(this,e,i,l)}resolve(e,i=0){return Cn(this,e,i,!1)}resolveInner(e,i=0){return Cn(this,e,i,!0)}matchContext(e){return Dn(this,e)}enterUnfinishedNodesBefore(e){let i=this.childBefore(e),l=this;for(;i;){let a=i.lastChild;if(!a||a.to!=i.to)break;a.type.isError&&a.from==a.to?(l=i,i=a.prevSibling):i=a}return l}get node(){return this}get next(){return this.parent}}class zt extends Vn{constructor(e,i,l,a){super(),this._tree=e,this.from=i,this.index=l,this._parent=a}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,i,l,a,c=0){for(let m=this;;){for(let{children:w,positions:C}=m._tree,I=i>0?w.length:-1;e!=I;e+=i){let F=w[e],U=C[e]+m.from;if(Ht(a,l,U,U+F.length)){if(F instanceof gn){if(c&me.ExcludeBuffers)continue;let ie=F.findChild(0,F.buffer.length,i,l-U,a);if(ie>-1)return new sn(new Ln(m,F,e,U),null,ie)}else if(c&me.IncludeAnonymous||!F.type.isAnonymous||Or(F)){let ie;if(!(c&me.IgnoreMounts)&&(ie=ct.get(F))&&!ie.overlay)return new zt(ie.tree,U,e,m);let ye=new zt(F,U,e,m);return c&me.IncludeAnonymous||!ye.type.isAnonymous?ye:ye.nextChild(i<0?F.children.length-1:0,i,l,a)}}}if(c&me.IncludeAnonymous||!m.type.isAnonymous||(m.index>=0?e=m.index+i:e=i<0?-1:m._parent._tree.children.length,m=m._parent,!m))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,i,l=0){let a;if(!(l&me.IgnoreOverlays)&&(a=ct.get(this._tree))&&a.overlay){let c=e-this.from;for(let{from:m,to:w}of a.overlay)if((i>0?m<=c:m<c)&&(i<0?w>=c:w>c))return new zt(a.tree,a.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,i,l)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function $n(s,e,i,l){let a=s.cursor(),c=[];if(!a.firstChild())return c;if(i!=null){for(;!a.type.is(i);)if(!a.nextSibling())return c}for(;;){if(l!=null&&a.type.is(l))return c;if(a.type.is(e)&&c.push(a.node),!a.nextSibling())return l==null?c:[]}}function Dn(s,e,i=e.length-1){for(let l=s.parent;i>=0;l=l.parent){if(!l)return!1;if(!l.type.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}class Ln{constructor(e,i,l,a){this.parent=e,this.buffer=i,this.index=l,this.start=a}}class sn extends Vn{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,i,l){super(),this.context=e,this._parent=i,this.index=l,this.type=e.buffer.set.types[e.buffer.buffer[l]]}child(e,i,l){let{buffer:a}=this.context,c=a.findChild(this.index+4,a.buffer[this.index+3],e,i-this.context.start,l);return c<0?null:new sn(this.context,this,c)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,i,l=0){if(l&me.ExcludeBuffers)return null;let{buffer:a}=this.context,c=a.findChild(this.index+4,a.buffer[this.index+3],i>0?1:-1,e-this.context.start,i);return c<0?null:new sn(this.context,this,c)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,i=e.buffer[this.index+3];return i<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new sn(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new sn(this.context,this._parent,e.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],i=[],{buffer:l}=this.context,a=this.index+4,c=l.buffer[this.index+3];if(c>a){let m=l.buffer[this.index+1];e.push(l.slice(a,c,m)),i.push(0)}return new We(this.type,e,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function ui(s){if(!s.length)return null;if(s.length==1)return s[0];let e=0,i=s[0];for(let c=1;c<s.length;c++){let m=s[c];(m.from>i.from||m.to<i.to)&&(i=m,e=c)}let l=i instanceof zt&&i.index<0?null:i.parent,a=s.slice();return l?a[e]=l:a.splice(e,1),new Ni(a,i)}class Ni{constructor(e,i){this.heads=e,this.node=i}get next(){return ui(this.heads)}}function jr(s,e,i){let l=s.resolveInner(e,i),a=null;for(let c=l instanceof zt?l:l.context.parent;c;c=c.parent)if(c.index<0){let m=c.parent;(a||(a=[l])).push(m.resolve(e,i)),c=m}else{let m=ct.get(c.tree);if(m&&m.overlay&&m.overlay[0].from<=e&&m.overlay[m.overlay.length-1].to>=e){let w=new zt(m.tree,m.overlay[0].from+c.from,0,null);(a||(a=[l])).push(Cn(w,e,i,!1))}}return a?ui(a):l}class Xr{get name(){return this.type.name}constructor(e,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof zt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let l=e._parent;l;l=l._parent)this.stack.unshift(l.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,i){this.index=e;let{start:l,buffer:a}=this.buffer;return this.type=i||a.set.types[a.buffer[e]],this.from=l+a.buffer[e+1],this.to=l+a.buffer[e+2],!0}yield(e){return e?e instanceof zt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,i,l){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,i,l,this.mode));let{buffer:a}=this.buffer,c=a.findChild(this.index+4,a.buffer[this.index+3],e,i-this.buffer.start,l);return c<0?!1:(this.stack.push(this.index),this.yieldBuf(c))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,i,l=this.mode){return this.buffer?l&me.ExcludeBuffers?!1:this.enterChild(1,e,i):this.yield(this._tree.enter(e,i,l))}parent(){if(!this.buffer)return this.yieldNode(this.mode&me.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&me.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:i}=this.buffer,l=this.stack.length-1;if(e<0){let a=l<0?0:this.stack[l]+4;if(this.index!=a)return this.yieldBuf(i.findChild(a,this.index,-1,0,4))}else{let a=i.buffer[this.index+3];if(a<(l<0?i.buffer.length:i.buffer[this.stack[l]+3]))return this.yieldBuf(a)}return l<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let i,l,{buffer:a}=this;if(a){if(e>0){if(this.index<a.buffer.buffer.length)return!1}else for(let c=0;c<this.index;c++)if(a.buffer.buffer[c+3]<this.index)return!1;({index:i,parent:l}=a)}else({index:i,_parent:l}=this._tree);for(;l;{index:i,_parent:l}=l)if(i>-1)for(let c=i+e,m=e<0?-1:l._tree.children.length;c!=m;c+=e){let w=l._tree.children[c];if(this.mode&me.IncludeAnonymous||w instanceof gn||!w.type.isAnonymous||Or(w))return!1}return!0}move(e,i){if(i&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,i=0){for(;(this.from==this.to||(i<1?this.from>=e:this.from>e)||(i>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,i););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,i=null,l=0;if(e&&e.context==this.buffer)e:for(let a=this.index,c=this.stack.length;c>=0;){for(let m=e;m;m=m._parent)if(m.index==a){if(a==this.index)return m;i=m,l=c+1;break e}a=this.stack[--c]}for(let a=l;a<this.stack.length;a++)i=new sn(this.buffer,i,this.stack[a]);return this.bufferNode=new sn(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,i){for(let l=0;;){let a=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){l++;continue}this.type.isAnonymous||(a=!0)}for(;a&&i&&i(this),a=this.type.isAnonymous,!this.nextSibling();){if(!l)return;this.parent(),l--,a=!0}}}matchContext(e){if(!this.buffer)return Dn(this.node,e);let{buffer:i}=this.buffer,{types:l}=i.set;for(let a=e.length-1,c=this.stack.length-1;a>=0;c--){if(c<0)return Dn(this.node,e,a);let m=l[i.buffer[this.stack[c]]];if(!m.isAnonymous){if(e[a]&&e[a]!=m.name)return!1;a--}}return!0}}function Or(s){return s.children.some(e=>e instanceof gn||!e.type.isAnonymous||Or(e))}function en(s){var e;let{buffer:i,nodeSet:l,maxBufferLength:a=fn,reused:c=[],minRepeatType:m=l.types.length}=s,w=Array.isArray(i)?new kt(i,i.length):i,C=l.types,I=0,F=0;function U(lt,it,nt,Bt,Hn){let{id:st,start:Ct,end:Sn,size:hi}=w,mr=F;for(;hi<0;)if(w.next(),hi==-1){let Er=c[st];nt.push(Er),Bt.push(Ct-lt);return}else if(hi==-3){I=st;return}else if(hi==-4){F=st;return}else throw new RangeError(`Unrecognized record size: ${hi}`);let po=C[st],ps,zn,Rr=Ct-lt;if(Sn-Ct<=a&&(zn=ut(w.pos-it,Hn))){let Er=new Uint16Array(zn.size-zn.skip),er=w.pos-zn.size,Ds=Er.length;for(;w.pos>er;)Ds=ln(zn.start,Er,Ds);ps=new gn(Er,Sn-zn.start,l),Rr=zn.start-lt}else{let Er=w.pos-hi;w.next();let er=[],Ds=[],vl=st>=m?st:-1,tr=0,wh=Sn;for(;w.pos>Er;)vl>=0&&w.id==vl&&w.size>=0?(w.end<=wh-a&&(ye(er,Ds,Ct,tr,w.end,wh,vl,mr),tr=er.length,wh=w.end),w.next()):U(Ct,Er,er,Ds,vl);if(vl>=0&&tr>0&&tr<er.length&&ye(er,Ds,Ct,tr,Ct,wh,vl,mr),er.reverse(),Ds.reverse(),vl>-1&&tr>0){let au=ie(po);ps=ir(po,er,Ds,0,er.length,0,Sn-Ct,au,au)}else ps=Ee(po,er,Ds,Sn-Ct,mr-Sn)}nt.push(ps),Bt.push(Rr)}function ie(lt){return(it,nt,Bt)=>{let Hn=0,st=it.length-1,Ct,Sn;if(st>=0&&(Ct=it[st])instanceof We){if(!st&&Ct.type==lt&&Ct.length==Bt)return Ct;(Sn=Ct.prop(Be.lookAhead))&&(Hn=nt[st]+Ct.length+Sn)}return Ee(lt,it,nt,Bt,Hn)}}function ye(lt,it,nt,Bt,Hn,st,Ct,Sn){let hi=[],mr=[];for(;lt.length>Bt;)hi.push(lt.pop()),mr.push(it.pop()+nt-Hn);lt.push(Ee(l.types[Ct],hi,mr,st-Hn,Sn-st)),it.push(Hn-nt)}function Ee(lt,it,nt,Bt,Hn=0,st){if(I){let Ct=[Be.contextHash,I];st=st?[Ct].concat(st):[Ct]}if(Hn>25){let Ct=[Be.lookAhead,Hn];st=st?[Ct].concat(st):[Ct]}return new We(lt,it,nt,Bt,st)}function ut(lt,it){let nt=w.fork(),Bt=0,Hn=0,st=0,Ct=nt.end-a,Sn={size:0,start:0,skip:0};e:for(let hi=nt.pos-lt;nt.pos>hi;){let mr=nt.size;if(nt.id==it&&mr>=0){Sn.size=Bt,Sn.start=Hn,Sn.skip=st,st+=4,Bt+=4,nt.next();continue}let po=nt.pos-mr;if(mr<0||po<hi||nt.start<Ct)break;let ps=nt.id>=m?4:0,zn=nt.start;for(nt.next();nt.pos>po;){if(nt.size<0)if(nt.size==-3)ps+=4;else break e;else nt.id>=m&&(ps+=4);nt.next()}Hn=zn,Bt+=mr,st+=ps}return(it<0||Bt==lt)&&(Sn.size=Bt,Sn.start=Hn,Sn.skip=st),Sn.size>4?Sn:void 0}function ln(lt,it,nt){let{id:Bt,start:Hn,end:st,size:Ct}=w;if(w.next(),Ct>=0&&Bt<m){let Sn=nt;if(Ct>4){let hi=w.pos-(Ct-4);for(;w.pos>hi;)nt=ln(lt,it,nt)}it[--nt]=Sn,it[--nt]=st-lt,it[--nt]=Hn-lt,it[--nt]=Bt}else Ct==-3?I=Bt:Ct==-4&&(F=Bt);return nt}let nn=[],Rt=[];for(;w.pos>0;)U(s.start||0,s.bufferStart||0,nn,Rt,-1);let an=(e=s.length)!==null&&e!==void 0?e:nn.length?Rt[0]+nn[0].length:0;return new We(C[s.topID],nn.reverse(),Rt.reverse(),an)}const wt=new WeakMap;function Gt(s,e){if(!s.isAnonymous||e instanceof gn||e.type!=s)return 1;let i=wt.get(e);if(i==null){i=1;for(let l of e.children){if(l.type!=s||!(l instanceof We)){i=1;break}i+=Gt(s,l)}wt.set(e,i)}return i}function ir(s,e,i,l,a,c,m,w,C){let I=0;for(let Ee=l;Ee<a;Ee++)I+=Gt(s,e[Ee]);let F=Math.ceil(I*1.5/8),U=[],ie=[];function ye(Ee,ut,ln,nn,Rt){for(let an=ln;an<nn;){let lt=an,it=ut[an],nt=Gt(s,Ee[an]);for(an++;an<nn;an++){let Bt=Gt(s,Ee[an]);if(nt+Bt>=F)break;nt+=Bt}if(an==lt+1){if(nt>F){let Bt=Ee[lt];ye(Bt.children,Bt.positions,0,Bt.children.length,ut[lt]+Rt);continue}U.push(Ee[lt])}else{let Bt=ut[an-1]+Ee[an-1].length-it;U.push(ir(s,Ee,ut,lt,an,it,Bt,null,C))}ie.push(it+Rt-c)}}return ye(e,i,l,a,0),(w||C)(U,ie,m)}class jt{constructor(){this.map=new WeakMap}setBuffer(e,i,l){let a=this.map.get(e);a||this.map.set(e,a=new Map),a.set(i,l)}getBuffer(e,i){let l=this.map.get(e);return l&&l.get(i)}set(e,i){e instanceof sn?this.setBuffer(e.context.buffer,e.index,i):e instanceof zt&&this.map.set(e.tree,i)}get(e){return e instanceof sn?this.getBuffer(e.context.buffer,e.index):e instanceof zt?this.map.get(e.tree):void 0}cursorSet(e,i){e.buffer?this.setBuffer(e.buffer.buffer,e.index,i):this.map.set(e.tree,i)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ci{constructor(e,i,l,a,c=!1,m=!1){this.from=e,this.to=i,this.tree=l,this.offset=a,this.open=(c?1:0)|(m?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,i=[],l=!1){let a=[new ci(0,e.length,e,0,!1,l)];for(let c of i)c.to>e.length&&a.push(c);return a}static applyChanges(e,i,l=128){if(!i.length)return e;let a=[],c=1,m=e.length?e[0]:null;for(let w=0,C=0,I=0;;w++){let F=w<i.length?i[w]:null,U=F?F.fromA:1e9;if(U-C>=l)for(;m&&m.from<U;){let ie=m;if(C>=ie.from||U<=ie.to||I){let ye=Math.max(ie.from,C)-I,Ee=Math.min(ie.to,U)-I;ie=ye>=Ee?null:new ci(ye,Ee,ie.tree,ie.offset+I,w>0,!!F)}if(ie&&a.push(ie),m.to>U)break;m=c<e.length?e[c++]:null}if(!F)break;C=F.toA,I=F.toA-F.toB}return a}}class ys{startParse(e,i,l){return typeof e=="string"&&(e=new ti(e)),l=l?l.length?l.map(a=>new un(a.from,a.to)):[new un(0,0)]:[new un(0,e.length)],this.createParse(e,i||[],l)}parse(e,i,l){let a=this.startParse(e,i,l);for(;;){let c=a.advance();if(c)return c}}}class ti{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,i){return this.string.slice(e,i)}}function rr(s){return(e,i,l,a)=>new Gn(e,s,i,l,a)}class Ci{constructor(e,i,l,a,c){if(this.parser=e,this.parse=i,this.overlay=l,this.target=a,this.ranges=c,!c.length||c.some(m=>m.from>=m.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(c))}}class Us{constructor(e,i,l,a,c,m,w){this.parser=e,this.predicate=i,this.mounts=l,this.index=a,this.start=c,this.target=m,this.prev=w,this.depth=0,this.ranges=[]}}const ni=new Be({perNode:!0});class Gn{constructor(e,i,l,a,c){this.nest=i,this.input=l,this.fragments=a,this.ranges=c,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let l=this.baseParse.advance();if(!l)return null;if(this.baseParse=null,this.baseTree=l,this.startInner(),this.stoppedAt!=null)for(let a of this.inner)a.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let l=this.baseTree;return this.stoppedAt!=null&&(l=new We(l.type,l.children,l.positions,l.length,l.propValues.concat([[ni,this.stoppedAt]]))),l}let e=this.inner[this.innerDone],i=e.parse.advance();if(i){this.innerDone++;let l=Object.assign(Object.create(null),e.target.props);l[Be.mounted.id]=new ct(i,e.overlay,e.parser),e.target.props=l}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].ranges[0].from<e&&(e=Math.min(e,this.inner[i].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].parse.stopAt(e)}startInner(){let e=new jn(this.fragments),i=null,l=null,a=new Xr(new zt(this.baseTree,this.ranges[0].from,0,null),me.IncludeAnonymous|me.IgnoreMounts);e:for(let c,m;this.stoppedAt==null||a.from<this.stoppedAt;){let w=!0,C;if(e.hasNode(a)){if(i){let I=i.mounts.find(F=>F.frag.from<=a.from&&F.frag.to>=a.to&&F.mount.overlay);if(I)for(let F of I.mount.overlay){let U=F.from+I.pos,ie=F.to+I.pos;U>=a.from&&ie<=a.to&&!i.ranges.some(ye=>ye.from<ie&&ye.to>U)&&i.ranges.push({from:U,to:ie})}}w=!1}else if(l&&(m=Dr(l.ranges,a.from,a.to)))w=m!=2;else if(!a.type.isAnonymous&&a.from<a.to&&(c=this.nest(a,this.input))){a.tree||sr(a);let I=e.findMounts(a.from,c.parser);if(typeof c.overlay=="function")i=new Us(c.parser,c.overlay,I,this.inner.length,a.from,a.tree,i);else{let F=Le(this.ranges,c.overlay||[new un(a.from,a.to)]);F.length&&this.inner.push(new Ci(c.parser,c.parser.startParse(this.input,mn(I,F),F),c.overlay?c.overlay.map(U=>new un(U.from-a.from,U.to-a.from)):null,a.tree,F)),c.overlay?F.length&&(l={ranges:F,depth:0,prev:l}):w=!1}}else i&&(C=i.predicate(a))&&(C===!0&&(C=new un(a.from,a.to)),C.from<C.to&&i.ranges.push(C));if(w&&a.firstChild())i&&i.depth++,l&&l.depth++;else for(;!a.nextSibling();){if(!a.parent())break e;if(i&&!--i.depth){let I=Le(this.ranges,i.ranges);I.length&&this.inner.splice(i.index,0,new Ci(i.parser,i.parser.startParse(this.input,mn(i.mounts,I),I),i.ranges.map(F=>new un(F.from-i.start,F.to-i.start)),i.target,I)),i=i.prev}l&&!--l.depth&&(l=l.prev)}}}}function Dr(s,e,i){for(let l of s){if(l.from>=i)break;if(l.to>e)return l.from<=e&&l.to>=i?2:1}return 0}function Lr(s,e,i,l,a,c){if(e<i){let m=s.buffer[e+1];l.push(s.slice(e,i,m)),a.push(m-c)}}function sr(s){let{node:e}=s,i=0;do s.parent(),i++;while(!s.tree);let l=0,a=s.tree,c=0;for(;c=a.positions[l]+s.from,!(c<=e.from&&c+a.children[l].length>=e.to);l++);let m=a.children[l],w=m.buffer;function C(I,F,U,ie,ye){let Ee=I;for(;w[Ee+2]+c<=e.from;)Ee=w[Ee+3];let ut=[],ln=[];Lr(m,I,Ee,ut,ln,ie);let nn=w[Ee+1],Rt=w[Ee+2],an=nn+c==e.from&&Rt+c==e.to&&w[Ee]==e.type.id;return ut.push(an?e.toTree():C(Ee+4,w[Ee+3],m.set.types[w[Ee]],nn,Rt-nn)),ln.push(nn-ie),Lr(m,w[Ee+3],F,ut,ln,ie),new We(U,ut,ln,ye)}a.children[l]=C(0,w.length,Wt.none,0,m.length);for(let I=0;I<=i;I++)s.childAfter(e.from)}class Pr{constructor(e,i){this.offset=i,this.done=!1,this.cursor=e.cursor(me.IncludeAnonymous|me.IgnoreMounts)}moveTo(e){let{cursor:i}=this,l=e-this.offset;for(;!this.done&&i.from<l;)i.to>=e&&i.enter(l,1,me.IgnoreOverlays|me.ExcludeBuffers)||i.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let i=this.cursor.tree;;){if(i==e.tree)return!0;if(i.children.length&&i.positions[0]==0&&i.children[0]instanceof We)i=i.children[0];else break}return!1}}class jn{constructor(e){var i;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let l=this.curFrag=e[0];this.curTo=(i=l.tree.prop(ni))!==null&&i!==void 0?i:l.to,this.inner=new Pr(l.tree,-l.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let i=this.curFrag=this.fragments[this.fragI];this.curTo=(e=i.tree.prop(ni))!==null&&e!==void 0?e:i.to,this.inner=new Pr(i.tree,-i.offset)}}findMounts(e,i){var l;let a=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let c=this.inner.cursor.node;c;c=c.parent){let m=(l=c.tree)===null||l===void 0?void 0:l.prop(Be.mounted);if(m&&m.parser==i)for(let w=this.fragI;w<this.fragments.length;w++){let C=this.fragments[w];if(C.from>=c.to)break;C.tree==this.curFrag.tree&&a.push({frag:C,pos:c.from-C.offset,mount:m})}}}return a}}function Le(s,e){let i=null,l=e;for(let a=1,c=0;a<s.length;a++){let m=s[a-1].to,w=s[a].from;for(;c<l.length;c++){let C=l[c];if(C.from>=w)break;C.to<=m||(i||(l=i=e.slice()),C.from<m?(i[c]=new un(C.from,m),C.to>w&&i.splice(c+1,0,new un(w,C.to))):C.to>w?i[c--]=new un(w,C.to):i.splice(c--,1))}}return l}function zo(s,e,i,l){let a=0,c=0,m=!1,w=!1,C=-1e9,I=[];for(;;){let F=a==s.length?1e9:m?s[a].to:s[a].from,U=c==e.length?1e9:w?e[c].to:e[c].from;if(m!=w){let ie=Math.max(C,i),ye=Math.min(F,U,l);ie<ye&&I.push(new un(ie,ye))}if(C=Math.min(F,U),C==1e9)break;F==C&&(m?(m=!1,a++):m=!0),U==C&&(w?(w=!1,c++):w=!0)}return I}function mn(s,e){let i=[];for(let{pos:l,mount:a,frag:c}of s){let m=l+(a.overlay?a.overlay[0].from:0),w=m+a.tree.length,C=Math.max(c.from,m),I=Math.min(c.to,w);if(a.overlay){let F=a.overlay.map(ie=>new un(ie.from+l,ie.to+l)),U=zo(e,F,C,I);for(let ie=0,ye=C;;ie++){let Ee=ie==U.length,ut=Ee?I:U[ie].from;if(ut>ye&&i.push(new ci(ye,ut,a.tree,-m,c.from>=ye||c.openStart,c.to<=ut||c.openEnd)),Ee)break;ye=U[ie].to}}else i.push(new ci(C,I,a.tree,-m,c.from>=m||c.openStart,c.to<=w||c.openEnd))}return i}let di=0;class pi{constructor(e,i,l){this.set=e,this.base=i,this.modified=l,this.id=di++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let i=new pi([],null,[]);if(i.set.push(i),e)for(let l of e.set)i.set.push(l);return i}static defineModifier(){let e=new Zn;return i=>i.modified.indexOf(e)>-1?i:Zn.get(i.base||i,i.modified.concat(e).sort((l,a)=>l.id-a.id))}}let gi=0;class Zn{constructor(){this.instances=[],this.id=gi++}static get(e,i){if(!i.length)return e;let l=i[0].instances.find(w=>w.base==e&&vr(i,w.modified));if(l)return l;let a=[],c=new pi(a,e,i);for(let w of i)w.instances.push(c);let m=Br(i);for(let w of e.set)if(!w.modified.length)for(let C of m)a.push(Zn.get(w,C));return c}}function vr(s,e){return s.length==e.length&&s.every((i,l)=>i==e[l])}function Br(s){let e=[[]];for(let i=0;i<s.length;i++)for(let l=0,a=e.length;l<a;l++)e.push(e[l].concat(s[i]));return e.sort((i,l)=>l.length-i.length)}function Ir(s){let e=Object.create(null);for(let i in s){let l=s[i];Array.isArray(l)||(l=[l]);for(let a of i.split(" "))if(a){let c=[],m=2,w=a;for(let U=0;;){if(w=="..."&&U>0&&U+3==a.length){m=1;break}let ie=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(w);if(!ie)throw new RangeError("Invalid path: "+a);if(c.push(ie[0]=="*"?"":ie[0][0]=='"'?JSON.parse(ie[0]):ie[0]),U+=ie[0].length,U==a.length)break;let ye=a[U++];if(U==a.length&&ye=="!"){m=0;break}if(ye!="/")throw new RangeError("Invalid path: "+a);w=a.slice(U)}let C=c.length-1,I=c[C];if(!I)throw new RangeError("Invalid path: "+a);let F=new Fi(l,m,C>0?c.slice(0,C):null);e[I]=F.sort(e[I])}}return yr.add(e)}const yr=new Be;class Fi{constructor(e,i,l,a){this.tags=e,this.mode=i,this.context=l,this.next=a}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Fi.empty=new Fi([],2,null);function xr(s,e){let i=Object.create(null);for(let c of s)if(!Array.isArray(c.tag))i[c.tag.id]=c.class;else for(let m of c.tag)i[m.id]=c.class;let{scope:l,all:a=null}=e||{};return{style:c=>{let m=a;for(let w of c)for(let C of w.set){let I=i[C.id];if(I){m=m?m+" "+I:I;break}}return m},scope:l}}function _r(s,e){let i=null;for(let l of s){let a=l.style(e);a&&(i=i?i+" "+a:a)}return i}function In(s,e,i,l=0,a=s.length){let c=new On(l,Array.isArray(e)?e:[e],i);c.highlightRange(s.cursor(),l,a,"",c.highlighters),c.flush(a)}class On{constructor(e,i,l){this.at=e,this.highlighters=i,this.span=l,this.class=""}startSpan(e,i){i!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=i)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,i,l,a,c){let{type:m,from:w,to:C}=e;if(w>=l||C<=i)return;m.isTop&&(c=this.highlighters.filter(ye=>!ye.scope||ye.scope(m)));let I=a,F=Jr(e)||Fi.empty,U=_r(c,F.tags);if(U&&(I&&(I+=" "),I+=U,F.mode==1&&(a+=(a?" ":"")+U)),this.startSpan(Math.max(i,w),I),F.opaque)return;let ie=e.tree&&e.tree.prop(Be.mounted);if(ie&&ie.overlay){let ye=e.node.enter(ie.overlay[0].from+w,1),Ee=this.highlighters.filter(ln=>!ln.scope||ln.scope(ie.tree.type)),ut=e.firstChild();for(let ln=0,nn=w;;ln++){let Rt=ln<ie.overlay.length?ie.overlay[ln]:null,an=Rt?Rt.from+w:C,lt=Math.max(i,nn),it=Math.min(l,an);if(lt<it&&ut)for(;e.from<it&&(this.highlightRange(e,lt,it,a,c),this.startSpan(Math.min(it,e.to),I),!(e.to>=an||!e.nextSibling())););if(!Rt||an>l)break;nn=Rt.to+w,nn>i&&(this.highlightRange(ye.cursor(),Math.max(i,Rt.from+w),Math.min(l,nn),"",Ee),this.startSpan(Math.min(l,nn),I))}ut&&e.parent()}else if(e.firstChild()){ie&&(a="");do if(!(e.to<=i)){if(e.from>=l)break;this.highlightRange(e,i,l,a,c),this.startSpan(Math.min(l,e.to),I)}while(e.nextSibling());e.parent()}}}function Jr(s){let e=s.type.prop(yr);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const ke=pi.define,ii=ke(),pt=ke(),Zt=ke(pt),Nr=ke(pt),mi=ke(),Xn=ke(mi),Rn=ke(mi),Wi=ke(),Ri=ke(Wi),cn=ke(),Kn=ke(),on=ke(),or=ke(on),lr=ke(),se={comment:ii,lineComment:ke(ii),blockComment:ke(ii),docComment:ke(ii),name:pt,variableName:ke(pt),typeName:Zt,tagName:ke(Zt),propertyName:Nr,attributeName:ke(Nr),className:ke(pt),labelName:ke(pt),namespace:ke(pt),macroName:ke(pt),literal:mi,string:Xn,docString:ke(Xn),character:ke(Xn),attributeValue:ke(Xn),number:Rn,integer:ke(Rn),float:ke(Rn),bool:ke(mi),regexp:ke(mi),escape:ke(mi),color:ke(mi),url:ke(mi),keyword:cn,self:ke(cn),null:ke(cn),atom:ke(cn),unit:ke(cn),modifier:ke(cn),operatorKeyword:ke(cn),controlKeyword:ke(cn),definitionKeyword:ke(cn),moduleKeyword:ke(cn),operator:Kn,derefOperator:ke(Kn),arithmeticOperator:ke(Kn),logicOperator:ke(Kn),bitwiseOperator:ke(Kn),compareOperator:ke(Kn),updateOperator:ke(Kn),definitionOperator:ke(Kn),typeOperator:ke(Kn),controlOperator:ke(Kn),punctuation:on,separator:ke(on),bracket:or,angleBracket:ke(or),squareBracket:ke(or),paren:ke(or),brace:ke(or),content:Wi,heading:Ri,heading1:ke(Ri),heading2:ke(Ri),heading3:ke(Ri),heading4:ke(Ri),heading5:ke(Ri),heading6:ke(Ri),contentSeparator:ke(Wi),list:ke(Wi),quote:ke(Wi),emphasis:ke(Wi),strong:ke(Wi),link:ke(Wi),monospace:ke(Wi),strikethrough:ke(Wi),inserted:ke(),deleted:ke(),changed:ke(),invalid:ke(),meta:lr,documentMeta:ke(lr),annotation:ke(lr),processingInstruction:ke(lr),definition:pi.defineModifier(),constant:pi.defineModifier(),function:pi.defineModifier(),standard:pi.defineModifier(),local:pi.defineModifier(),special:pi.defineModifier()},qs=xr([{tag:se.link,class:"tok-link"},{tag:se.heading,class:"tok-heading"},{tag:se.emphasis,class:"tok-emphasis"},{tag:se.strong,class:"tok-strong"},{tag:se.keyword,class:"tok-keyword"},{tag:se.atom,class:"tok-atom"},{tag:se.bool,class:"tok-bool"},{tag:se.url,class:"tok-url"},{tag:se.labelName,class:"tok-labelName"},{tag:se.inserted,class:"tok-inserted"},{tag:se.deleted,class:"tok-deleted"},{tag:se.literal,class:"tok-literal"},{tag:se.string,class:"tok-string"},{tag:se.number,class:"tok-number"},{tag:[se.regexp,se.escape,se.special(se.string)],class:"tok-string2"},{tag:se.variableName,class:"tok-variableName"},{tag:se.local(se.variableName),class:"tok-variableName tok-local"},{tag:se.definition(se.variableName),class:"tok-variableName tok-definition"},{tag:se.special(se.variableName),class:"tok-variableName2"},{tag:se.definition(se.propertyName),class:"tok-propertyName tok-definition"},{tag:se.typeName,class:"tok-typeName"},{tag:se.namespace,class:"tok-namespace"},{tag:se.className,class:"tok-className"},{tag:se.macroName,class:"tok-macroName"},{tag:se.propertyName,class:"tok-propertyName"},{tag:se.operator,class:"tok-operator"},{tag:se.comment,class:"tok-comment"},{tag:se.meta,class:"tok-meta"},{tag:se.invalid,class:"tok-invalid"},{tag:se.punctuation,class:"tok-punctuation"}]);var Yr=Pe(54964),Jn;const Ei=new Be;function Fr(s){return Facet.define({combine:s?e=>e.concat(s):void 0})}const xs=new Be;class vi{constructor(e,i,l=[],a=""){this.data=e,this.name=a,A.yy.prototype.hasOwnProperty("tree")||Object.defineProperty(A.yy.prototype,"tree",{get(){return kn(this)}}),this.parser=i,this.extension=[E.of(this),A.yy.languageData.of((c,m,w)=>{let C=wr(c,m,w),I=C.type.prop(Ei);if(!I)return[];let F=c.facet(I),U=C.type.prop(xs);if(U){let ie=C.resolve(m-C.from,w);for(let ye of U)if(ye.test(ie,c)){let Ee=c.facet(ye.facet);return ye.type=="replace"?Ee:Ee.concat(F)}}return F})].concat(l)}isActiveAt(e,i,l=-1){return wr(e,i,l).type.prop(Ei)==this.data}findRegions(e){let i=e.facet(E);if((i==null?void 0:i.data)==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let l=[],a=(c,m)=>{if(c.prop(Ei)==this.data){l.push({from:m,to:m+c.length});return}let w=c.prop(Be.mounted);if(w){if(w.tree.prop(Ei)==this.data){if(w.overlay)for(let C of w.overlay)l.push({from:C.from+m,to:C.to+m});else l.push({from:m,to:m+c.length});return}else if(w.overlay){let C=l.length;if(a(w.tree,w.overlay[0].from+m),l.length>C)return}}for(let C=0;C<c.children.length;C++){let I=c.children[C];I instanceof We&&a(I,c.positions[C]+m)}};return a(kn(e),0),l}get allowsNesting(){return!0}}vi.setState=A.Py.define();function wr(s,e,i){let l=s.facet(E),a=kn(s).topNode;if(!l||l.allowsNesting)for(let c=a;c;c=c.enter(e,i,me.ExcludeBuffers))c.type.isTop&&(a=c);return a}class Ui extends null{constructor(e,i,l){super(e,i,[],l),this.parser=i}static define(e){let i=Fr(e.languageData);return new Ui(i,e.parser.configure({props:[Ei.add(l=>l.isTop?i:void 0)]}),e.name)}configure(e,i){return new Ui(this.data,this.parser.configure(e),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function kn(s){let e=s.field(vi.state,!1);return e?e.tree:We.empty}function qi(s,e,i=50){var l;let a=(l=s.field(vi.state,!1))===null||l===void 0?void 0:l.context;if(!a)return null;let c=a.viewport;a.updateViewport({from:0,to:e});let m=a.isDone(e)||a.work(i,e)?a.tree:null;return a.updateViewport(c),m}function ws(s,e=s.doc.length){var i;return((i=s.field(vi.state,!1))===null||i===void 0?void 0:i.context.isDone(e))||!1}function Gs(s,e=s.viewport.to,i=100){let l=qi(s.state,e,i);return l!=kn(s.state)&&s.dispatch({}),!!l}function Wr(s){var e;return((e=s.plugin(k))===null||e===void 0?void 0:e.isWorking())||!1}class _n{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,i){let l=this.cursorPos-this.string.length;return e<l||i>=this.cursorPos?this.doc.sliceString(e,i):this.string.slice(e-l,i-l)}}let Hr=null;class zr{constructor(e,i,l=[],a,c,m,w,C){this.parser=e,this.state=i,this.fragments=l,this.tree=a,this.treeLen=c,this.viewport=m,this.skipped=w,this.scheduleOn=C,this.parse=null,this.tempSkipped=[]}static create(e,i,l){return new zr(e,i,[],We.empty,0,l,[],null)}startParse(){return this.parser.startParse(new _n(this.state.doc),this.fragments)}work(e,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=We.empty&&this.isDone(i!=null?i:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var l;if(typeof e=="number"){let a=Date.now()+e;e=()=>Date.now()>a}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let a=this.parse.advance();if(a)if(this.fragments=this.withoutTempSkipped(ci.addTree(a,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(l=this.parse.stoppedAt)!==null&&l!==void 0?l:this.state.doc.length,this.tree=a,this.parse=null,this.treeLen<(i!=null?i:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,i;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=e,this.tree=i,this.fragments=this.withoutTempSkipped(ci.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let i=Hr;Hr=this;try{return e()}finally{Hr=i}}withoutTempSkipped(e){for(let i;i=this.tempSkipped.pop();)e=_(e,i.from,i.to);return e}changes(e,i){let{fragments:l,tree:a,treeLen:c,viewport:m,skipped:w}=this;if(this.takeTree(),!e.empty){let C=[];if(e.iterChangedRanges((I,F,U,ie)=>C.push({fromA:I,toA:F,fromB:U,toB:ie})),l=ci.applyChanges(l,C),a=We.empty,c=0,m={from:e.mapPos(m.from,-1),to:e.mapPos(m.to,1)},this.skipped.length){w=[];for(let I of this.skipped){let F=e.mapPos(I.from,1),U=e.mapPos(I.to,-1);F<U&&w.push({from:F,to:U})}}}return new zr(this.parser,i,l,a,c,m,w,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let i=this.skipped.length;for(let l=0;l<this.skipped.length;l++){let{from:a,to:c}=this.skipped[l];a<e.to&&c>e.from&&(this.fragments=_(this.fragments,a,c),this.skipped.splice(l--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,i){this.skipped.push({from:e,to:i})}static getSkippingParser(e){return new class extends ys{createParse(i,l,a){let c=a[0].from,m=a[a.length-1].to;return{parsedPos:c,advance(){let C=Hr;if(C){for(let I of a)C.tempSkipped.push(I);e&&(C.scheduleOn=C.scheduleOn?Promise.all([C.scheduleOn,e]):e)}return this.parsedPos=m,new We(Wt.none,[],[],m-c)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let i=this.fragments;return this.treeLen>=e&&i.length&&i[0].from==0&&i[0].to>=e}static get(){return Hr}}function _(s,e,i){return ci.applyChanges(s,[{fromA:e,toA:i,fromB:e,toB:i}])}class p{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(e.changes,e.state),l=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,l)||i.takeTree(),new p(i)}static init(e){let i=Math.min(3e3,e.doc.length),l=zr.create(e.facet(E).parser,e,{from:0,to:i});return l.work(20,i)||l.takeTree(),new p(l)}}vi.state=A.QQ.define({create:p.init,update(s,e){for(let i of e.effects)if(i.is(vi.setState))return i.value;return e.startState.facet(E)!=e.state.facet(E)?p.init(e.state):s.apply(e)}});let v=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(v=s=>{let e=-1,i=setTimeout(()=>{e=requestIdleCallback(s,{timeout:500-100})},100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const b=typeof navigator!="undefined"&&(!((Jn=navigator.scheduling)===null||Jn===void 0)&&Jn.isInputPending)?()=>navigator.scheduling.isInputPending():null,k=ee.lg.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let i=this.view.state.field(vi.state).context;(i.updateViewport(e.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:e}=this.view,i=e.field(vi.state);(i.tree!=i.context.tree||!i.context.isDone(e.doc.length))&&(this.working=v(this.work))}work(e){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:l,viewport:{to:a}}=this.view,c=l.field(vi.state);if(c.tree==c.context.tree&&c.context.isDone(a+1e5))return;let m=Date.now()+Math.min(this.chunkBudget,100,e&&!b?Math.max(25,e.timeRemaining()-5):1e9),w=c.context.treeLen<a&&l.doc.length>a+1e3,C=c.context.work(()=>b&&b()||Date.now()>m,a+(w?0:1e5));this.chunkBudget-=Date.now()-i,(C||this.chunkBudget<=0)&&(c.context.takeTree(),this.view.dispatch({effects:vi.setState.of(new p(c.context))})),this.chunkBudget>0&&!(C&&!w)&&this.scheduleWork(),this.checkAsyncSchedule(c.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(i=>(0,ee.OO)(this.view.state,i)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),E=A.r$.define({combine(s){return s.length?s[0]:null},enables:s=>[vi.state,k,ee.tk.contentAttributes.compute([s],e=>{let i=e.facet(s);return i&&i.name?{"data-language":i.name}:{}})]});class D{constructor(e,i=[]){this.language=e,this.support=i,this.extension=[e,i]}}class W{constructor(e,i,l,a,c,m=void 0){this.name=e,this.alias=i,this.extensions=l,this.filename=a,this.loadFunc=c,this.support=m,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:i,support:l}=e;if(!i){if(!l)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");i=()=>Promise.resolve(l)}return new W(e.name,(e.alias||[]).concat(e.name).map(a=>a.toLowerCase()),e.extensions||[],e.filename,i,l)}static matchFilename(e,i){for(let a of e)if(a.filename&&a.filename.test(i))return a;let l=/\.([^.]+)$/.exec(i);if(l){for(let a of e)if(a.extensions.indexOf(l[1])>-1)return a}return null}static matchLanguageName(e,i,l=!0){i=i.toLowerCase();for(let a of e)if(a.alias.some(c=>c==i))return a;if(l)for(let a of e)for(let c of a.alias){let m=i.indexOf(c);if(m>-1&&(c.length>2||!/\w/.test(i[m-1])&&!/\w/.test(i[m+c.length])))return a}return null}}const Z=A.r$.define(),re=A.r$.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(i=>i!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function fe(s){let e=s.facet(re);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function we(s,e){let i="",l=s.tabSize,a=s.facet(re)[0];if(a=="	"){for(;e>=l;)i+="	",e-=l;a=" "}for(let c=0;c<e;c++)i+=a;return i}function He(s,e){s instanceof A.yy&&(s=new yt(s));for(let l of s.state.facet(Z)){let a=l(s,e);if(a!==void 0)return a}let i=kn(s.state);return i.length>=e?Pn(s,i,e):null}function Ne(s,e,i){let l=Object.create(null),a=new yt(s,{overrideIndentation:m=>{var w;return(w=l[m])!==null&&w!==void 0?w:-1}}),c=[];for(let m=e;m<=i;){let w=s.doc.lineAt(m);m=w.to+1;let C=He(a,w.from);if(C==null)continue;/\S/.test(w.text)||(C=0);let I=/^\s*/.exec(w.text)[0],F=we(s,C);I!=F&&(l[w.from]=C,c.push({from:w.from,to:w.from+I.length,insert:F}))}return s.changes(c)}class yt{constructor(e,i={}){this.state=e,this.options=i,this.unit=fe(e)}lineAt(e,i=1){let l=this.state.doc.lineAt(e),{simulateBreak:a,simulateDoubleBreak:c}=this.options;return a!=null&&a>=l.from&&a<=l.to?c&&a==e?{text:"",from:e}:(i<0?a<e:a<=e)?{text:l.text.slice(a-l.from),from:a}:{text:l.text.slice(0,a-l.from),from:l.from}:l}textAfterPos(e,i=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:l,from:a}=this.lineAt(e,i);return l.slice(e-a,Math.min(l.length,e+100-a))}column(e,i=1){let{text:l,from:a}=this.lineAt(e,i),c=this.countColumn(l,e-a),m=this.options.overrideIndentation?this.options.overrideIndentation(a):-1;return m>-1&&(c+=m-this.countColumn(l,l.search(/\S|$/))),c}countColumn(e,i=e.length){return(0,A.IS)(e,this.state.tabSize,i)}lineIndent(e,i=1){let{text:l,from:a}=this.lineAt(e,i),c=this.options.overrideIndentation;if(c){let m=c(a);if(m>-1)return m}return this.countColumn(l,l.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Gi=new Be;function Pn(s,e,i){let l=e.resolveStack(i),a=l.node.enterUnfinishedNodesBefore(i);if(a!=l.node){let c=[];for(let m=a;m!=l.node;m=m.parent)c.push(m);for(let m=c.length-1;m>=0;m--)l={node:c[m],next:l}}return ji(l,s,i)}function ji(s,e,i){for(let l=s;l;l=l.next){let a=Vo(l.node);if(a)return a(vo.create(e,i,l))}return 0}function xn(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function Vo(s){let e=s.type.prop(Gi);if(e)return e;let i=s.firstChild,l;if(i&&(l=i.type.prop(Be.closedBy))){let a=s.lastChild,c=a&&l.indexOf(a.name)>-1;return m=>Qr(m,!0,1,void 0,c&&!xn(m)?a.from:void 0)}return s.parent==null?mo:null}function mo(){return 0}class vo extends yt{constructor(e,i,l){super(e.state,e.options),this.base=e,this.pos=i,this.context=l}get node(){return this.context.node}static create(e,i,l){return new vo(e,i,l)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let i=this.state.doc.lineAt(e.from);for(;;){let l=e.resolve(i.from);for(;l.parent&&l.parent.from==l.from;)l=l.parent;if($o(l,e))break;i=this.state.doc.lineAt(l.from)}return this.lineIndent(i.from)}continue(){return ji(this.context.next,this.base,this.pos)}}function $o(s,e){for(let i=e;i;i=i.parent)if(s==i)return!0;return!1}function ar(s){let e=s.node,i=e.childAfter(e.from),l=e.lastChild;if(!i)return null;let a=s.options.simulateBreak,c=s.state.doc.lineAt(i.from),m=a==null||a<=c.from?c.to:Math.min(c.to,a);for(let w=i.to;;){let C=e.childAfter(w);if(!C||C==l)return null;if(!C.type.isSkipped)return C.from<m?i:null;w=C.to}}function bl({closing:s,align:e=!0,units:i=1}){return l=>Qr(l,e,i,s)}function Qr(s,e,i,l,a){let c=s.textAfter,m=c.match(/^\s*/)[0].length,w=l&&c.slice(m,m+l.length)==l||a==s.pos+m,C=e?ar(s):null;return C?w?s.column(C.from):s.column(C.to):s.baseIndent+(w?0:s.unit*i)}const Zo=s=>s.baseIndent;function Sl({except:s,units:e=1}={}){return i=>{let l=s&&s.test(i.textAfter);return i.baseIndent+(l?0:e*i.unit)}}const yo=200;function Ko(){return A.yy.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let i=s.newDoc,{head:l}=s.newSelection.main,a=i.lineAt(l);if(l>a.from+yo)return s;let c=i.sliceString(a.from,l);if(!e.some(I=>I.test(c)))return s;let{state:m}=s,w=-1,C=[];for(let{head:I}of m.selection.ranges){let F=m.doc.lineAt(I);if(F.from==w)continue;w=F.from;let U=He(m,F.from);if(U==null)continue;let ie=/^\s*/.exec(F.text)[0],ye=we(m,U);ie!=ye&&C.push({from:F.from,to:F.from+ie.length,insert:ye})}return C.length?[s,{changes:C,sequential:!0}]:s})}const Uo=A.r$.define(),qo=new Be;function Cl(s){let e=s.firstChild,i=s.lastChild;return e&&e.to<i.from?{from:e.to,to:i.type.isError?s.to:i.from}:null}function bs(s,e,i){let l=kn(s);if(l.length<i)return null;let a=l.resolveStack(i,1),c=null;for(let m=a;m;m=m.next){let w=m.node;if(w.to<=i||w.from>i)continue;if(c&&w.from<e)break;let C=w.type.prop(qo);if(C&&(w.to<l.length-50||l.length==s.doc.length||!kl(w))){let I=C(w,s);I&&I.from<=i&&I.from>=e&&I.to>i&&(c=I)}}return c}function kl(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function Is(s,e,i){for(let l of s.facet(Uo)){let a=l(s,e,i);if(a)return a}return bs(s,e,i)}function Go(s,e){let i=e.mapPos(s.from,1),l=e.mapPos(s.to,-1);return i>=l?void 0:{from:i,to:l}}const _s=A.Py.define({map:Go}),Ss=A.Py.define({map:Go});function xo(s){let e=[];for(let{head:i}of s.state.selection.ranges)e.some(l=>l.from<=i&&l.to>=i)||e.push(s.lineBlockAt(i));return e}const Vr=A.QQ.define({create(){return ee.p.none},update(s,e){s=s.map(e.changes);for(let i of e.effects)if(i.is(_s)&&!Tl(s,i.value.from,i.value.to)){let{preparePlaceholder:l}=e.state.facet(le),a=l?ee.p.replace({widget:new Ae(l(e.state,i.value))}):Se;s=s.update({add:[a.range(i.value.from,i.value.to)]})}else i.is(Ss)&&(s=s.update({filter:(l,a)=>i.value.from!=l||i.value.to!=a,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:l}=e.selection.main;s.between(l,l,(a,c)=>{a<l&&c>l&&(i=!0)}),i&&(s=s.update({filterFrom:l,filterTo:l,filter:(a,c)=>c<=l||a>=l}))}return s},provide:s=>ee.tk.decorations.from(s),toJSON(s,e){let i=[];return s.between(0,e.doc.length,(l,a)=>{i.push(l,a)}),i},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<s.length;){let l=s[i++],a=s[i++];if(typeof l!="number"||typeof a!="number")throw new RangeError("Invalid JSON for fold state");e.push(Se.range(l,a))}return ee.p.set(e,!0)}});function Al(s){return s.field(Vr,!1)||RangeSet.empty}function Ns(s,e,i){var l;let a=null;return(l=s.field(Vr,!1))===null||l===void 0||l.between(e,i,(c,m)=>{(!a||a.from>c)&&(a={from:c,to:m})}),a}function Tl(s,e,i){let l=!1;return s.between(e,e,(a,c)=>{a==e&&c==i&&(l=!0)}),l}function js(s,e){return s.field(Vr,!1)?e:e.concat(A.Py.appendConfig.of(ae()))}const Ml=s=>{for(let e of xo(s)){let i=Is(s.state,e.from,e.to);if(i)return s.dispatch({effects:js(s.state,[_s.of(i),G(s,i)])}),!0}return!1},B=s=>{if(!s.state.field(Vr,!1))return!1;let e=[];for(let i of xo(s)){let l=Ns(s.state,i.from,i.to);l&&e.push(Ss.of(l),G(s,l,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function G(s,e,i=!0){let l=s.state.doc.lineAt(e.from).number,a=s.state.doc.lineAt(e.to).number;return ee.tk.announce.of(`${s.state.phrase(i?"Folded lines":"Unfolded lines")} ${l} ${s.state.phrase("to")} ${a}.`)}const j=s=>{let{state:e}=s,i=[];for(let l=0;l<e.doc.length;){let a=s.lineBlockAt(l),c=Is(e,a.from,a.to);c&&i.push(_s.of(c)),l=(c?s.lineBlockAt(c.to):a).to+1}return i.length&&s.dispatch({effects:js(s.state,i)}),!!i.length},K=s=>{let e=s.state.field(Vr,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,s.state.doc.length,(l,a)=>{i.push(Ss.of({from:l,to:a}))}),s.dispatch({effects:i}),!0};function X(s,e){for(let i=e;;){let l=Is(s.state,i.from,i.to);if(l&&l.to>e.from)return l;if(!i.from)return null;i=s.lineBlockAt(i.from-1)}}const ne=s=>{let e=[];for(let i of xo(s)){let l=Ns(s.state,i.from,i.to);if(l)e.push(Ss.of(l),G(s,l,!1));else{let a=X(s,i);a&&e.push(_s.of(a),G(s,a))}}return e.length>0&&s.dispatch({effects:js(s.state,e)}),!!e.length},he=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Ml},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:B},{key:"Ctrl-Alt-[",run:j},{key:"Ctrl-Alt-]",run:K}],de={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},le=A.r$.define({combine(s){return(0,A.BO)(s,de)}});function ae(s){let e=[Vr,ze];return s&&e.push(le.of(s)),e}function ue(s,e){let{state:i}=s,l=i.facet(le),a=m=>{let w=s.lineBlockAt(s.posAtDOM(m.target)),C=Ns(s.state,w.from,w.to);C&&s.dispatch({effects:Ss.of(C)}),m.preventDefault()};if(l.placeholderDOM)return l.placeholderDOM(s,a,e);let c=document.createElement("span");return c.textContent=l.placeholderText,c.setAttribute("aria-label",i.phrase("folded code")),c.title=i.phrase("unfold"),c.className="cm-foldPlaceholder",c.onclick=a,c}const Se=ee.p.replace({widget:new class extends ee.l9{toDOM(s){return ue(s,null)}}});class Ae extends ee.l9{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ue(e,this.value)}}const Ce={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class _e extends ee.SJ{constructor(e,i){super(),this.config=e,this.open=i}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=e.state.phrase(this.open?"Fold line":"Unfold line"),i}}function qe(s={}){let e=Object.assign(Object.assign({},Ce),s),i=new _e(e,!0),l=new _e(e,!1),a=ee.lg.fromClass(class{constructor(m){this.from=m.viewport.from,this.markers=this.buildMarkers(m)}update(m){(m.docChanged||m.viewportChanged||m.startState.facet(E)!=m.state.facet(E)||m.startState.field(Vr,!1)!=m.state.field(Vr,!1)||kn(m.startState)!=kn(m.state)||e.foldingChanged(m))&&(this.markers=this.buildMarkers(m.view))}buildMarkers(m){let w=new A.f_;for(let C of m.viewportLineBlocks){let I=Ns(m.state,C.from,C.to)?l:Is(m.state,C.from,C.to)?i:null;I&&w.add(C.from,C.from,I)}return w.finish()}}),{domEventHandlers:c}=e;return[a,(0,ee.v5)({class:"cm-foldGutter",markers(m){var w;return((w=m.plugin(a))===null||w===void 0?void 0:w.markers)||A.Xs.empty},initialSpacer(){return new _e(e,!1)},domEventHandlers:Object.assign(Object.assign({},c),{click:(m,w,C)=>{if(c.click&&c.click(m,w,C))return!0;let I=Ns(m.state,w.from,w.to);if(I)return m.dispatch({effects:Ss.of(I)}),!0;let F=Is(m.state,w.from,w.to);return F?(m.dispatch({effects:_s.of(F)}),!0):!1}})}),ae()]}const ze=ee.tk.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ye{constructor(e,i){this.specs=e;let l;function a(w){let C=Yr.V.newName();return(l||(l=Object.create(null)))["."+C]=w,C}const c=typeof i.all=="string"?i.all:i.all?a(i.all):void 0,m=i.scope;this.scope=m instanceof vi?w=>w.prop(Ei)==m.data:m?w=>w==m:void 0,this.style=xr(e.map(w=>({tag:w.tag,class:w.class||a(Object.assign({},w,{tag:null}))})),{all:c}).style,this.module=l?new Yr.V(l):null,this.themeType=i.themeType}static define(e,i){return new Ye(e,i||{})}}const Ke=A.r$.define(),Te=A.r$.define({combine(s){return s.length?[s[0]]:null}});function Qe(s){let e=s.facet(Ke);return e.length?e:s.facet(Te)}function Ge(s,e){let i=[dt],l;return s instanceof Ye&&(s.module&&i.push(ee.tk.styleModule.of(s.module)),l=s.themeType),e!=null&&e.fallback?i.push(Te.of(s)):l?i.push(Ke.computeN([ee.tk.darkTheme],a=>a.facet(ee.tk.darkTheme)==(l=="dark")?[s]:[])):i.push(Ke.of(s)),i}function rt(s,e,i){let l=Qe(s),a=null;if(l){for(let c of l)if(!c.scope||i&&c.scope(i)){let m=c.style(e);m&&(a=a?a+" "+m:m)}}return a}class Kt{constructor(e){this.markCache=Object.create(null),this.tree=kn(e.state),this.decorations=this.buildDeco(e,Qe(e.state))}update(e){let i=kn(e.state),l=Qe(e.state),a=l!=Qe(e.startState);i.length<e.view.viewport.to&&!a&&i.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(i!=this.tree||e.viewportChanged||a)&&(this.tree=i,this.decorations=this.buildDeco(e.view,l))}buildDeco(e,i){if(!i||!this.tree.length)return ee.p.none;let l=new A.f_;for(let{from:a,to:c}of e.visibleRanges)In(this.tree,i,(m,w,C)=>{l.add(m,w,this.markCache[C]||(this.markCache[C]=ee.p.mark({class:C})))},a,c);return l.finish()}}const dt=A.Wl.high(ee.lg.fromClass(Kt,{decorations:s=>s.decorations})),gt=Ye.define([{tag:se.meta,color:"#404740"},{tag:se.link,textDecoration:"underline"},{tag:se.heading,textDecoration:"underline",fontWeight:"bold"},{tag:se.emphasis,fontStyle:"italic"},{tag:se.strong,fontWeight:"bold"},{tag:se.strikethrough,textDecoration:"line-through"},{tag:se.keyword,color:"#708"},{tag:[se.atom,se.bool,se.url,se.contentSeparator,se.labelName],color:"#219"},{tag:[se.literal,se.inserted],color:"#164"},{tag:[se.string,se.deleted],color:"#a11"},{tag:[se.regexp,se.escape,se.special(se.string)],color:"#e40"},{tag:se.definition(se.variableName),color:"#00f"},{tag:se.local(se.variableName),color:"#30a"},{tag:[se.typeName,se.namespace],color:"#085"},{tag:se.className,color:"#167"},{tag:[se.special(se.variableName),se.macroName],color:"#256"},{tag:se.definition(se.propertyName),color:"#00c"},{tag:se.comment,color:"#940"},{tag:se.invalid,color:"#f00"}]),Xt=ee.tk.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ue=1e4,Fe="()[]{}",Me=A.r$.define({combine(s){return(0,A.BO)(s,{afterCursor:!0,brackets:Fe,maxScanDistance:Ue,renderMatch:ot})}}),Xe=ee.p.mark({class:"cm-matchingBracket"}),et=ee.p.mark({class:"cm-nonmatchingBracket"});function ot(s){let e=[],i=s.matched?Xe:et;return e.push(i.range(s.start.from,s.start.to)),s.end&&e.push(i.range(s.end.from,s.end.to)),e}const Lt=[A.QQ.define({create(){return ee.p.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let i=[],l=e.state.facet(Me);for(let a of e.state.selection.ranges){if(!a.empty)continue;let c=ft(e.state,a.head,-1,l)||a.head>0&&ft(e.state,a.head-1,1,l)||l.afterCursor&&(ft(e.state,a.head,1,l)||a.head<e.state.doc.length&&ft(e.state,a.head+1,-1,l));c&&(i=i.concat(l.renderMatch(c,e.state)))}return ee.p.set(i,!0)},provide:s=>ee.tk.decorations.from(s)}),Xt];function An(s={}){return[Me.of(s),Lt]}const wn=new Be;function bn(s,e,i){let l=s.prop(e<0?Be.openedBy:Be.closedBy);if(l)return l;if(s.name.length==1){let a=i.indexOf(s.name);if(a>-1&&a%2==(e<0?1:0))return[i[a+e]]}return null}function Oi(s){let e=s.type.prop(wn);return e?e(s.node):s}function ft(s,e,i,l={}){let a=l.maxScanDistance||Ue,c=l.brackets||Fe,m=kn(s),w=m.resolveInner(e,i);for(let C=w;C;C=C.parent){let I=bn(C.type,i,c);if(I&&C.from<C.to){let F=Oi(C);if(F&&(i>0?e>=F.from&&e<F.to:e>F.from&&e<=F.to))return yi(s,e,i,C,F,I,c)}}return Un(s,e,i,m,w.type,a,c)}function yi(s,e,i,l,a,c,m){let w=l.parent,C={from:a.from,to:a.to},I=0,F=w==null?void 0:w.cursor();if(F&&(i<0?F.childBefore(l.from):F.childAfter(l.to)))do if(i<0?F.to<=l.from:F.from>=l.to){if(I==0&&c.indexOf(F.type.name)>-1&&F.from<F.to){let U=Oi(F);return{start:C,end:U?{from:U.from,to:U.to}:void 0,matched:!0}}else if(bn(F.type,i,m))I++;else if(bn(F.type,-i,m)){if(I==0){let U=Oi(F);return{start:C,end:U&&U.from<U.to?{from:U.from,to:U.to}:void 0,matched:!1}}I--}}while(i<0?F.prevSibling():F.nextSibling());return{start:C,matched:!1}}function Un(s,e,i,l,a,c,m){let w=i<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),C=m.indexOf(w);if(C<0||C%2==0!=i>0)return null;let I={from:i<0?e-1:e,to:i>0?e+1:e},F=s.doc.iterRange(e,i>0?s.doc.length:0),U=0;for(let ie=0;!F.next().done&&ie<=c;){let ye=F.value;i<0&&(ie+=ye.length);let Ee=e+ie*i;for(let ut=i>0?0:ye.length-1,ln=i>0?ye.length:-1;ut!=ln;ut+=i){let nn=m.indexOf(ye[ut]);if(!(nn<0||l.resolveInner(Ee+ut,1).type!=a))if(nn%2==0==i>0)U++;else{if(U==1)return{start:I,end:{from:Ee+ut,to:Ee+ut+1},matched:nn>>1==C>>1};U--}}i>0&&(ie+=ye.length)}return F.done?{start:I,matched:!1}:null}function At(s,e,i,l=0,a=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let c=a;for(let m=l;m<e;m++)s.charCodeAt(m)==9?c+=i-c%i:c++;return c}class ri{constructor(e,i,l,a){this.string=e,this.tabSize=i,this.indentUnit=l,this.overrideIndent=a,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let i=this.string.charAt(this.pos),l;if(typeof e=="string"?l=i==e:l=i&&(e instanceof RegExp?e.test(i):e(i)),l)return++this.pos,i}eatWhile(e){let i=this.pos;for(;this.eat(e););return this.pos>i}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let i=this.string.indexOf(e,this.pos);if(i>-1)return this.pos=i,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=At(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:At(this.string,null,this.tabSize)}match(e,i,l){if(typeof e=="string"){let a=m=>l?m.toLowerCase():m,c=this.string.substr(this.pos,e.length);return a(c)==a(e)?(i!==!1&&(this.pos+=e.length),!0):null}else{let a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&i!==!1&&(this.pos+=a[0].length),a)}}current(){return this.string.slice(this.start,this.pos)}}function br(s){return{name:s.name||"",token:s.token,blankLine:s.blankLine||(()=>{}),startState:s.startState||(()=>!0),copyState:s.copyState||Xi,indent:s.indent||(()=>null),languageData:s.languageData||{},tokenTable:s.tokenTable||es}}function Xi(s){if(typeof s!="object")return s;let e={};for(let i in s){let l=s[i];e[i]=l instanceof Array?l.slice():l}return e}const si=new WeakMap;class bt extends null{constructor(e){let i=Fr(e.languageData),l=br(e),a,c=new class extends Parser{createParse(m,w,C){return new Tn(a,m,w,C)}};super(i,c,[Z.of((m,w)=>this.getIndent(m,w))],e.name),this.topNode=qn(i),a=this,this.streamParser=l,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=e.tokenTable?new Yn(l.tokenTable):wo}static define(e){return new bt(e)}getIndent(e,i){let l=kn(e.state),a=l.resolve(i);for(;a&&a.type!=this.topNode;)a=a.parent;if(!a)return null;let c,{overrideIndentation:m}=e.options;m&&(c=si.get(e.state),c!=null&&c<i-1e4&&(c=void 0));let w=vn(this,l,0,a.from,c!=null?c:i),C,I;if(w?(I=w.state,C=w.pos+1):(I=this.streamParser.startState(e.unit),C=0),i-C>1e4)return null;for(;C<i;){let U=e.state.doc.lineAt(C),ie=Math.min(i,U.to);if(U.length){let ye=m?m(U.from):-1,Ee=new ri(U.text,e.state.tabSize,e.unit,ye<0?void 0:ye);for(;Ee.pos<ie-U.from;)En(this.streamParser.token,Ee,I)}else this.streamParser.blankLine(I,e.unit);if(ie==i)break;C=U.to+1}let F=e.lineAt(i);return m&&c==null&&si.set(e.state,F.from),this.streamParser.indent(I,/^\s*(.*)/.exec(F.text)[1],e)}get allowsNesting(){return!1}}function vn(s,e,i,l,a){let c=i>=l&&i+e.length<=a&&e.prop(s.stateAfter);if(c)return{state:s.streamParser.copyState(c),pos:i+e.length};for(let m=e.children.length-1;m>=0;m--){let w=e.children[m],C=i+e.positions[m],I=w instanceof Tree&&C<a&&vn(s,w,C,l,a);if(I)return I}return null}function St(s,e,i,l,a){if(a&&i<=0&&l>=e.length)return e;!a&&e.type==s.topNode&&(a=!0);for(let c=e.children.length-1;c>=0;c--){let m=e.positions[c],w=e.children[c],C;if(m<l&&w instanceof Tree){if(!(C=St(s,w,i-m,l-m,a)))break;return a?new Tree(e.type,e.children.slice(0,c).concat(C),e.positions.slice(0,c+1),m+C.length):C}}return null}function ki(s,e,i,l){for(let a of e){let c=a.from+(a.openStart?25:0),m=a.to-(a.openEnd?25:0),w=c<=i&&m>i&&vn(s,a.tree,0-a.offset,i,m),C;if(w&&(C=St(s,a.tree,i+a.offset,w.pos+a.offset,!1)))return{state:w.state,tree:C}}return{state:s.streamParser.startState(l?fe(l):4),tree:Tree.empty}}class Tn{constructor(e,i,l,a){this.lang=e,this.input=i,this.fragments=l,this.ranges=a,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=a[a.length-1].to;let c=zr.get(),m=a[0].from,{state:w,tree:C}=ki(e,l,m,c==null?void 0:c.state);this.state=w,this.parsedPos=this.chunkStart=m+C.length;for(let I=0;I<C.children.length;I++)this.chunks.push(C.children[I]),this.chunkPos.push(C.positions[I]);c&&this.parsedPos<c.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(fe(c.state)),c.skipUntilInView(this.parsedPos,c.viewport.from),this.parsedPos=c.viewport.from),this.moveRangeIndex()}advance(){let e=zr.get(),i=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),l=Math.min(i,this.chunkStart+2048);for(e&&(l=Math.min(l,e.viewport.to));this.parsedPos<l;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=i?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,i),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let i=this.input.chunk(e);if(this.input.lineChunks)i==`
`&&(i="");else{let l=i.indexOf(`
`);l>-1&&(i=i.slice(0,l))}return e+i.length<=this.to?i:i.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,i=this.lineAfter(e),l=e+i.length;for(let a=this.rangeIndex;;){let c=this.ranges[a].to;if(c>=l||(i=i.slice(0,c-(l-i.length)),a++,a==this.ranges.length))break;let m=this.ranges[a].from,w=this.lineAfter(m);i+=w,l=m+w.length}return{line:i,end:l}}skipGapsTo(e,i,l){for(;;){let a=this.ranges[this.rangeIndex].to,c=e+i;if(l>0?a>c:a>=c)break;let m=this.ranges[++this.rangeIndex].from;i+=m-a}return i}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,i,l,a,c){if(this.ranges.length>1){c=this.skipGapsTo(i,c,1),i+=c;let m=this.chunk.length;c=this.skipGapsTo(l,c,-1),l+=c,a+=this.chunk.length-m}return this.chunk.push(e,i,l,a),c}parseLine(e){let{line:i,end:l}=this.nextLine(),a=0,{streamParser:c}=this.lang,m=new ri(i,e?e.state.tabSize:4,e?fe(e.state):2);if(m.eol())c.blankLine(this.state,m.indentUnit);else for(;!m.eol();){let w=En(c.token,m,this.state);if(w&&(a=this.emitToken(this.lang.tokenTable.resolve(w),this.parsedPos+m.start,this.parsedPos+m.pos,4,a)),m.start>1e4)break}this.parsedPos=l,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Li,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Tree(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function En(s,e,i){e.start=e.pos;for(let l=0;l<10;l++){let a=s(e,i);if(e.pos>e.start)return a}throw new Error("Stream parser failed to advance stream.")}const es=Object.create(null),Di=[Wt.none],Li=new Dt(Di),Ut=[],hr=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])hr[s]=yn(es,e);class Yn{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),hr)}resolve(e){return e?this.table[e]||(this.table[e]=yn(this.extra,e)):0}}const wo=new Yn(es);function Pi(s,e){Ut.indexOf(s)>-1||(Ut.push(s),console.warn(e))}function yn(s,e){let i=null;for(let c of e.split(".")){let m=s[c]||se[c];m?typeof m=="function"?i?i=m(i):Pi(c,`Modifier ${c} used at start of tag`):i?Pi(c,`Tag ${c} used as modifier`):i=m:Pi(c,`Unknown highlighting tag ${c}`)}if(!i)return 0;let l=e.replace(/ /g,"_"),a=Wt.define({id:Di.length,name:l,props:[Ir({[l]:i})]});return Di.push(a),a.id}function qn(s){let e=NodeType.define({id:Di.length,name:"Document",props:[Ei.add(()=>s)],top:!0});return Di.push(e),e}const Cs=s=>{let{state:e}=s,i=e.doc.lineAt(e.selection.main.from),l=$r(s.state,i.from);return l.line?Rl(s):l.block?Sr(s):!1};function ts(s,e){return({state:i,dispatch:l})=>{if(i.readOnly)return!1;let a=s(e,i);return a?(l(i.update(a)),!0):!1}}const Rl=ts(Xs,0),bo=null,jo=null,So=ts(Cr,0),ta=null,na=null,Sr=ts((s,e)=>Cr(s,e,Xo(e)),0);function $r(s,e){let i=s.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const ks=50;function Fs(s,{open:e,close:i},l,a){let c=s.sliceDoc(l-ks,l),m=s.sliceDoc(a,a+ks),w=/\s*$/.exec(c)[0].length,C=/^\s*/.exec(m)[0].length,I=c.length-w;if(c.slice(I-e.length,I)==e&&m.slice(C,C+i.length)==i)return{open:{pos:l-w,margin:w&&1},close:{pos:a+C,margin:C&&1}};let F,U;a-l<=2*ks?F=U=s.sliceDoc(l,a):(F=s.sliceDoc(l,l+ks),U=s.sliceDoc(a-ks,a));let ie=/^\s*/.exec(F)[0].length,ye=/\s*$/.exec(U)[0].length,Ee=U.length-ye-i.length;return F.slice(ie,ie+e.length)==e&&U.slice(Ee,Ee+i.length)==i?{open:{pos:l+ie+e.length,margin:/\s/.test(F.charAt(ie+e.length))?1:0},close:{pos:a-ye-i.length,margin:/\s/.test(U.charAt(Ee-1))?1:0}}:null}function Xo(s){let e=[];for(let i of s.selection.ranges){let l=s.doc.lineAt(i.from),a=i.to<=l.to?l:s.doc.lineAt(i.to),c=e.length-1;c>=0&&e[c].to>l.from?e[c].to=a.to:e.push({from:l.from+/^\s*/.exec(l.text)[0].length,to:a.to})}return e}function Cr(s,e,i=e.selection.ranges){let l=i.map(c=>$r(e,c.from).block);if(!l.every(c=>c))return null;let a=i.map((c,m)=>Fs(e,l[m],c.from,c.to));if(s!=2&&!a.every(c=>c))return{changes:e.changes(i.map((c,m)=>a[m]?[]:[{from:c.from,insert:l[m].open+" "},{from:c.to,insert:" "+l[m].close}]))};if(s!=1&&a.some(c=>c)){let c=[];for(let m=0,w;m<a.length;m++)if(w=a[m]){let C=l[m],{open:I,close:F}=w;c.push({from:I.pos-C.open.length,to:I.pos+I.margin},{from:F.pos-F.margin,to:F.pos+C.close.length})}return{changes:c}}return null}function Xs(s,e,i=e.selection.ranges){let l=[],a=-1;for(let{from:c,to:m}of i){let w=l.length,C=1e9,I=$r(e,c).line;if(I){for(let F=c;F<=m;){let U=e.doc.lineAt(F);if(U.from>a&&(c==m||m>U.from)){a=U.from;let ie=/^\s*/.exec(U.text)[0].length,ye=ie==U.length,Ee=U.text.slice(ie,ie+I.length)==I?ie:-1;ie<U.text.length&&ie<C&&(C=ie),l.push({line:U,comment:Ee,token:I,indent:ie,empty:ye,single:!1})}F=U.to+1}if(C<1e9)for(let F=w;F<l.length;F++)l[F].indent<l[F].line.text.length&&(l[F].indent=C);l.length==w+1&&(l[w].single=!0)}}if(s!=2&&l.some(c=>c.comment<0&&(!c.empty||c.single))){let c=[];for(let{line:w,token:C,indent:I,empty:F,single:U}of l)(U||!F)&&c.push({from:w.from+I,insert:C+" "});let m=e.changes(c);return{changes:m,selection:e.selection.map(m,1)}}else if(s!=1&&l.some(c=>c.comment>=0)){let c=[];for(let{line:m,comment:w,token:C}of l)if(w>=0){let I=m.from+w,F=I+C.length;m.text[F-m.from]==" "&&F++,c.push({from:I,to:F})}return{changes:c}}return null}const Ws=A.q6.define(),El=A.q6.define(),Co=A.r$.define(),Qn=A.r$.define({combine(s){return(0,A.BO)(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,i)=>(l,a)=>e(l,a)||i(l,a)})}});function Nn(s){let e=0;return s.iterChangedRanges((i,l)=>e=l),e}const ns=A.QQ.define({create(){return mt.empty},update(s,e){let i=e.state.facet(Qn),l=e.annotation(Ws);if(l){let C=e.docChanged?A.jT.single(Nn(e.changes)):void 0,I=$e.fromTransaction(e,C),F=l.side,U=F==0?s.undone:s.done;return I?U=Tt(U,U.length,i.minDepth,I):U=As(U,e.startState.selection),new mt(F==0?l.rest:U,F==0?U:l.rest)}let a=e.annotation(El);if((a=="full"||a=="before")&&(s=s.isolate()),e.annotation(A.YW.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let c=$e.fromTransaction(e),m=e.annotation(A.YW.time),w=e.annotation(A.YW.userEvent);return c?s=s.addChanges(c,m,w,i,e):e.selection&&(s=s.addSelection(e.startState.selection,m,w,i.newGroupDelay)),(a=="full"||a=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new mt(s.done.map($e.fromJSON),s.undone.map($e.fromJSON))}});function Ol(s={}){return[ns,Qn.of(s),ee.tk.domEventHandlers({beforeinput(e,i){let l=e.inputType=="historyUndo"?Dl:e.inputType=="historyRedo"?ko:null;return l?(e.preventDefault(),l(i)):!1}})]}const Js=null;function Hi(s,e){return function({state:i,dispatch:l}){if(!e&&i.readOnly)return!1;let a=i.field(ns,!1);if(!a)return!1;let c=a.pop(s,i,e);return c?(l(c),!0):!1}}const Dl=Hi(0,!1),ko=Hi(1,!1),Ao=Hi(0,!0),V=Hi(1,!0);function oe(s){return function(e){let i=e.field(ns,!1);if(!i)return 0;let l=s==0?i.done:i.undone;return l.length-(l.length&&!l[0].changes?1:0)}}const Q=null,De=null;class $e{constructor(e,i,l,a,c){this.changes=e,this.effects=i,this.mapped=l,this.startSelection=a,this.selectionsAfter=c}setSelAfter(e){return new $e(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,i,l;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(l=this.startSelection)===null||l===void 0?void 0:l.toJSON(),selectionsAfter:this.selectionsAfter.map(a=>a.toJSON())}}static fromJSON(e){return new $e(e.changes&&A.as.fromJSON(e.changes),[],e.mapped&&A.n0.fromJSON(e.mapped),e.startSelection&&A.jT.fromJSON(e.startSelection),e.selectionsAfter.map(A.jT.fromJSON))}static fromTransaction(e,i){let l=Bi;for(let a of e.startState.facet(Co)){let c=a(e);c.length&&(l=l.concat(c))}return!l.length&&e.changes.empty?null:new $e(e.changes.invert(e.startState.doc),l,void 0,i||e.startState.selection,Bi)}static selection(e){return new $e(void 0,Bi,void 0,void 0,e)}}function Tt(s,e,i,l){let a=e+1>i+20?e-i-1:0,c=s.slice(a,e);return c.push(l),c}function Bn(s,e){let i=[],l=!1;return s.iterChangedRanges((a,c)=>i.push(a,c)),e.iterChangedRanges((a,c,m,w)=>{for(let C=0;C<i.length;){let I=i[C++],F=i[C++];w>=I&&m<=F&&(l=!0)}}),l}function Jt(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((i,l)=>i.empty!=e.ranges[l].empty).length===0}function To(s,e){return s.length?e.length?s.concat(e):s:e}const Bi=[],zi=200;function As(s,e){if(s.length){let i=s[s.length-1],l=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-zi));return l.length&&l[l.length-1].eq(e)?s:(l.push(e),Tt(s,s.length-1,1e9,i.setSelAfter(l)))}else return[$e.selection([e])]}function Mo(s){let e=s[s.length-1],i=s.slice();return i[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function Fn(s,e){if(!s.length)return s;let i=s.length,l=Bi;for(;i;){let a=Ys(s[i-1],e,l);if(a.changes&&!a.changes.empty||a.effects.length){let c=s.slice(0,i);return c[i-1]=a,c}else e=a.mapped,i--,l=a.selectionsAfter}return l.length?[$e.selection(l)]:Bi}function Ys(s,e,i){let l=To(s.selectionsAfter.length?s.selectionsAfter.map(w=>w.map(e)):Bi,i);if(!s.changes)return $e.selection(l);let a=s.changes.map(e),c=e.mapDesc(s.changes,!0),m=s.mapped?s.mapped.composeDesc(c):c;return new $e(a,A.Py.mapEffects(s.effects,e),m,s.startSelection.map(c),l)}const Ro=/^(input\.type|delete)($|\.)/;class mt{constructor(e,i,l=0,a=void 0){this.done=e,this.undone=i,this.prevTime=l,this.prevUserEvent=a}isolate(){return this.prevTime?new mt(this.done,this.undone):this}addChanges(e,i,l,a,c){let m=this.done,w=m[m.length-1];return w&&w.changes&&!w.changes.empty&&e.changes&&(!l||Ro.test(l))&&(!w.selectionsAfter.length&&i-this.prevTime<a.newGroupDelay&&a.joinToEvent(c,Bn(w.changes,e.changes))||l=="input.type.compose")?m=Tt(m,m.length-1,a.minDepth,new $e(e.changes.compose(w.changes),To(e.effects,w.effects),w.mapped,w.startSelection,Bi)):m=Tt(m,m.length,a.minDepth,e),new mt(m,Bi,i,l)}addSelection(e,i,l,a){let c=this.done.length?this.done[this.done.length-1].selectionsAfter:Bi;return c.length>0&&i-this.prevTime<a&&l==this.prevUserEvent&&l&&/^select($|\.)/.test(l)&&Jt(c[c.length-1],e)?this:new mt(As(this.done,e),this.undone,i,l)}addMapping(e){return new mt(Fn(this.done,e),Fn(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,i,l){let a=e==0?this.done:this.undone;if(a.length==0)return null;let c=a[a.length-1];if(l&&c.selectionsAfter.length)return i.update({selection:c.selectionsAfter[c.selectionsAfter.length-1],annotations:Ws.of({side:e,rest:Mo(a)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(c.changes){let m=a.length==1?Bi:a.slice(0,a.length-1);return c.mapped&&(m=Fn(m,c.mapped)),i.update({changes:c.changes,selection:c.startSelection,effects:c.effects,annotations:Ws.of({side:e,rest:m}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}mt.empty=new mt(Bi,Bi);const Qs=[{key:"Mod-z",run:Dl,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ko,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ko,preventDefault:!0},{key:"Mod-u",run:Ao,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:V,preventDefault:!0}];function Zr(s,e){return A.jT.create(s.ranges.map(e),s.mainIndex)}function oi(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ii({state:s,dispatch:e},i){let l=Zr(s.selection,i);return l.eq(s.selection)?!1:(e(oi(s,l)),!0)}function eo(s,e){return A.jT.cursor(e?s.to:s.from)}function to(s,e){return Ii(s,i=>i.empty?s.moveByChar(i,e):eo(i,e))}function Wn(s){return s.textDirectionAt(s.state.selection.main.head)==ee.Nm.LTR}const Ji=s=>to(s,!Wn(s)),Hs=s=>to(s,Wn(s)),Ll=s=>to(s,!0),is=s=>to(s,!1);function rs(s,e){return Ii(s,i=>i.empty?s.moveByGroup(i,e):eo(i,e))}const no=s=>rs(s,!Wn(s)),zs=s=>rs(s,Wn(s)),Jo=s=>rs(s,!0),io=s=>rs(s,!1),kr=typeof Intl!="undefined"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function Vs(s,e,i){let l=s.state.charCategorizer(e.from),a=CharCategory.Space,c=e.from,m=0,w=!1,C=!1,I=!1,F=ie=>{if(w)return!1;c+=i?ie.length:-ie.length;let ye=l(ie),Ee;if(ye==CharCategory.Word&&ie.charCodeAt(0)<128&&/[\W_]/.test(ie)&&(ye=-1),a==CharCategory.Space&&(a=ye),a!=ye)return!1;if(a==CharCategory.Word)if(ie.toLowerCase()==ie){if(!i&&C)return!1;I=!0}else if(I){if(i)return!1;w=!0}else{if(C&&i&&l(Ee=s.state.sliceDoc(c,c+1))==CharCategory.Word&&Ee.toLowerCase()==Ee)return!1;C=!0}return m++,!0},U=s.moveByChar(e,i,ie=>(F(ie),F));if(kr&&a==CharCategory.Word&&U.from==e.from+m*(i?1:-1)){let ie=Math.min(e.head,U.head),ye=Math.max(e.head,U.head),Ee=s.state.sliceDoc(ie,ye);if(Ee.length>1&&/[\u4E00-\uffff]/.test(Ee)){let ut=Array.from(kr.segment(Ee));if(ut.length>1)return i?EditorSelection.cursor(e.head+ut[1].index,-1):EditorSelection.cursor(U.head+ut[ut.length-1].index,1)}}return U}function Yo(s,e){return Ii(s,i=>i.empty?Vs(s,i,e):eo(i,e))}const ro=s=>Yo(s,!0),Pl=s=>Yo(s,!1);function so(s,e,i){if(e.type.prop(i))return!0;let l=e.to-e.from;return l&&(l>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function Ar(s,e,i){let l=kn(s).resolveInner(e.head),a=i?Be.closedBy:Be.openedBy;for(let C=e.head;;){let I=i?l.childAfter(C):l.childBefore(C);if(!I)break;so(s,I,a)?l=I:C=i?I.to:I.from}let c=l.type.prop(a),m,w;return c&&(m=i?ft(s,l.from,1):ft(s,l.to,-1))&&m.matched?w=i?m.end.to:m.end.from:w=i?l.to:l.from,A.jT.cursor(w,i?-1:1)}const Eo=s=>Ii(s,e=>Ar(s.state,e,!Wn(s))),Oo=s=>Ii(s,e=>Ar(s.state,e,Wn(s)));function vt(s,e){return Ii(s,i=>{if(!i.empty)return eo(i,e);let l=s.moveVertically(i,e);return l.head!=i.head?l:s.moveToLineBoundary(i,e)})}const Vt=s=>vt(s,!1),xi=s=>vt(s,!0);function Mt(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,i=0,l=0,a;if(e){for(let c of s.state.facet(ee.tk.scrollMargins)){let m=c(s);m!=null&&m.top&&(i=Math.max(m==null?void 0:m.top,i)),m!=null&&m.bottom&&(l=Math.max(m==null?void 0:m.bottom,l))}a=s.scrollDOM.clientHeight-i-l}else a=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:l,selfScroll:e,height:Math.max(s.defaultLineHeight,a-5)}}function dn(s,e){let i=Mt(s),{state:l}=s,a=Zr(l.selection,m=>m.empty?s.moveVertically(m,e,i.height):eo(m,e));if(a.eq(l.selection))return!1;let c;if(i.selfScroll){let m=s.coordsAtPos(l.selection.main.head),w=s.scrollDOM.getBoundingClientRect(),C=w.top+i.marginTop,I=w.bottom-i.marginBottom;m&&m.top>C&&m.bottom<I&&(c=ee.tk.scrollIntoView(a.main.head,{y:"start",yMargin:m.top-C}))}return s.dispatch(oi(l,a),{effects:c}),!0}const Tr=s=>dn(s,!1),Kr=s=>dn(s,!0);function wi(s,e,i){let l=s.lineBlockAt(e.head),a=s.moveToLineBoundary(e,i);if(a.head==e.head&&a.head!=(i?l.to:l.from)&&(a=s.moveToLineBoundary(e,i,!1)),!i&&a.head==l.from&&l.length){let c=/^\s*/.exec(s.state.sliceDoc(l.from,Math.min(l.from+100,l.to)))[0].length;c&&e.head!=l.from+c&&(a=A.jT.cursor(l.from+c))}return a}const oo=s=>Ii(s,e=>wi(s,e,!0)),lo=s=>Ii(s,e=>wi(s,e,!1)),Qo=s=>Ii(s,e=>wi(s,e,!Wn(s))),ia=s=>Ii(s,e=>wi(s,e,Wn(s))),Do=s=>Ii(s,e=>A.jT.cursor(s.lineBlockAt(e.head).from,1)),Lo=s=>Ii(s,e=>A.jT.cursor(s.lineBlockAt(e.head).to,-1));function el(s,e,i){let l=!1,a=Zr(s.selection,c=>{let m=ft(s,c.head,-1)||ft(s,c.head,1)||c.head>0&&ft(s,c.head-1,1)||c.head<s.doc.length&&ft(s,c.head+1,-1);if(!m||!m.end)return c;l=!0;let w=m.start.from==c.head?m.end.to:m.end.from;return i?A.jT.range(c.anchor,w):A.jT.cursor(w)});return l?(e(oi(s,a)),!0):!1}const Bl=({state:s,dispatch:e})=>el(s,e,!1),tl=({state:s,dispatch:e})=>el(s,e,!0);function fr(s,e){let i=Zr(s.state.selection,l=>{let a=e(l);return A.jT.range(l.anchor,a.head,a.goalColumn,a.bidiLevel||void 0)});return i.eq(s.state.selection)?!1:(s.dispatch(oi(s.state,i)),!0)}function Il(s,e){return fr(s,i=>s.moveByChar(i,e))}const Ea=s=>Il(s,!Wn(s)),_l=s=>Il(s,Wn(s)),sf=s=>Il(s,!0),ra=s=>Il(s,!1);function Ts(s,e){return fr(s,i=>s.moveByGroup(i,e))}const Oa=s=>Ts(s,!Wn(s)),O=s=>Ts(s,Wn(s)),nl=s=>Ts(s,!0),sa=s=>Ts(s,!1);function ur(s,e){return fr(s,i=>Vs(s,i,e))}const Pt=s=>ur(s,!0),Ch=s=>ur(s,!1),of=s=>fr(s,e=>Ar(s.state,e,!Wn(s))),kh=s=>fr(s,e=>Ar(s.state,e,Wn(s)));function Ur(s,e){return fr(s,i=>s.moveVertically(i,e))}const oa=s=>Ur(s,!1),Nl=s=>Ur(s,!0);function Da(s,e){return fr(s,i=>s.moveVertically(i,e,Mt(s).height))}const La=s=>Da(s,!1),Fl=s=>Da(s,!0),cr=s=>fr(s,e=>wi(s,e,!0)),la=s=>fr(s,e=>wi(s,e,!1)),Ah=s=>fr(s,e=>wi(s,e,!Wn(s))),Th=s=>fr(s,e=>wi(s,e,Wn(s))),Pa=s=>fr(s,e=>A.jT.cursor(s.lineBlockAt(e.head).from)),Mh=s=>fr(s,e=>A.jT.cursor(s.lineBlockAt(e.head).to)),ss=({state:s,dispatch:e})=>(e(oi(s,{anchor:0})),!0),Ba=({state:s,dispatch:e})=>(e(oi(s,{anchor:s.doc.length})),!0),Rh=({state:s,dispatch:e})=>(e(oi(s,{anchor:s.selection.main.anchor,head:0})),!0),Ia=({state:s,dispatch:e})=>(e(oi(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),lf=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),af=({state:s,dispatch:e})=>{let i=ol(s).map(({from:l,to:a})=>A.jT.range(l,Math.min(a+1,s.doc.length)));return e(s.update({selection:A.jT.create(i),userEvent:"select"})),!0},Ms=({state:s,dispatch:e})=>{let i=Zr(s.selection,l=>{var a;let c=kn(s).resolveStack(l.from,1);for(let m=c;m;m=m.next){let{node:w}=m;if((w.from<l.from&&w.to>=l.to||w.to>l.to&&w.from<=l.from)&&(!((a=w.parent)===null||a===void 0)&&a.parent))return A.jT.range(w.to,w.from)}return l});return e(oi(s,i)),!0},hf=({state:s,dispatch:e})=>{let i=s.selection,l=null;return i.ranges.length>1?l=A.jT.create([i.main]):i.main.empty||(l=A.jT.create([A.jT.cursor(i.main.head)])),l?(e(oi(s,l)),!0):!1};function Po(s,e){if(s.state.readOnly)return!1;let i="delete.selection",{state:l}=s,a=l.changeByRange(c=>{let{from:m,to:w}=c;if(m==w){let C=e(c);C<m?(i="delete.backward",C=Vi(s,C,!1)):C>m&&(i="delete.forward",C=Vi(s,C,!0)),m=Math.min(m,C),w=Math.max(w,C)}else m=Vi(s,m,!1),w=Vi(s,w,!0);return m==w?{range:c}:{changes:{from:m,to:w},range:A.jT.cursor(m,m<c.head?-1:1)}});return a.changes.empty?!1:(s.dispatch(l.update(a,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?ee.tk.announce.of(l.phrase("Selection deleted")):void 0})),!0)}function Vi(s,e,i){if(s instanceof ee.tk)for(let l of s.state.facet(ee.tk.atomicRanges).map(a=>a(s)))l.between(e,e,(a,c)=>{a<e&&c>e&&(e=i?c:a)});return e}const il=(s,e)=>Po(s,i=>{let l=i.from,{state:a}=s,c=a.doc.lineAt(l),m,w;if(!e&&l>c.from&&l<c.from+200&&!/[^ \t]/.test(m=c.text.slice(0,l-c.from))){if(m[m.length-1]=="	")return l-1;let C=(0,A.IS)(m,a.tabSize),I=C%fe(a)||fe(a);for(let F=0;F<I&&m[m.length-1-F]==" ";F++)l--;w=l}else w=(0,A.cp)(c.text,l-c.from,e,e)+c.from,w==l&&c.number!=(e?a.doc.lines:1)&&(w+=e?1:-1);return w}),Wl=s=>il(s,!1),Hl=s=>il(s,!0),os=(s,e)=>Po(s,i=>{let l=i.head,{state:a}=s,c=a.doc.lineAt(l),m=a.charCategorizer(l);for(let w=null;;){if(l==(e?c.to:c.from)){l==i.head&&c.number!=(e?a.doc.lines:1)&&(l+=e?1:-1);break}let C=(0,A.cp)(c.text,l-c.from,e)+c.from,I=c.text.slice(Math.min(l,C)-c.from,Math.max(l,C)-c.from),F=m(I);if(w!=null&&F!=w)break;(I!=" "||l!=i.head)&&(w=F),l=C}return l}),rl=s=>os(s,!1),_a=s=>os(s,!0),Bo=s=>Po(s,e=>{let i=s.lineBlockAt(e.head).to;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),ff=s=>Po(s,e=>{let i=s.lineBlockAt(e.head).from;return e.head>i?i:Math.max(0,e.head-1)}),aa=s=>Po(s,e=>{let i=s.moveToLineBoundary(e,!1).head;return e.head>i?i:Math.max(0,e.head-1)}),zl=s=>Po(s,e=>{let i=s.moveToLineBoundary(e,!0).head;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),Vl=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=[];for(let l=0,a="",c=s.doc.iter();;){if(c.next(),c.lineBreak||c.done){let m=a.search(/\s+$/);if(m>-1&&i.push({from:l-(a.length-m),to:l}),c.done)break;a=""}else a=c.value;l+=c.value.length}return i.length?(e(s.update({changes:i,userEvent:"delete"})),!0):!1},sl=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(l=>({changes:{from:l.from,to:l.to,insert:A.xv.of(["",""])},range:A.jT.cursor(l.from)}));return e(s.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},Na=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(l=>{if(!l.empty||l.from==0||l.from==s.doc.length)return{range:l};let a=l.from,c=s.doc.lineAt(a),m=a==c.from?a-1:(0,A.cp)(c.text,a-c.from,!1)+c.from,w=a==c.to?a+1:(0,A.cp)(c.text,a-c.from,!0)+c.from;return{changes:{from:m,to:w,insert:s.doc.slice(a,w).append(s.doc.slice(m,a))},range:A.jT.cursor(w)}});return i.changes.empty?!1:(e(s.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ol(s){let e=[],i=-1;for(let l of s.selection.ranges){let a=s.doc.lineAt(l.from),c=s.doc.lineAt(l.to);if(!l.empty&&l.to==c.from&&(c=s.doc.lineAt(l.to-1)),i>=a.number){let m=e[e.length-1];m.to=c.to,m.ranges.push(l)}else e.push({from:a.from,to:c.to,ranges:[l]});i=c.number+1}return e}function ha(s,e,i){if(s.readOnly)return!1;let l=[],a=[];for(let c of ol(s)){if(i?c.to==s.doc.length:c.from==0)continue;let m=s.doc.lineAt(i?c.to+1:c.from-1),w=m.length+1;if(i){l.push({from:c.to,to:m.to},{from:c.from,insert:m.text+s.lineBreak});for(let C of c.ranges)a.push(A.jT.range(Math.min(s.doc.length,C.anchor+w),Math.min(s.doc.length,C.head+w)))}else{l.push({from:m.from,to:c.from},{from:c.to,insert:s.lineBreak+m.text});for(let C of c.ranges)a.push(A.jT.range(C.anchor-w,C.head-w))}}return l.length?(e(s.update({changes:l,scrollIntoView:!0,selection:A.jT.create(a,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ls=({state:s,dispatch:e})=>ha(s,e,!1),fa=({state:s,dispatch:e})=>ha(s,e,!0);function $s(s,e,i){if(s.readOnly)return!1;let l=[];for(let a of ol(s))i?l.push({from:a.from,insert:s.doc.slice(a.from,a.to)+s.lineBreak}):l.push({from:a.to,insert:s.lineBreak+s.doc.slice(a.from,a.to)});return e(s.update({changes:l,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Ai=({state:s,dispatch:e})=>$s(s,e,!1),ua=({state:s,dispatch:e})=>$s(s,e,!0),$l=s=>{if(s.state.readOnly)return!1;let{state:e}=s,i=e.changes(ol(e).map(({from:a,to:c})=>(a>0?a--:c<e.doc.length&&c++,{from:a,to:c}))),l=Zr(e.selection,a=>s.moveVertically(a,!0)).map(i);return s.dispatch({changes:i,selection:l,scrollIntoView:!0,userEvent:"delete.line"}),!0},Eh=({state:s,dispatch:e})=>(e(s.update(s.replaceSelection(s.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0);function ll(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let i=kn(s).resolveInner(e),l=i.childBefore(e),a=i.childAfter(e),c;return l&&a&&l.to<=e&&a.from>=e&&(c=l.type.prop(Be.closedBy))&&c.indexOf(a.name)>-1&&s.doc.lineAt(l.to).from==s.doc.lineAt(a.from).from&&!/\S/.test(s.sliceDoc(l.to,a.from))?{from:l.to,to:a.from}:null}const Rs=Wa(!1),Fa=Wa(!0);function Wa(s){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let l=e.changeByRange(a=>{let{from:c,to:m}=a,w=e.doc.lineAt(c),C=!s&&c==m&&ll(e,c);s&&(c=m=(m<=w.to?w:e.doc.lineAt(m)).to);let I=new yt(e,{simulateBreak:c,simulateDoubleBreak:!!C}),F=He(I,c);for(F==null&&(F=(0,A.IS)(/^\s*/.exec(e.doc.lineAt(c).text)[0],e.tabSize));m<w.to&&/\s/.test(w.text[m-w.from]);)m++;C?{from:c,to:m}=C:c>w.from&&c<w.from+100&&!/\S/.test(w.text.slice(0,c))&&(c=w.from);let U=["",we(e,F)];return C&&U.push(we(e,I.lineIndent(w.from,-1))),{changes:{from:c,to:m,insert:A.xv.of(U)},range:A.jT.cursor(c+1+U[1].length)}});return i(e.update(l,{scrollIntoView:!0,userEvent:"input"})),!0}}function Io(s,e){let i=-1;return s.changeByRange(l=>{let a=[];for(let m=l.from;m<=l.to;){let w=s.doc.lineAt(m);w.number>i&&(l.empty||l.to>w.from)&&(e(w,a,l),i=w.number),m=w.to+1}let c=s.changes(a);return{changes:a,range:A.jT.range(c.mapPos(l.anchor,1),c.mapPos(l.head,1))}})}const Ha=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=Object.create(null),l=new yt(s,{overrideIndentation:c=>{let m=i[c];return m==null?-1:m}}),a=Io(s,(c,m,w)=>{let C=He(l,c.from);if(C==null)return;/\S/.test(c.text)||(C=0);let I=/^\s*/.exec(c.text)[0],F=we(s,C);(I!=F||w.from<c.from+I.length)&&(i[c.from]=C,m.push({from:c.from,to:c.from+I.length,insert:F}))});return a.changes.empty||e(s.update(a,{userEvent:"indent"})),!0},Zl=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(Io(s,(i,l)=>{l.push({from:i.from,insert:s.facet(re)})}),{userEvent:"input.indent"})),!0),li=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(Io(s,(i,l)=>{let a=/^\s*/.exec(i.text)[0];if(!a)return;let c=(0,A.IS)(a,s.tabSize),m=0,w=we(s,Math.max(0,c-fe(s)));for(;m<a.length&&m<w.length&&a.charCodeAt(m)==w.charCodeAt(m);)m++;l.push({from:i.from+m,to:i.from+a.length,insert:w.slice(m)})}),{userEvent:"delete.dedent"})),!0),za=({state:s,dispatch:e})=>s.selection.ranges.some(i=>!i.empty)?Zl({state:s,dispatch:e}):(e(s.update(s.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),Oh=[{key:"Ctrl-b",run:Ji,shift:Ea,preventDefault:!0},{key:"Ctrl-f",run:Hs,shift:_l},{key:"Ctrl-p",run:Vt,shift:oa},{key:"Ctrl-n",run:xi,shift:Nl},{key:"Ctrl-a",run:Do,shift:Pa},{key:"Ctrl-e",run:Lo,shift:Mh},{key:"Ctrl-d",run:Hl},{key:"Ctrl-h",run:Wl},{key:"Ctrl-k",run:Bo},{key:"Ctrl-Alt-h",run:rl},{key:"Ctrl-o",run:sl},{key:"Ctrl-t",run:Na},{key:"Ctrl-v",run:Kr}],as=[{key:"ArrowLeft",run:Ji,shift:Ea,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:no,shift:Oa,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Qo,shift:Ah,preventDefault:!0},{key:"ArrowRight",run:Hs,shift:_l,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:zs,shift:O,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ia,shift:Th,preventDefault:!0},{key:"ArrowUp",run:Vt,shift:oa,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ss,shift:Rh},{mac:"Ctrl-ArrowUp",run:Tr,shift:La},{key:"ArrowDown",run:xi,shift:Nl,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Ba,shift:Ia},{mac:"Ctrl-ArrowDown",run:Kr,shift:Fl},{key:"PageUp",run:Tr,shift:La},{key:"PageDown",run:Kr,shift:Fl},{key:"Home",run:lo,shift:la,preventDefault:!0},{key:"Mod-Home",run:ss,shift:Rh},{key:"End",run:oo,shift:cr,preventDefault:!0},{key:"Mod-End",run:Ba,shift:Ia},{key:"Enter",run:Rs},{key:"Mod-a",run:lf},{key:"Backspace",run:Wl,shift:Wl},{key:"Delete",run:Hl},{key:"Mod-Backspace",mac:"Alt-Backspace",run:rl},{key:"Mod-Delete",mac:"Alt-Delete",run:_a},{mac:"Mod-Backspace",run:aa},{mac:"Mod-Delete",run:zl}].concat(Oh.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),Va=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Eo,shift:of},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Oo,shift:kh},{key:"Alt-ArrowUp",run:ls},{key:"Shift-Alt-ArrowUp",run:Ai},{key:"Alt-ArrowDown",run:fa},{key:"Shift-Alt-ArrowDown",run:ua},{key:"Escape",run:hf},{key:"Mod-Enter",run:Fa},{key:"Alt-l",mac:"Ctrl-l",run:af},{key:"Mod-i",run:Ms,preventDefault:!0},{key:"Mod-[",run:li},{key:"Mod-]",run:Zl},{key:"Mod-Alt-\\",run:Ha},{key:"Shift-Mod-k",run:$l},{key:"Shift-Mod-\\",run:Bl},{key:"Mod-/",run:Cs},{key:"Alt-A",run:So}].concat(as),ca={key:"Tab",run:Zl,shift:li};function f(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var l in i)if(Object.prototype.hasOwnProperty.call(i,l)){var a=i[l];typeof a=="string"?s.setAttribute(l,a):a!=null&&(s[l]=a)}e++}for(;e<arguments.length;e++)t(s,arguments[e]);return s}function t(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var i=0;i<e.length;i++)t(s,e[i]);else throw new RangeError("Unsupported child node: "+e)}const r=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class h{constructor(e,i,l=0,a=e.length,c,m){this.test=m,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(l,a),this.bufferStart=l,this.normalize=c?w=>c(r(w)):r,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,A.gm)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let i=(0,A.bg)(e),l=this.bufferStart+this.bufferPos;this.bufferPos+=(0,A.nZ)(e);let a=this.normalize(i);for(let c=0,m=l;;c++){let w=a.charCodeAt(c),C=this.match(w,m);if(c==a.length-1){if(C)return this.value=C,this;break}m==l&&c<i.length&&i.charCodeAt(c)==w&&m++}}}match(e,i){let l=null;for(let a=0;a<this.matches.length;a+=2){let c=this.matches[a],m=!1;this.query.charCodeAt(c)==e&&(c==this.query.length-1?l={from:this.matches[a+1],to:i+1}:(this.matches[a]++,m=!0)),m||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?l={from:i,to:i+1}:this.matches.push(1,i)),l&&this.test&&!this.test(l.from,l.to,this.buffer,this.bufferStart)&&(l=null),l}}typeof Symbol!="undefined"&&(h.prototype[Symbol.iterator]=function(){return this});const u={from:-1,to:-1,match:/.*/.exec("")},g="gm"+(/x/.unicode==null?"":"u");class y{constructor(e,i,l,a=0,c=e.length){if(this.text=e,this.to=c,this.curLine="",this.done=!1,this.value=u,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new R(e,i,l,a,c);this.re=new RegExp(i,g+(l!=null&&l.ignoreCase?"i":"")),this.test=l==null?void 0:l.test,this.iter=e.iter();let m=e.lineAt(a);this.curLineStart=m.from,this.matchPos=z(e,a),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let l=this.curLineStart+i.index,a=l+i[0].length;if(this.matchPos=z(this.text,a+(l==a?1:0)),l==this.curLineStart+this.curLine.length&&this.nextLine(),(l<a||l>this.value.to)&&(!this.test||this.test(l,a,i)))return this.value={from:l,to:a,match:i},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const S=new WeakMap;class M{constructor(e,i){this.from=e,this.text=i}get to(){return this.from+this.text.length}static get(e,i,l){let a=S.get(e);if(!a||a.from>=l||a.to<=i){let w=new M(i,e.sliceString(i,l));return S.set(e,w),w}if(a.from==i&&a.to==l)return a;let{text:c,from:m}=a;return m>i&&(c=e.sliceString(i,m)+c,m=i),a.to<l&&(c+=e.sliceString(a.to,l)),S.set(e,new M(m,c)),new M(i,c.slice(i-m,l-m))}}class R{constructor(e,i,l,a,c){this.text=e,this.to=c,this.done=!1,this.value=u,this.matchPos=z(e,a),this.re=new RegExp(i,g+(l!=null&&l.ignoreCase?"i":"")),this.test=l==null?void 0:l.test,this.flat=M.get(e,a,this.chunkEnd(a+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==e&&(this.re.lastIndex=e+1,i=this.re.exec(this.flat.text)),i){let l=this.flat.from+i.index,a=l+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(l,a,i)))return this.value={from:l,to:a,match:i},this.matchPos=z(this.text,a+(l==a?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=M.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(y.prototype[Symbol.iterator]=R.prototype[Symbol.iterator]=function(){return this});function L(s){try{return new RegExp(s,g),!0}catch(e){return!1}}function z(s,e){if(e>=s.length)return e;let i=s.lineAt(e),l;for(;e<i.to&&(l=i.text.charCodeAt(e-i.from))>=56320&&l<57344;)e++;return e}function Y(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),i=f("input",{class:"cm-textfield",name:"line",value:e}),l=f("form",{class:"cm-gotoLine",onkeydown:c=>{c.keyCode==27?(c.preventDefault(),s.dispatch({effects:te.of(!1)}),s.focus()):c.keyCode==13&&(c.preventDefault(),a())},onsubmit:c=>{c.preventDefault(),a()}},f("label",s.state.phrase("Go to line"),": ",i)," ",f("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function a(){let c=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!c)return;let{state:m}=s,w=m.doc.lineAt(m.selection.main.head),[,C,I,F,U]=c,ie=F?+F.slice(1):0,ye=I?+I:w.number;if(I&&U){let ln=ye/100;C&&(ln=ln*(C=="-"?-1:1)+w.number/m.doc.lines),ye=Math.round(m.doc.lines*ln)}else I&&C&&(ye=ye*(C=="-"?-1:1)+w.number);let Ee=m.doc.line(Math.max(1,Math.min(m.doc.lines,ye))),ut=A.jT.cursor(Ee.from+Math.max(0,Math.min(ie,Ee.length)));s.dispatch({effects:[te.of(!1),ee.tk.scrollIntoView(ut.from,{y:"center"})],selection:ut}),s.focus()}return{dom:l}}const te=A.Py.define(),ce=A.QQ.define({create(){return!0},update(s,e){for(let i of e.effects)i.is(te)&&(s=i.value);return s},provide:s=>ee.mH.from(s,e=>e?Y:null)}),be=s=>{let e=(0,ee.Sd)(s,Y);if(!e){let i=[te.of(!0)];s.state.field(ce,!1)==null&&i.push(A.Py.appendConfig.of([ce,ve])),s.dispatch({effects:i}),e=(0,ee.Sd)(s,Y)}return e&&e.dom.querySelector("input").select(),!0},ve=ee.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Re={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},xt=A.r$.define({combine(s){return(0,A.BO)(s,Re,{highlightWordAroundCursor:(e,i)=>e||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function qt(s){let e=[Es,hs];return s&&e.push(xt.of(s)),e}const _t=ee.p.mark({class:"cm-selectionMatch"}),tn=ee.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function pn(s,e,i,l){return(i==0||s(e.sliceDoc(i-1,i))!=A.D0.Word)&&(l==e.doc.length||s(e.sliceDoc(l,l+1))!=A.D0.Word)}function _i(s,e,i,l){return s(e.sliceDoc(i,i+1))==A.D0.Word&&s(e.sliceDoc(l-1,l))==A.D0.Word}const hs=ee.lg.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(xt),{state:i}=s,l=i.selection;if(l.ranges.length>1)return ee.p.none;let a=l.main,c,m=null;if(a.empty){if(!e.highlightWordAroundCursor)return ee.p.none;let C=i.wordAt(a.head);if(!C)return ee.p.none;m=i.charCategorizer(a.head),c=i.sliceDoc(C.from,C.to)}else{let C=a.to-a.from;if(C<e.minSelectionLength||C>200)return ee.p.none;if(e.wholeWords){if(c=i.sliceDoc(a.from,a.to),m=i.charCategorizer(a.head),!(pn(m,i,a.from,a.to)&&_i(m,i,a.from,a.to)))return ee.p.none}else if(c=i.sliceDoc(a.from,a.to).trim(),!c)return ee.p.none}let w=[];for(let C of s.visibleRanges){let I=new h(i.doc,c,C.from,C.to);for(;!I.next().done;){let{from:F,to:U}=I.value;if((!m||pn(m,i,F,U))&&(a.empty&&F<=a.from&&U>=a.to?w.push(tn.range(F,U)):(F>=a.to||U<=a.from)&&w.push(_t.range(F,U)),w.length>e.maxMatches))return ee.p.none}}return ee.p.set(w)}},{decorations:s=>s.decorations}),Es=ee.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),al=({state:s,dispatch:e})=>{let{selection:i}=s,l=A.jT.create(i.ranges.map(a=>s.wordAt(a.head)||A.jT.cursor(a.head)),i.mainIndex);return l.eq(i)?!1:(e(s.update({selection:l})),!0)};function da(s,e){let{main:i,ranges:l}=s.selection,a=s.wordAt(i.head),c=a&&a.from==i.from&&a.to==i.to;for(let m=!1,w=new h(s.doc,e,l[l.length-1].to);;)if(w.next(),w.done){if(m)return null;w=new h(s.doc,e,0,Math.max(0,l[l.length-1].from-1)),m=!0}else{if(m&&l.some(C=>C.from==w.value.from))continue;if(c){let C=s.wordAt(w.value.from);if(!C||C.from!=w.value.from||C.to!=w.value.to)continue}return w.value}}const ao=({state:s,dispatch:e})=>{let{ranges:i}=s.selection;if(i.some(c=>c.from===c.to))return al({state:s,dispatch:e});let l=s.sliceDoc(i[0].from,i[0].to);if(s.selection.ranges.some(c=>s.sliceDoc(c.from,c.to)!=l))return!1;let a=da(s,l);return a?(e(s.update({selection:s.selection.addRange(A.jT.range(a.from,a.to),!1),effects:ee.tk.scrollIntoView(a.to)})),!0):!1},fs=A.r$.define({combine(s){return(0,A.BO)(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new pu(e),scrollToMatch:e=>ee.tk.scrollIntoView(e)})}});function ho(s){return s?[fs.of(s),Ih]:Ih}class us{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||L(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(i,l)=>l=="n"?`
`:l=="r"?"\r":l=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Nt(this):new cs(this)}getCursor(e,i=0,l){let a=e.doc?e:A.yy.create({doc:e});return l==null&&(l=a.doc.length),this.regexp?Yi(this,a,i,l):dr(this,a,i,l)}}class fo{constructor(e){this.spec=e}}function dr(s,e,i,l){return new h(e.doc,s.unquoted,i,l,s.caseSensitive?void 0:a=>a.toLowerCase(),s.wholeWord?hl(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function hl(s,e){return(i,l,a,c)=>((c>i||c+a.length<l)&&(c=Math.max(0,i-2),a=s.sliceString(c,Math.min(s.length,l+2))),(e(Kl(a,i-c))!=A.D0.Word||e($a(a,i-c))!=A.D0.Word)&&(e($a(a,l-c))!=A.D0.Word||e(Kl(a,l-c))!=A.D0.Word))}class cs extends fo{constructor(e){super(e)}nextMatch(e,i,l){let a=dr(this.spec,e,l,e.doc.length).nextOverlapping();return a.done&&(a=dr(this.spec,e,0,i).nextOverlapping()),a.done?null:a.value}prevMatchInRange(e,i,l){for(let a=l;;){let c=Math.max(i,a-1e4-this.spec.unquoted.length),m=dr(this.spec,e,c,a),w=null;for(;!m.nextOverlapping().done;)w=m.value;if(w)return w;if(c==i)return null;a-=1e4}}prevMatch(e,i,l){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,l,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,i){let l=dr(this.spec,e,0,e.doc.length),a=[];for(;!l.next().done;){if(a.length>=i)return null;a.push(l.value)}return a}highlight(e,i,l,a){let c=dr(this.spec,e,Math.max(0,i-this.spec.unquoted.length),Math.min(l+this.spec.unquoted.length,e.doc.length));for(;!c.next().done;)a(c.value.from,c.value.to)}}function Yi(s,e,i,l){return new y(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?Dh(e.charCategorizer(e.selection.main.head)):void 0},i,l)}function Kl(s,e){return s.slice((0,A.cp)(s,e,!1),e)}function $a(s,e){return s.slice(e,(0,A.cp)(s,e))}function Dh(s){return(e,i,l)=>!l[0].length||(s(Kl(l.input,l.index))!=A.D0.Word||s($a(l.input,l.index))!=A.D0.Word)&&(s($a(l.input,l.index+l[0].length))!=A.D0.Word||s(Kl(l.input,l.index+l[0].length))!=A.D0.Word)}class Nt extends fo{nextMatch(e,i,l){let a=Yi(this.spec,e,l,e.doc.length).next();return a.done&&(a=Yi(this.spec,e,0,i).next()),a.done?null:a.value}prevMatchInRange(e,i,l){for(let a=1;;a++){let c=Math.max(i,l-a*1e4),m=Yi(this.spec,e,c,l),w=null;for(;!m.next().done;)w=m.value;if(w&&(c==i||w.from>c+10))return w;if(c==i)return null}}prevMatch(e,i,l){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,l,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(i,l)=>l=="$"?"$":l=="&"?e.match[0]:l!="0"&&+l<e.match.length?e.match[l]:i))}matchAll(e,i){let l=Yi(this.spec,e,0,e.doc.length),a=[];for(;!l.next().done;){if(a.length>=i)return null;a.push(l.value)}return a}highlight(e,i,l,a){let c=Yi(this.spec,e,Math.max(0,i-250),Math.min(l+250,e.doc.length));for(;!c.next().done;)a(c.value.from,c.value.to)}}const pa=A.Py.define(),Lh=A.Py.define(),Mr=A.QQ.define({create(s){return new Ph(va(s).create(),null)},update(s,e){for(let i of e.effects)i.is(pa)?s=new Ph(i.value.create(),s.panel):i.is(Lh)&&(s=new Ph(s.query,i.value?Ul:null));return s},provide:s=>ee.mH.from(s,e=>e.panel)});function cu(s){let e=s.field(Mr,!1);return e?e.query.spec:va(s)}function uc(s){var e;return((e=s.field(Mr,!1))===null||e===void 0?void 0:e.panel)!=null}class Ph{constructor(e,i){this.query=e,this.panel=i}}const ds=ee.p.mark({class:"cm-searchMatch"}),du=ee.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Za=ee.lg.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(Mr))}update(s){let e=s.state.field(Mr);(e!=s.startState.field(Mr)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return ee.p.none;let{view:i}=this,l=new A.f_;for(let a=0,c=i.visibleRanges,m=c.length;a<m;a++){let{from:w,to:C}=c[a];for(;a<m-1&&C>c[a+1].from-2*250;)C=c[++a].to;s.highlight(i.state,w,C,(I,F)=>{let U=i.state.selection.ranges.some(ie=>ie.from==I&&ie.to==F);l.add(I,F,U?du:ds)})}return l.finish()}},{decorations:s=>s.decorations});function fl(s){return e=>{let i=e.state.field(Mr,!1);return i&&i.query.spec.valid?s(e,i):qa(e)}}const ga=fl((s,{query:e})=>{let{to:i}=s.state.selection.main,l=e.nextMatch(s.state,i,i);if(!l)return!1;let a=A.jT.single(l.from,l.to),c=s.state.facet(fs);return s.dispatch({selection:a,effects:[wa(s,l),c.scrollToMatch(a.main,s)],userEvent:"select.search"}),Bh(s),!0}),ma=fl((s,{query:e})=>{let{state:i}=s,{from:l}=i.selection.main,a=e.prevMatch(i,l,l);if(!a)return!1;let c=A.jT.single(a.from,a.to),m=s.state.facet(fs);return s.dispatch({selection:c,effects:[wa(s,a),m.scrollToMatch(c.main,s)],userEvent:"select.search"}),Bh(s),!0}),qr=fl((s,{query:e})=>{let i=e.matchAll(s.state,1e3);return!i||!i.length?!1:(s.dispatch({selection:A.jT.create(i.map(l=>A.jT.range(l.from,l.to))),userEvent:"select.search.matches"}),!0)}),_o=({state:s,dispatch:e})=>{let i=s.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:l,to:a}=i.main,c=[],m=0;for(let w=new h(s.doc,s.sliceDoc(l,a));!w.next().done;){if(c.length>1e3)return!1;w.value.from==l&&(m=c.length),c.push(A.jT.range(w.value.from,w.value.to))}return e(s.update({selection:A.jT.create(c,m),userEvent:"select.search.matches"})),!0},Ka=fl((s,{query:e})=>{let{state:i}=s,{from:l,to:a}=i.selection.main;if(i.readOnly)return!1;let c=e.nextMatch(i,l,l);if(!c)return!1;let m=[],w,C,I=[];if(c.from==l&&c.to==a&&(C=i.toText(e.getReplacement(c)),m.push({from:c.from,to:c.to,insert:C}),c=e.nextMatch(i,c.from,c.to),I.push(ee.tk.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(l).number)+"."))),c){let F=m.length==0||m[0].from>=c.to?0:c.to-c.from-C.length;w=A.jT.single(c.from-F,c.to-F),I.push(wa(s,c)),I.push(i.facet(fs).scrollToMatch(w.main,s))}return s.dispatch({changes:m,selection:w,effects:I,userEvent:"input.replace"}),!0}),uf=fl((s,{query:e})=>{if(s.state.readOnly)return!1;let i=e.matchAll(s.state,1e9).map(a=>{let{from:c,to:m}=a;return{from:c,to:m,insert:e.getReplacement(a)}});if(!i.length)return!1;let l=s.state.phrase("replaced $ matches",i.length)+".";return s.dispatch({changes:i,effects:ee.tk.announce.of(l),userEvent:"input.replace.all"}),!0});function Ul(s){return s.state.facet(fs).createPanel(s)}function va(s,e){var i,l,a,c,m;let w=s.selection.main,C=w.empty||w.to>w.from+100?"":s.sliceDoc(w.from,w.to);if(e&&!C)return e;let I=s.facet(fs);return new us({search:((i=e==null?void 0:e.literal)!==null&&i!==void 0?i:I.literal)?C:C.replace(/\n/g,"\\n"),caseSensitive:(l=e==null?void 0:e.caseSensitive)!==null&&l!==void 0?l:I.caseSensitive,literal:(a=e==null?void 0:e.literal)!==null&&a!==void 0?a:I.literal,regexp:(c=e==null?void 0:e.regexp)!==null&&c!==void 0?c:I.regexp,wholeWord:(m=e==null?void 0:e.wholeWord)!==null&&m!==void 0?m:I.wholeWord})}function Ua(s){let e=(0,ee.Sd)(s,Ul);return e&&e.dom.querySelector("[main-field]")}function Bh(s){let e=Ua(s);e&&e==s.root.activeElement&&e.select()}const qa=s=>{let e=s.state.field(Mr,!1);if(e&&e.panel){let i=Ua(s);if(i&&i!=s.root.activeElement){let l=va(s.state,e.query.spec);l.valid&&s.dispatch({effects:pa.of(l)}),i.focus(),i.select()}}else s.dispatch({effects:[Lh.of(!0),e?pa.of(va(s.state,e.query.spec)):A.Py.appendConfig.of(Ih)]});return!0},Ga=s=>{let e=s.state.field(Mr,!1);if(!e||!e.panel)return!1;let i=(0,ee.Sd)(s,Ul);return i&&i.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:Lh.of(!1)}),!0},No=[{key:"Mod-f",run:qa,scope:"editor search-panel"},{key:"F3",run:ga,shift:ma,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ga,shift:ma,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ga,scope:"editor search-panel"},{key:"Mod-Shift-l",run:_o},{key:"Alt-g",run:be},{key:"Mod-d",run:ao,preventDefault:!0}];class pu{constructor(e){this.view=e;let i=this.query=e.state.field(Mr).query.spec;this.commit=this.commit.bind(this),this.searchField=f("input",{value:i.search,placeholder:bi(e,"Find"),"aria-label":bi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=f("input",{value:i.replace,placeholder:bi(e,"Replace"),"aria-label":bi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=f("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=f("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=f("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function l(a,c,m){return f("button",{class:"cm-button",name:a,onclick:c,type:"button"},m)}this.dom=f("div",{onkeydown:a=>this.keydown(a),class:"cm-search"},[this.searchField,l("next",()=>ga(e),[bi(e,"next")]),l("prev",()=>ma(e),[bi(e,"previous")]),l("select",()=>qr(e),[bi(e,"all")]),f("label",null,[this.caseField,bi(e,"match case")]),f("label",null,[this.reField,bi(e,"regexp")]),f("label",null,[this.wordField,bi(e,"by word")]),...e.state.readOnly?[]:[f("br"),this.replaceField,l("replace",()=>Ka(e),[bi(e,"replace")]),l("replaceAll",()=>uf(e),[bi(e,"replace all")])],f("button",{name:"close",onclick:()=>Ga(e),"aria-label":bi(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new us({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:pa.of(e)}))}keydown(e){(0,ee.$1)(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ma:ga)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Ka(this.view))}update(e){for(let i of e.transactions)for(let l of i.effects)l.is(pa)&&!l.value.eq(this.query)&&this.setQuery(l.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(fs).top}}function bi(s,e){return s.state.phrase(e)}const ya=30,xa=/[\s\.,:;?!]/;function wa(s,{from:e,to:i}){let l=s.state.doc.lineAt(e),a=s.state.doc.lineAt(i).to,c=Math.max(l.from,e-ya),m=Math.min(a,i+ya),w=s.state.sliceDoc(c,m);if(c!=l.from){for(let C=0;C<ya;C++)if(!xa.test(w[C+1])&&xa.test(w[C])){w=w.slice(C);break}}if(m!=a){for(let C=w.length-1;C>w.length-ya;C--)if(!xa.test(w[C-1])&&xa.test(w[C])){w=w.slice(0,C);break}}return ee.tk.announce.of(`${s.state.phrase("current match")}. ${w} ${s.state.phrase("on line")} ${l.number}.`)}const gu=ee.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Ih=[Mr,A.Wl.low(Za),gu];class cf{constructor(e,i,l){this.state=e,this.pos=i,this.explicit=l,this.abortListeners=[]}tokenBefore(e){let i=kn(this.state).resolveInner(this.pos,-1);for(;i&&e.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(e){let i=this.state.doc.lineAt(this.pos),l=Math.max(i.from,this.pos-250),a=i.text.slice(l-i.from,this.pos-i.from),c=a.search(pf(e,!1));return c<0?null:{from:l+c,to:this.pos,text:a.slice(c)}}get aborted(){return this.abortListeners==null}addEventListener(e,i){e=="abort"&&this.abortListeners&&this.abortListeners.push(i)}}function _h(s){let e=Object.keys(s).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function df(s){let e=Object.create(null),i=Object.create(null);for(let{label:a}of s){e[a[0]]=!0;for(let c=1;c<a.length;c++)i[a[c]]=!0}let l=_h(e)+_h(i)+"*$";return[new RegExp("^"+l),new RegExp(l)]}function mu(s){let e=s.map(a=>typeof a=="string"?{label:a}:a),[i,l]=e.every(a=>/^\w+$/.test(a.label))?[/\w*$/,/\w+$/]:df(e);return a=>{let c=a.matchBefore(l);return c||a.explicit?{from:c?c.from:a.pos,options:e,validFor:i}:null}}function vu(s,e){return i=>{for(let l=syntaxTree(i.state).resolveInner(i.pos,-1);l;l=l.parent){if(s.indexOf(l.name)>-1)return e(i);if(l.type.isTop)break}return null}}function yu(s,e){return i=>{for(let l=syntaxTree(i.state).resolveInner(i.pos,-1);l;l=l.parent){if(s.indexOf(l.name)>-1)return null;if(l.type.isTop)break}return e(i)}}class pr{constructor(e,i,l,a){this.completion=e,this.source=i,this.match=l,this.score=a}}function $i(s){return s.selection.main.from}function pf(s,e){var i;let{source:l}=s,a=e&&l[0]!="^",c=l[l.length-1]!="$";return!a&&!c?s:new RegExp(`${a?"^":""}(?:${l})${c?"$":""}`,(i=s.flags)!==null&&i!==void 0?i:s.ignoreCase?"i":"")}const gf=A.q6.define();function ja(s,e,i,l){let{main:a}=s.selection,c=i-a.from,m=l-a.from;return Object.assign(Object.assign({},s.changeByRange(w=>w!=a&&i!=l&&s.sliceDoc(w.from+c,w.from+m)!=s.sliceDoc(i,l)?{range:w}:{changes:{from:w.from+c,to:l==a.from?w.to:w.from+m,insert:e},range:A.jT.cursor(w.from+c+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const ul=new WeakMap;function mf(s){if(!Array.isArray(s))return s;let e=ul.get(s);return e||ul.set(s,e=mu(s)),e}const Xa=A.Py.define(),ba=A.Py.define();class vf{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<e.length;){let l=(0,A.gm)(e,i),a=(0,A.nZ)(l);this.chars.push(l);let c=e.slice(i,i+a),m=c.toUpperCase();this.folded.push((0,A.gm)(m==c?c.toLowerCase():m,0)),i+=a}this.astral=e.length!=this.chars.length}ret(e,i){return this.score=e,this.matched=i,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:i,folded:l,any:a,precise:c,byWord:m}=this;if(i.length==1){let Rt=(0,A.gm)(e,0),an=(0,A.nZ)(Rt),lt=an==e.length?0:-100;if(Rt!=i[0])if(Rt==l[0])lt+=-200;else return!1;return this.ret(lt,[0,an])}let w=e.indexOf(this.pattern);if(w==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let C=i.length,I=0;if(w<0){for(let Rt=0,an=Math.min(e.length,200);Rt<an&&I<C;){let lt=(0,A.gm)(e,Rt);(lt==i[I]||lt==l[I])&&(a[I++]=Rt),Rt+=(0,A.nZ)(lt)}if(I<C)return!1}let F=0,U=0,ie=!1,ye=0,Ee=-1,ut=-1,ln=/[a-z]/.test(e),nn=!0;for(let Rt=0,an=Math.min(e.length,200),lt=0;Rt<an&&U<C;){let it=(0,A.gm)(e,Rt);w<0&&(F<C&&it==i[F]&&(c[F++]=Rt),ye<C&&(it==i[ye]||it==l[ye]?(ye==0&&(Ee=Rt),ut=Rt+1,ye++):ye=0));let nt,Bt=it<255?it>=48&&it<=57||it>=97&&it<=122?2:it>=65&&it<=90?1:0:(nt=(0,A.bg)(it))!=nt.toLowerCase()?1:nt!=nt.toUpperCase()?2:0;(!Rt||Bt==1&&ln||lt==0&&Bt!=0)&&(i[U]==it||l[U]==it&&(ie=!0)?m[U++]=Rt:m.length&&(nn=!1)),lt=Bt,Rt+=(0,A.nZ)(it)}return U==C&&m[0]==0&&nn?this.result(-100+(ie?-200:0),m,e):ye==C&&Ee==0?this.ret(-200-e.length+(ut==e.length?0:-100),[0,ut]):w>-1?this.ret(-700-e.length,[w,w+this.pattern.length]):ye==C?this.ret(-200+-700-e.length,[Ee,ut]):U==C?this.result(-100+(ie?-200:0)+-700+(nn?0:-1100),m,e):i.length==2?!1:this.result((a[0]?-700:0)+-200+-1100,a,e)}result(e,i,l){let a=[],c=0;for(let m of i){let w=m+(this.astral?(0,A.nZ)((0,A.gm)(l,m)):1);c&&a[c-1]==m?a[c-1]=w:(a[c++]=m,a[c++]=w)}return this.ret(e-l.length,a)}}const ai=A.r$.define({combine(s){return(0,A.BO)(s,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:xu,compareCompletions:(e,i)=>e.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,i)=>e&&i,closeOnBlur:(e,i)=>e&&i,icons:(e,i)=>e&&i,tooltipClass:(e,i)=>l=>ql(e(l),i(l)),optionClass:(e,i)=>l=>ql(e(l),i(l)),addToOptions:(e,i)=>e.concat(i)})}});function ql(s,e){return s?e?s+" "+e:s:e}function xu(s,e,i,l,a,c){let m=s.textDirection==ee.Nm.RTL,w=m,C=!1,I="top",F,U,ie=e.left-a.left,ye=a.right-e.right,Ee=l.right-l.left,ut=l.bottom-l.top;if(w&&ie<Math.min(Ee,ye)?w=!1:!w&&ye<Math.min(Ee,ie)&&(w=!0),Ee<=(w?ie:ye))F=Math.max(a.top,Math.min(i.top,a.bottom-ut))-e.top,U=Math.min(400,w?ie:ye);else{C=!0,U=Math.min(400,(m?e.right:a.right-e.left)-30);let Rt=a.bottom-e.bottom;Rt>=ut||Rt>e.top?F=i.bottom-e.top:(I="bottom",F=e.bottom-i.top)}let ln=(e.bottom-e.top)/c.offsetHeight,nn=(e.right-e.left)/c.offsetWidth;return{style:`${I}: ${F/ln}px; max-width: ${U/nn}px`,class:"cm-completionInfo-"+(C?m?"left-narrow":"right-narrow":w?"left":"right")}}function yf(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(i){let l=document.createElement("div");return l.classList.add("cm-completionIcon"),i.type&&l.classList.add(...i.type.split(/\s+/g).map(a=>"cm-completionIcon-"+a)),l.setAttribute("aria-hidden","true"),l},position:20}),e.push({render(i,l,a){let c=document.createElement("span");c.className="cm-completionLabel";let m=i.displayLabel||i.label,w=0;for(let C=0;C<a.length;){let I=a[C++],F=a[C++];I>w&&c.appendChild(document.createTextNode(m.slice(w,I)));let U=c.appendChild(document.createElement("span"));U.appendChild(document.createTextNode(m.slice(I,F))),U.className="cm-completionMatchedText",w=F}return w<m.length&&c.appendChild(document.createTextNode(m.slice(w))),c},position:50},{render(i){if(!i.detail)return null;let l=document.createElement("span");return l.className="cm-completionDetail",l.textContent=i.detail,l},position:80}),e.sort((i,l)=>i.position-l.position).map(i=>i.render)}function Ja(s,e,i){if(s<=i)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let a=Math.floor(e/i);return{from:a*i,to:(a+1)*i}}let l=Math.floor((s-e)/i);return{from:s-(l+1)*i,to:s-l*i}}class Ya{constructor(e,i,l){this.view=e,this.stateField=i,this.applyCompletion=l,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:C=>this.placeInfo(C),key:this},this.space=null,this.currentClass="";let a=e.state.field(i),{options:c,selected:m}=a.open,w=e.state.facet(ai);this.optionContent=yf(w),this.optionClass=w.optionClass,this.tooltipClass=w.tooltipClass,this.range=Ja(c.length,m,w.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",C=>{let{options:I}=e.state.field(i).open;for(let F=C.target,U;F&&F!=this.dom;F=F.parentNode)if(F.nodeName=="LI"&&(U=/-(\d+)$/.exec(F.id))&&+U[1]<I.length){this.applyCompletion(e,I[+U[1]]),C.preventDefault();return}}),this.dom.addEventListener("focusout",C=>{let I=e.state.field(this.stateField,!1);I&&I.tooltip&&e.state.facet(ai).closeOnBlur&&C.relatedTarget!=e.contentDOM&&e.dispatch({effects:ba.of(null)})}),this.showOptions(c,a.id)}mount(){this.updateSel()}showOptions(e,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var i;let l=e.state.field(this.stateField),a=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),l!=a){let{options:c,selected:m,disabled:w}=l.open;(!a.open||a.open.options!=c)&&(this.range=Ja(c.length,m,e.state.facet(ai).maxRenderedOptions),this.showOptions(c,l.id)),this.updateSel(),w!=((i=a.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!w)}}updateTooltipClass(e){let i=this.tooltipClass(e);if(i!=this.currentClass){for(let l of this.currentClass.split(" "))l&&this.dom.classList.remove(l);for(let l of i.split(" "))l&&this.dom.classList.add(l);this.currentClass=i}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),i=e.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=Ja(i.options.length,i.selected,this.view.state.facet(ai).maxRenderedOptions),this.showOptions(i.options,e.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:l}=i.options[i.selected],{info:a}=l;if(!a)return;let c=typeof a=="string"?document.createTextNode(a):a(l);if(!c)return;"then"in c?c.then(m=>{m&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(m,l)}).catch(m=>(0,ee.OO)(this.view.state,m,"completion info")):this.addInfoPane(c,l)}}addInfoPane(e,i){this.destroyInfo();let l=this.info=document.createElement("div");if(l.className="cm-tooltip cm-completionInfo",e.nodeType!=null)l.appendChild(e),this.infoDestroy=null;else{let{dom:a,destroy:c}=e;l.appendChild(a),this.infoDestroy=c||null}this.dom.appendChild(l),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let i=null;for(let l=this.list.firstChild,a=this.range.from;l;l=l.nextSibling,a++)l.nodeName!="LI"||!l.id?a--:a==e?l.hasAttribute("aria-selected")||(l.setAttribute("aria-selected","true"),i=l):l.hasAttribute("aria-selected")&&l.removeAttribute("aria-selected");return i&&Qa(this.list,i),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let i=this.dom.getBoundingClientRect(),l=this.info.getBoundingClientRect(),a=e.getBoundingClientRect(),c=this.space;if(!c){let m=this.dom.ownerDocument.defaultView||window;c={left:0,top:0,right:m.innerWidth,bottom:m.innerHeight}}return a.top>Math.min(c.bottom,i.bottom)-10||a.bottom<Math.max(c.top,i.top)+10?null:this.view.state.facet(ai).positionInfo(this.view,i,a,l,c,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,i,l){const a=document.createElement("ul");a.id=i,a.setAttribute("role","listbox"),a.setAttribute("aria-expanded","true"),a.setAttribute("aria-label",this.view.state.phrase("Completions"));let c=null;for(let m=l.from;m<l.to;m++){let{completion:w,match:C}=e[m],{section:I}=w;if(I){let ie=typeof I=="string"?I:I.name;if(ie!=c&&(m>l.from||l.from==0))if(c=ie,typeof I!="string"&&I.header)a.appendChild(I.header(I));else{let ye=a.appendChild(document.createElement("completion-section"));ye.textContent=ie}}const F=a.appendChild(document.createElement("li"));F.id=i+"-"+m,F.setAttribute("role","option");let U=this.optionClass(w);U&&(F.className=U);for(let ie of this.optionContent){let ye=ie(w,this.view.state,C);ye&&F.appendChild(ye)}}return l.from&&a.classList.add("cm-completionListIncompleteTop"),l.to<e.length&&a.classList.add("cm-completionListIncompleteBottom"),a}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function xf(s,e){return i=>new Ya(i,s,e)}function Qa(s,e){let i=s.getBoundingClientRect(),l=e.getBoundingClientRect(),a=i.height/s.offsetHeight;l.top<i.top?s.scrollTop-=(i.top-l.top)/a:l.bottom>i.bottom&&(s.scrollTop+=(l.bottom-i.bottom)/a)}function eh(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function th(s,e){let i=[],l=null,a=C=>{i.push(C);let{section:I}=C.completion;if(I){l||(l=[]);let F=typeof I=="string"?I:I.name;l.some(U=>U.name==F)||l.push(typeof I=="string"?{name:F}:I)}};for(let C of s)if(C.hasResult()){let I=C.result.getMatch;if(C.result.filter===!1)for(let F of C.result.options)a(new pr(F,C.source,I?I(F):[],1e9-i.length));else{let F=new vf(e.sliceDoc(C.from,C.to));for(let U of C.result.options)if(F.match(U.label)){let ie=U.displayLabel?I?I(U,F.matched):[]:F.matched;a(new pr(U,C.source,ie,F.score+(U.boost||0)))}}}if(l){let C=Object.create(null),I=0,F=(U,ie)=>{var ye,Ee;return((ye=U.rank)!==null&&ye!==void 0?ye:1e9)-((Ee=ie.rank)!==null&&Ee!==void 0?Ee:1e9)||(U.name<ie.name?-1:1)};for(let U of l.sort(F))I-=1e5,C[U.name]=I;for(let U of i){let{section:ie}=U.completion;ie&&(U.score+=C[typeof ie=="string"?ie:ie.name])}}let c=[],m=null,w=e.facet(ai).compareCompletions;for(let C of i.sort((I,F)=>F.score-I.score||w(I.completion,F.completion))){let I=C.completion;!m||m.label!=I.label||m.detail!=I.detail||m.type!=null&&I.type!=null&&m.type!=I.type||m.apply!=I.apply||m.boost!=I.boost?c.push(C):eh(C.completion)>eh(m)&&(c[c.length-1]=C),m=C.completion}return c}class Gl{constructor(e,i,l,a,c,m){this.options=e,this.attrs=i,this.tooltip=l,this.timestamp=a,this.selected=c,this.disabled=m}setSelected(e,i){return e==this.selected||e>=this.options.length?this:new Gl(this.options,ih(i,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,i,l,a,c){let m=th(e,i);if(!m.length)return a&&e.some(C=>C.state==1)?new Gl(a.options,a.attrs,a.tooltip,a.timestamp,a.selected,!0):null;let w=i.facet(ai).selectOnOpen?0:-1;if(a&&a.selected!=w&&a.selected!=-1){let C=a.options[a.selected].completion;for(let I=0;I<m.length;I++)if(m[I].completion==C){w=I;break}}return new Gl(m,ih(l,w),{pos:e.reduce((C,I)=>I.hasResult()?Math.min(C,I.from):C,1e8),create:uo,above:c.aboveCursor},a?a.timestamp:Date.now(),w,!1)}map(e){return new Gl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Sa{constructor(e,i,l){this.active=e,this.id=i,this.open=l}static start(){return new Sa(wu,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:i}=e,l=i.facet(ai),c=(l.override||i.languageDataAt("autocomplete",$i(i)).map(mf)).map(w=>(this.active.find(I=>I.source==w)||new ei(w,this.active.some(I=>I.state!=0)?1:0)).update(e,l));c.length==this.active.length&&c.every((w,C)=>w==this.active[C])&&(c=this.active);let m=this.open;m&&e.docChanged&&(m=m.map(e.changes)),e.selection||c.some(w=>w.hasResult()&&e.changes.touchesRange(w.from,w.to))||!nh(c,this.active)?m=Gl.build(c,i,this.id,m,l):m&&m.disabled&&!c.some(w=>w.state==1)&&(m=null),!m&&c.every(w=>w.state!=1)&&c.some(w=>w.hasResult())&&(c=c.map(w=>w.hasResult()?new ei(w.source,0):w));for(let w of e.effects)w.is(sh)&&(m=m&&m.setSelected(w.value,this.id));return c==this.active&&m==this.open?this:new Sa(c,this.id,m)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:wf}}function nh(s,e){if(s==e)return!0;for(let i=0,l=0;;){for(;i<s.length&&!s[i].hasResult;)i++;for(;l<e.length&&!e[l].hasResult;)l++;let a=i==s.length,c=l==e.length;if(a||c)return a==c;if(s[i++].result!=e[l++].result)return!1}}const wf={"aria-autocomplete":"list"};function ih(s,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(i["aria-activedescendant"]=s+"-"+e),i}const wu=[];function rh(s){return s.isUserEvent("input.type")?"input":s.isUserEvent("delete.backward")?"delete":null}class ei{constructor(e,i,l=-1){this.source=e,this.state=i,this.explicitPos=l}hasResult(){return!1}update(e,i){let l=rh(e),a=this;l?a=a.handleUserEvent(e,l,i):e.docChanged?a=a.handleChange(e):e.selection&&a.state!=0&&(a=new ei(a.source,0));for(let c of e.effects)if(c.is(Xa))a=new ei(a.source,1,c.value?$i(e.state):-1);else if(c.is(ba))a=new ei(a.source,0);else if(c.is(Sf))for(let m of c.value)m.source==a.source&&(a=m);return a}handleUserEvent(e,i,l){return i=="delete"||!l.activateOnTyping?this.map(e.changes):new ei(this.source,1)}handleChange(e){return e.changes.touchesRange($i(e.startState))?new ei(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ei(this.source,this.state,e.mapPos(this.explicitPos))}}class cl extends ei{constructor(e,i,l,a,c){super(e,2,i),this.result=l,this.from=a,this.to=c}hasResult(){return!0}handleUserEvent(e,i,l){var a;let c=e.changes.mapPos(this.from),m=e.changes.mapPos(this.to,1),w=$i(e.state);if((this.explicitPos<0?w<=c:w<this.from)||w>m||i=="delete"&&$i(e.startState)==this.from)return new ei(this.source,i=="input"&&l.activateOnTyping?1:0);let C=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),I;return bf(this.result.validFor,e.state,c,m)?new cl(this.source,C,this.result,c,m):this.result.update&&(I=this.result.update(this.result,c,m,new cf(e.state,w,C>=0)))?new cl(this.source,C,I,I.from,(a=I.to)!==null&&a!==void 0?a:$i(e.state)):new ei(this.source,1,C)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ei(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new cl(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function bf(s,e,i,l){if(!s)return!1;let a=e.sliceDoc(i,l);return typeof s=="function"?s(a,i,l,e):pf(s,!0).test(a)}const Sf=A.Py.define({map(s,e){return s.map(i=>i.map(e))}}),sh=A.Py.define(),Zi=A.QQ.define({create(){return Sa.start()},update(s,e){return s.update(e)},provide:s=>[ee.hJ.from(s,e=>e.tooltip),ee.tk.contentAttributes.from(s,e=>e.attrs)]});function Cf(s,e){const i=e.completion.apply||e.completion.label;let l=s.state.field(Zi).active.find(a=>a.source==e.source);return l instanceof cl?(typeof i=="string"?s.dispatch(Object.assign(Object.assign({},ja(s.state,i,l.from,l.to)),{annotations:gf.of(e.completion)})):i(s,e.completion,l.from,l.to),!0):!1}const uo=xf(Zi,Cf);function jl(s,e="option"){return i=>{let l=i.state.field(Zi,!1);if(!l||!l.open||l.open.disabled||Date.now()-l.open.timestamp<i.state.facet(ai).interactionDelay)return!1;let a=1,c;e=="page"&&(c=(0,ee.gB)(i,l.open.tooltip))&&(a=Math.max(2,Math.floor(c.dom.offsetHeight/c.dom.querySelector("li").offsetHeight)-1));let{length:m}=l.open.options,w=l.open.selected>-1?l.open.selected+a*(s?1:-1):s?0:m-1;return w<0?w=e=="page"?0:m-1:w>=m&&(w=e=="page"?m-1:0),i.dispatch({effects:sh.of(w)}),!0}}const Nh=s=>{let e=s.state.field(Zi,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(ai).interactionDelay?!1:Cf(s,e.open.options[e.open.selected])},Fh=s=>s.state.field(Zi,!1)?(s.dispatch({effects:Xa.of(!0)}),!0):!1,oh=s=>{let e=s.state.field(Zi,!1);return!e||!e.active.some(i=>i.state!=0)?!1:(s.dispatch({effects:ba.of(null)}),!0)};class Xl{constructor(e,i){this.active=e,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const tt=50,lh=1e3,Wh=ee.lg.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of s.state.field(Zi).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(Zi);if(!s.selectionSet&&!s.docChanged&&s.startState.field(Zi)==e)return;let i=s.transactions.some(l=>(l.selection||l.docChanged)&&!rh(l));for(let l=0;l<this.running.length;l++){let a=this.running[l];if(i||a.updates.length+s.transactions.length>tt&&Date.now()-a.time>lh){for(let c of a.context.abortListeners)try{c()}catch(m){(0,ee.OO)(this.view.state,m)}a.context.abortListeners=null,this.running.splice(l--,1)}else a.updates.push(...s.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(l=>l.state==1&&!this.running.some(a=>a.active.source==l.source))?setTimeout(()=>this.startUpdate(),50):-1,this.composing!=0)for(let l of s.transactions)rh(l)=="input"?this.composing=2:this.composing==2&&l.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:s}=this.view,e=s.field(Zi);for(let i of e.active)i.state==1&&!this.running.some(l=>l.active.source==i.source)&&this.startQuery(i)}startQuery(s){let{state:e}=this.view,i=$i(e),l=new cf(e,i,s.explicitPos==i),a=new Xl(s,l);this.running.push(a),Promise.resolve(s.source(l)).then(c=>{a.context.aborted||(a.done=c||null,this.scheduleAccept())},c=>{this.view.dispatch({effects:ba.of(null)}),(0,ee.OO)(this.view.state,c)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ai).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet(ai);for(let l=0;l<this.running.length;l++){let a=this.running[l];if(a.done===void 0)continue;if(this.running.splice(l--,1),a.done){let m=new cl(a.active.source,a.active.explicitPos,a.done,a.done.from,(s=a.done.to)!==null&&s!==void 0?s:$i(a.updates.length?a.updates[0].startState:this.view.state));for(let w of a.updates)m=m.update(w,i);if(m.hasResult()){e.push(m);continue}}let c=this.view.state.field(Zi).active.find(m=>m.source==a.active.source);if(c&&c.state==1)if(a.done==null){let m=new ei(a.active.source,0);for(let w of a.updates)m=m.update(w,i);m.state!=1&&e.push(m)}else this.startQuery(c)}e.length&&this.view.dispatch({effects:Sf.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(Zi,!1);if(e&&e.tooltip&&this.view.state.facet(ai).closeOnBlur){let i=e.open&&(0,ee.gB)(this.view,e.open.tooltip);(!i||!i.dom.contains(s.relatedTarget))&&this.view.dispatch({effects:ba.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Xa.of(!1)}),20),this.composing=0}}}),Fo=ee.tk.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class bu{constructor(e,i,l,a){this.field=e,this.line=i,this.from=l,this.to=a}}class Ca{constructor(e,i,l){this.field=e,this.from=i,this.to=l}map(e){let i=e.mapPos(this.from,-1,MapMode.TrackDel),l=e.mapPos(this.to,1,MapMode.TrackDel);return i==null||l==null?null:new Ca(this.field,i,l)}}class ah{constructor(e,i){this.lines=e,this.fieldPositions=i}instantiate(e,i){let l=[],a=[i],c=e.doc.lineAt(i),m=/^\s*/.exec(c.text)[0];for(let C of this.lines){if(l.length){let I=m,F=/^\t*/.exec(C)[0].length;for(let U=0;U<F;U++)I+=e.facet(indentUnit);a.push(i+I.length-F),C=I+C.slice(F)}l.push(C),i+=C.length+1}let w=this.fieldPositions.map(C=>new Ca(C.field,a[C.line]+C.from,a[C.line]+C.to));return{text:l,ranges:w}}static parse(e){let i=[],l=[],a=[],c;for(let m of e.split(/\r\n?|\n/)){for(;c=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(m);){let w=c[1]?+c[1]:null,C=c[2]||c[3]||"",I=-1;for(let F=0;F<i.length;F++)(w!=null?i[F].seq==w:C&&i[F].name==C)&&(I=F);if(I<0){let F=0;for(;F<i.length&&(w==null||i[F].seq!=null&&i[F].seq<w);)F++;i.splice(F,0,{seq:w,name:C}),I=F;for(let U of a)U.field>=I&&U.field++}a.push(new bu(I,l.length,c.index,c.index+C.length)),m=m.slice(0,c.index)+C+m.slice(c.index+c[0].length)}for(let w;w=/\\([{}])/.exec(m);){m=m.slice(0,w.index)+w[1]+m.slice(w.index+w[0].length);for(let C of a)C.line==l.length&&C.from>w.index&&(C.from--,C.to--)}l.push(m)}return new ah(l,a)}}let Qi=ee.p.widget({widget:new class extends ee.l9{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),Su=ee.p.mark({class:"cm-snippetField"});class Jl{constructor(e,i){this.ranges=e,this.active=i,this.deco=ee.p.set(e.map(l=>(l.from==l.to?Qi:Su).range(l.from,l.to)))}map(e){let i=[];for(let l of this.ranges){let a=l.map(e);if(!a)return null;i.push(a)}return new Jl(i,this.active)}selectionInsideField(e){return e.ranges.every(i=>this.ranges.some(l=>l.field==this.active&&l.from<=i.from&&l.to>=i.to))}}const Yl=A.Py.define({map(s,e){return s&&s.map(e)}}),Cu=A.Py.define(),Wo=A.QQ.define({create(){return null},update(s,e){for(let i of e.effects){if(i.is(Yl))return i.value;if(i.is(Cu)&&s)return new Jl(s.ranges,i.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>ee.tk.decorations.from(s,e=>e?e.deco:ee.p.none)});function Hh(s,e){return A.jT.create(s.filter(i=>i.field==e).map(i=>A.jT.range(i.from,i.to)))}function ku(s){let e=ah.parse(s);return(i,l,a,c)=>{let{text:m,ranges:w}=e.instantiate(i.state,a),C={changes:{from:a,to:c,insert:Text.of(m)},scrollIntoView:!0,annotations:l?gf.of(l):void 0};if(w.length&&(C.selection=Hh(w,0)),w.length>1){let I=new Jl(w,0),F=C.effects=[Yl.of(I)];i.state.field(Wo,!1)===void 0&&F.push(StateEffect.appendConfig.of([Wo,ka,Mf,Fo]))}i.dispatch(i.state.update(C))}}function kf(s){return({state:e,dispatch:i})=>{let l=e.field(Wo,!1);if(!l||s<0&&l.active==0)return!1;let a=l.active+s,c=s>0&&!l.ranges.some(m=>m.field==a+s);return i(e.update({selection:Hh(l.ranges,a),effects:Yl.of(c?null:new Jl(l.ranges,a)),scrollIntoView:!0})),!0}}const co=({state:s,dispatch:e})=>s.field(Wo,!1)?(e(s.update({effects:Yl.of(null)})),!0):!1,gr=kf(1),zh=kf(-1);function cc(s){let e=s.field(Wo,!1);return!!(e&&e.ranges.some(i=>i.field==e.active+1))}function Af(s){let e=s.field(Wo,!1);return!!(e&&e.active>0)}const Au=[{key:"Tab",run:gr,shift:zh},{key:"Escape",run:co}],Tf=A.r$.define({combine(s){return s.length?s[0]:Au}}),ka=A.Wl.highest(ee.$f.compute([Tf],s=>s.facet(Tf)));function Tu(s,e){return Object.assign(Object.assign({},e),{apply:ku(s)})}const Mf=ee.tk.domEventHandlers({mousedown(s,e){let i=e.state.field(Wo,!1),l;if(!i||(l=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let a=i.ranges.find(c=>c.from<=l&&c.to>=l);return!a||a.field==i.active?!1:(e.dispatch({selection:Hh(i.ranges,a.field),effects:Yl.of(i.ranges.some(c=>c.field>a.field)?new Jl(i.ranges,a.field):null),scrollIntoView:!0}),!0)}});function Mu(s){let e=s.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${e}]+`,"ug")}catch(i){return new RegExp(`[w${e}]`,"g")}}function Rf(s,e){return new RegExp(e(s.source),s.unicode?"u":"")}const Ef=null;function Ru(s){return Ef[s]||(Ef[s]=new WeakMap)}function Vh(s,e,i,l,a){for(let c=s.iterLines(),m=0;!c.next().done;){let{value:w}=c,C;for(e.lastIndex=0;C=e.exec(w);)if(!l[C[0]]&&m+C.index!=a&&(i.push({type:"text",label:C[0]}),l[C[0]]=!0,i.length>=2e3))return;m+=w.length+1}}function $h(s,e,i,l,a){let c=s.length>=1e3,m=c&&e.get(s);if(m)return m;let w=[],C=Object.create(null);if(s.children){let I=0;for(let F of s.children){if(F.length>=1e3)for(let U of $h(F,e,i,l-I,a-I))C[U.label]||(C[U.label]=!0,w.push(U));else Vh(F,i,w,C,a-I);I+=F.length+1}}else Vh(s,i,w,C,a);return c&&w.length<2e3&&e.set(s,w),w}const dc=s=>{let e=s.state.languageDataAt("wordChars",s.pos).join(""),i=Mu(e),l=s.matchBefore(Rf(i,m=>m+"$"));if(!l&&!s.explicit)return null;let a=l?l.from:s.pos,c=$h(s.state.doc,Ru(e),i,5e4,a);return{from:a,options:c,validFor:Rf(i,m=>"^"+m)}},dl={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ho=A.Py.define({map(s,e){let i=e.mapPos(s,-1,A.gc.TrackAfter);return i==null?void 0:i}}),pl=new class extends A.uU{};pl.startSide=1,pl.endSide=-1;const hh=A.QQ.define({create(){return A.Xs.empty},update(s,e){if(e.selection){let i=e.state.doc.lineAt(e.selection.main.head).from,l=e.startState.doc.lineAt(e.startState.selection.main.head).from;i!=e.changes.mapPos(l,-1)&&(s=A.Xs.empty)}s=s.map(e.changes);for(let i of e.effects)i.is(Ho)&&(s=s.update({add:[pl.range(i.value,i.value+1)]}));return s}});function Of(){return[gl,hh]}const fh="()[]{}<>";function Aa(s){for(let e=0;e<fh.length;e+=2)if(fh.charCodeAt(e)==s)return fh.charAt(e+1);return(0,A.bg)(s<128?s:s+1)}function Zh(s,e){return s.languageDataAt("closeBrackets",e)[0]||dl}const Zs=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),gl=ee.tk.inputHandler.of((s,e,i,l)=>{if((Zs?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let a=s.state.selection.main;if(l.length>2||l.length==2&&(0,A.nZ)((0,A.gm)(l,0))==1||e!=a.from||i!=a.to)return!1;let c=Eu(s.state,l);return c?(s.dispatch(c),!0):!1}),Df=[{key:"Backspace",run:({state:s,dispatch:e})=>{if(s.readOnly)return!1;let l=Zh(s,s.selection.main.head).brackets||dl.brackets,a=null,c=s.changeByRange(m=>{if(m.empty){let w=Ou(s.doc,m.head);for(let C of l)if(C==w&&uh(s.doc,m.head)==Aa((0,A.gm)(C,0)))return{changes:{from:m.head-C.length,to:m.head+C.length},range:A.jT.cursor(m.head-C.length)}}return{range:a=m}});return a||e(s.update(c,{scrollIntoView:!0,userEvent:"delete.backward"})),!a}}];function Eu(s,e){let i=Zh(s,s.selection.main.head),l=i.brackets||dl.brackets;for(let a of l){let c=Aa((0,A.gm)(a,0));if(e==a)return c==a?Pu(s,a,l.indexOf(a+a+a)>-1,i):Du(s,a,c,i.before||dl.before);if(e==c&&Lf(s,s.selection.main.from))return Lu(s,a,c)}return null}function Lf(s,e){let i=!1;return s.field(hh).between(0,s.doc.length,l=>{l==e&&(i=!0)}),i}function uh(s,e){let i=s.sliceString(e,e+2);return i.slice(0,(0,A.nZ)((0,A.gm)(i,0)))}function Ou(s,e){let i=s.sliceString(e-2,e);return(0,A.nZ)((0,A.gm)(i,0))==i.length?i:i.slice(1)}function Du(s,e,i,l){let a=null,c=s.changeByRange(m=>{if(!m.empty)return{changes:[{insert:e,from:m.from},{insert:i,from:m.to}],effects:Ho.of(m.to+e.length),range:A.jT.range(m.anchor+e.length,m.head+e.length)};let w=uh(s.doc,m.head);return!w||/\s/.test(w)||l.indexOf(w)>-1?{changes:{insert:e+i,from:m.head},effects:Ho.of(m.head+e.length),range:A.jT.cursor(m.head+e.length)}:{range:a=m}});return a?null:s.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function Lu(s,e,i){let l=null,a=s.changeByRange(c=>c.empty&&uh(s.doc,c.head)==i?{changes:{from:c.head,to:c.head+i.length,insert:i},range:A.jT.cursor(c.head+i.length)}:l={range:c});return l?null:s.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Pu(s,e,i,l){let a=l.stringPrefixes||dl.stringPrefixes,c=null,m=s.changeByRange(w=>{if(!w.empty)return{changes:[{insert:e,from:w.from},{insert:e,from:w.to}],effects:Ho.of(w.to+e.length),range:A.jT.range(w.anchor+e.length,w.head+e.length)};let C=w.head,I=uh(s.doc,C),F;if(I==e){if(Pf(s,C))return{changes:{insert:e+e,from:C},effects:Ho.of(C+e.length),range:A.jT.cursor(C+e.length)};if(Lf(s,C)){let ie=i&&s.sliceDoc(C,C+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:C,to:C+ie.length,insert:ie},range:A.jT.cursor(C+ie.length)}}}else{if(i&&s.sliceDoc(C-2*e.length,C)==e+e&&(F=Bf(s,C-2*e.length,a))>-1&&Pf(s,F))return{changes:{insert:e+e+e+e,from:C},effects:Ho.of(C+e.length),range:A.jT.cursor(C+e.length)};if(s.charCategorizer(C)(I)!=A.D0.Word&&Bf(s,C,a)>-1&&!Bu(s,C,e,a))return{changes:{insert:e+e,from:C},effects:Ho.of(C+e.length),range:A.jT.cursor(C+e.length)}}return{range:c=w}});return c?null:s.update(m,{scrollIntoView:!0,userEvent:"input.type"})}function Pf(s,e){let i=kn(s).resolveInner(e+1);return i.parent&&i.from==e}function Bu(s,e,i,l){let a=kn(s).resolveInner(e,-1),c=l.reduce((m,w)=>Math.max(m,w.length),0);for(let m=0;m<5;m++){let w=s.sliceDoc(a.from,Math.min(a.to,a.from+i.length+c)),C=w.indexOf(i);if(!C||C>-1&&l.indexOf(w.slice(0,C))>-1){let F=a.firstChild;for(;F&&F.from==a.from&&F.to-F.from>i.length+C;){if(s.sliceDoc(F.to-i.length,F.to)==i)return!1;F=F.firstChild}return!0}let I=a.to==e&&a.parent;if(!I)break;a=I}return!1}function Bf(s,e,i){let l=s.charCategorizer(e);if(l(s.sliceDoc(e-1,e))!=A.D0.Word)return e;for(let a of i){let c=e-a.length;if(s.sliceDoc(c,e)==a&&l(s.sliceDoc(c-1,c))!=A.D0.Word)return c}return-1}function Iu(s={}){return[Zi,ai.of(s),Wh,If,Fo]}const Kh=[{key:"Ctrl-Space",run:Fh},{key:"Escape",run:oh},{key:"ArrowDown",run:jl(!0)},{key:"ArrowUp",run:jl(!1)},{key:"PageDown",run:jl(!0,"page")},{key:"PageUp",run:jl(!1,"page")},{key:"Enter",run:Nh}],If=A.Wl.highest(ee.$f.computeN([ai],s=>s.facet(ai).defaultKeymap?[Kh]:[]));function _u(s){let e=s.field(Zi,!1);return e&&e.active.some(i=>i.state==1)?"pending":e&&e.active.some(i=>i.state!=0)?"active":null}const _f=new WeakMap;function gc(s){var e;let i=(e=s.field(Zi,!1))===null||e===void 0?void 0:e.open;if(!i||i.disabled)return[];let l=_f.get(i.options);return l||_f.set(i.options,l=i.options.map(a=>a.completion)),l}function mc(s){var e;let i=(e=s.field(Zi,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.options[i.selected].completion:null}function Nu(s){var e;let i=(e=s.field(Zi,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.selected:null}function vc(s){return sh.of(s)}class Fu{constructor(e,i,l){this.from=e,this.to=i,this.diagnostic=l}}class ml{constructor(e,i,l){this.diagnostics=e,this.panel=i,this.selected=l}static init(e,i,l){let a=e,c=l.facet(Gh).markerFilter;c&&(a=c(a));let m=ee.p.set(a.map(w=>w.from==w.to||w.from==w.to-1&&l.doc.lineAt(w.from).to==w.from?ee.p.widget({widget:new $u(w),diagnostic:w}).range(w.from):ee.p.mark({attributes:{class:"cm-lintRange cm-lintRange-"+w.severity+(w.markClass?" "+w.markClass:"")},diagnostic:w}).range(w.from,w.to)),!0);return new ml(m,i,Ql(m))}}function Ql(s,e=null,i=0){let l=null;return s.between(i,1e9,(a,c,{spec:m})=>{if(!(e&&m.diagnostic!=e))return l=new Fu(a,c,m.diagnostic),!1}),l}function Nf(s,e){let i=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(l=>l.is(ch))||s.changes.touchesRange(i.from,i.to))}function Ff(s,e){return s.field(Ki,!1)?e:e.concat(A.Py.appendConfig.of(Xf))}function Os(s,e){return{effects:Ff(s,[ch.of(e)])}}const ch=A.Py.define(),Uh=A.Py.define(),Wf=A.Py.define(),Ki=A.QQ.define({create(){return new ml(ee.p.none,null,null)},update(s,e){if(e.docChanged){let i=s.diagnostics.map(e.changes),l=null;if(s.selected){let a=e.changes.mapPos(s.selected.from,1);l=Ql(i,s.selected.diagnostic,a)||Ql(i,null,a)}s=new ml(i,s.panel,l)}for(let i of e.effects)i.is(ch)?s=ml.init(i.value,s.panel,e.state):i.is(Uh)?s=new ml(s.diagnostics,i.value?dh.open:null,s.selected):i.is(Wf)&&(s=new ml(s.diagnostics,s.panel,i.value));return s},provide:s=>[ee.mH.from(s,e=>e.panel),ee.tk.decorations.from(s,e=>e.diagnostics)]});function yc(s){let e=s.field(Ki,!1);return e?e.diagnostics.size:0}const Wu=ee.p.mark({class:"cm-lintRange cm-lintRange-active"});function Hu(s,e,i){let{diagnostics:l}=s.state.field(Ki),a=[],c=2e8,m=0;l.between(e-(i<0?1:0),e+(i>0?1:0),(C,I,{spec:F})=>{e>=C&&e<=I&&(C==I||(e>C||i>0)&&(e<I||i<0))&&(a.push(F.diagnostic),c=Math.min(C,c),m=Math.max(I,m))});let w=s.state.facet(Gh).tooltipFilter;return w&&(a=w(a)),a.length?{pos:c,end:m,above:s.state.doc.lineAt(c).to<m,create(){return{dom:Hf(s,a)}}}:null}function Hf(s,e){return f("ul",{class:"cm-tooltip-lint"},e.map(i=>Zf(s,i,!1)))}const qh=s=>{let e=s.state.field(Ki,!1);(!e||!e.panel)&&s.dispatch({effects:Ff(s.state,[Uh.of(!0)])});let i=(0,ee.Sd)(s,dh.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},zf=s=>{let e=s.state.field(Ki,!1);return!e||!e.panel?!1:(s.dispatch({effects:Uh.of(!1)}),!0)},zu=s=>{let e=s.state.field(Ki,!1);if(!e)return!1;let i=s.state.selection.main,l=e.diagnostics.iter(i.to+1);return!l.value&&(l=e.diagnostics.iter(0),!l.value||l.from==i.from&&l.to==i.to)?!1:(s.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0}),!0)},xc=s=>{let{state:e}=s,i=e.field(Ki,!1);if(!i)return!1;let l=e.selection.main,a,c,m,w;return i.diagnostics.between(0,e.doc.length,(C,I)=>{I<l.to&&(a==null||a<C)&&(a=C,c=I),(m==null||C>m)&&(m=C,w=I)}),m==null||a==null&&m==l.from?!1:(s.dispatch({selection:{anchor:a!=null?a:m,head:c!=null?c:w},scrollIntoView:!0}),!0)},Vu=[{key:"Mod-Shift-m",run:qh,preventDefault:!0},{key:"F8",run:zu}],Vf=null,Gh=A.r$.define({combine(s){return Object.assign({sources:s.map(e=>e.source)},(0,A.BO)(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,i)=>e?i?l=>e(l)||i(l):e:i}))}});function wc(s,e={}){return[Gh.of({source:s,config:e}),Vf,Xf]}function bc(s){let e=s.plugin(Vf);e&&e.force()}function $f(s){let e=[];if(s)e:for(let{name:i}of s){for(let l=0;l<i.length;l++){let a=i[l];if(/[a-zA-Z]/.test(a)&&!e.some(c=>c.toLowerCase()==a.toLowerCase())){e.push(a);continue e}}e.push("")}return e}function Zf(s,e,i){var l;let a=i?$f(e.actions):[];return f("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},f("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(l=e.actions)===null||l===void 0?void 0:l.map((c,m)=>{let w=!1,C=ie=>{if(ie.preventDefault(),w)return;w=!0;let ye=Ql(s.state.field(Ki).diagnostics,e);ye&&c.apply(s,ye.from,ye.to)},{name:I}=c,F=a[m]?I.indexOf(a[m]):-1,U=F<0?I:[I.slice(0,F),f("u",I.slice(F,F+1)),I.slice(F+1)];return f("button",{type:"button",class:"cm-diagnosticAction",onclick:C,onmousedown:C,"aria-label":` Action: ${I}${F<0?"":` (access key "${a[m]})"`}.`},U)}),e.source&&f("div",{class:"cm-diagnosticSource"},e.source))}class $u extends ee.l9{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return f("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Kf{constructor(e,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Zf(e,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class dh{constructor(e){this.view=e,this.items=[];let i=a=>{if(a.keyCode==27)zf(this.view),this.view.focus();else if(a.keyCode==38||a.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(a.keyCode==40||a.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(a.keyCode==36)this.moveSelection(0);else if(a.keyCode==35)this.moveSelection(this.items.length-1);else if(a.keyCode==13)this.view.focus();else if(a.keyCode>=65&&a.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:c}=this.items[this.selectedIndex],m=$f(c.actions);for(let w=0;w<m.length;w++)if(m[w].toUpperCase().charCodeAt(0)==a.keyCode){let C=Ql(this.view.state.field(Ki).diagnostics,c);C&&c.actions[w].apply(e,C.from,C.to)}}else return;a.preventDefault()},l=a=>{for(let c=0;c<this.items.length;c++)this.items[c].dom.contains(a.target)&&this.moveSelection(c)};this.list=f("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:l}),this.dom=f("div",{class:"cm-panel-lint"},this.list,f("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>zf(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Ki).selected;if(!e)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==e.diagnostic)return i;return-1}update(){let{diagnostics:e,selected:i}=this.view.state.field(Ki),l=0,a=!1,c=null;for(e.between(0,this.view.state.doc.length,(m,w,{spec:C})=>{let I=-1,F;for(let U=l;U<this.items.length;U++)if(this.items[U].diagnostic==C.diagnostic){I=U;break}I<0?(F=new Kf(this.view,C.diagnostic),this.items.splice(l,0,F),a=!0):(F=this.items[I],I>l&&(this.items.splice(l,I-l),a=!0)),i&&F.diagnostic==i.diagnostic?F.dom.hasAttribute("aria-selected")||(F.dom.setAttribute("aria-selected","true"),c=F):F.dom.hasAttribute("aria-selected")&&F.dom.removeAttribute("aria-selected"),l++});l<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)a=!0,this.items.pop();this.items.length==0&&(this.items.push(new Kf(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),a=!0),c?(this.list.setAttribute("aria-activedescendant",c.id),this.view.requestMeasure({key:this,read:()=>({sel:c.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:m,panel:w})=>{let C=w.height/this.list.offsetHeight;m.top<w.top?this.list.scrollTop-=(w.top-m.top)/C:m.bottom>w.bottom&&(this.list.scrollTop+=(m.bottom-w.bottom)/C)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),a&&this.sync()}sync(){let e=this.list.firstChild;function i(){let l=e;e=l.nextSibling,l.remove()}for(let l of this.items)if(l.dom.parentNode==this.list){for(;e!=l.dom;)i();e=l.dom.nextSibling}else this.list.insertBefore(l.dom,e);for(;e;)i()}moveSelection(e){if(this.selectedIndex<0)return;let i=this.view.state.field(Ki),l=Ql(i.diagnostics,this.items[e].diagnostic);l&&this.view.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0,effects:Wf.of(l)})}static open(e){return new dh(e)}}function ph(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function gh(s){return ph(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Zu=ee.tk.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:gh("#d11")},".cm-lintRange-warning":{backgroundImage:gh("orange")},".cm-lintRange-info":{backgroundImage:gh("#999")},".cm-lintRange-hint":{backgroundImage:gh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Uf(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}class Ku extends ee.SJ{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((i,l)=>Uf(i)<Uf(l.severity)?l.severity:i,"hint")}toDOM(e){let i=document.createElement("div");i.className="cm-lint-marker cm-lint-marker-"+this.severity;let l=this.diagnostics,a=e.state.facet(mh).tooltipFilter;return a&&(l=a(l)),l.length&&(i.onmouseover=()=>qu(e,i,l)),i}}function Uu(s,e){let i=l=>{let a=e.getBoundingClientRect();if(!(l.clientX>a.left-10&&l.clientX<a.right+10&&l.clientY>a.top-10&&l.clientY<a.bottom+10)){for(let c=l.target;c;c=c.parentNode)if(c.nodeType==1&&c.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",i),s.state.field(jf)&&s.dispatch({effects:Xh.of(null)})}};window.addEventListener("mousemove",i)}function qu(s,e,i){function l(){let m=s.elementAtHeight(e.getBoundingClientRect().top+5-s.documentTop);s.coordsAtPos(m.from)&&s.dispatch({effects:Xh.of({pos:m.from,above:!1,create(){return{dom:Hf(s,i),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,Uu(s,e)}let{hoverTime:a}=s.state.facet(mh),c=setTimeout(l,a);e.onmouseout=()=>{clearTimeout(c),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(c),c=setTimeout(l,a)}}function jh(s,e){let i=Object.create(null);for(let a of e){let c=s.lineAt(a.from);(i[c.from]||(i[c.from]=[])).push(a)}let l=[];for(let a in i)l.push(new Ku(i[a]).range(+a));return A.Xs.of(l,!0)}const qf=(0,ee.v5)({class:"cm-gutter-lint",markers:s=>s.state.field(Gf)}),Gf=A.QQ.define({create(){return A.Xs.empty},update(s,e){s=s.map(e.changes);let i=e.state.facet(mh).markerFilter;for(let l of e.effects)if(l.is(ch)){let a=l.value;i&&(a=i(a||[])),s=jh(e.state.doc,a.slice(0))}return s}}),Xh=A.Py.define(),jf=A.QQ.define({create(){return null},update(s,e){return s&&e.docChanged&&(s=Nf(e,s)?null:Object.assign(Object.assign({},s),{pos:e.changes.mapPos(s.pos)})),e.effects.reduce((i,l)=>l.is(Xh)?l.value:i,s)},provide:s=>ee.hJ.from(s)}),Gu=ee.tk.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:ph('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:ph('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:ph('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Xf=[Ki,ee.tk.decorations.compute([Ki],s=>{let{selected:e,panel:i}=s.field(Ki);return!e||!i||e.from==e.to?ee.p.none:ee.p.set([Wu.range(e.from,e.to)])}),(0,ee.bF)(Hu,{hideOn:Nf}),Zu],mh=A.r$.define({combine(s){return(0,A.BO)(s,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function Sc(s={}){return[mh.of(s),Gf,qf,Gu,jf]}function Cc(s,e){let i=s.field(Ki,!1);if(i&&i.diagnostics.size)for(let l=RangeSet.iter([i.diagnostics]);l.value;l.next())e(l.value.spec.diagnostic,l.from,l.to)}var Jh=function(e){e===void 0&&(e={});var i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(Df)),e.defaultKeymap!==!1&&(i=i.concat(Va)),e.searchKeymap!==!1&&(i=i.concat(No)),e.historyKeymap!==!1&&(i=i.concat(Qs)),e.foldKeymap!==!1&&(i=i.concat(he)),e.completionKeymap!==!1&&(i=i.concat(Kh)),e.lintKeymap!==!1&&(i=i.concat(Vu));var l=[];return e.lineNumbers!==!1&&l.push((0,ee.Eu)()),e.highlightActiveLineGutter!==!1&&l.push((0,ee.HQ)()),e.highlightSpecialChars!==!1&&l.push((0,ee.AE)()),e.history!==!1&&l.push(Ol()),e.foldGutter!==!1&&l.push(qe()),e.drawSelection!==!1&&l.push((0,ee.Uw)()),e.dropCursor!==!1&&l.push((0,ee.qr)()),e.allowMultipleSelections!==!1&&l.push(A.yy.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&l.push(Ko()),e.syntaxHighlighting!==!1&&l.push(Ge(gt,{fallback:!0})),e.bracketMatching!==!1&&l.push(An()),e.closeBrackets!==!1&&l.push(Of()),e.autocompletion!==!1&&l.push(Iu()),e.rectangularSelection!==!1&&l.push((0,ee.Zs)()),e.crosshairCursor!==!1&&l.push((0,ee.S2)()),e.highlightActiveLine!==!1&&l.push((0,ee.ZO)()),e.highlightSelectionMatches!==!1&&l.push(qt()),e.tabSize&&typeof e.tabSize=="number"&&l.push(re.of(" ".repeat(e.tabSize))),l.concat([ee.$f.of(i.flat())]).filter(Boolean)},kc=function(e){e===void 0&&(e={});var i=[];e.defaultKeymap!==!1&&(i=i.concat(defaultKeymap)),e.historyKeymap!==!1&&(i=i.concat(historyKeymap));var l=[];return e.highlightSpecialChars!==!1&&l.push(highlightSpecialChars()),e.history!==!1&&l.push(history()),e.drawSelection!==!1&&l.push(drawSelection()),e.syntaxHighlighting!==!1&&l.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),l.concat([keymap.of(i.flat())]).filter(Boolean)};const Ta="#e5c07b",Yh="#e06c75",Jf="#56b6c2",Yf="#ffffff",Ma="#abb2bf",vh="#7d8799",Qf="#61afef",eu="#98c379",Qh="#d19a66",tu="#c678dd",nu="#21252b",ef="#2c313a",tf="#282c34",yh="#353a42",iu="#3E4451",nf="#528bff",Ac={chalky:Ta,coral:Yh,cyan:Jf,invalid:Yf,ivory:Ma,stone:vh,malibu:Qf,sage:eu,whiskey:Qh,violet:tu,darkBackground:nu,highlightBackground:ef,background:tf,tooltipBackground:yh,selection:iu,cursor:nf},ru=ee.tk.theme({"&":{color:Ma,backgroundColor:tf},".cm-content":{caretColor:nf},".cm-cursor, .cm-dropCursor":{borderLeftColor:nf},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:iu},".cm-panels":{backgroundColor:nu,color:Ma},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:tf,color:vh,border:"none"},".cm-activeLineGutter":{backgroundColor:ef},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:yh},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:yh,borderBottomColor:yh},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ef,color:Ma}}},{dark:!0}),su=Ye.define([{tag:se.keyword,color:tu},{tag:[se.name,se.deleted,se.character,se.propertyName,se.macroName],color:Yh},{tag:[se.function(se.variableName),se.labelName],color:Qf},{tag:[se.color,se.constant(se.name),se.standard(se.name)],color:Qh},{tag:[se.definition(se.name),se.separator],color:Ma},{tag:[se.typeName,se.className,se.number,se.changed,se.annotation,se.modifier,se.self,se.namespace],color:Ta},{tag:[se.operator,se.operatorKeyword,se.url,se.escape,se.regexp,se.link,se.special(se.string)],color:Jf},{tag:[se.meta,se.comment],color:vh},{tag:se.strong,fontWeight:"bold"},{tag:se.emphasis,fontStyle:"italic"},{tag:se.strikethrough,textDecoration:"line-through"},{tag:se.link,color:vh,textDecoration:"underline"},{tag:se.heading,fontWeight:"bold",color:Yh},{tag:[se.atom,se.bool,se.special(se.variableName)],color:Qh},{tag:[se.processingInstruction,se.string,se.inserted],color:eu},{tag:se.invalid,color:Yf}]),ju=[ru,Ge(su)];var Xu=s=>({line:s.state.doc.lineAt(s.state.selection.main.from),lineCount:s.state.doc.lines,lineBreak:s.state.lineBreak,length:s.state.doc.length,readOnly:s.state.readOnly,tabSize:s.state.tabSize,selection:s.state.selection,selectionAsSingle:s.state.selection.asSingle().main,ranges:s.state.selection.ranges,selectionCode:s.state.sliceDoc(s.state.selection.main.from,s.state.selection.main.to),selections:s.state.selection.ranges.map(e=>s.state.sliceDoc(e.from,e.to)),selectedText:s.state.selection.ranges.some(e=>!e.empty)}),ou=A.q6.define();function Ju(s){var{value:e,selection:i,onChange:l,onStatistics:a,onCreateEditor:c,onUpdate:m,extensions:w=[],autoFocus:C,theme:I="light",height:F="",minHeight:U="",maxHeight:ie="",placeholder:ye="",width:Ee="",minWidth:ut="",maxWidth:ln="",editable:nn=!0,readOnly:Rt=!1,indentWithTab:an=!0,basicSetup:lt=!0,root:it,initialState:nt}=s,[Bt,Hn]=(0,Oe.useState)(),[st,Ct]=(0,Oe.useState)(),[Sn,hi]=(0,Oe.useState)(),mr=ee.tk.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),po=ee.tk.theme({"&":{height:F,minHeight:U,maxHeight:ie,width:Ee,minWidth:ut,maxWidth:ln}}),ps=ee.tk.updateListener.of(Rr=>{if(Rr.docChanged&&typeof l=="function"&&!Rr.transactions.some(Ds=>Ds.annotation(ou))){var Er=Rr.state.doc,er=Er.toString();l(er,Rr)}a&&a(Xu(Rr))}),zn=[ps,po];switch(an&&zn.unshift(ee.$f.of([ca])),lt&&(typeof lt=="boolean"?zn.unshift(Jh()):zn.unshift(Jh(lt))),ye&&zn.unshift((0,ee.W$)(ye)),I){case"light":zn.push(mr);break;case"dark":zn.push(ju);break;case"none":break;default:zn.push(I);break}return nn===!1&&zn.push(ee.tk.editable.of(!1)),Rt&&zn.push(A.yy.readOnly.of(!0)),m&&typeof m=="function"&&zn.push(ee.tk.updateListener.of(m)),zn=zn.concat(w),(0,Oe.useEffect)(()=>{if(Bt&&!Sn){var Rr={doc:e,selection:i,extensions:zn},Er=nt?A.yy.fromJSON(nt.json,Rr,nt.fields):A.yy.create(Rr);if(hi(Er),!st){var er=new ee.tk({state:Er,parent:Bt,root:it});Ct(er),c&&c(er,Er)}}return()=>{st&&(hi(void 0),Ct(void 0))}},[Bt,Sn]),(0,Oe.useEffect)(()=>Hn(s.container),[s.container]),(0,Oe.useEffect)(()=>()=>{st&&(st.destroy(),Ct(void 0))},[st]),(0,Oe.useEffect)(()=>{C&&st&&st.focus()},[C,st]),(0,Oe.useEffect)(()=>{st&&st.dispatch({effects:A.Py.reconfigure.of(zn)})},[I,w,F,U,ie,Ee,ut,ln,ye,nn,Rt,an,lt,l,m]),(0,Oe.useEffect)(()=>{if(e!==void 0){var Rr=st?st.state.doc.toString():"";st&&e!==Rr&&st.dispatch({changes:{from:0,to:Rr.length,insert:e||""},annotations:[ou.of(!0)]})}},[e,st]),{state:Sn,setState:hi,view:st,setView:Ct,container:Bt,setContainer:Hn}}var xh=Pe(11527),Yu=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],lu=(0,Oe.forwardRef)((s,e)=>{var{className:i,value:l="",selection:a,extensions:c=[],onChange:m,onStatistics:w,onCreateEditor:C,onUpdate:I,autoFocus:F,theme:U="light",height:ie,minHeight:ye,maxHeight:Ee,width:ut,minWidth:ln,maxWidth:nn,basicSetup:Rt,placeholder:an,indentWithTab:lt,editable:it,readOnly:nt,root:Bt,initialState:Hn}=s,st=(0,N.Z)(s,Yu),Ct=(0,Oe.useRef)(null),{state:Sn,view:hi,container:mr,setContainer:po}=Ju({container:Ct.current,root:Bt,value:l,autoFocus:F,theme:U,height:ie,minHeight:ye,maxHeight:Ee,width:ut,minWidth:ln,maxWidth:nn,basicSetup:Rt,placeholder:an,indentWithTab:lt,editable:it,readOnly:nt,selection:a,onChange:m,onStatistics:w,onCreateEditor:C,onUpdate:I,extensions:c,initialState:Hn});if((0,Oe.useImperativeHandle)(e,()=>({editor:Ct.current,state:Sn,view:hi}),[Ct,mr,Sn,hi]),typeof l!="string")throw new Error("value must be typeof string but got "+typeof l);var ps=typeof U=="string"?"cm-theme-"+U:"cm-theme";return(0,xh.jsx)("div",(0,q.Z)({ref:Ct,className:""+ps+(i?" "+i:"")},st))});lu.displayName="CodeMirror";var Qu=lu},32699:function(Ze,hn,Pe){Ze=Pe.nmd(Ze);var q;(function(){var N,Oe="4.17.21",A=200,ee="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",fn="Expected a function",Ot="Invalid `variable` option passed into `_.template`",un="__lodash_hash_undefined__",Be=500,ct="__lodash_placeholder__",It=1,Wt=2,Dt=4,je=1,Qt=2,me=1,We=2,kt=4,gn=8,Ht=16,Cn=32,Vn=64,zt=128,$n=256,Dn=512,Ln=30,sn="...",ui=800,Ni=16,jr=1,Xr=2,Or=3,en=1/0,wt=9007199254740991,Gt=17976931348623157e292,ir=0/0,jt=4294967295,ci=jt-1,ys=jt>>>1,ti=[["ary",zt],["bind",me],["bindKey",We],["curry",gn],["curryRight",Ht],["flip",Dn],["partial",Cn],["partialRight",Vn],["rearg",$n]],rr="[object Arguments]",Ci="[object Array]",Us="[object AsyncFunction]",ni="[object Boolean]",Gn="[object Date]",Dr="[object DOMException]",Lr="[object Error]",sr="[object Function]",Pr="[object GeneratorFunction]",jn="[object Map]",Le="[object Number]",zo="[object Null]",mn="[object Object]",di="[object Promise]",pi="[object Proxy]",gi="[object RegExp]",Zn="[object Set]",vr="[object String]",Br="[object Symbol]",Ir="[object Undefined]",yr="[object WeakMap]",Fi="[object WeakSet]",xr="[object ArrayBuffer]",_r="[object DataView]",In="[object Float32Array]",On="[object Float64Array]",Jr="[object Int8Array]",ke="[object Int16Array]",ii="[object Int32Array]",pt="[object Uint8Array]",Zt="[object Uint8ClampedArray]",Nr="[object Uint16Array]",mi="[object Uint32Array]",Xn=/\b__p \+= '';/g,Rn=/\b(__p \+=) '' \+/g,Wi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ri=/&(?:amp|lt|gt|quot|#39);/g,cn=/[&<>"']/g,Kn=RegExp(Ri.source),on=RegExp(cn.source),or=/<%-([\s\S]+?)%>/g,lr=/<%([\s\S]+?)%>/g,se=/<%=([\s\S]+?)%>/g,qs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yr=/^\w*$/,Jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ei=/[\\^$.*+?()[\]{}|]/g,Fr=RegExp(Ei.source),xs=/^\s+/,vi=/\s/,wr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ui=/\{\n\/\* \[wrapped with (.+)\] \*/,kn=/,? & /,qi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ws=/[()=,{}\[\]\/\s]/,Gs=/\\(\\)?/g,Wr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_n=/\w*$/,Hr=/^[-+]0x[0-9a-f]+$/i,zr=/^0b[01]+$/i,_=/^\[object .+?Constructor\]$/,p=/^0o[0-7]+$/i,v=/^(?:0|[1-9]\d*)$/,b=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,k=/($^)/,E=/['\n\r\u2028\u2029\\]/g,D="\\ud800-\\udfff",W="\\u0300-\\u036f",Z="\\ufe20-\\ufe2f",re="\\u20d0-\\u20ff",fe=W+Z+re,we="\\u2700-\\u27bf",He="a-z\\xdf-\\xf6\\xf8-\\xff",Ne="\\xac\\xb1\\xd7\\xf7",yt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Gi="\\u2000-\\u206f",Pn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ji="A-Z\\xc0-\\xd6\\xd8-\\xde",xn="\\ufe0e\\ufe0f",Vo=Ne+yt+Gi+Pn,mo="['\u2019]",vo="["+D+"]",$o="["+Vo+"]",ar="["+fe+"]",bl="\\d+",Qr="["+we+"]",Zo="["+He+"]",Sl="[^"+D+Vo+bl+we+He+ji+"]",yo="\\ud83c[\\udffb-\\udfff]",Ko="(?:"+ar+"|"+yo+")",Uo="[^"+D+"]",qo="(?:\\ud83c[\\udde6-\\uddff]){2}",Cl="[\\ud800-\\udbff][\\udc00-\\udfff]",bs="["+ji+"]",kl="\\u200d",Is="(?:"+Zo+"|"+Sl+")",Go="(?:"+bs+"|"+Sl+")",_s="(?:"+mo+"(?:d|ll|m|re|s|t|ve))?",Ss="(?:"+mo+"(?:D|LL|M|RE|S|T|VE))?",xo=Ko+"?",Vr="["+xn+"]?",Al="(?:"+kl+"(?:"+[Uo,qo,Cl].join("|")+")"+Vr+xo+")*",Ns="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",js=Vr+xo+Al,Ml="(?:"+[Qr,qo,Cl].join("|")+")"+js,B="(?:"+[Uo+ar+"?",ar,qo,Cl,vo].join("|")+")",G=RegExp(mo,"g"),j=RegExp(ar,"g"),K=RegExp(yo+"(?="+yo+")|"+B+js,"g"),X=RegExp([bs+"?"+Zo+"+"+_s+"(?="+[$o,bs,"$"].join("|")+")",Go+"+"+Ss+"(?="+[$o,bs+Is,"$"].join("|")+")",bs+"?"+Is+"+"+_s,bs+"+"+Ss,Tl,Ns,bl,Ml].join("|"),"g"),ne=RegExp("["+kl+D+fe+xn+"]"),he=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,de=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],le=-1,ae={};ae[In]=ae[On]=ae[Jr]=ae[ke]=ae[ii]=ae[pt]=ae[Zt]=ae[Nr]=ae[mi]=!0,ae[rr]=ae[Ci]=ae[xr]=ae[ni]=ae[_r]=ae[Gn]=ae[Lr]=ae[sr]=ae[jn]=ae[Le]=ae[mn]=ae[gi]=ae[Zn]=ae[vr]=ae[yr]=!1;var ue={};ue[rr]=ue[Ci]=ue[xr]=ue[_r]=ue[ni]=ue[Gn]=ue[In]=ue[On]=ue[Jr]=ue[ke]=ue[ii]=ue[jn]=ue[Le]=ue[mn]=ue[gi]=ue[Zn]=ue[vr]=ue[Br]=ue[pt]=ue[Zt]=ue[Nr]=ue[mi]=!0,ue[Lr]=ue[sr]=ue[yr]=!1;var Se={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ce={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qe=parseFloat,ze=parseInt,Ye=typeof Pe.g=="object"&&Pe.g&&Pe.g.Object===Object&&Pe.g,Ke=typeof self=="object"&&self&&self.Object===Object&&self,Te=Ye||Ke||Function("return this")(),Qe=hn&&!hn.nodeType&&hn,Ge=Qe&&!0&&Ze&&!Ze.nodeType&&Ze,rt=Ge&&Ge.exports===Qe,Kt=rt&&Ye.process,dt=function(){try{var V=Ge&&Ge.require&&Ge.require("util").types;return V||Kt&&Kt.binding&&Kt.binding("util")}catch(oe){}}(),gt=dt&&dt.isArrayBuffer,Xt=dt&&dt.isDate,Ue=dt&&dt.isMap,Fe=dt&&dt.isRegExp,Me=dt&&dt.isSet,Xe=dt&&dt.isTypedArray;function et(V,oe,Q){switch(Q.length){case 0:return V.call(oe);case 1:return V.call(oe,Q[0]);case 2:return V.call(oe,Q[0],Q[1]);case 3:return V.call(oe,Q[0],Q[1],Q[2])}return V.apply(oe,Q)}function ot(V,oe,Q,De){for(var $e=-1,Tt=V==null?0:V.length;++$e<Tt;){var Bn=V[$e];oe(De,Bn,Q(Bn),V)}return De}function Ve(V,oe){for(var Q=-1,De=V==null?0:V.length;++Q<De&&oe(V[Q],Q,V)!==!1;);return V}function Lt(V,oe){for(var Q=V==null?0:V.length;Q--&&oe(V[Q],Q,V)!==!1;);return V}function An(V,oe){for(var Q=-1,De=V==null?0:V.length;++Q<De;)if(!oe(V[Q],Q,V))return!1;return!0}function wn(V,oe){for(var Q=-1,De=V==null?0:V.length,$e=0,Tt=[];++Q<De;){var Bn=V[Q];oe(Bn,Q,V)&&(Tt[$e++]=Bn)}return Tt}function bn(V,oe){var Q=V==null?0:V.length;return!!Q&&St(V,oe,0)>-1}function Oi(V,oe,Q){for(var De=-1,$e=V==null?0:V.length;++De<$e;)if(Q(oe,V[De]))return!0;return!1}function ft(V,oe){for(var Q=-1,De=V==null?0:V.length,$e=Array(De);++Q<De;)$e[Q]=oe(V[Q],Q,V);return $e}function yi(V,oe){for(var Q=-1,De=oe.length,$e=V.length;++Q<De;)V[$e+Q]=oe[Q];return V}function Un(V,oe,Q,De){var $e=-1,Tt=V==null?0:V.length;for(De&&Tt&&(Q=V[++$e]);++$e<Tt;)Q=oe(Q,V[$e],$e,V);return Q}function At(V,oe,Q,De){var $e=V==null?0:V.length;for(De&&$e&&(Q=V[--$e]);$e--;)Q=oe(Q,V[$e],$e,V);return Q}function ri(V,oe){for(var Q=-1,De=V==null?0:V.length;++Q<De;)if(oe(V[Q],Q,V))return!0;return!1}var br=es("length");function Xi(V){return V.split("")}function si(V){return V.match(qi)||[]}function bt(V,oe,Q){var De;return Q(V,function($e,Tt,Bn){if(oe($e,Tt,Bn))return De=Tt,!1}),De}function vn(V,oe,Q,De){for(var $e=V.length,Tt=Q+(De?1:-1);De?Tt--:++Tt<$e;)if(oe(V[Tt],Tt,V))return Tt;return-1}function St(V,oe,Q){return oe===oe?El(V,oe,Q):vn(V,Tn,Q)}function ki(V,oe,Q,De){for(var $e=Q-1,Tt=V.length;++$e<Tt;)if(De(V[$e],oe))return $e;return-1}function Tn(V){return V!==V}function En(V,oe){var Q=V==null?0:V.length;return Q?hr(V,oe)/Q:ir}function es(V){return function(oe){return oe==null?N:oe[V]}}function Di(V){return function(oe){return V==null?N:V[oe]}}function Li(V,oe,Q,De,$e){return $e(V,function(Tt,Bn,Jt){Q=De?(De=!1,Tt):oe(Q,Tt,Bn,Jt)}),Q}function Ut(V,oe){var Q=V.length;for(V.sort(oe);Q--;)V[Q]=V[Q].value;return V}function hr(V,oe){for(var Q,De=-1,$e=V.length;++De<$e;){var Tt=oe(V[De]);Tt!==N&&(Q=Q===N?Tt:Q+Tt)}return Q}function Yn(V,oe){for(var Q=-1,De=Array(V);++Q<V;)De[Q]=oe(Q);return De}function wo(V,oe){return ft(oe,function(Q){return[Q,V[Q]]})}function Pi(V){return V&&V.slice(0,ns(V)+1).replace(xs,"")}function yn(V){return function(oe){return V(oe)}}function qn(V,oe){return ft(oe,function(Q){return V[Q]})}function Cs(V,oe){return V.has(oe)}function ts(V,oe){for(var Q=-1,De=V.length;++Q<De&&St(oe,V[Q],0)>-1;);return Q}function Rl(V,oe){for(var Q=V.length;Q--&&St(oe,V[Q],0)>-1;);return Q}function bo(V,oe){for(var Q=V.length,De=0;Q--;)V[Q]===oe&&++De;return De}var jo=Di(Se),So=Di(Ae);function ta(V){return"\\"+_e[V]}function na(V,oe){return V==null?N:V[oe]}function Sr(V){return ne.test(V)}function $r(V){return he.test(V)}function ks(V){for(var oe,Q=[];!(oe=V.next()).done;)Q.push(oe.value);return Q}function Fs(V){var oe=-1,Q=Array(V.size);return V.forEach(function(De,$e){Q[++oe]=[$e,De]}),Q}function Xo(V,oe){return function(Q){return V(oe(Q))}}function Cr(V,oe){for(var Q=-1,De=V.length,$e=0,Tt=[];++Q<De;){var Bn=V[Q];(Bn===oe||Bn===ct)&&(V[Q]=ct,Tt[$e++]=Q)}return Tt}function Xs(V){var oe=-1,Q=Array(V.size);return V.forEach(function(De){Q[++oe]=De}),Q}function Ws(V){var oe=-1,Q=Array(V.size);return V.forEach(function(De){Q[++oe]=[De,De]}),Q}function El(V,oe,Q){for(var De=Q-1,$e=V.length;++De<$e;)if(V[De]===oe)return De;return-1}function Co(V,oe,Q){for(var De=Q+1;De--;)if(V[De]===oe)return De;return De}function Qn(V){return Sr(V)?Js(V):br(V)}function Nn(V){return Sr(V)?Hi(V):Xi(V)}function ns(V){for(var oe=V.length;oe--&&vi.test(V.charAt(oe)););return oe}var Ol=Di(Ce);function Js(V){for(var oe=K.lastIndex=0;K.test(V);)++oe;return oe}function Hi(V){return V.match(K)||[]}function Dl(V){return V.match(X)||[]}var ko=function V(oe){oe=oe==null?Te:Ao.defaults(Te.Object(),oe,Ao.pick(Te,de));var Q=oe.Array,De=oe.Date,$e=oe.Error,Tt=oe.Function,Bn=oe.Math,Jt=oe.Object,To=oe.RegExp,Bi=oe.String,zi=oe.TypeError,As=Q.prototype,Mo=Tt.prototype,Fn=Jt.prototype,Ys=oe["__core-js_shared__"],Ro=Mo.toString,mt=Fn.hasOwnProperty,Qs=0,Zr=function(){var n=/[^.]+$/.exec(Ys&&Ys.keys&&Ys.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),oi=Fn.toString,Ii=Ro.call(Jt),eo=Te._,to=To("^"+Ro.call(mt).replace(Ei,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wn=rt?oe.Buffer:N,Ji=oe.Symbol,Hs=oe.Uint8Array,Ll=Wn?Wn.allocUnsafe:N,is=Xo(Jt.getPrototypeOf,Jt),rs=Jt.create,no=Fn.propertyIsEnumerable,zs=As.splice,Jo=Ji?Ji.isConcatSpreadable:N,io=Ji?Ji.iterator:N,kr=Ji?Ji.toStringTag:N,Vs=function(){try{var n=Fo(Jt,"defineProperty");return n({},"",{}),n}catch(o){}}(),Yo=oe.clearTimeout!==Te.clearTimeout&&oe.clearTimeout,ro=De&&De.now!==Te.Date.now&&De.now,Pl=oe.setTimeout!==Te.setTimeout&&oe.setTimeout,so=Bn.ceil,Ar=Bn.floor,Eo=Jt.getOwnPropertySymbols,Oo=Wn?Wn.isBuffer:N,vt=oe.isFinite,Vt=As.join,xi=Xo(Jt.keys,Jt),Mt=Bn.max,dn=Bn.min,Tr=De.now,Kr=oe.parseInt,wi=Bn.random,oo=As.reverse,lo=Fo(oe,"DataView"),Qo=Fo(oe,"Map"),ia=Fo(oe,"Promise"),Do=Fo(oe,"Set"),Lo=Fo(oe,"WeakMap"),el=Fo(Jt,"create"),Bl=Lo&&new Lo,tl={},fr=gl(lo),Il=gl(Qo),Ea=gl(ia),_l=gl(Do),sf=gl(Lo),ra=Ji?Ji.prototype:N,Ts=ra?ra.valueOf:N,Oa=ra?ra.toString:N;function O(n){if(Si(n)&&!Et(n)&&!(n instanceof Pt)){if(n instanceof ur)return n;if(mt.call(n,"__wrapped__"))return Df(n)}return new ur(n)}var nl=function(){function n(){}return function(o){if(!fi(o))return{};if(rs)return rs(o);n.prototype=o;var d=new n;return n.prototype=N,d}}();function sa(){}function ur(n,o){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=N}O.templateSettings={escape:or,evaluate:lr,interpolate:se,variable:"",imports:{_:O}},O.prototype=sa.prototype,O.prototype.constructor=O,ur.prototype=nl(sa.prototype),ur.prototype.constructor=ur;function Pt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jt,this.__views__=[]}function Ch(){var n=new Pt(this.__wrapped__);return n.__actions__=pr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=pr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=pr(this.__views__),n}function of(){if(this.__filtered__){var n=new Pt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function kh(){var n=this.__wrapped__.value(),o=this.__dir__,d=Et(n),x=o<0,T=d?n.length:0,P=Su(0,T,this.__views__),H=P.start,$=P.end,J=$-H,pe=x?$:H-1,ge=this.__iteratees__,xe=ge.length,Ie=0,Je=dn(J,this.__takeCount__);if(!d||!x&&T==J&&Je==J)return va(n,this.__actions__);var at=[];e:for(;J--&&Ie<Je;){pe+=o;for(var $t=-1,ht=n[pe];++$t<xe;){var Yt=ge[$t],rn=Yt.iteratee,Ps=Yt.type,Gr=rn(ht);if(Ps==Xr)ht=Gr;else if(!Gr){if(Ps==jr)continue e;break e}}at[Ie++]=ht}return at}Pt.prototype=nl(sa.prototype),Pt.prototype.constructor=Pt;function Ur(n){var o=-1,d=n==null?0:n.length;for(this.clear();++o<d;){var x=n[o];this.set(x[0],x[1])}}function oa(){this.__data__=el?el(null):{},this.size=0}function Nl(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}function Da(n){var o=this.__data__;if(el){var d=o[n];return d===un?N:d}return mt.call(o,n)?o[n]:N}function La(n){var o=this.__data__;return el?o[n]!==N:mt.call(o,n)}function Fl(n,o){var d=this.__data__;return this.size+=this.has(n)?0:1,d[n]=el&&o===N?un:o,this}Ur.prototype.clear=oa,Ur.prototype.delete=Nl,Ur.prototype.get=Da,Ur.prototype.has=La,Ur.prototype.set=Fl;function cr(n){var o=-1,d=n==null?0:n.length;for(this.clear();++o<d;){var x=n[o];this.set(x[0],x[1])}}function la(){this.__data__=[],this.size=0}function Ah(n){var o=this.__data__,d=sl(o,n);if(d<0)return!1;var x=o.length-1;return d==x?o.pop():zs.call(o,d,1),--this.size,!0}function Th(n){var o=this.__data__,d=sl(o,n);return d<0?N:o[d][1]}function Pa(n){return sl(this.__data__,n)>-1}function Mh(n,o){var d=this.__data__,x=sl(d,n);return x<0?(++this.size,d.push([n,o])):d[x][1]=o,this}cr.prototype.clear=la,cr.prototype.delete=Ah,cr.prototype.get=Th,cr.prototype.has=Pa,cr.prototype.set=Mh;function ss(n){var o=-1,d=n==null?0:n.length;for(this.clear();++o<d;){var x=n[o];this.set(x[0],x[1])}}function Ba(){this.size=0,this.__data__={hash:new Ur,map:new(Qo||cr),string:new Ur}}function Rh(n){var o=lh(this,n).delete(n);return this.size-=o?1:0,o}function Ia(n){return lh(this,n).get(n)}function lf(n){return lh(this,n).has(n)}function af(n,o){var d=lh(this,n),x=d.size;return d.set(n,o),this.size+=d.size==x?0:1,this}ss.prototype.clear=Ba,ss.prototype.delete=Rh,ss.prototype.get=Ia,ss.prototype.has=lf,ss.prototype.set=af;function Ms(n){var o=-1,d=n==null?0:n.length;for(this.__data__=new ss;++o<d;)this.add(n[o])}function hf(n){return this.__data__.set(n,un),this}function Po(n){return this.__data__.has(n)}Ms.prototype.add=Ms.prototype.push=hf,Ms.prototype.has=Po;function Vi(n){var o=this.__data__=new cr(n);this.size=o.size}function il(){this.__data__=new cr,this.size=0}function Wl(n){var o=this.__data__,d=o.delete(n);return this.size=o.size,d}function Hl(n){return this.__data__.get(n)}function os(n){return this.__data__.has(n)}function rl(n,o){var d=this.__data__;if(d instanceof cr){var x=d.__data__;if(!Qo||x.length<A-1)return x.push([n,o]),this.size=++d.size,this;d=this.__data__=new ss(x)}return d.set(n,o),this.size=d.size,this}Vi.prototype.clear=il,Vi.prototype.delete=Wl,Vi.prototype.get=Hl,Vi.prototype.has=os,Vi.prototype.set=rl;function _a(n,o){var d=Et(n),x=!d&&Ra(n),T=!d&&!x&&ea(n),P=!d&&!x&&!T&&bh(n),H=d||x||T||P,$=H?Yn(n.length,Bi):[],J=$.length;for(var pe in n)(o||mt.call(n,pe))&&!(H&&(pe=="length"||T&&(pe=="offset"||pe=="parent")||P&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||co(pe,J)))&&$.push(pe);return $}function Bo(n){var o=n.length;return o?n[Kl(0,o-1)]:N}function ff(n,o){return Aa(pr(n),$s(o,0,n.length))}function aa(n){return Aa(pr(n))}function zl(n,o,d){(d!==N&&!tr(n[o],d)||d===N&&!(o in n))&&ls(n,o,d)}function Vl(n,o,d){var x=n[o];(!(mt.call(n,o)&&tr(x,d))||d===N&&!(o in n))&&ls(n,o,d)}function sl(n,o){for(var d=n.length;d--;)if(tr(n[d][0],o))return d;return-1}function Na(n,o,d,x){return Rs(n,function(T,P,H){o(x,T,d(T),H)}),x}function ol(n,o){return n&&$i(o,nr(o),n)}function ha(n,o){return n&&$i(o,ms(o),n)}function ls(n,o,d){o=="__proto__"&&Vs?Vs(n,o,{configurable:!0,enumerable:!0,value:d,writable:!0}):n[o]=d}function fa(n,o){for(var d=-1,x=o.length,T=Q(x),P=n==null;++d<x;)T[d]=P?N:nc(n,o[d]);return T}function $s(n,o,d){return n===n&&(d!==N&&(n=n<=d?n:d),o!==N&&(n=n>=o?n:o)),n}function Ai(n,o,d,x,T,P){var H,$=o&It,J=o&Wt,pe=o&Dt;if(d&&(H=T?d(n,x,T,P):d(n)),H!==N)return H;if(!fi(n))return n;var ge=Et(n);if(ge){if(H=Cu(n),!$)return pr(n,H)}else{var xe=Qi(n),Ie=xe==sr||xe==Pr;if(ea(n))return xa(n,$);if(xe==mn||xe==rr||Ie&&!T){if(H=J||Ie?{}:Wo(n),!$)return J?gf(n,ha(H,n)):pf(n,ol(H,n))}else{if(!ue[xe])return T?n:{};H=Hh(n,xe,$)}}P||(P=new Vi);var Je=P.get(n);if(Je)return Je;P.set(n,H),Ec(n)?n.forEach(function(ht){H.add(Ai(ht,o,d,ht,n,P))}):Mc(n)&&n.forEach(function(ht,Yt){H.set(Yt,Ai(ht,o,d,Yt,n,P))});var at=pe?J?Nh:jl:J?ms:nr,$t=ge?N:at(n);return Ve($t||n,function(ht,Yt){$t&&(Yt=ht,ht=n[Yt]),Vl(H,Yt,Ai(ht,o,d,Yt,n,P))}),H}function ua(n){var o=nr(n);return function(d){return $l(d,n,o)}}function $l(n,o,d){var x=d.length;if(n==null)return!x;for(n=Jt(n);x--;){var T=d[x],P=o[T],H=n[T];if(H===N&&!(T in n)||!P(H))return!1}return!0}function Eh(n,o,d){if(typeof n!="function")throw new zi(fn);return pl(function(){n.apply(N,d)},o)}function ll(n,o,d,x){var T=-1,P=bn,H=!0,$=n.length,J=[],pe=o.length;if(!$)return J;d&&(o=ft(o,yn(d))),x?(P=Oi,H=!1):o.length>=A&&(P=Cs,H=!1,o=new Ms(o));e:for(;++T<$;){var ge=n[T],xe=d==null?ge:d(ge);if(ge=x||ge!==0?ge:0,H&&xe===xe){for(var Ie=pe;Ie--;)if(o[Ie]===xe)continue e;J.push(ge)}else P(o,xe,x)||J.push(ge)}return J}var Rs=mf(as),Fa=mf(Va,!0);function Wa(n,o){var d=!0;return Rs(n,function(x,T,P){return d=!!o(x,T,P),d}),d}function Io(n,o,d){for(var x=-1,T=n.length;++x<T;){var P=n[x],H=o(P);if(H!=null&&($===N?H===H&&!Ls(H):d(H,$)))var $=H,J=P}return J}function Ha(n,o,d,x){var T=n.length;for(d=Ft(d),d<0&&(d=-d>T?0:T+d),x=x===N||x>T?T:Ft(x),x<0&&(x+=T),x=d>x?0:Dc(x);d<x;)n[d++]=o;return n}function Zl(n,o){var d=[];return Rs(n,function(x,T,P){o(x,T,P)&&d.push(x)}),d}function li(n,o,d,x,T){var P=-1,H=n.length;for(d||(d=kf),T||(T=[]);++P<H;){var $=n[P];o>0&&d($)?o>1?li($,o-1,d,x,T):yi(T,$):x||(T[T.length]=$)}return T}var za=Xa(),Oh=Xa(!0);function as(n,o){return n&&za(n,o,nr)}function Va(n,o){return n&&Oh(n,o,nr)}function ca(n,o){return wn(o,function(d){return yl(n[d])})}function f(n,o){o=No(o,n);for(var d=0,x=o.length;n!=null&&d<x;)n=n[Zs(o[d++])];return d&&d==x?n:N}function t(n,o,d){var x=o(n);return Et(n)?x:yi(x,d(n))}function r(n){return n==null?n===N?Ir:zo:kr&&kr in Jt(n)?bu(n):Ru(n)}function h(n,o){return n>o}function u(n,o){return n!=null&&mt.call(n,o)}function g(n,o){return n!=null&&o in Jt(n)}function y(n,o,d){return n>=dn(o,d)&&n<Mt(o,d)}function S(n,o,d){for(var x=d?Oi:bn,T=n[0].length,P=n.length,H=P,$=Q(P),J=1/0,pe=[];H--;){var ge=n[H];H&&o&&(ge=ft(ge,yn(o))),J=dn(ge.length,J),$[H]=!d&&(o||T>=120&&ge.length>=120)?new Ms(H&&ge):N}ge=n[0];var xe=-1,Ie=$[0];e:for(;++xe<T&&pe.length<J;){var Je=ge[xe],at=o?o(Je):Je;if(Je=d||Je!==0?Je:0,!(Ie?Cs(Ie,at):x(pe,at,d))){for(H=P;--H;){var $t=$[H];if(!($t?Cs($t,at):x(n[H],at,d)))continue e}Ie&&Ie.push(at),pe.push(Je)}}return pe}function M(n,o,d,x){return as(n,function(T,P,H){o(x,d(T),P,H)}),x}function R(n,o,d){o=No(o,n),n=$h(n,o);var x=n==null?n:n[Zs(Os(o))];return x==null?N:et(x,n,d)}function L(n){return Si(n)&&r(n)==rr}function z(n){return Si(n)&&r(n)==xr}function Y(n){return Si(n)&&r(n)==Gn}function te(n,o,d,x,T){return n===o?!0:n==null||o==null||!Si(n)&&!Si(o)?n!==n&&o!==o:ce(n,o,d,x,te,T)}function ce(n,o,d,x,T,P){var H=Et(n),$=Et(o),J=H?Ci:Qi(n),pe=$?Ci:Qi(o);J=J==rr?mn:J,pe=pe==rr?mn:pe;var ge=J==mn,xe=pe==mn,Ie=J==pe;if(Ie&&ea(n)){if(!ea(o))return!1;H=!0,ge=!1}if(Ie&&!ge)return P||(P=new Vi),H||bh(n)?sh(n,o,d,x,T,P):Zi(n,o,J,d,x,T,P);if(!(d&je)){var Je=ge&&mt.call(n,"__wrapped__"),at=xe&&mt.call(o,"__wrapped__");if(Je||at){var $t=Je?n.value():n,ht=at?o.value():o;return P||(P=new Vi),T($t,ht,d,x,P)}}return Ie?(P||(P=new Vi),Cf(n,o,d,x,T,P)):!1}function be(n){return Si(n)&&Qi(n)==jn}function ve(n,o,d,x){var T=d.length,P=T,H=!x;if(n==null)return!P;for(n=Jt(n);T--;){var $=d[T];if(H&&$[2]?$[1]!==n[$[0]]:!($[0]in n))return!1}for(;++T<P;){$=d[T];var J=$[0],pe=n[J],ge=$[1];if(H&&$[2]){if(pe===N&&!(J in n))return!1}else{var xe=new Vi;if(x)var Ie=x(pe,ge,J,n,o,xe);if(!(Ie===N?te(ge,pe,je|Qt,x,xe):Ie))return!1}}return!0}function Re(n){if(!fi(n)||Au(n))return!1;var o=yl(n)?to:_;return o.test(gl(n))}function xt(n){return Si(n)&&r(n)==gi}function qt(n){return Si(n)&&Qi(n)==Zn}function _t(n){return Si(n)&&hu(n.length)&&!!ae[r(n)]}function tn(n){return typeof n=="function"?n:n==null?vs:typeof n=="object"?Et(n)?da(n[0],n[1]):al(n):Vc(n)}function pn(n){if(!ka(n))return xi(n);var o=[];for(var d in Jt(n))mt.call(n,d)&&d!="constructor"&&o.push(d);return o}function _i(n){if(!fi(n))return Ef(n);var o=ka(n),d=[];for(var x in n)x=="constructor"&&(o||!mt.call(n,x))||d.push(x);return d}function hs(n,o){return n<o}function Es(n,o){var d=-1,x=gs(n)?Q(n.length):[];return Rs(n,function(T,P,H){x[++d]=o(T,P,H)}),x}function al(n){var o=Wh(n);return o.length==1&&o[0][2]?Mf(o[0][0],o[0][1]):function(d){return d===n||ve(d,n,o)}}function da(n,o){return zh(n)&&Tu(o)?Mf(Zs(n),o):function(d){var x=nc(d,n);return x===N&&x===o?ic(d,n):te(o,x,je|Qt)}}function ao(n,o,d,x,T){n!==o&&za(o,function(P,H){if(T||(T=new Vi),fi(P))fs(n,o,H,d,ao,x,T);else{var $=x?x(dl(n,H),P,H+"",n,o,T):N;$===N&&($=P),zl(n,H,$)}},ms)}function fs(n,o,d,x,T,P,H){var $=dl(n,d),J=dl(o,d),pe=H.get(J);if(pe){zl(n,d,pe);return}var ge=P?P($,J,d+"",n,o,H):N,xe=ge===N;if(xe){var Ie=Et(J),Je=!Ie&&ea(J),at=!Ie&&!Je&&bh(J);ge=J,Ie||Je||at?Et($)?ge=$:Ti($)?ge=pr($):Je?(xe=!1,ge=xa(J,!0)):at?(xe=!1,ge=_h(J,!0)):ge=[]:rf(J)||Ra(J)?(ge=$,Ra($)?ge=Lc($):(!fi($)||yl($))&&(ge=Wo(J))):xe=!1}xe&&(H.set(J,ge),T(ge,J,x,P,H),H.delete(J)),zl(n,d,ge)}function ho(n,o){var d=n.length;if(d)return o+=o<0?d:0,co(o,d)?n[o]:N}function us(n,o,d){o.length?o=ft(o,function(P){return Et(P)?function(H){return f(H,P.length===1?P[0]:P)}:P}):o=[vs];var x=-1;o=ft(o,yn(tt()));var T=Es(n,function(P,H,$){var J=ft(o,function(pe){return pe(P)});return{criteria:J,index:++x,value:P}});return Ut(T,function(P,H){return mu(P,H,d)})}function fo(n,o){return dr(n,o,function(d,x){return ic(n,x)})}function dr(n,o,d){for(var x=-1,T=o.length,P={};++x<T;){var H=o[x],$=f(n,H);d($,H)&&Mr(P,No(H,n),$)}return P}function hl(n){return function(o){return f(o,n)}}function cs(n,o,d,x){var T=x?ki:St,P=-1,H=o.length,$=n;for(n===o&&(o=pr(o)),d&&($=ft(n,yn(d)));++P<H;)for(var J=0,pe=o[P],ge=d?d(pe):pe;(J=T($,ge,J,x))>-1;)$!==n&&zs.call($,J,1),zs.call(n,J,1);return n}function Yi(n,o){for(var d=n?o.length:0,x=d-1;d--;){var T=o[d];if(d==x||T!==P){var P=T;co(T)?zs.call(n,T,1):Ka(n,T)}}return n}function Kl(n,o){return n+Ar(wi()*(o-n+1))}function $a(n,o,d,x){for(var T=-1,P=Mt(so((o-n)/(d||1)),0),H=Q(P);P--;)H[x?P:++T]=n,n+=d;return H}function Dh(n,o){var d="";if(!n||o<1||o>wt)return d;do o%2&&(d+=n),o=Ar(o/2),o&&(n+=n);while(o);return d}function Nt(n,o){return hh(Vh(n,o,vs),n+"")}function pa(n){return Bo(Sh(n))}function Lh(n,o){var d=Sh(n);return Aa(d,$s(o,0,d.length))}function Mr(n,o,d,x){if(!fi(n))return n;o=No(o,n);for(var T=-1,P=o.length,H=P-1,$=n;$!=null&&++T<P;){var J=Zs(o[T]),pe=d;if(J==="__proto__"||J==="constructor"||J==="prototype")return n;if(T!=H){var ge=$[J];pe=x?x(ge,J,$):N,pe===N&&(pe=fi(ge)?ge:co(o[T+1])?[]:{})}Vl($,J,pe),$=$[J]}return n}var cu=Bl?function(n,o){return Bl.set(n,o),n}:vs,uc=Vs?function(n,o){return Vs(n,"toString",{configurable:!0,enumerable:!1,value:sc(o),writable:!0})}:vs;function Ph(n){return Aa(Sh(n))}function ds(n,o,d){var x=-1,T=n.length;o<0&&(o=-o>T?0:T+o),d=d>T?T:d,d<0&&(d+=T),T=o>d?0:d-o>>>0,o>>>=0;for(var P=Q(T);++x<T;)P[x]=n[x+o];return P}function du(n,o){var d;return Rs(n,function(x,T,P){return d=o(x,T,P),!d}),!!d}function Za(n,o,d){var x=0,T=n==null?x:n.length;if(typeof o=="number"&&o===o&&T<=ys){for(;x<T;){var P=x+T>>>1,H=n[P];H!==null&&!Ls(H)&&(d?H<=o:H<o)?x=P+1:T=P}return T}return fl(n,o,vs,d)}function fl(n,o,d,x){var T=0,P=n==null?0:n.length;if(P===0)return 0;o=d(o);for(var H=o!==o,$=o===null,J=Ls(o),pe=o===N;T<P;){var ge=Ar((T+P)/2),xe=d(n[ge]),Ie=xe!==N,Je=xe===null,at=xe===xe,$t=Ls(xe);if(H)var ht=x||at;else pe?ht=at&&(x||Ie):$?ht=at&&Ie&&(x||!Je):J?ht=at&&Ie&&!Je&&(x||!$t):Je||$t?ht=!1:ht=x?xe<=o:xe<o;ht?T=ge+1:P=ge}return dn(P,ci)}function ga(n,o){for(var d=-1,x=n.length,T=0,P=[];++d<x;){var H=n[d],$=o?o(H):H;if(!d||!tr($,J)){var J=$;P[T++]=H===0?0:H}}return P}function ma(n){return typeof n=="number"?n:Ls(n)?ir:+n}function qr(n){if(typeof n=="string")return n;if(Et(n))return ft(n,qr)+"";if(Ls(n))return Oa?Oa.call(n):"";var o=n+"";return o=="0"&&1/n==-en?"-0":o}function _o(n,o,d){var x=-1,T=bn,P=n.length,H=!0,$=[],J=$;if(d)H=!1,T=Oi;else if(P>=A){var pe=o?null:wu(n);if(pe)return Xs(pe);H=!1,T=Cs,J=new Ms}else J=o?[]:$;e:for(;++x<P;){var ge=n[x],xe=o?o(ge):ge;if(ge=d||ge!==0?ge:0,H&&xe===xe){for(var Ie=J.length;Ie--;)if(J[Ie]===xe)continue e;o&&J.push(xe),$.push(ge)}else T(J,xe,d)||(J!==$&&J.push(xe),$.push(ge))}return $}function Ka(n,o){return o=No(o,n),n=$h(n,o),n==null||delete n[Zs(Os(o))]}function uf(n,o,d,x){return Mr(n,o,d(f(n,o)),x)}function Ul(n,o,d,x){for(var T=n.length,P=x?T:-1;(x?P--:++P<T)&&o(n[P],P,n););return d?ds(n,x?0:P,x?P+1:T):ds(n,x?P+1:0,x?T:P)}function va(n,o){var d=n;return d instanceof Pt&&(d=d.value()),Un(o,function(x,T){return T.func.apply(T.thisArg,yi([x],T.args))},d)}function Ua(n,o,d){var x=n.length;if(x<2)return x?_o(n[0]):[];for(var T=-1,P=Q(x);++T<x;)for(var H=n[T],$=-1;++$<x;)$!=T&&(P[T]=ll(P[T]||H,n[$],o,d));return _o(li(P,1),o,d)}function Bh(n,o,d){for(var x=-1,T=n.length,P=o.length,H={};++x<T;){var $=x<P?o[x]:N;d(H,n[x],$)}return H}function qa(n){return Ti(n)?n:[]}function Ga(n){return typeof n=="function"?n:vs}function No(n,o){return Et(n)?n:zh(n,o)?[n]:Zh(Mn(n))}var pu=Nt;function bi(n,o,d){var x=n.length;return d=d===N?x:d,!o&&d>=x?n:ds(n,o,d)}var ya=Yo||function(n){return Te.clearTimeout(n)};function xa(n,o){if(o)return n.slice();var d=n.length,x=Ll?Ll(d):new n.constructor(d);return n.copy(x),x}function wa(n){var o=new n.constructor(n.byteLength);return new Hs(o).set(new Hs(n)),o}function gu(n,o){var d=o?wa(n.buffer):n.buffer;return new n.constructor(d,n.byteOffset,n.byteLength)}function Ih(n){var o=new n.constructor(n.source,_n.exec(n));return o.lastIndex=n.lastIndex,o}function cf(n){return Ts?Jt(Ts.call(n)):{}}function _h(n,o){var d=o?wa(n.buffer):n.buffer;return new n.constructor(d,n.byteOffset,n.length)}function df(n,o){if(n!==o){var d=n!==N,x=n===null,T=n===n,P=Ls(n),H=o!==N,$=o===null,J=o===o,pe=Ls(o);if(!$&&!pe&&!P&&n>o||P&&H&&J&&!$&&!pe||x&&H&&J||!d&&J||!T)return 1;if(!x&&!P&&!pe&&n<o||pe&&d&&T&&!x&&!P||$&&d&&T||!H&&T||!J)return-1}return 0}function mu(n,o,d){for(var x=-1,T=n.criteria,P=o.criteria,H=T.length,$=d.length;++x<H;){var J=df(T[x],P[x]);if(J){if(x>=$)return J;var pe=d[x];return J*(pe=="desc"?-1:1)}}return n.index-o.index}function vu(n,o,d,x){for(var T=-1,P=n.length,H=d.length,$=-1,J=o.length,pe=Mt(P-H,0),ge=Q(J+pe),xe=!x;++$<J;)ge[$]=o[$];for(;++T<H;)(xe||T<P)&&(ge[d[T]]=n[T]);for(;pe--;)ge[$++]=n[T++];return ge}function yu(n,o,d,x){for(var T=-1,P=n.length,H=-1,$=d.length,J=-1,pe=o.length,ge=Mt(P-$,0),xe=Q(ge+pe),Ie=!x;++T<ge;)xe[T]=n[T];for(var Je=T;++J<pe;)xe[Je+J]=o[J];for(;++H<$;)(Ie||T<P)&&(xe[Je+d[H]]=n[T++]);return xe}function pr(n,o){var d=-1,x=n.length;for(o||(o=Q(x));++d<x;)o[d]=n[d];return o}function $i(n,o,d,x){var T=!d;d||(d={});for(var P=-1,H=o.length;++P<H;){var $=o[P],J=x?x(d[$],n[$],$,d,n):N;J===N&&(J=n[$]),T?ls(d,$,J):Vl(d,$,J)}return d}function pf(n,o){return $i(n,Ca(n),o)}function gf(n,o){return $i(n,ah(n),o)}function ja(n,o){return function(d,x){var T=Et(d)?ot:Na,P=o?o():{};return T(d,n,tt(x,2),P)}}function ul(n){return Nt(function(o,d){var x=-1,T=d.length,P=T>1?d[T-1]:N,H=T>2?d[2]:N;for(P=n.length>3&&typeof P=="function"?(T--,P):N,H&&gr(d[0],d[1],H)&&(P=T<3?N:P,T=1),o=Jt(o);++x<T;){var $=d[x];$&&n(o,$,x,P)}return o})}function mf(n,o){return function(d,x){if(d==null)return d;if(!gs(d))return n(d,x);for(var T=d.length,P=o?T:-1,H=Jt(d);(o?P--:++P<T)&&x(H[P],P,H)!==!1;);return d}}function Xa(n){return function(o,d,x){for(var T=-1,P=Jt(o),H=x(o),$=H.length;$--;){var J=H[n?$:++T];if(d(P[J],J,P)===!1)break}return o}}function ba(n,o,d){var x=o&me,T=ql(n);function P(){var H=this&&this!==Te&&this instanceof P?T:n;return H.apply(x?d:this,arguments)}return P}function vf(n){return function(o){o=Mn(o);var d=Sr(o)?Nn(o):N,x=d?d[0]:o.charAt(0),T=d?bi(d,1).join(""):o.slice(1);return x[n]()+T}}function ai(n){return function(o){return Un(Hc(Wc(o).replace(G,"")),n,"")}}function ql(n){return function(){var o=arguments;switch(o.length){case 0:return new n;case 1:return new n(o[0]);case 2:return new n(o[0],o[1]);case 3:return new n(o[0],o[1],o[2]);case 4:return new n(o[0],o[1],o[2],o[3]);case 5:return new n(o[0],o[1],o[2],o[3],o[4]);case 6:return new n(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new n(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var d=nl(n.prototype),x=n.apply(d,o);return fi(x)?x:d}}function xu(n,o,d){var x=ql(n);function T(){for(var P=arguments.length,H=Q(P),$=P,J=Xl(T);$--;)H[$]=arguments[$];var pe=P<3&&H[0]!==J&&H[P-1]!==J?[]:Cr(H,J);if(P-=pe.length,P<d)return wf(n,o,Ya,T.placeholder,N,H,pe,N,N,d-P);var ge=this&&this!==Te&&this instanceof T?x:n;return et(ge,this,H)}return T}function yf(n){return function(o,d,x){var T=Jt(o);if(!gs(o)){var P=tt(d,3);o=nr(o),d=function($){return P(T[$],$,T)}}var H=n(o,d,x);return H>-1?T[P?o[H]:H]:N}}function Ja(n){return uo(function(o){var d=o.length,x=d,T=ur.prototype.thru;for(n&&o.reverse();x--;){var P=o[x];if(typeof P!="function")throw new zi(fn);if(T&&!H&&oh(P)=="wrapper")var H=new ur([],!0)}for(x=H?x:d;++x<d;){P=o[x];var $=oh(P),J=$=="wrapper"?Fh(P):N;J&&Af(J[0])&&J[1]==(zt|gn|Cn|$n)&&!J[4].length&&J[9]==1?H=H[oh(J[0])].apply(H,J[3]):H=P.length==1&&Af(P)?H[$]():H.thru(P)}return function(){var pe=arguments,ge=pe[0];if(H&&pe.length==1&&Et(ge))return H.plant(ge).value();for(var xe=0,Ie=d?o[xe].apply(this,pe):ge;++xe<d;)Ie=o[xe].call(this,Ie);return Ie}})}function Ya(n,o,d,x,T,P,H,$,J,pe){var ge=o&zt,xe=o&me,Ie=o&We,Je=o&(gn|Ht),at=o&Dn,$t=Ie?N:ql(n);function ht(){for(var Yt=arguments.length,rn=Q(Yt),Ps=Yt;Ps--;)rn[Ps]=arguments[Ps];if(Je)var Gr=Xl(ht),Bs=bo(rn,Gr);if(x&&(rn=vu(rn,x,T,Je)),P&&(rn=yu(rn,P,H,Je)),Yt-=Bs,Je&&Yt<pe){var Mi=Cr(rn,Gr);return wf(n,o,Ya,ht.placeholder,d,rn,Mi,$,J,pe-Yt)}var go=xe?d:this,wl=Ie?go[n]:n;return Yt=rn.length,$?rn=dc(rn,$):at&&Yt>1&&rn.reverse(),ge&&J<Yt&&(rn.length=J),this&&this!==Te&&this instanceof ht&&(wl=$t||ql(wl)),wl.apply(go,rn)}return ht}function xf(n,o){return function(d,x){return M(d,n,o(x),{})}}function Qa(n,o){return function(d,x){var T;if(d===N&&x===N)return o;if(d!==N&&(T=d),x!==N){if(T===N)return x;typeof d=="string"||typeof x=="string"?(d=qr(d),x=qr(x)):(d=ma(d),x=ma(x)),T=n(d,x)}return T}}function eh(n){return uo(function(o){return o=ft(o,yn(tt())),Nt(function(d){var x=this;return n(o,function(T){return et(T,x,d)})})})}function th(n,o){o=o===N?" ":qr(o);var d=o.length;if(d<2)return d?Dh(o,n):o;var x=Dh(o,so(n/Qn(o)));return Sr(o)?bi(Nn(x),0,n).join(""):x.slice(0,n)}function Gl(n,o,d,x){var T=o&me,P=ql(n);function H(){for(var $=-1,J=arguments.length,pe=-1,ge=x.length,xe=Q(ge+J),Ie=this&&this!==Te&&this instanceof H?P:n;++pe<ge;)xe[pe]=x[pe];for(;J--;)xe[pe++]=arguments[++$];return et(Ie,T?d:this,xe)}return H}function Sa(n){return function(o,d,x){return x&&typeof x!="number"&&gr(o,d,x)&&(d=x=N),o=xl(o),d===N?(d=o,o=0):d=xl(d),x=x===N?o<d?1:-1:xl(x),$a(o,d,x,n)}}function nh(n){return function(o,d){return typeof o=="string"&&typeof d=="string"||(o=Ks(o),d=Ks(d)),n(o,d)}}function wf(n,o,d,x,T,P,H,$,J,pe){var ge=o&gn,xe=ge?H:N,Ie=ge?N:H,Je=ge?P:N,at=ge?N:P;o|=ge?Cn:Vn,o&=~(ge?Vn:Cn),o&kt||(o&=~(me|We));var $t=[n,o,T,Je,xe,at,Ie,$,J,pe],ht=d.apply(N,$t);return Af(n)&&Ho(ht,$t),ht.placeholder=x,Of(ht,n,o)}function ih(n){var o=Bn[n];return function(d,x){if(d=Ks(d),x=x==null?0:dn(Ft(x),292),x&&vt(d)){var T=(Mn(d)+"e").split("e"),P=o(T[0]+"e"+(+T[1]+x));return T=(Mn(P)+"e").split("e"),+(T[0]+"e"+(+T[1]-x))}return o(d)}}var wu=Do&&1/Xs(new Do([,-0]))[1]==en?function(n){return new Do(n)}:ac;function rh(n){return function(o){var d=Qi(o);return d==jn?Fs(o):d==Zn?Ws(o):wo(o,n(o))}}function ei(n,o,d,x,T,P,H,$){var J=o&We;if(!J&&typeof n!="function")throw new zi(fn);var pe=x?x.length:0;if(pe||(o&=~(Cn|Vn),x=T=N),H=H===N?H:Mt(Ft(H),0),$=$===N?$:Ft($),pe-=T?T.length:0,o&Vn){var ge=x,xe=T;x=T=N}var Ie=J?N:Fh(n),Je=[n,o,d,x,T,ge,xe,P,H,$];if(Ie&&Rf(Je,Ie),n=Je[0],o=Je[1],d=Je[2],x=Je[3],T=Je[4],$=Je[9]=Je[9]===N?J?0:n.length:Mt(Je[9]-pe,0),!$&&o&(gn|Ht)&&(o&=~(gn|Ht)),!o||o==me)var at=ba(n,o,d);else o==gn||o==Ht?at=xu(n,o,$):(o==Cn||o==(me|Cn))&&!T.length?at=Gl(n,o,d,x):at=Ya.apply(N,Je);var $t=Ie?cu:Ho;return Of($t(at,Je),n,o)}function cl(n,o,d,x){return n===N||tr(n,Fn[d])&&!mt.call(x,d)?o:n}function bf(n,o,d,x,T,P){return fi(n)&&fi(o)&&(P.set(o,n),ao(n,o,N,bf,P),P.delete(o)),n}function Sf(n){return rf(n)?N:n}function sh(n,o,d,x,T,P){var H=d&je,$=n.length,J=o.length;if($!=J&&!(H&&J>$))return!1;var pe=P.get(n),ge=P.get(o);if(pe&&ge)return pe==o&&ge==n;var xe=-1,Ie=!0,Je=d&Qt?new Ms:N;for(P.set(n,o),P.set(o,n);++xe<$;){var at=n[xe],$t=o[xe];if(x)var ht=H?x($t,at,xe,o,n,P):x(at,$t,xe,n,o,P);if(ht!==N){if(ht)continue;Ie=!1;break}if(Je){if(!ri(o,function(Yt,rn){if(!Cs(Je,rn)&&(at===Yt||T(at,Yt,d,x,P)))return Je.push(rn)})){Ie=!1;break}}else if(!(at===$t||T(at,$t,d,x,P))){Ie=!1;break}}return P.delete(n),P.delete(o),Ie}function Zi(n,o,d,x,T,P,H){switch(d){case _r:if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case xr:return!(n.byteLength!=o.byteLength||!P(new Hs(n),new Hs(o)));case ni:case Gn:case Le:return tr(+n,+o);case Lr:return n.name==o.name&&n.message==o.message;case gi:case vr:return n==o+"";case jn:var $=Fs;case Zn:var J=x&je;if($||($=Xs),n.size!=o.size&&!J)return!1;var pe=H.get(n);if(pe)return pe==o;x|=Qt,H.set(n,o);var ge=sh($(n),$(o),x,T,P,H);return H.delete(n),ge;case Br:if(Ts)return Ts.call(n)==Ts.call(o)}return!1}function Cf(n,o,d,x,T,P){var H=d&je,$=jl(n),J=$.length,pe=jl(o),ge=pe.length;if(J!=ge&&!H)return!1;for(var xe=J;xe--;){var Ie=$[xe];if(!(H?Ie in o:mt.call(o,Ie)))return!1}var Je=P.get(n),at=P.get(o);if(Je&&at)return Je==o&&at==n;var $t=!0;P.set(n,o),P.set(o,n);for(var ht=H;++xe<J;){Ie=$[xe];var Yt=n[Ie],rn=o[Ie];if(x)var Ps=H?x(rn,Yt,Ie,o,n,P):x(Yt,rn,Ie,n,o,P);if(!(Ps===N?Yt===rn||T(Yt,rn,d,x,P):Ps)){$t=!1;break}ht||(ht=Ie=="constructor")}if($t&&!ht){var Gr=n.constructor,Bs=o.constructor;Gr!=Bs&&"constructor"in n&&"constructor"in o&&!(typeof Gr=="function"&&Gr instanceof Gr&&typeof Bs=="function"&&Bs instanceof Bs)&&($t=!1)}return P.delete(n),P.delete(o),$t}function uo(n){return hh(Vh(n,N,_u),n+"")}function jl(n){return t(n,nr,Ca)}function Nh(n){return t(n,ms,ah)}var Fh=Bl?function(n){return Bl.get(n)}:ac;function oh(n){for(var o=n.name+"",d=tl[o],x=mt.call(tl,o)?d.length:0;x--;){var T=d[x],P=T.func;if(P==null||P==n)return T.name}return o}function Xl(n){var o=mt.call(O,"placeholder")?O:n;return o.placeholder}function tt(){var n=O.iteratee||oc;return n=n===oc?tn:n,arguments.length?n(arguments[0],arguments[1]):n}function lh(n,o){var d=n.__data__;return cc(o)?d[typeof o=="string"?"string":"hash"]:d.map}function Wh(n){for(var o=nr(n),d=o.length;d--;){var x=o[d],T=n[x];o[d]=[x,T,Tu(T)]}return o}function Fo(n,o){var d=na(n,o);return Re(d)?d:N}function bu(n){var o=mt.call(n,kr),d=n[kr];try{n[kr]=N;var x=!0}catch(P){}var T=oi.call(n);return x&&(o?n[kr]=d:delete n[kr]),T}var Ca=Eo?function(n){return n==null?[]:(n=Jt(n),wn(Eo(n),function(o){return no.call(n,o)}))}:hc,ah=Eo?function(n){for(var o=[];n;)yi(o,Ca(n)),n=is(n);return o}:hc,Qi=r;(lo&&Qi(new lo(new ArrayBuffer(1)))!=_r||Qo&&Qi(new Qo)!=jn||ia&&Qi(ia.resolve())!=di||Do&&Qi(new Do)!=Zn||Lo&&Qi(new Lo)!=yr)&&(Qi=function(n){var o=r(n),d=o==mn?n.constructor:N,x=d?gl(d):"";if(x)switch(x){case fr:return _r;case Il:return jn;case Ea:return di;case _l:return Zn;case sf:return yr}return o});function Su(n,o,d){for(var x=-1,T=d.length;++x<T;){var P=d[x],H=P.size;switch(P.type){case"drop":n+=H;break;case"dropRight":o-=H;break;case"take":o=dn(o,n+H);break;case"takeRight":n=Mt(n,o-H);break}}return{start:n,end:o}}function Jl(n){var o=n.match(Ui);return o?o[1].split(kn):[]}function Yl(n,o,d){o=No(o,n);for(var x=-1,T=o.length,P=!1;++x<T;){var H=Zs(o[x]);if(!(P=n!=null&&d(n,H)))break;n=n[H]}return P||++x!=T?P:(T=n==null?0:n.length,!!T&&hu(T)&&co(H,T)&&(Et(n)||Ra(n)))}function Cu(n){var o=n.length,d=new n.constructor(o);return o&&typeof n[0]=="string"&&mt.call(n,"index")&&(d.index=n.index,d.input=n.input),d}function Wo(n){return typeof n.constructor=="function"&&!ka(n)?nl(is(n)):{}}function Hh(n,o,d){var x=n.constructor;switch(o){case xr:return wa(n);case ni:case Gn:return new x(+n);case _r:return gu(n,d);case In:case On:case Jr:case ke:case ii:case pt:case Zt:case Nr:case mi:return _h(n,d);case jn:return new x;case Le:case vr:return new x(n);case gi:return Ih(n);case Zn:return new x;case Br:return cf(n)}}function ku(n,o){var d=o.length;if(!d)return n;var x=d-1;return o[x]=(d>1?"& ":"")+o[x],o=o.join(d>2?", ":" "),n.replace(wr,`{
/* [wrapped with `+o+`] */
`)}function kf(n){return Et(n)||Ra(n)||!!(Jo&&n&&n[Jo])}function co(n,o){var d=typeof n;return o=o==null?wt:o,!!o&&(d=="number"||d!="symbol"&&v.test(n))&&n>-1&&n%1==0&&n<o}function gr(n,o,d){if(!fi(d))return!1;var x=typeof o;return(x=="number"?gs(d)&&co(o,d.length):x=="string"&&o in d)?tr(d[o],n):!1}function zh(n,o){if(Et(n))return!1;var d=typeof n;return d=="number"||d=="symbol"||d=="boolean"||n==null||Ls(n)?!0:Yr.test(n)||!qs.test(n)||o!=null&&n in Jt(o)}function cc(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}function Af(n){var o=oh(n),d=O[o];if(typeof d!="function"||!(o in Pt.prototype))return!1;if(n===d)return!0;var x=Fh(d);return!!x&&n===x[0]}function Au(n){return!!Zr&&Zr in n}var Tf=Ys?yl:fc;function ka(n){var o=n&&n.constructor,d=typeof o=="function"&&o.prototype||Fn;return n===d}function Tu(n){return n===n&&!fi(n)}function Mf(n,o){return function(d){return d==null?!1:d[n]===o&&(o!==N||n in Jt(d))}}function Mu(n){var o=lt(n,function(x){return d.size===Be&&d.clear(),x}),d=o.cache;return o}function Rf(n,o){var d=n[1],x=o[1],T=d|x,P=T<(me|We|zt),H=x==zt&&d==gn||x==zt&&d==$n&&n[7].length<=o[8]||x==(zt|$n)&&o[7].length<=o[8]&&d==gn;if(!(P||H))return n;x&me&&(n[2]=o[2],T|=d&me?0:kt);var $=o[3];if($){var J=n[3];n[3]=J?vu(J,$,o[4]):$,n[4]=J?Cr(n[3],ct):o[4]}return $=o[5],$&&(J=n[5],n[5]=J?yu(J,$,o[6]):$,n[6]=J?Cr(n[5],ct):o[6]),$=o[7],$&&(n[7]=$),x&zt&&(n[8]=n[8]==null?o[8]:dn(n[8],o[8])),n[9]==null&&(n[9]=o[9]),n[0]=o[0],n[1]=T,n}function Ef(n){var o=[];if(n!=null)for(var d in Jt(n))o.push(d);return o}function Ru(n){return oi.call(n)}function Vh(n,o,d){return o=Mt(o===N?n.length-1:o,0),function(){for(var x=arguments,T=-1,P=Mt(x.length-o,0),H=Q(P);++T<P;)H[T]=x[o+T];T=-1;for(var $=Q(o+1);++T<o;)$[T]=x[T];return $[o]=d(H),et(n,this,$)}}function $h(n,o){return o.length<2?n:f(n,ds(o,0,-1))}function dc(n,o){for(var d=n.length,x=dn(o.length,d),T=pr(n);x--;){var P=o[x];n[x]=co(P,d)?T[P]:N}return n}function dl(n,o){if(!(o==="constructor"&&typeof n[o]=="function")&&o!="__proto__")return n[o]}var Ho=fh(cu),pl=Pl||function(n,o){return Te.setTimeout(n,o)},hh=fh(uc);function Of(n,o,d){var x=o+"";return hh(n,ku(x,pc(Jl(x),d)))}function fh(n){var o=0,d=0;return function(){var x=Tr(),T=Ni-(x-d);if(d=x,T>0){if(++o>=ui)return arguments[0]}else o=0;return n.apply(N,arguments)}}function Aa(n,o){var d=-1,x=n.length,T=x-1;for(o=o===N?x:o;++d<o;){var P=Kl(d,T),H=n[P];n[P]=n[d],n[d]=H}return n.length=o,n}var Zh=Mu(function(n){var o=[];return n.charCodeAt(0)===46&&o.push(""),n.replace(Jn,function(d,x,T,P){o.push(T?P.replace(Gs,"$1"):x||d)}),o});function Zs(n){if(typeof n=="string"||Ls(n))return n;var o=n+"";return o=="0"&&1/n==-en?"-0":o}function gl(n){if(n!=null){try{return Ro.call(n)}catch(o){}try{return n+""}catch(o){}}return""}function pc(n,o){return Ve(ti,function(d){var x="_."+d[0];o&d[1]&&!bn(n,x)&&n.push(x)}),n.sort()}function Df(n){if(n instanceof Pt)return n.clone();var o=new ur(n.__wrapped__,n.__chain__);return o.__actions__=pr(n.__actions__),o.__index__=n.__index__,o.__values__=n.__values__,o}function Eu(n,o,d){(d?gr(n,o,d):o===N)?o=1:o=Mt(Ft(o),0);var x=n==null?0:n.length;if(!x||o<1)return[];for(var T=0,P=0,H=Q(so(x/o));T<x;)H[P++]=ds(n,T,T+=o);return H}function Lf(n){for(var o=-1,d=n==null?0:n.length,x=0,T=[];++o<d;){var P=n[o];P&&(T[x++]=P)}return T}function uh(){var n=arguments.length;if(!n)return[];for(var o=Q(n-1),d=arguments[0],x=n;x--;)o[x-1]=arguments[x];return yi(Et(d)?pr(d):[d],li(o,1))}var Ou=Nt(function(n,o){return Ti(n)?ll(n,li(o,1,Ti,!0)):[]}),Du=Nt(function(n,o){var d=Os(o);return Ti(d)&&(d=N),Ti(n)?ll(n,li(o,1,Ti,!0),tt(d,2)):[]}),Lu=Nt(function(n,o){var d=Os(o);return Ti(d)&&(d=N),Ti(n)?ll(n,li(o,1,Ti,!0),N,d):[]});function Pu(n,o,d){var x=n==null?0:n.length;return x?(o=d||o===N?1:Ft(o),ds(n,o<0?0:o,x)):[]}function Pf(n,o,d){var x=n==null?0:n.length;return x?(o=d||o===N?1:Ft(o),o=x-o,ds(n,0,o<0?0:o)):[]}function Bu(n,o){return n&&n.length?Ul(n,tt(o,3),!0,!0):[]}function Bf(n,o){return n&&n.length?Ul(n,tt(o,3),!0):[]}function Iu(n,o,d,x){var T=n==null?0:n.length;return T?(d&&typeof d!="number"&&gr(n,o,d)&&(d=0,x=T),Ha(n,o,d,x)):[]}function Kh(n,o,d){var x=n==null?0:n.length;if(!x)return-1;var T=d==null?0:Ft(d);return T<0&&(T=Mt(x+T,0)),vn(n,tt(o,3),T)}function If(n,o,d){var x=n==null?0:n.length;if(!x)return-1;var T=x-1;return d!==N&&(T=Ft(d),T=d<0?Mt(x+T,0):dn(T,x-1)),vn(n,tt(o,3),T,!0)}function _u(n){var o=n==null?0:n.length;return o?li(n,1):[]}function _f(n){var o=n==null?0:n.length;return o?li(n,en):[]}function gc(n,o){var d=n==null?0:n.length;return d?(o=o===N?1:Ft(o),li(n,o)):[]}function mc(n){for(var o=-1,d=n==null?0:n.length,x={};++o<d;){var T=n[o];x[T[0]]=T[1]}return x}function Nu(n){return n&&n.length?n[0]:N}function vc(n,o,d){var x=n==null?0:n.length;if(!x)return-1;var T=d==null?0:Ft(d);return T<0&&(T=Mt(x+T,0)),St(n,o,T)}function Fu(n){var o=n==null?0:n.length;return o?ds(n,0,-1):[]}var ml=Nt(function(n){var o=ft(n,qa);return o.length&&o[0]===n[0]?S(o):[]}),Ql=Nt(function(n){var o=Os(n),d=ft(n,qa);return o===Os(d)?o=N:d.pop(),d.length&&d[0]===n[0]?S(d,tt(o,2)):[]}),Nf=Nt(function(n){var o=Os(n),d=ft(n,qa);return o=typeof o=="function"?o:N,o&&d.pop(),d.length&&d[0]===n[0]?S(d,N,o):[]});function Ff(n,o){return n==null?"":Vt.call(n,o)}function Os(n){var o=n==null?0:n.length;return o?n[o-1]:N}function ch(n,o,d){var x=n==null?0:n.length;if(!x)return-1;var T=x;return d!==N&&(T=Ft(d),T=T<0?Mt(x+T,0):dn(T,x-1)),o===o?Co(n,o,T):vn(n,Tn,T,!0)}function Uh(n,o){return n&&n.length?ho(n,Ft(o)):N}var Wf=Nt(Ki);function Ki(n,o){return n&&n.length&&o&&o.length?cs(n,o):n}function yc(n,o,d){return n&&n.length&&o&&o.length?cs(n,o,tt(d,2)):n}function Wu(n,o,d){return n&&n.length&&o&&o.length?cs(n,o,N,d):n}var Hu=uo(function(n,o){var d=n==null?0:n.length,x=fa(n,o);return Yi(n,ft(o,function(T){return co(T,d)?+T:T}).sort(df)),x});function Hf(n,o){var d=[];if(!(n&&n.length))return d;var x=-1,T=[],P=n.length;for(o=tt(o,3);++x<P;){var H=n[x];o(H,x,n)&&(d.push(H),T.push(x))}return Yi(n,T),d}function qh(n){return n==null?n:oo.call(n)}function zf(n,o,d){var x=n==null?0:n.length;return x?(d&&typeof d!="number"&&gr(n,o,d)?(o=0,d=x):(o=o==null?0:Ft(o),d=d===N?x:Ft(d)),ds(n,o,d)):[]}function zu(n,o){return Za(n,o)}function xc(n,o,d){return fl(n,o,tt(d,2))}function Vu(n,o){var d=n==null?0:n.length;if(d){var x=Za(n,o);if(x<d&&tr(n[x],o))return x}return-1}function Vf(n,o){return Za(n,o,!0)}function Gh(n,o,d){return fl(n,o,tt(d,2),!0)}function wc(n,o){var d=n==null?0:n.length;if(d){var x=Za(n,o,!0)-1;if(tr(n[x],o))return x}return-1}function bc(n){return n&&n.length?ga(n):[]}function $f(n,o){return n&&n.length?ga(n,tt(o,2)):[]}function Zf(n){var o=n==null?0:n.length;return o?ds(n,1,o):[]}function $u(n,o,d){return n&&n.length?(o=d||o===N?1:Ft(o),ds(n,0,o<0?0:o)):[]}function Kf(n,o,d){var x=n==null?0:n.length;return x?(o=d||o===N?1:Ft(o),o=x-o,ds(n,o<0?0:o,x)):[]}function dh(n,o){return n&&n.length?Ul(n,tt(o,3),!1,!0):[]}function ph(n,o){return n&&n.length?Ul(n,tt(o,3)):[]}var gh=Nt(function(n){return _o(li(n,1,Ti,!0))}),Zu=Nt(function(n){var o=Os(n);return Ti(o)&&(o=N),_o(li(n,1,Ti,!0),tt(o,2))}),Uf=Nt(function(n){var o=Os(n);return o=typeof o=="function"?o:N,_o(li(n,1,Ti,!0),N,o)});function Ku(n){return n&&n.length?_o(n):[]}function Uu(n,o){return n&&n.length?_o(n,tt(o,2)):[]}function qu(n,o){return o=typeof o=="function"?o:N,n&&n.length?_o(n,N,o):[]}function jh(n){if(!(n&&n.length))return[];var o=0;return n=wn(n,function(d){if(Ti(d))return o=Mt(d.length,o),!0}),Yn(o,function(d){return ft(n,es(d))})}function qf(n,o){if(!(n&&n.length))return[];var d=jh(n);return o==null?d:ft(d,function(x){return et(o,N,x)})}var Gf=Nt(function(n,o){return Ti(n)?ll(n,o):[]}),Xh=Nt(function(n){return Ua(wn(n,Ti))}),jf=Nt(function(n){var o=Os(n);return Ti(o)&&(o=N),Ua(wn(n,Ti),tt(o,2))}),Gu=Nt(function(n){var o=Os(n);return o=typeof o=="function"?o:N,Ua(wn(n,Ti),N,o)}),Xf=Nt(jh);function mh(n,o){return Bh(n||[],o||[],Vl)}function Sc(n,o){return Bh(n||[],o||[],Mr)}var Cc=Nt(function(n){var o=n.length,d=o>1?n[o-1]:N;return d=typeof d=="function"?(n.pop(),d):N,qf(n,d)});function Jh(n){var o=O(n);return o.__chain__=!0,o}function kc(n,o){return o(n),n}function Ta(n,o){return o(n)}var Yh=uo(function(n){var o=n.length,d=o?n[0]:0,x=this.__wrapped__,T=function(P){return fa(P,n)};return o>1||this.__actions__.length||!(x instanceof Pt)||!co(d)?this.thru(T):(x=x.slice(d,+d+(o?1:0)),x.__actions__.push({func:Ta,args:[T],thisArg:N}),new ur(x,this.__chain__).thru(function(P){return o&&!P.length&&P.push(N),P}))});function Jf(){return Jh(this)}function Yf(){return new ur(this.value(),this.__chain__)}function Ma(){this.__values__===N&&(this.__values__=Oc(this.value()));var n=this.__index__>=this.__values__.length,o=n?N:this.__values__[this.__index__++];return{done:n,value:o}}function vh(){return this}function Qf(n){for(var o,d=this;d instanceof sa;){var x=Df(d);x.__index__=0,x.__values__=N,o?T.__wrapped__=x:o=x;var T=x;d=d.__wrapped__}return T.__wrapped__=n,o}function eu(){var n=this.__wrapped__;if(n instanceof Pt){var o=n;return this.__actions__.length&&(o=new Pt(this)),o=o.reverse(),o.__actions__.push({func:Ta,args:[qh],thisArg:N}),new ur(o,this.__chain__)}return this.thru(qh)}function Qh(){return va(this.__wrapped__,this.__actions__)}var tu=ja(function(n,o,d){mt.call(n,d)?++n[d]:ls(n,d,1)});function nu(n,o,d){var x=Et(n)?An:Wa;return d&&gr(n,o,d)&&(o=N),x(n,tt(o,3))}function ef(n,o){var d=Et(n)?wn:Zl;return d(n,tt(o,3))}var tf=yf(Kh),yh=yf(If);function iu(n,o){return li(xh(n,o),1)}function nf(n,o){return li(xh(n,o),en)}function Ac(n,o,d){return d=d===N?1:Ft(d),li(xh(n,o),d)}function ru(n,o){var d=Et(n)?Ve:Rs;return d(n,tt(o,3))}function su(n,o){var d=Et(n)?Lt:Fa;return d(n,tt(o,3))}var ju=ja(function(n,o,d){mt.call(n,d)?n[d].push(o):ls(n,d,[o])});function Xu(n,o,d,x){n=gs(n)?n:Sh(n),d=d&&!x?Ft(d):0;var T=n.length;return d<0&&(d=Mt(T+d,0)),fu(n)?d<=T&&n.indexOf(o,d)>-1:!!T&&St(n,o,d)>-1}var ou=Nt(function(n,o,d){var x=-1,T=typeof o=="function",P=gs(n)?Q(n.length):[];return Rs(n,function(H){P[++x]=T?et(o,H,d):R(H,o,d)}),P}),Ju=ja(function(n,o,d){ls(n,d,o)});function xh(n,o){var d=Et(n)?ft:Es;return d(n,tt(o,3))}function Yu(n,o,d,x){return n==null?[]:(Et(o)||(o=o==null?[]:[o]),d=x?N:d,Et(d)||(d=d==null?[]:[d]),us(n,o,d))}var lu=ja(function(n,o,d){n[d?0:1].push(o)},function(){return[[],[]]});function Qu(n,o,d){var x=Et(n)?Un:Li,T=arguments.length<3;return x(n,tt(o,4),d,T,Rs)}function s(n,o,d){var x=Et(n)?At:Li,T=arguments.length<3;return x(n,tt(o,4),d,T,Fa)}function e(n,o){var d=Et(n)?wn:Zl;return d(n,it(tt(o,3)))}function i(n){var o=Et(n)?Bo:pa;return o(n)}function l(n,o,d){(d?gr(n,o,d):o===N)?o=1:o=Ft(o);var x=Et(n)?ff:Lh;return x(n,o)}function a(n){var o=Et(n)?aa:Ph;return o(n)}function c(n){if(n==null)return 0;if(gs(n))return fu(n)?Qn(n):n.length;var o=Qi(n);return o==jn||o==Zn?n.size:pn(n).length}function m(n,o,d){var x=Et(n)?ri:du;return d&&gr(n,o,d)&&(o=N),x(n,tt(o,3))}var w=Nt(function(n,o){if(n==null)return[];var d=o.length;return d>1&&gr(n,o[0],o[1])?o=[]:d>2&&gr(o[0],o[1],o[2])&&(o=[o[0]]),us(n,li(o,1),[])}),C=ro||function(){return Te.Date.now()};function I(n,o){if(typeof o!="function")throw new zi(fn);return n=Ft(n),function(){if(--n<1)return o.apply(this,arguments)}}function F(n,o,d){return o=d?N:o,o=n&&o==null?n.length:o,ei(n,zt,N,N,N,N,o)}function U(n,o){var d;if(typeof o!="function")throw new zi(fn);return n=Ft(n),function(){return--n>0&&(d=o.apply(this,arguments)),n<=1&&(o=N),d}}var ie=Nt(function(n,o,d){var x=me;if(d.length){var T=Cr(d,Xl(ie));x|=Cn}return ei(n,x,o,d,T)}),ye=Nt(function(n,o,d){var x=me|We;if(d.length){var T=Cr(d,Xl(ye));x|=Cn}return ei(o,x,n,d,T)});function Ee(n,o,d){o=d?N:o;var x=ei(n,gn,N,N,N,N,N,o);return x.placeholder=Ee.placeholder,x}function ut(n,o,d){o=d?N:o;var x=ei(n,Ht,N,N,N,N,N,o);return x.placeholder=ut.placeholder,x}function ln(n,o,d){var x,T,P,H,$,J,pe=0,ge=!1,xe=!1,Ie=!0;if(typeof n!="function")throw new zi(fn);o=Ks(o)||0,fi(d)&&(ge=!!d.leading,xe="maxWait"in d,P=xe?Mt(Ks(d.maxWait)||0,o):P,Ie="trailing"in d?!!d.trailing:Ie);function Je(Mi){var go=x,wl=T;return x=T=N,pe=Mi,H=n.apply(wl,go),H}function at(Mi){return pe=Mi,$=pl(Yt,o),ge?Je(Mi):H}function $t(Mi){var go=Mi-J,wl=Mi-pe,$c=o-go;return xe?dn($c,P-wl):$c}function ht(Mi){var go=Mi-J,wl=Mi-pe;return J===N||go>=o||go<0||xe&&wl>=P}function Yt(){var Mi=C();if(ht(Mi))return rn(Mi);$=pl(Yt,$t(Mi))}function rn(Mi){return $=N,Ie&&x?Je(Mi):(x=T=N,H)}function Ps(){$!==N&&ya($),pe=0,x=J=T=$=N}function Gr(){return $===N?H:rn(C())}function Bs(){var Mi=C(),go=ht(Mi);if(x=arguments,T=this,J=Mi,go){if($===N)return at(J);if(xe)return ya($),$=pl(Yt,o),Je(J)}return $===N&&($=pl(Yt,o)),H}return Bs.cancel=Ps,Bs.flush=Gr,Bs}var nn=Nt(function(n,o){return Eh(n,1,o)}),Rt=Nt(function(n,o,d){return Eh(n,Ks(o)||0,d)});function an(n){return ei(n,Dn)}function lt(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new zi(fn);var d=function(){var x=arguments,T=o?o.apply(this,x):x[0],P=d.cache;if(P.has(T))return P.get(T);var H=n.apply(this,x);return d.cache=P.set(T,H)||P,H};return d.cache=new(lt.Cache||ss),d}lt.Cache=ss;function it(n){if(typeof n!="function")throw new zi(fn);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}function nt(n){return U(2,n)}var Bt=pu(function(n,o){o=o.length==1&&Et(o[0])?ft(o[0],yn(tt())):ft(li(o,1),yn(tt()));var d=o.length;return Nt(function(x){for(var T=-1,P=dn(x.length,d);++T<P;)x[T]=o[T].call(this,x[T]);return et(n,this,x)})}),Hn=Nt(function(n,o){var d=Cr(o,Xl(Hn));return ei(n,Cn,N,o,d)}),st=Nt(function(n,o){var d=Cr(o,Xl(st));return ei(n,Vn,N,o,d)}),Ct=uo(function(n,o){return ei(n,$n,N,N,N,o)});function Sn(n,o){if(typeof n!="function")throw new zi(fn);return o=o===N?o:Ft(o),Nt(n,o)}function hi(n,o){if(typeof n!="function")throw new zi(fn);return o=o==null?0:Mt(Ft(o),0),Nt(function(d){var x=d[o],T=bi(d,0,o);return x&&yi(T,x),et(n,this,T)})}function mr(n,o,d){var x=!0,T=!0;if(typeof n!="function")throw new zi(fn);return fi(d)&&(x="leading"in d?!!d.leading:x,T="trailing"in d?!!d.trailing:T),ln(n,o,{leading:x,maxWait:o,trailing:T})}function po(n){return F(n,1)}function ps(n,o){return Hn(Ga(o),n)}function zn(){if(!arguments.length)return[];var n=arguments[0];return Et(n)?n:[n]}function Rr(n){return Ai(n,Dt)}function Er(n,o){return o=typeof o=="function"?o:N,Ai(n,Dt,o)}function er(n){return Ai(n,It|Dt)}function Ds(n,o){return o=typeof o=="function"?o:N,Ai(n,It|Dt,o)}function vl(n,o){return o==null||$l(n,o,nr(o))}function tr(n,o){return n===o||n!==n&&o!==o}var wh=nh(h),au=nh(function(n,o){return n>=o}),Ra=L(function(){return arguments}())?L:function(n){return Si(n)&&mt.call(n,"callee")&&!no.call(n,"callee")},Et=Q.isArray,Zc=gt?yn(gt):z;function gs(n){return n!=null&&hu(n.length)&&!yl(n)}function Ti(n){return Si(n)&&gs(n)}function Kc(n){return n===!0||n===!1||Si(n)&&r(n)==ni}var ea=Oo||fc,Uc=Xt?yn(Xt):Y;function qc(n){return Si(n)&&n.nodeType===1&&!rf(n)}function Gc(n){if(n==null)return!0;if(gs(n)&&(Et(n)||typeof n=="string"||typeof n.splice=="function"||ea(n)||bh(n)||Ra(n)))return!n.length;var o=Qi(n);if(o==jn||o==Zn)return!n.size;if(ka(n))return!pn(n).length;for(var d in n)if(mt.call(n,d))return!1;return!0}function jc(n,o){return te(n,o)}function Xc(n,o,d){d=typeof d=="function"?d:N;var x=d?d(n,o):N;return x===N?te(n,o,N,d):!!x}function ec(n){if(!Si(n))return!1;var o=r(n);return o==Lr||o==Dr||typeof n.message=="string"&&typeof n.name=="string"&&!rf(n)}function Jc(n){return typeof n=="number"&&vt(n)}function yl(n){if(!fi(n))return!1;var o=r(n);return o==sr||o==Pr||o==Us||o==pi}function Tc(n){return typeof n=="number"&&n==Ft(n)}function hu(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=wt}function fi(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}function Si(n){return n!=null&&typeof n=="object"}var Mc=Ue?yn(Ue):be;function Yc(n,o){return n===o||ve(n,o,Wh(o))}function Qc(n,o,d){return d=typeof d=="function"?d:N,ve(n,o,Wh(o),d)}function ed(n){return Rc(n)&&n!=+n}function td(n){if(Tf(n))throw new $e(ee);return Re(n)}function nd(n){return n===null}function id(n){return n==null}function Rc(n){return typeof n=="number"||Si(n)&&r(n)==Le}function rf(n){if(!Si(n)||r(n)!=mn)return!1;var o=is(n);if(o===null)return!0;var d=mt.call(o,"constructor")&&o.constructor;return typeof d=="function"&&d instanceof d&&Ro.call(d)==Ii}var tc=Fe?yn(Fe):xt;function rd(n){return Tc(n)&&n>=-wt&&n<=wt}var Ec=Me?yn(Me):qt;function fu(n){return typeof n=="string"||!Et(n)&&Si(n)&&r(n)==vr}function Ls(n){return typeof n=="symbol"||Si(n)&&r(n)==Br}var bh=Xe?yn(Xe):_t;function sd(n){return n===N}function od(n){return Si(n)&&Qi(n)==yr}function ld(n){return Si(n)&&r(n)==Fi}var ad=nh(hs),hd=nh(function(n,o){return n<=o});function Oc(n){if(!n)return[];if(gs(n))return fu(n)?Nn(n):pr(n);if(io&&n[io])return ks(n[io]());var o=Qi(n),d=o==jn?Fs:o==Zn?Xs:Sh;return d(n)}function xl(n){if(!n)return n===0?n:0;if(n=Ks(n),n===en||n===-en){var o=n<0?-1:1;return o*Gt}return n===n?n:0}function Ft(n){var o=xl(n),d=o%1;return o===o?d?o-d:o:0}function Dc(n){return n?$s(Ft(n),0,jt):0}function Ks(n){if(typeof n=="number")return n;if(Ls(n))return ir;if(fi(n)){var o=typeof n.valueOf=="function"?n.valueOf():n;n=fi(o)?o+"":o}if(typeof n!="string")return n===0?n:+n;n=Pi(n);var d=zr.test(n);return d||p.test(n)?ze(n.slice(2),d?2:8):Hr.test(n)?ir:+n}function Lc(n){return $i(n,ms(n))}function fd(n){return n?$s(Ft(n),-wt,wt):n===0?n:0}function Mn(n){return n==null?"":qr(n)}var ud=ul(function(n,o){if(ka(o)||gs(o)){$i(o,nr(o),n);return}for(var d in o)mt.call(o,d)&&Vl(n,d,o[d])}),Pc=ul(function(n,o){$i(o,ms(o),n)}),uu=ul(function(n,o,d,x){$i(o,ms(o),n,x)}),cd=ul(function(n,o,d,x){$i(o,nr(o),n,x)}),dd=uo(fa);function pd(n,o){var d=nl(n);return o==null?d:ol(d,o)}var gd=Nt(function(n,o){n=Jt(n);var d=-1,x=o.length,T=x>2?o[2]:N;for(T&&gr(o[0],o[1],T)&&(x=1);++d<x;)for(var P=o[d],H=ms(P),$=-1,J=H.length;++$<J;){var pe=H[$],ge=n[pe];(ge===N||tr(ge,Fn[pe])&&!mt.call(n,pe))&&(n[pe]=P[pe])}return n}),md=Nt(function(n){return n.push(N,bf),et(Bc,N,n)});function vd(n,o){return bt(n,tt(o,3),as)}function yd(n,o){return bt(n,tt(o,3),Va)}function xd(n,o){return n==null?n:za(n,tt(o,3),ms)}function wd(n,o){return n==null?n:Oh(n,tt(o,3),ms)}function bd(n,o){return n&&as(n,tt(o,3))}function Sd(n,o){return n&&Va(n,tt(o,3))}function Cd(n){return n==null?[]:ca(n,nr(n))}function kd(n){return n==null?[]:ca(n,ms(n))}function nc(n,o,d){var x=n==null?N:f(n,o);return x===N?d:x}function Ad(n,o){return n!=null&&Yl(n,o,u)}function ic(n,o){return n!=null&&Yl(n,o,g)}var Td=xf(function(n,o,d){o!=null&&typeof o.toString!="function"&&(o=oi.call(o)),n[o]=d},sc(vs)),Md=xf(function(n,o,d){o!=null&&typeof o.toString!="function"&&(o=oi.call(o)),mt.call(n,o)?n[o].push(d):n[o]=[d]},tt),Rd=Nt(R);function nr(n){return gs(n)?_a(n):pn(n)}function ms(n){return gs(n)?_a(n,!0):_i(n)}function Ed(n,o){var d={};return o=tt(o,3),as(n,function(x,T,P){ls(d,o(x,T,P),x)}),d}function Od(n,o){var d={};return o=tt(o,3),as(n,function(x,T,P){ls(d,T,o(x,T,P))}),d}var Dd=ul(function(n,o,d){ao(n,o,d)}),Bc=ul(function(n,o,d,x){ao(n,o,d,x)}),Ld=uo(function(n,o){var d={};if(n==null)return d;var x=!1;o=ft(o,function(P){return P=No(P,n),x||(x=P.length>1),P}),$i(n,Nh(n),d),x&&(d=Ai(d,It|Wt|Dt,Sf));for(var T=o.length;T--;)Ka(d,o[T]);return d});function Pd(n,o){return Ic(n,it(tt(o)))}var Bd=uo(function(n,o){return n==null?{}:fo(n,o)});function Ic(n,o){if(n==null)return{};var d=ft(Nh(n),function(x){return[x]});return o=tt(o),dr(n,d,function(x,T){return o(x,T[0])})}function Id(n,o,d){o=No(o,n);var x=-1,T=o.length;for(T||(T=1,n=N);++x<T;){var P=n==null?N:n[Zs(o[x])];P===N&&(x=T,P=d),n=yl(P)?P.call(n):P}return n}function _d(n,o,d){return n==null?n:Mr(n,o,d)}function Nd(n,o,d,x){return x=typeof x=="function"?x:N,n==null?n:Mr(n,o,d,x)}var _c=rh(nr),Nc=rh(ms);function Fd(n,o,d){var x=Et(n),T=x||ea(n)||bh(n);if(o=tt(o,4),d==null){var P=n&&n.constructor;T?d=x?new P:[]:fi(n)?d=yl(P)?nl(is(n)):{}:d={}}return(T?Ve:as)(n,function(H,$,J){return o(d,H,$,J)}),d}function Wd(n,o){return n==null?!0:Ka(n,o)}function Hd(n,o,d){return n==null?n:uf(n,o,Ga(d))}function zd(n,o,d,x){return x=typeof x=="function"?x:N,n==null?n:uf(n,o,Ga(d),x)}function Sh(n){return n==null?[]:qn(n,nr(n))}function Vd(n){return n==null?[]:qn(n,ms(n))}function $d(n,o,d){return d===N&&(d=o,o=N),d!==N&&(d=Ks(d),d=d===d?d:0),o!==N&&(o=Ks(o),o=o===o?o:0),$s(Ks(n),o,d)}function Zd(n,o,d){return o=xl(o),d===N?(d=o,o=0):d=xl(d),n=Ks(n),y(n,o,d)}function Kd(n,o,d){if(d&&typeof d!="boolean"&&gr(n,o,d)&&(o=d=N),d===N&&(typeof o=="boolean"?(d=o,o=N):typeof n=="boolean"&&(d=n,n=N)),n===N&&o===N?(n=0,o=1):(n=xl(n),o===N?(o=n,n=0):o=xl(o)),n>o){var x=n;n=o,o=x}if(d||n%1||o%1){var T=wi();return dn(n+T*(o-n+qe("1e-"+((T+"").length-1))),o)}return Kl(n,o)}var Ud=ai(function(n,o,d){return o=o.toLowerCase(),n+(d?Fc(o):o)});function Fc(n){return rc(Mn(n).toLowerCase())}function Wc(n){return n=Mn(n),n&&n.replace(b,jo).replace(j,"")}function qd(n,o,d){n=Mn(n),o=qr(o);var x=n.length;d=d===N?x:$s(Ft(d),0,x);var T=d;return d-=o.length,d>=0&&n.slice(d,T)==o}function Gd(n){return n=Mn(n),n&&on.test(n)?n.replace(cn,So):n}function jd(n){return n=Mn(n),n&&Fr.test(n)?n.replace(Ei,"\\$&"):n}var Xd=ai(function(n,o,d){return n+(d?"-":"")+o.toLowerCase()}),Jd=ai(function(n,o,d){return n+(d?" ":"")+o.toLowerCase()}),Yd=vf("toLowerCase");function Qd(n,o,d){n=Mn(n),o=Ft(o);var x=o?Qn(n):0;if(!o||x>=o)return n;var T=(o-x)/2;return th(Ar(T),d)+n+th(so(T),d)}function ep(n,o,d){n=Mn(n),o=Ft(o);var x=o?Qn(n):0;return o&&x<o?n+th(o-x,d):n}function tp(n,o,d){n=Mn(n),o=Ft(o);var x=o?Qn(n):0;return o&&x<o?th(o-x,d)+n:n}function np(n,o,d){return d||o==null?o=0:o&&(o=+o),Kr(Mn(n).replace(xs,""),o||0)}function ip(n,o,d){return(d?gr(n,o,d):o===N)?o=1:o=Ft(o),Dh(Mn(n),o)}function rp(){var n=arguments,o=Mn(n[0]);return n.length<3?o:o.replace(n[1],n[2])}var sp=ai(function(n,o,d){return n+(d?"_":"")+o.toLowerCase()});function op(n,o,d){return d&&typeof d!="number"&&gr(n,o,d)&&(o=d=N),d=d===N?jt:d>>>0,d?(n=Mn(n),n&&(typeof o=="string"||o!=null&&!tc(o))&&(o=qr(o),!o&&Sr(n))?bi(Nn(n),0,d):n.split(o,d)):[]}var lp=ai(function(n,o,d){return n+(d?" ":"")+rc(o)});function ap(n,o,d){return n=Mn(n),d=d==null?0:$s(Ft(d),0,n.length),o=qr(o),n.slice(d,d+o.length)==o}function hp(n,o,d){var x=O.templateSettings;d&&gr(n,o,d)&&(o=N),n=Mn(n),o=uu({},o,x,cl);var T=uu({},o.imports,x.imports,cl),P=nr(T),H=qn(T,P),$,J,pe=0,ge=o.interpolate||k,xe="__p += '",Ie=To((o.escape||k).source+"|"+ge.source+"|"+(ge===se?Wr:k).source+"|"+(o.evaluate||k).source+"|$","g"),Je="//# sourceURL="+(mt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++le+"]")+`
`;n.replace(Ie,function(ht,Yt,rn,Ps,Gr,Bs){return rn||(rn=Ps),xe+=n.slice(pe,Bs).replace(E,ta),Yt&&($=!0,xe+=`' +
__e(`+Yt+`) +
'`),Gr&&(J=!0,xe+=`';
`+Gr+`;
__p += '`),rn&&(xe+=`' +
((__t = (`+rn+`)) == null ? '' : __t) +
'`),pe=Bs+ht.length,ht}),xe+=`';
`;var at=mt.call(o,"variable")&&o.variable;if(!at)xe=`with (obj) {
`+xe+`
}
`;else if(ws.test(at))throw new $e(Ot);xe=(J?xe.replace(Xn,""):xe).replace(Rn,"$1").replace(Wi,"$1;"),xe="function("+(at||"obj")+`) {
`+(at?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(J?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xe+`return __p
}`;var $t=zc(function(){return Tt(P,Je+"return "+xe).apply(N,H)});if($t.source=xe,ec($t))throw $t;return $t}function fp(n){return Mn(n).toLowerCase()}function up(n){return Mn(n).toUpperCase()}function cp(n,o,d){if(n=Mn(n),n&&(d||o===N))return Pi(n);if(!n||!(o=qr(o)))return n;var x=Nn(n),T=Nn(o),P=ts(x,T),H=Rl(x,T)+1;return bi(x,P,H).join("")}function dp(n,o,d){if(n=Mn(n),n&&(d||o===N))return n.slice(0,ns(n)+1);if(!n||!(o=qr(o)))return n;var x=Nn(n),T=Rl(x,Nn(o))+1;return bi(x,0,T).join("")}function pp(n,o,d){if(n=Mn(n),n&&(d||o===N))return n.replace(xs,"");if(!n||!(o=qr(o)))return n;var x=Nn(n),T=ts(x,Nn(o));return bi(x,T).join("")}function gp(n,o){var d=Ln,x=sn;if(fi(o)){var T="separator"in o?o.separator:T;d="length"in o?Ft(o.length):d,x="omission"in o?qr(o.omission):x}n=Mn(n);var P=n.length;if(Sr(n)){var H=Nn(n);P=H.length}if(d>=P)return n;var $=d-Qn(x);if($<1)return x;var J=H?bi(H,0,$).join(""):n.slice(0,$);if(T===N)return J+x;if(H&&($+=J.length-$),tc(T)){if(n.slice($).search(T)){var pe,ge=J;for(T.global||(T=To(T.source,Mn(_n.exec(T))+"g")),T.lastIndex=0;pe=T.exec(ge);)var xe=pe.index;J=J.slice(0,xe===N?$:xe)}}else if(n.indexOf(qr(T),$)!=$){var Ie=J.lastIndexOf(T);Ie>-1&&(J=J.slice(0,Ie))}return J+x}function mp(n){return n=Mn(n),n&&Kn.test(n)?n.replace(Ri,Ol):n}var vp=ai(function(n,o,d){return n+(d?" ":"")+o.toUpperCase()}),rc=vf("toUpperCase");function Hc(n,o,d){return n=Mn(n),o=d?N:o,o===N?$r(n)?Dl(n):si(n):n.match(o)||[]}var zc=Nt(function(n,o){try{return et(n,N,o)}catch(d){return ec(d)?d:new $e(d)}}),yp=uo(function(n,o){return Ve(o,function(d){d=Zs(d),ls(n,d,ie(n[d],n))}),n});function xp(n){var o=n==null?0:n.length,d=tt();return n=o?ft(n,function(x){if(typeof x[1]!="function")throw new zi(fn);return[d(x[0]),x[1]]}):[],Nt(function(x){for(var T=-1;++T<o;){var P=n[T];if(et(P[0],this,x))return et(P[1],this,x)}})}function wp(n){return ua(Ai(n,It))}function sc(n){return function(){return n}}function bp(n,o){return n==null||n!==n?o:n}var Sp=Ja(),Cp=Ja(!0);function vs(n){return n}function oc(n){return tn(typeof n=="function"?n:Ai(n,It))}function kp(n){return al(Ai(n,It))}function Ap(n,o){return da(n,Ai(o,It))}var Tp=Nt(function(n,o){return function(d){return R(d,n,o)}}),Mp=Nt(function(n,o){return function(d){return R(n,d,o)}});function lc(n,o,d){var x=nr(o),T=ca(o,x);d==null&&!(fi(o)&&(T.length||!x.length))&&(d=o,o=n,n=this,T=ca(o,nr(o)));var P=!(fi(d)&&"chain"in d)||!!d.chain,H=yl(n);return Ve(T,function($){var J=o[$];n[$]=J,H&&(n.prototype[$]=function(){var pe=this.__chain__;if(P||pe){var ge=n(this.__wrapped__),xe=ge.__actions__=pr(this.__actions__);return xe.push({func:J,args:arguments,thisArg:n}),ge.__chain__=pe,ge}return J.apply(n,yi([this.value()],arguments))})}),n}function Rp(){return Te._===this&&(Te._=eo),this}function ac(){}function Ep(n){return n=Ft(n),Nt(function(o){return ho(o,n)})}var Op=eh(ft),Dp=eh(An),Lp=eh(ri);function Vc(n){return zh(n)?es(Zs(n)):hl(n)}function Pp(n){return function(o){return n==null?N:f(n,o)}}var Bp=Sa(),Ip=Sa(!0);function hc(){return[]}function fc(){return!1}function _p(){return{}}function Np(){return""}function Fp(){return!0}function Wp(n,o){if(n=Ft(n),n<1||n>wt)return[];var d=jt,x=dn(n,jt);o=tt(o),n-=jt;for(var T=Yn(x,o);++d<n;)o(d);return T}function Hp(n){return Et(n)?ft(n,Zs):Ls(n)?[n]:pr(Zh(Mn(n)))}function zp(n){var o=++Qs;return Mn(n)+o}var Vp=Qa(function(n,o){return n+o},0),$p=ih("ceil"),Zp=Qa(function(n,o){return n/o},1),Kp=ih("floor");function Up(n){return n&&n.length?Io(n,vs,h):N}function qp(n,o){return n&&n.length?Io(n,tt(o,2),h):N}function Gp(n){return En(n,vs)}function jp(n,o){return En(n,tt(o,2))}function Xp(n){return n&&n.length?Io(n,vs,hs):N}function Jp(n,o){return n&&n.length?Io(n,tt(o,2),hs):N}var Yp=Qa(function(n,o){return n*o},1),Qp=ih("round"),eg=Qa(function(n,o){return n-o},0);function tg(n){return n&&n.length?hr(n,vs):0}function ng(n,o){return n&&n.length?hr(n,tt(o,2)):0}return O.after=I,O.ary=F,O.assign=ud,O.assignIn=Pc,O.assignInWith=uu,O.assignWith=cd,O.at=dd,O.before=U,O.bind=ie,O.bindAll=yp,O.bindKey=ye,O.castArray=zn,O.chain=Jh,O.chunk=Eu,O.compact=Lf,O.concat=uh,O.cond=xp,O.conforms=wp,O.constant=sc,O.countBy=tu,O.create=pd,O.curry=Ee,O.curryRight=ut,O.debounce=ln,O.defaults=gd,O.defaultsDeep=md,O.defer=nn,O.delay=Rt,O.difference=Ou,O.differenceBy=Du,O.differenceWith=Lu,O.drop=Pu,O.dropRight=Pf,O.dropRightWhile=Bu,O.dropWhile=Bf,O.fill=Iu,O.filter=ef,O.flatMap=iu,O.flatMapDeep=nf,O.flatMapDepth=Ac,O.flatten=_u,O.flattenDeep=_f,O.flattenDepth=gc,O.flip=an,O.flow=Sp,O.flowRight=Cp,O.fromPairs=mc,O.functions=Cd,O.functionsIn=kd,O.groupBy=ju,O.initial=Fu,O.intersection=ml,O.intersectionBy=Ql,O.intersectionWith=Nf,O.invert=Td,O.invertBy=Md,O.invokeMap=ou,O.iteratee=oc,O.keyBy=Ju,O.keys=nr,O.keysIn=ms,O.map=xh,O.mapKeys=Ed,O.mapValues=Od,O.matches=kp,O.matchesProperty=Ap,O.memoize=lt,O.merge=Dd,O.mergeWith=Bc,O.method=Tp,O.methodOf=Mp,O.mixin=lc,O.negate=it,O.nthArg=Ep,O.omit=Ld,O.omitBy=Pd,O.once=nt,O.orderBy=Yu,O.over=Op,O.overArgs=Bt,O.overEvery=Dp,O.overSome=Lp,O.partial=Hn,O.partialRight=st,O.partition=lu,O.pick=Bd,O.pickBy=Ic,O.property=Vc,O.propertyOf=Pp,O.pull=Wf,O.pullAll=Ki,O.pullAllBy=yc,O.pullAllWith=Wu,O.pullAt=Hu,O.range=Bp,O.rangeRight=Ip,O.rearg=Ct,O.reject=e,O.remove=Hf,O.rest=Sn,O.reverse=qh,O.sampleSize=l,O.set=_d,O.setWith=Nd,O.shuffle=a,O.slice=zf,O.sortBy=w,O.sortedUniq=bc,O.sortedUniqBy=$f,O.split=op,O.spread=hi,O.tail=Zf,O.take=$u,O.takeRight=Kf,O.takeRightWhile=dh,O.takeWhile=ph,O.tap=kc,O.throttle=mr,O.thru=Ta,O.toArray=Oc,O.toPairs=_c,O.toPairsIn=Nc,O.toPath=Hp,O.toPlainObject=Lc,O.transform=Fd,O.unary=po,O.union=gh,O.unionBy=Zu,O.unionWith=Uf,O.uniq=Ku,O.uniqBy=Uu,O.uniqWith=qu,O.unset=Wd,O.unzip=jh,O.unzipWith=qf,O.update=Hd,O.updateWith=zd,O.values=Sh,O.valuesIn=Vd,O.without=Gf,O.words=Hc,O.wrap=ps,O.xor=Xh,O.xorBy=jf,O.xorWith=Gu,O.zip=Xf,O.zipObject=mh,O.zipObjectDeep=Sc,O.zipWith=Cc,O.entries=_c,O.entriesIn=Nc,O.extend=Pc,O.extendWith=uu,lc(O,O),O.add=Vp,O.attempt=zc,O.camelCase=Ud,O.capitalize=Fc,O.ceil=$p,O.clamp=$d,O.clone=Rr,O.cloneDeep=er,O.cloneDeepWith=Ds,O.cloneWith=Er,O.conformsTo=vl,O.deburr=Wc,O.defaultTo=bp,O.divide=Zp,O.endsWith=qd,O.eq=tr,O.escape=Gd,O.escapeRegExp=jd,O.every=nu,O.find=tf,O.findIndex=Kh,O.findKey=vd,O.findLast=yh,O.findLastIndex=If,O.findLastKey=yd,O.floor=Kp,O.forEach=ru,O.forEachRight=su,O.forIn=xd,O.forInRight=wd,O.forOwn=bd,O.forOwnRight=Sd,O.get=nc,O.gt=wh,O.gte=au,O.has=Ad,O.hasIn=ic,O.head=Nu,O.identity=vs,O.includes=Xu,O.indexOf=vc,O.inRange=Zd,O.invoke=Rd,O.isArguments=Ra,O.isArray=Et,O.isArrayBuffer=Zc,O.isArrayLike=gs,O.isArrayLikeObject=Ti,O.isBoolean=Kc,O.isBuffer=ea,O.isDate=Uc,O.isElement=qc,O.isEmpty=Gc,O.isEqual=jc,O.isEqualWith=Xc,O.isError=ec,O.isFinite=Jc,O.isFunction=yl,O.isInteger=Tc,O.isLength=hu,O.isMap=Mc,O.isMatch=Yc,O.isMatchWith=Qc,O.isNaN=ed,O.isNative=td,O.isNil=id,O.isNull=nd,O.isNumber=Rc,O.isObject=fi,O.isObjectLike=Si,O.isPlainObject=rf,O.isRegExp=tc,O.isSafeInteger=rd,O.isSet=Ec,O.isString=fu,O.isSymbol=Ls,O.isTypedArray=bh,O.isUndefined=sd,O.isWeakMap=od,O.isWeakSet=ld,O.join=Ff,O.kebabCase=Xd,O.last=Os,O.lastIndexOf=ch,O.lowerCase=Jd,O.lowerFirst=Yd,O.lt=ad,O.lte=hd,O.max=Up,O.maxBy=qp,O.mean=Gp,O.meanBy=jp,O.min=Xp,O.minBy=Jp,O.stubArray=hc,O.stubFalse=fc,O.stubObject=_p,O.stubString=Np,O.stubTrue=Fp,O.multiply=Yp,O.nth=Uh,O.noConflict=Rp,O.noop=ac,O.now=C,O.pad=Qd,O.padEnd=ep,O.padStart=tp,O.parseInt=np,O.random=Kd,O.reduce=Qu,O.reduceRight=s,O.repeat=ip,O.replace=rp,O.result=Id,O.round=Qp,O.runInContext=V,O.sample=i,O.size=c,O.snakeCase=sp,O.some=m,O.sortedIndex=zu,O.sortedIndexBy=xc,O.sortedIndexOf=Vu,O.sortedLastIndex=Vf,O.sortedLastIndexBy=Gh,O.sortedLastIndexOf=wc,O.startCase=lp,O.startsWith=ap,O.subtract=eg,O.sum=tg,O.sumBy=ng,O.template=hp,O.times=Wp,O.toFinite=xl,O.toInteger=Ft,O.toLength=Dc,O.toLower=fp,O.toNumber=Ks,O.toSafeInteger=fd,O.toString=Mn,O.toUpper=up,O.trim=cp,O.trimEnd=dp,O.trimStart=pp,O.truncate=gp,O.unescape=mp,O.uniqueId=zp,O.upperCase=vp,O.upperFirst=rc,O.each=ru,O.eachRight=su,O.first=Nu,lc(O,function(){var n={};return as(O,function(o,d){mt.call(O.prototype,d)||(n[d]=o)}),n}(),{chain:!1}),O.VERSION=Oe,Ve(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){O[n].placeholder=O}),Ve(["drop","take"],function(n,o){Pt.prototype[n]=function(d){d=d===N?1:Mt(Ft(d),0);var x=this.__filtered__&&!o?new Pt(this):this.clone();return x.__filtered__?x.__takeCount__=dn(d,x.__takeCount__):x.__views__.push({size:dn(d,jt),type:n+(x.__dir__<0?"Right":"")}),x},Pt.prototype[n+"Right"]=function(d){return this.reverse()[n](d).reverse()}}),Ve(["filter","map","takeWhile"],function(n,o){var d=o+1,x=d==jr||d==Or;Pt.prototype[n]=function(T){var P=this.clone();return P.__iteratees__.push({iteratee:tt(T,3),type:d}),P.__filtered__=P.__filtered__||x,P}}),Ve(["head","last"],function(n,o){var d="take"+(o?"Right":"");Pt.prototype[n]=function(){return this[d](1).value()[0]}}),Ve(["initial","tail"],function(n,o){var d="drop"+(o?"":"Right");Pt.prototype[n]=function(){return this.__filtered__?new Pt(this):this[d](1)}}),Pt.prototype.compact=function(){return this.filter(vs)},Pt.prototype.find=function(n){return this.filter(n).head()},Pt.prototype.findLast=function(n){return this.reverse().find(n)},Pt.prototype.invokeMap=Nt(function(n,o){return typeof n=="function"?new Pt(this):this.map(function(d){return R(d,n,o)})}),Pt.prototype.reject=function(n){return this.filter(it(tt(n)))},Pt.prototype.slice=function(n,o){n=Ft(n);var d=this;return d.__filtered__&&(n>0||o<0)?new Pt(d):(n<0?d=d.takeRight(-n):n&&(d=d.drop(n)),o!==N&&(o=Ft(o),d=o<0?d.dropRight(-o):d.take(o-n)),d)},Pt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Pt.prototype.toArray=function(){return this.take(jt)},as(Pt.prototype,function(n,o){var d=/^(?:filter|find|map|reject)|While$/.test(o),x=/^(?:head|last)$/.test(o),T=O[x?"take"+(o=="last"?"Right":""):o],P=x||/^find/.test(o);T&&(O.prototype[o]=function(){var H=this.__wrapped__,$=x?[1]:arguments,J=H instanceof Pt,pe=$[0],ge=J||Et(H),xe=function(Yt){var rn=T.apply(O,yi([Yt],$));return x&&Ie?rn[0]:rn};ge&&d&&typeof pe=="function"&&pe.length!=1&&(J=ge=!1);var Ie=this.__chain__,Je=!!this.__actions__.length,at=P&&!Ie,$t=J&&!Je;if(!P&&ge){H=$t?H:new Pt(this);var ht=n.apply(H,$);return ht.__actions__.push({func:Ta,args:[xe],thisArg:N}),new ur(ht,Ie)}return at&&$t?n.apply(this,$):(ht=this.thru(xe),at?x?ht.value()[0]:ht.value():ht)})}),Ve(["pop","push","shift","sort","splice","unshift"],function(n){var o=As[n],d=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",x=/^(?:pop|shift)$/.test(n);O.prototype[n]=function(){var T=arguments;if(x&&!this.__chain__){var P=this.value();return o.apply(Et(P)?P:[],T)}return this[d](function(H){return o.apply(Et(H)?H:[],T)})}}),as(Pt.prototype,function(n,o){var d=O[o];if(d){var x=d.name+"";mt.call(tl,x)||(tl[x]=[]),tl[x].push({name:o,func:d})}}),tl[Ya(N,We).name]=[{name:"wrapper",func:N}],Pt.prototype.clone=Ch,Pt.prototype.reverse=of,Pt.prototype.value=kh,O.prototype.at=Yh,O.prototype.chain=Jf,O.prototype.commit=Yf,O.prototype.next=Ma,O.prototype.plant=Qf,O.prototype.reverse=eu,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=Qh,O.prototype.first=O.prototype.head,io&&(O.prototype[io]=vh),O},Ao=ko();Te._=Ao,q=function(){return Ao}.call(hn,Pe,hn,Ze),q!==N&&(Ze.exports=q)}).call(this)},21428:function(Ze,hn,Pe){"use strict";Pe.d(hn,{ZP:function(){return Ml}});var q={},N="rc-table-internal-hook",Oe=Pe(74494),A=Pe(50959),ee=(0,Oe.jM)(),fn=ee.makeImmutable,Ot=ee.responseImmutable,un=ee.useImmutableMark,Be=(0,Oe.kr)(),ct=Be;function It(B,G){var j=A.useRef(0);j.current+=1;var K=A.useRef(B),X=[];Object.keys(B||{}).map(function(he){var de;(B==null?void 0:B[he])!==((de=K.current)===null||de===void 0?void 0:de[he])&&X.push(he)}),K.current=B;var ne=A.useRef([]);return X.length&&(ne.current=X),A.useDebugValue(j.current),A.useDebugValue(ne.current.join(", ")),G&&console.log("".concat(G,":"),j.current,ne.current),j.current}var Wt=null,Dt=A.memo(function(){var B=It();return A.createElement("h1",null,"Render Times: ",B)});Dt.displayName="RenderBlock";var je=Pe(97605),Qt=Pe(26407),me=Pe(12309),We=Pe(25201),kt=Pe(89043),gn=Pe(84875),Ht=Pe.n(gn),Cn=Pe(46696),Vn=Pe(89548),zt=Pe(9123),$n=Pe(66705),Dn=A.createContext({renderWithProps:!1}),Ln=Dn,sn="RC_TABLE_KEY";function ui(B){return B==null?[]:Array.isArray(B)?B:[B]}function Ni(B){var G=[],j={};return B.forEach(function(K){for(var X=K||{},ne=X.key,he=X.dataIndex,de=ne||ui(he).join("-")||sn;j[de];)de="".concat(de,"_next");j[de]=!0,G.push(de)}),G}function jr(B){return B!=null}function Xr(B){return B&&(0,Qt.Z)(B)==="object"&&!Array.isArray(B)&&!A.isValidElement(B)}function Or(B,G,j,K,X,ne){var he=A.useContext(Ln),de=un(),le=(0,Cn.Z)(function(){if(jr(K))return[K];var ae=G==null||G===""?[]:Array.isArray(G)?G:[G],ue=(0,zt.Z)(B,ae),Se=ue,Ae=void 0;if(X){var Ce=X(ue,B,j);Xr(Ce)?(Se=Ce.children,Ae=Ce.props,he.renderWithProps=!0):Se=Ce}return[Se,Ae]},[de,B,K,G,X,j],function(ae,ue){if(ne){var Se=(0,kt.Z)(ae,2),Ae=Se[1],Ce=(0,kt.Z)(ue,2),_e=Ce[1];return ne(_e,Ae)}return he.renderWithProps?!0:!(0,Vn.Z)(ae,ue,!0)});return le}function en(B,G,j,K){var X=B+G-1;return B<=K&&X>=j}function wt(B,G){return(0,Oe.qp)(ct,function(j){var K=en(B,G||1,j.hoverStartRow,j.hoverEndRow);return[K,j.onHover]})}var Gt=function(G){var j=G.ellipsis,K=G.rowType,X=G.children,ne,he=j===!0?{showTitle:!0}:j;return he&&(he.showTitle||K==="header")&&(typeof X=="string"||typeof X=="number"?ne=X.toString():A.isValidElement(X)&&typeof X.props.children=="string"&&(ne=X.props.children)),ne};function ir(B){var G,j,K,X,ne,he,de,le,ae=B.component,ue=B.children,Se=B.ellipsis,Ae=B.scope,Ce=B.prefixCls,_e=B.className,qe=B.align,ze=B.record,Ye=B.render,Ke=B.dataIndex,Te=B.renderIndex,Qe=B.shouldCellUpdate,Ge=B.index,rt=B.rowType,Kt=B.colSpan,dt=B.rowSpan,gt=B.fixLeft,Xt=B.fixRight,Ue=B.firstFixLeft,Fe=B.lastFixLeft,Me=B.firstFixRight,Xe=B.lastFixRight,et=B.appendNode,ot=B.additionalProps,Ve=ot===void 0?{}:ot,Lt=B.isSticky,An="".concat(Ce,"-cell"),wn=(0,Oe.qp)(ct,["supportSticky","allColumnsFixedLeft"]),bn=wn.supportSticky,Oi=wn.allColumnsFixedLeft,ft=Or(ze,Ke,Te,ue,Ye,Qe),yi=(0,kt.Z)(ft,2),Un=yi[0],At=yi[1],ri={},br=typeof gt=="number"&&bn,Xi=typeof Xt=="number"&&bn;br&&(ri.position="sticky",ri.left=gt),Xi&&(ri.position="sticky",ri.right=Xt);var si=(G=(j=(K=At==null?void 0:At.colSpan)!==null&&K!==void 0?K:Ve.colSpan)!==null&&j!==void 0?j:Kt)!==null&&G!==void 0?G:1,bt=(X=(ne=(he=At==null?void 0:At.rowSpan)!==null&&he!==void 0?he:Ve.rowSpan)!==null&&ne!==void 0?ne:dt)!==null&&X!==void 0?X:1,vn=wt(Ge,bt),St=(0,kt.Z)(vn,2),ki=St[0],Tn=St[1],En=function(Pi){var yn;ze&&Tn(Ge,Ge+bt-1),Ve==null||(yn=Ve.onMouseEnter)===null||yn===void 0||yn.call(Ve,Pi)},es=function(Pi){var yn;ze&&Tn(-1,-1),Ve==null||(yn=Ve.onMouseLeave)===null||yn===void 0||yn.call(Ve,Pi)};if(si===0||bt===0)return null;var Di=(de=Ve.title)!==null&&de!==void 0?de:Gt({rowType:rt,ellipsis:Se,children:Un}),Li=Ht()(An,_e,(le={},(0,We.Z)(le,"".concat(An,"-fix-left"),br&&bn),(0,We.Z)(le,"".concat(An,"-fix-left-first"),Ue&&bn),(0,We.Z)(le,"".concat(An,"-fix-left-last"),Fe&&bn),(0,We.Z)(le,"".concat(An,"-fix-left-all"),Fe&&Oi&&bn),(0,We.Z)(le,"".concat(An,"-fix-right"),Xi&&bn),(0,We.Z)(le,"".concat(An,"-fix-right-first"),Me&&bn),(0,We.Z)(le,"".concat(An,"-fix-right-last"),Xe&&bn),(0,We.Z)(le,"".concat(An,"-ellipsis"),Se),(0,We.Z)(le,"".concat(An,"-with-append"),et),(0,We.Z)(le,"".concat(An,"-fix-sticky"),(br||Xi)&&Lt&&bn),(0,We.Z)(le,"".concat(An,"-row-hover"),!At&&ki),le),Ve.className,At==null?void 0:At.className),Ut={};qe&&(Ut.textAlign=qe);var hr=(0,me.Z)((0,me.Z)((0,me.Z)((0,me.Z)({},ri),Ve.style),Ut),At==null?void 0:At.style),Yn=Un;return(0,Qt.Z)(Yn)==="object"&&!Array.isArray(Yn)&&!A.isValidElement(Yn)&&(Yn=null),Se&&(Fe||Me)&&(Yn=A.createElement("span",{className:"".concat(An,"-content")},Yn)),A.createElement(ae,(0,je.Z)({},At,Ve,{className:Li,style:hr,title:Di,scope:Ae,onMouseEnter:En,onMouseLeave:es,colSpan:si!==1?si:null,rowSpan:bt!==1?bt:null}),et,Yn)}var jt=A.memo(ir);function ci(B,G,j,K,X,ne){var he=j[B]||{},de=j[G]||{},le,ae;he.fixed==="left"?le=K.left[X==="rtl"?G:B]:de.fixed==="right"&&(ae=K.right[X==="rtl"?B:G]);var ue=!1,Se=!1,Ae=!1,Ce=!1,_e=j[G+1],qe=j[B-1],ze=!(ne!=null&&ne.children);if(X==="rtl"){if(le!==void 0){var Ye=qe&&qe.fixed==="left";Ce=!Ye&&ze}else if(ae!==void 0){var Ke=_e&&_e.fixed==="right";Ae=!Ke&&ze}}else if(le!==void 0){var Te=_e&&_e.fixed==="left";ue=!Te&&ze}else if(ae!==void 0){var Qe=qe&&qe.fixed==="right";Se=!Qe&&ze}return{fixLeft:le,fixRight:ae,lastFixLeft:ue,firstFixRight:Se,lastFixRight:Ae,firstFixLeft:Ce,isSticky:K.isSticky}}var ys=A.createContext({}),ti=ys;function rr(B){var G=B.className,j=B.index,K=B.children,X=B.colSpan,ne=X===void 0?1:X,he=B.rowSpan,de=B.align,le=(0,Oe.qp)(ct,["prefixCls","direction"]),ae=le.prefixCls,ue=le.direction,Se=A.useContext(ti),Ae=Se.scrollColumnIndex,Ce=Se.stickyOffsets,_e=Se.flattenColumns,qe=Se.columns,ze=j+ne-1,Ye=ze+1===Ae?ne+1:ne,Ke=ci(j,j+Ye-1,_e,Ce,ue,qe==null?void 0:qe[j]);return A.createElement(jt,(0,je.Z)({className:G,index:j,component:"td",prefixCls:ae,record:null,dataIndex:null,align:de,colSpan:Ye,rowSpan:he,render:function(){return K}},Ke))}var Ci=Pe(16658),Us=["children"];function ni(B){var G=B.children,j=(0,Ci.Z)(B,Us);return A.createElement("tr",j,G)}function Gn(B){var G=B.children;return G}Gn.Row=ni,Gn.Cell=rr;var Dr=Gn;function Lr(B){var G=B.children,j=B.stickyOffsets,K=B.flattenColumns,X=B.columns,ne=(0,Oe.qp)(ct,"prefixCls"),he=K.length-1,de=K[he],le=A.useMemo(function(){return{stickyOffsets:j,flattenColumns:K,scrollColumnIndex:de!=null&&de.scrollbar?he:null,columns:X}},[de,K,he,j,X]);return A.createElement(ti.Provider,{value:le},A.createElement("tfoot",{className:"".concat(ne,"-summary")},G))}var sr=Ot(Lr),Pr=Dr,jn=Pe(71860),Le=Pe(87137),zo=Pe(84868),mn=Pe(51642),di=Pe(36870),pi=Pe(78720);function gi(B,G,j,K,X,ne,he){B.push({record:G,indent:j,index:he});var de=ne(G),le=X==null?void 0:X.has(de);if(G&&Array.isArray(G[K])&&le)for(var ae=0;ae<G[K].length;ae+=1)gi(B,G[K][ae],j+1,K,X,ne,ae)}function Zn(B,G,j,K){var X=A.useMemo(function(){if(j!=null&&j.size){for(var ne=[],he=0;he<(B==null?void 0:B.length);he+=1){var de=B[he];gi(ne,de,0,G,j,K,he)}return ne}return B==null?void 0:B.map(function(le,ae){return{record:le,indent:0,index:ae}})},[B,G,j,K]);return X}var vr=Pe(44875);function Br(B,G,j,K){var X=(0,Oe.qp)(ct,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex","expandedKeys","childrenColumnName","rowExpandable","onRow"]),ne=X.flattenColumns,he=X.expandableType,de=X.expandedKeys,le=X.childrenColumnName,ae=X.onTriggerExpand,ue=X.rowExpandable,Se=X.onRow,Ae=X.expandRowByClick,Ce=X.rowClassName,_e=he==="nest",qe=he==="row"&&(!ue||ue(B)),ze=qe||_e,Ye=de&&de.has(G),Ke=le&&B&&B[le],Te=(0,vr.zX)(ae),Qe=Se==null?void 0:Se(B,j),Ge=Qe==null?void 0:Qe.onClick,rt=function(Xt){Ae&&ze&&ae(B,Xt);for(var Ue=arguments.length,Fe=new Array(Ue>1?Ue-1:0),Me=1;Me<Ue;Me++)Fe[Me-1]=arguments[Me];Ge==null||Ge.apply(void 0,[Xt].concat(Fe))},Kt;typeof Ce=="string"?Kt=Ce:typeof Ce=="function"&&(Kt=Ce(B,j,K));var dt=Ni(ne);return(0,me.Z)((0,me.Z)({},X),{},{columnsKey:dt,nestExpandable:_e,expanded:Ye,hasNestChildren:Ke,record:B,onTriggerExpand:Te,rowSupportExpand:qe,expandable:ze,rowProps:(0,me.Z)((0,me.Z)({},Qe),{},{className:Ht()(Kt,Qe==null?void 0:Qe.className),onClick:rt})})}function Ir(B){var G=B.prefixCls,j=B.children,K=B.component,X=B.cellComponent,ne=B.className,he=B.expanded,de=B.colSpan,le=B.isEmpty,ae=(0,Oe.qp)(ct,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),ue=ae.scrollbarSize,Se=ae.fixHeader,Ae=ae.fixColumn,Ce=ae.componentWidth,_e=ae.horizonScroll,qe=j;return(le?_e&&Ce:Ae)&&(qe=A.createElement("div",{style:{width:Ce-(Se?ue:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(G,"-expanded-row-fixed")},qe)),A.createElement(K,{className:ne,style:{display:he?null:"none"}},A.createElement(jt,{component:X,prefixCls:G,colSpan:de},qe))}var yr=Ir;function Fi(B,G,j,K,X){var ne=B.record,he=B.prefixCls,de=B.columnsKey,le=B.fixedInfoList,ae=B.expandIconColumnIndex,ue=B.nestExpandable,Se=B.indentSize,Ae=B.expandIcon,Ce=B.expanded,_e=B.hasNestChildren,qe=B.onTriggerExpand,ze=de[j],Ye=le[j],Ke;j===(ae||0)&&ue&&(Ke=A.createElement(A.Fragment,null,A.createElement("span",{style:{paddingLeft:"".concat(Se*K,"px")},className:"".concat(he,"-row-indent indent-level-").concat(K)}),Ae({prefixCls:he,expanded:Ce,expandable:_e,record:ne,onExpand:qe})));var Te;return G.onCell&&(Te=G.onCell(ne,X)),{key:ze,fixedInfo:Ye,appendCellNode:Ke,additionalCellProps:Te||{}}}function xr(B){var G=B.className,j=B.style,K=B.record,X=B.index,ne=B.renderIndex,he=B.rowKey,de=B.indent,le=de===void 0?0:de,ae=B.rowComponent,ue=B.cellComponent,Se=B.scopeCellComponent,Ae=Br(K,he,X,le),Ce=Ae.prefixCls,_e=Ae.flattenColumns,qe=Ae.expandedRowClassName,ze=Ae.expandedRowRender,Ye=Ae.rowProps,Ke=Ae.expanded,Te=Ae.rowSupportExpand,Qe=A.useRef(!1);Qe.current||(Qe.current=Ke);var Ge=A.createElement(ae,(0,je.Z)({},Ye,{"data-row-key":he,className:Ht()(G,"".concat(Ce,"-row"),"".concat(Ce,"-row-level-").concat(le),Ye==null?void 0:Ye.className),style:(0,me.Z)((0,me.Z)({},j),Ye==null?void 0:Ye.style)}),_e.map(function(gt,Xt){var Ue=gt.render,Fe=gt.dataIndex,Me=gt.className,Xe=Fi(Ae,gt,Xt,le,X),et=Xe.key,ot=Xe.fixedInfo,Ve=Xe.appendCellNode,Lt=Xe.additionalCellProps;return A.createElement(jt,(0,je.Z)({className:Me,ellipsis:gt.ellipsis,align:gt.align,scope:gt.rowScope,component:gt.rowScope?Se:ue,prefixCls:Ce,key:et,record:K,index:X,renderIndex:ne,dataIndex:Fe,render:Ue,shouldCellUpdate:gt.shouldCellUpdate},ot,{appendNode:Ve,additionalProps:Lt}))})),rt;if(Te&&(Qe.current||Ke)){var Kt=ze(K,X,le+1,Ke),dt=qe&&qe(K,X,le);rt=A.createElement(yr,{expanded:Ke,className:Ht()("".concat(Ce,"-expanded-row"),"".concat(Ce,"-expanded-row-level-").concat(le+1),dt),prefixCls:Ce,component:ae,cellComponent:ue,colSpan:_e.length,isEmpty:!1},Kt)}return A.createElement(A.Fragment,null,Ge,rt)}xr.displayName="BodyRow";var _r=Ot(xr);function In(B){var G=B.columnKey,j=B.onColumnResize,K=A.useRef();return A.useEffect(function(){K.current&&j(G,K.current.offsetWidth)},[]),A.createElement(jn.Z,{data:G},A.createElement("td",{ref:K,style:{padding:0,border:0,height:0}},A.createElement("div",{style:{height:0,overflow:"hidden"}},"\xA0")))}function On(B){var G=B.prefixCls,j=B.columnsKey,K=B.onColumnResize;return A.createElement("tr",{"aria-hidden":"true",className:"".concat(G,"-measure-row"),style:{height:0,fontSize:0}},A.createElement(jn.Z.Collection,{onBatchResize:function(ne){ne.forEach(function(he){var de=he.data,le=he.size;K(de,le.offsetWidth)})}},j.map(function(X){return A.createElement(In,{key:X,columnKey:X,onColumnResize:K})})))}function Jr(B){var G=B.data,j=B.measureColumnWidth,K=(0,Oe.qp)(ct,["prefixCls","getComponent","onColumnResize","flattenColumns","getRowKey","expandedKeys","childrenColumnName","emptyNode"]),X=K.prefixCls,ne=K.getComponent,he=K.onColumnResize,de=K.flattenColumns,le=K.getRowKey,ae=K.expandedKeys,ue=K.childrenColumnName,Se=K.emptyNode,Ae=Zn(G,ue,ae,le),Ce=A.useRef({renderWithProps:!1}),_e=ne(["body","wrapper"],"tbody"),qe=ne(["body","row"],"tr"),ze=ne(["body","cell"],"td"),Ye=ne(["body","cell"],"th"),Ke;G.length?Ke=Ae.map(function(Qe,Ge){var rt=Qe.record,Kt=Qe.indent,dt=Qe.index,gt=le(rt,Ge);return A.createElement(_r,{key:gt,rowKey:gt,record:rt,index:Ge,renderIndex:dt,rowComponent:qe,cellComponent:ze,scopeCellComponent:Ye,getRowKey:le,indent:Kt})}):Ke=A.createElement(yr,{expanded:!0,className:"".concat(X,"-placeholder"),prefixCls:X,component:qe,cellComponent:ze,colSpan:de.length,isEmpty:!0},Se);var Te=Ni(de);return A.createElement(Ln.Provider,{value:Ce.current},A.createElement(_e,{className:"".concat(X,"-tbody")},j&&A.createElement(On,{prefixCls:X,columnsKey:Te,onColumnResize:he}),Ke))}Jr.displayName="Body";var ke=Ot(Jr),ii=["expandable"],pt="RC_TABLE_INTERNAL_COL_DEFINE";function Zt(B){var G=B.expandable,j=(0,Ci.Z)(B,ii),K;return"expandable"in B?K=(0,me.Z)((0,me.Z)({},j),G):K=j,K.showExpandColumn===!1&&(K.expandIconColumnIndex=-1),K}var Nr=["columnType"];function mi(B){for(var G=B.colWidths,j=B.columns,K=B.columCount,X=[],ne=K||j.length,he=!1,de=ne-1;de>=0;de-=1){var le=G[de],ae=j&&j[de],ue=ae&&ae[pt];if(le||ue||he){var Se=ue||{},Ae=Se.columnType,Ce=(0,Ci.Z)(Se,Nr);X.unshift(A.createElement("col",(0,je.Z)({key:de,style:{width:le}},Ce))),he=!0}}return A.createElement("colgroup",null,X)}var Xn=mi,Rn=Pe(36014),Wi=Pe(84918),Ri=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];function cn(B,G){return(0,A.useMemo)(function(){for(var j=[],K=0;K<G;K+=1){var X=B[K];if(X!==void 0)j[K]=X;else return null}return j},[B.join("_"),G])}var Kn=A.forwardRef(function(B,G){var j=B.className,K=B.noData,X=B.columns,ne=B.flattenColumns,he=B.colWidths,de=B.columCount,le=B.stickyOffsets,ae=B.direction,ue=B.fixHeader,Se=B.stickyTopOffset,Ae=B.stickyBottomOffset,Ce=B.stickyClassName,_e=B.onScroll,qe=B.maxContentScroll,ze=B.children,Ye=(0,Ci.Z)(B,Ri),Ke=(0,Oe.qp)(ct,["prefixCls","scrollbarSize","isSticky"]),Te=Ke.prefixCls,Qe=Ke.scrollbarSize,Ge=Ke.isSticky,rt=Ge&&!ue?0:Qe,Kt=A.useRef(null),dt=A.useCallback(function(ot){(0,Wi.mH)(G,ot),(0,Wi.mH)(Kt,ot)},[]);A.useEffect(function(){var ot;function Ve(Lt){var An=Lt,wn=An.currentTarget,bn=An.deltaX;bn&&(_e({currentTarget:wn,scrollLeft:wn.scrollLeft+bn}),Lt.preventDefault())}return(ot=Kt.current)===null||ot===void 0||ot.addEventListener("wheel",Ve),function(){var Lt;(Lt=Kt.current)===null||Lt===void 0||Lt.removeEventListener("wheel",Ve)}},[]);var gt=A.useMemo(function(){return ne.every(function(ot){return ot.width})},[ne]),Xt=ne[ne.length-1],Ue={fixed:Xt?Xt.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(Te,"-cell-scrollbar")}}},Fe=(0,A.useMemo)(function(){return rt?[].concat((0,Rn.Z)(X),[Ue]):X},[rt,X]),Me=(0,A.useMemo)(function(){return rt?[].concat((0,Rn.Z)(ne),[Ue]):ne},[rt,ne]),Xe=(0,A.useMemo)(function(){var ot=le.right,Ve=le.left;return(0,me.Z)((0,me.Z)({},le),{},{left:ae==="rtl"?[].concat((0,Rn.Z)(Ve.map(function(Lt){return Lt+rt})),[0]):Ve,right:ae==="rtl"?ot:[].concat((0,Rn.Z)(ot.map(function(Lt){return Lt+rt})),[0]),isSticky:Ge})},[rt,le,Ge]),et=cn(he,de);return A.createElement("div",{style:(0,me.Z)({overflow:"hidden"},Ge?{top:Se,bottom:Ae}:{}),ref:dt,className:Ht()(j,(0,We.Z)({},Ce,!!Ce))},A.createElement("table",{style:{tableLayout:"fixed",visibility:K||et?null:"hidden"}},(!K||!qe||gt)&&A.createElement(Xn,{colWidths:et?[].concat((0,Rn.Z)(et),[rt]):[],columCount:de+1,columns:Me}),ze((0,me.Z)((0,me.Z)({},Ye),{},{stickyOffsets:Xe,columns:Fe,flattenColumns:Me}))))});Kn.displayName="FixedHolder";var on=A.memo(Kn);function or(B){var G=B.cells,j=B.stickyOffsets,K=B.flattenColumns,X=B.rowComponent,ne=B.cellComponent,he=B.tdCellComponent,de=B.onHeaderRow,le=B.index,ae=(0,Oe.qp)(ct,["prefixCls","direction"]),ue=ae.prefixCls,Se=ae.direction,Ae;de&&(Ae=de(G.map(function(_e){return _e.column}),le));var Ce=Ni(G.map(function(_e){return _e.column}));return A.createElement(X,Ae,G.map(function(_e,qe){var ze=_e.column,Ye=ci(_e.colStart,_e.colEnd,K,j,Se,ze),Ke;return ze&&ze.onHeaderCell&&(Ke=_e.column.onHeaderCell(ze)),A.createElement(jt,(0,je.Z)({},_e,{scope:ze.title?_e.colSpan>1?"colgroup":"col":null,ellipsis:ze.ellipsis,align:ze.align,component:ze.title?ne:he,prefixCls:ue,key:Ce[qe]},Ye,{additionalProps:Ke,rowType:"header"}))}))}or.displayName="HeaderRow";var lr=or;function se(B){var G=[];function j(he,de){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;G[le]=G[le]||[];var ae=de,ue=he.filter(Boolean).map(function(Se){var Ae={key:Se.key,className:Se.className||"",children:Se.title,column:Se,colStart:ae},Ce=1,_e=Se.children;return _e&&_e.length>0&&(Ce=j(_e,ae,le+1).reduce(function(qe,ze){return qe+ze},0),Ae.hasSubColumns=!0),"colSpan"in Se&&(Ce=Se.colSpan),"rowSpan"in Se&&(Ae.rowSpan=Se.rowSpan),Ae.colSpan=Ce,Ae.colEnd=Ae.colStart+Ce-1,G[le].push(Ae),ae+=Ce,Ce});return ue}j(B,0);for(var K=G.length,X=function(de){G[de].forEach(function(le){!("rowSpan"in le)&&!le.hasSubColumns&&(le.rowSpan=K-de)})},ne=0;ne<K;ne+=1)X(ne);return G}function qs(B){var G=B.stickyOffsets,j=B.columns,K=B.flattenColumns,X=B.onHeaderRow,ne=(0,Oe.qp)(ct,["prefixCls","getComponent"]),he=ne.prefixCls,de=ne.getComponent,le=A.useMemo(function(){return se(j)},[j]),ae=de(["header","wrapper"],"thead"),ue=de(["header","row"],"tr"),Se=de(["header","cell"],"th"),Ae=de(["header","cell"],"td");return A.createElement(ae,{className:"".concat(he,"-thead")},le.map(function(Ce,_e){var qe=A.createElement(lr,{key:_e,flattenColumns:K,cells:Ce,stickyOffsets:G,rowComponent:ue,cellComponent:Se,tdCellComponent:Ae,onHeaderRow:X,index:_e});return qe}))}var Yr=Ot(qs),Jn=Pe(78880);function Ei(B){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return typeof G=="number"?G:G.endsWith("%")?B*parseFloat(G)/100:null}function Fr(B,G,j){return A.useMemo(function(){if(G&&G>0){var K=0,X=0;B.forEach(function(Ae){var Ce=Ei(G,Ae.width);Ce?K+=Ce:X+=1});var ne=Math.max(G,j),he=Math.max(ne-K,X),de=X,le=he/X,ae=0,ue=B.map(function(Ae){var Ce=(0,me.Z)({},Ae),_e=Ei(G,Ce.width);if(_e)Ce.width=_e;else{var qe=Math.floor(le);Ce.width=de===1?he:qe,he-=qe,de-=1}return ae+=Ce.width,Ce});if(ae<ne){var Se=ne/ae;he=ne,ue.forEach(function(Ae,Ce){var _e=Math.floor(Ae.width*Se);Ae.width=Ce===ue.length-1?he:_e,he-=_e})}return[ue,Math.max(ae,ne)]}return[B,G]},[B,G,j])}var xs=["children"],vi=["fixed"];function wr(B){return(0,Jn.Z)(B).filter(function(G){return A.isValidElement(G)}).map(function(G){var j=G.key,K=G.props,X=K.children,ne=(0,Ci.Z)(K,xs),he=(0,me.Z)({key:j},ne);return X&&(he.children=wr(X)),he})}function Ui(B){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key";return B.filter(function(j){return j&&(0,Qt.Z)(j)==="object"}).reduce(function(j,K,X){var ne=K.fixed,he=ne===!0?"left":ne,de="".concat(G,"-").concat(X),le=K.children;return le&&le.length>0?[].concat((0,Rn.Z)(j),(0,Rn.Z)(Ui(le,de).map(function(ae){return(0,me.Z)({fixed:he},ae)}))):[].concat((0,Rn.Z)(j),[(0,me.Z)((0,me.Z)({key:de},K),{},{fixed:he})])},[])}function kn(B){for(var G=!0,j=0;j<B.length;j+=1){var K=B[j];if(G&&K.fixed!=="left")G=!1;else if(!G&&K.fixed==="left"){warning(!1,"Index ".concat(j-1," of `columns` missing `fixed='left'` prop."));break}}for(var X=!0,ne=B.length-1;ne>=0;ne-=1){var he=B[ne];if(X&&he.fixed!=="right")X=!1;else if(!X&&he.fixed==="right"){warning(!1,"Index ".concat(ne+1," of `columns` missing `fixed='right'` prop."));break}}}function qi(B){return B.map(function(G){var j=G.fixed,K=(0,Ci.Z)(G,vi),X=j;return j==="left"?X="right":j==="right"&&(X="left"),(0,me.Z)({fixed:X},K)})}function ws(B,G){var j=B.prefixCls,K=B.columns,X=B.children,ne=B.expandable,he=B.expandedKeys,de=B.columnTitle,le=B.getRowKey,ae=B.onTriggerExpand,ue=B.expandIcon,Se=B.rowExpandable,Ae=B.expandIconColumnIndex,Ce=B.direction,_e=B.expandRowByClick,qe=B.columnWidth,ze=B.fixed,Ye=B.scrollWidth,Ke=B.clientWidth,Te=A.useMemo(function(){return K||wr(X)},[K,X]),Qe=A.useMemo(function(){if(ne){var Ue,Fe=Te.slice();if(!Fe.includes(q)){var Me=Ae||0;Me>=0&&Fe.splice(Me,0,q)}var Xe=Fe.indexOf(q);Fe=Fe.filter(function(Lt,An){return Lt!==q||An===Xe});var et=Te[Xe],ot;(ze==="left"||ze)&&!Ae?ot="left":(ze==="right"||ze)&&Ae===Te.length?ot="right":ot=et?et.fixed:null;var Ve=(Ue={},(0,We.Z)(Ue,pt,{className:"".concat(j,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),(0,We.Z)(Ue,"title",de),(0,We.Z)(Ue,"fixed",ot),(0,We.Z)(Ue,"className","".concat(j,"-row-expand-icon-cell")),(0,We.Z)(Ue,"width",qe),(0,We.Z)(Ue,"render",function(An,wn,bn){var Oi=le(wn,bn),ft=he.has(Oi),yi=Se?Se(wn):!0,Un=ue({prefixCls:j,expanded:ft,expandable:yi,record:wn,onExpand:ae});return _e?A.createElement("span",{onClick:function(ri){return ri.stopPropagation()}},Un):Un}),Ue);return Fe.map(function(Lt){return Lt===q?Ve:Lt})}return Te.filter(function(Lt){return Lt!==q})},[ne,Te,le,he,ue,Ce]),Ge=A.useMemo(function(){var Ue=Qe;return G&&(Ue=G(Ue)),Ue.length||(Ue=[{render:function(){return null}}]),Ue},[G,Qe,Ce]),rt=A.useMemo(function(){return Ce==="rtl"?qi(Ui(Ge)):Ui(Ge)},[Ge,Ce,Ye]),Kt=Fr(rt,Ye,Ke),dt=(0,kt.Z)(Kt,2),gt=dt[0],Xt=dt[1];return[Ge,gt,Xt]}var Gs=ws;function Wr(B){var G,j=B.prefixCls,K=B.record,X=B.onExpand,ne=B.expanded,he=B.expandable,de="".concat(j,"-row-expand-icon");if(!he)return A.createElement("span",{className:Ht()(de,"".concat(j,"-row-spaced"))});var le=function(ue){X(K,ue),ue.stopPropagation()};return A.createElement("span",{className:Ht()(de,(G={},(0,We.Z)(G,"".concat(j,"-row-expanded"),ne),(0,We.Z)(G,"".concat(j,"-row-collapsed"),!ne),G)),onClick:le})}function _n(B,G,j){var K=[];function X(ne){(ne||[]).forEach(function(he,de){K.push(G(he,de)),X(he[j])})}return X(B),K}function Hr(B,G,j){var K=Zt(B),X=K.expandIcon,ne=K.expandedRowKeys,he=K.defaultExpandedRowKeys,de=K.defaultExpandAllRows,le=K.expandedRowRender,ae=K.onExpand,ue=K.onExpandedRowsChange,Se=K.childrenColumnName,Ae=X||Wr,Ce=Se||"children",_e=A.useMemo(function(){return le?"row":B.expandable&&B.internalHooks===N&&B.expandable.__PARENT_RENDER_ICON__||G.some(function(Ge){return Ge&&(0,Qt.Z)(Ge)==="object"&&Ge[Ce]})?"nest":!1},[!!le,G]),qe=A.useState(function(){return he||(de?_n(G,j,Ce):[])}),ze=(0,kt.Z)(qe,2),Ye=ze[0],Ke=ze[1],Te=A.useMemo(function(){return new Set(ne||Ye||[])},[ne,Ye]),Qe=A.useCallback(function(Ge){var rt=j(Ge,G.indexOf(Ge)),Kt,dt=Te.has(rt);dt?(Te.delete(rt),Kt=(0,Rn.Z)(Te)):Kt=[].concat((0,Rn.Z)(Te),[rt]),Ke(Kt),ae&&ae(!dt,Ge),ue&&ue(Kt)},[j,Te,G,ae,ue]);return[K,_e,Te,Ae,Ce,Qe]}function zr(B,G,j,K){var X=B.map(function(ne,he){return ci(he,he,B,G,j,K==null?void 0:K[he])});return(0,Cn.Z)(function(){return X},[X],function(ne,he){return!(0,Vn.Z)(ne,he)})}function _(B){var G=(0,A.useRef)(B),j=(0,A.useState)({}),K=(0,kt.Z)(j,2),X=K[1],ne=(0,A.useRef)(null),he=(0,A.useRef)([]);function de(le){he.current.push(le);var ae=Promise.resolve();ne.current=ae,ae.then(function(){if(ne.current===ae){var ue=he.current,Se=G.current;he.current=[],ue.forEach(function(Ae){G.current=Ae(G.current)}),ne.current=null,Se!==G.current&&X({})}})}return(0,A.useEffect)(function(){return function(){ne.current=null}},[]),[G.current,de]}function p(B){var G=(0,A.useRef)(B||null),j=(0,A.useRef)();function K(){window.clearTimeout(j.current)}function X(he){G.current=he,K(),j.current=window.setTimeout(function(){G.current=null,j.current=void 0},100)}function ne(){return G.current}return(0,A.useEffect)(function(){return K},[]),[X,ne]}function v(){var B=A.useState(-1),G=(0,kt.Z)(B,2),j=G[0],K=G[1],X=A.useState(-1),ne=(0,kt.Z)(X,2),he=ne[0],de=ne[1],le=A.useCallback(function(ae,ue){K(ae),de(ue)},[]);return[j,he,le]}var b=Pe(32381),k=(0,b.Z)()?window:null;function E(B,G){var j=(0,Qt.Z)(B)==="object"?B:{},K=j.offsetHeader,X=K===void 0?0:K,ne=j.offsetSummary,he=ne===void 0?0:ne,de=j.offsetScroll,le=de===void 0?0:de,ae=j.getContainer,ue=ae===void 0?function(){return k}:ae,Se=ue()||k;return A.useMemo(function(){var Ae=!!B;return{isSticky:Ae,stickyClassName:Ae?"".concat(G,"-sticky-holder"):"",offsetHeader:X,offsetSummary:he,offsetScroll:le,container:Se}},[le,X,he,G,Se])}function D(B,G,j){var K=(0,A.useMemo)(function(){for(var X=[],ne=[],he=0,de=0,le=0;le<G;le+=1)if(j==="rtl"){ne[le]=de,de+=B[le]||0;var ae=G-le-1;X[ae]=he,he+=B[ae]||0}else{X[le]=he,he+=B[le]||0;var ue=G-le-1;ne[ue]=de,de+=B[ue]||0}return{left:X,right:ne}},[B,G,j]);return K}var W=D;function Z(B){var G=B.className,j=B.children;return A.createElement("div",{className:G},j)}var re=Z,fe=Pe(35544),we=Pe(59408),He=function(G,j){var K,X,ne=G.scrollBodyRef,he=G.onScroll,de=G.offsetScroll,le=G.container,ae=(0,Oe.qp)(ct,"prefixCls"),ue=((K=ne.current)===null||K===void 0?void 0:K.scrollWidth)||0,Se=((X=ne.current)===null||X===void 0?void 0:X.clientWidth)||0,Ae=ue&&Se*(Se/ue),Ce=A.useRef(),_e=_({scrollLeft:0,isHiddenScrollBar:!1}),qe=(0,kt.Z)(_e,2),ze=qe[0],Ye=qe[1],Ke=A.useRef({delta:0,x:0}),Te=A.useState(!1),Qe=(0,kt.Z)(Te,2),Ge=Qe[0],rt=Qe[1],Kt=function(){rt(!1)},dt=function(Me){Me.persist(),Ke.current.delta=Me.pageX-ze.scrollLeft,Ke.current.x=0,rt(!0),Me.preventDefault()},gt=function(Me){var Xe,et=Me||((Xe=window)===null||Xe===void 0?void 0:Xe.event),ot=et.buttons;if(!Ge||ot===0){Ge&&rt(!1);return}var Ve=Ke.current.x+Me.pageX-Ke.current.x-Ke.current.delta;Ve<=0&&(Ve=0),Ve+Ae>=Se&&(Ve=Se-Ae),he({scrollLeft:Ve/Se*(ue+2)}),Ke.current.x=Me.pageX},Xt=function(){if(ne.current){var Me=(0,we.os)(ne.current).top,Xe=Me+ne.current.offsetHeight,et=le===window?document.documentElement.scrollTop+window.innerHeight:(0,we.os)(le).top+le.clientHeight;Xe-(0,mn.Z)()<=et||Me>=et-de?Ye(function(ot){return(0,me.Z)((0,me.Z)({},ot),{},{isHiddenScrollBar:!0})}):Ye(function(ot){return(0,me.Z)((0,me.Z)({},ot),{},{isHiddenScrollBar:!1})})}},Ue=function(Me){Ye(function(Xe){return(0,me.Z)((0,me.Z)({},Xe),{},{scrollLeft:Me/ue*Se||0})})};return A.useImperativeHandle(j,function(){return{setScrollLeft:Ue}}),A.useEffect(function(){var Fe=(0,fe.Z)(document.body,"mouseup",Kt,!1),Me=(0,fe.Z)(document.body,"mousemove",gt,!1);return Xt(),function(){Fe.remove(),Me.remove()}},[Ae,Ge]),A.useEffect(function(){var Fe=(0,fe.Z)(le,"scroll",Xt,!1),Me=(0,fe.Z)(window,"resize",Xt,!1);return function(){Fe.remove(),Me.remove()}},[le]),A.useEffect(function(){ze.isHiddenScrollBar||Ye(function(Fe){var Me=ne.current;return Me?(0,me.Z)((0,me.Z)({},Fe),{},{scrollLeft:Me.scrollLeft/Me.scrollWidth*Me.clientWidth}):Fe})},[ze.isHiddenScrollBar]),ue<=Se||!Ae||ze.isHiddenScrollBar?null:A.createElement("div",{style:{height:(0,mn.Z)(),width:Se,bottom:de},className:"".concat(ae,"-sticky-scroll")},A.createElement("div",{onMouseDown:dt,ref:Ce,className:Ht()("".concat(ae,"-sticky-scroll-bar"),(0,We.Z)({},"".concat(ae,"-sticky-scroll-bar-active"),Ge)),style:{width:"".concat(Ae,"px"),transform:"translate3d(".concat(ze.scrollLeft,"px, 0, 0)")}}))},Ne=A.forwardRef(He);function yt(B){return null}var Gi=yt;function Pn(B){return null}var ji=Pn,xn="rc-table",Vo=[],mo={};function vo(){return"No Data"}function $o(B,G){var j,K=(0,me.Z)({rowKey:"key",prefixCls:xn,emptyText:vo},B),X=K.prefixCls,ne=K.className,he=K.rowClassName,de=K.style,le=K.data,ae=K.rowKey,ue=K.scroll,Se=K.tableLayout,Ae=K.direction,Ce=K.title,_e=K.footer,qe=K.summary,ze=K.caption,Ye=K.id,Ke=K.showHeader,Te=K.components,Qe=K.emptyText,Ge=K.onRow,rt=K.onHeaderRow,Kt=K.internalHooks,dt=K.transformColumns,gt=K.internalRefs,Xt=K.tailor,Ue=K.getContainerWidth,Fe=K.sticky,Me=le||Vo,Xe=!!Me.length,et=Kt===N,ot=A.useCallback(function(vt,Vt){return(0,zt.Z)(Te,vt)||Vt},[Te]),Ve=A.useMemo(function(){return typeof ae=="function"?ae:function(vt){var Vt=vt&&vt[ae];return Vt}},[ae]),Lt=ot(["body"]),An=v(),wn=(0,kt.Z)(An,3),bn=wn[0],Oi=wn[1],ft=wn[2],yi=Hr(K,Me,Ve),Un=(0,kt.Z)(yi,6),At=Un[0],ri=Un[1],br=Un[2],Xi=Un[3],si=Un[4],bt=Un[5],vn=ue==null?void 0:ue.x,St=A.useState(0),ki=(0,kt.Z)(St,2),Tn=ki[0],En=ki[1],es=Gs((0,me.Z)((0,me.Z)((0,me.Z)({},K),At),{},{expandable:!!At.expandedRowRender,columnTitle:At.columnTitle,expandedKeys:br,getRowKey:Ve,onTriggerExpand:bt,expandIcon:Xi,expandIconColumnIndex:At.expandIconColumnIndex,direction:Ae,scrollWidth:et&&Xt&&typeof vn=="number"?vn:null,clientWidth:Tn}),et?dt:null),Di=(0,kt.Z)(es,3),Li=Di[0],Ut=Di[1],hr=Di[2],Yn=hr!=null?hr:vn,wo=A.useMemo(function(){return{columns:Li,flattenColumns:Ut}},[Li,Ut]),Pi=A.useRef(),yn=A.useRef(),qn=A.useRef(),Cs=A.useRef();A.useImperativeHandle(G,function(){return{nativeElement:Pi.current,scrollTo:function(Vt){var xi;if(qn.current instanceof HTMLElement){var Mt=Vt.index,dn=Vt.top,Tr=Vt.key;if(dn){var Kr;(Kr=qn.current)===null||Kr===void 0||Kr.scrollTo({top:dn})}else{var wi,oo=Tr!=null?Tr:Ve(Me[Mt]);(wi=qn.current.querySelector('[data-row-key="'.concat(oo,'"]')))===null||wi===void 0||wi.scrollIntoView()}}else(xi=qn.current)!==null&&xi!==void 0&&xi.scrollTo&&qn.current.scrollTo(Vt)}}});var ts=A.useRef(),Rl=A.useState(!1),bo=(0,kt.Z)(Rl,2),jo=bo[0],So=bo[1],ta=A.useState(!1),na=(0,kt.Z)(ta,2),Sr=na[0],$r=na[1],ks=_(new Map),Fs=(0,kt.Z)(ks,2),Xo=Fs[0],Cr=Fs[1],Xs=Ni(Ut),Ws=Xs.map(function(vt){return Xo.get(vt)}),El=A.useMemo(function(){return Ws},[Ws.join("_")]),Co=W(El,Ut.length,Ae),Qn=ue&&jr(ue.y),Nn=ue&&jr(Yn)||!!At.fixed,ns=Nn&&Ut.some(function(vt){var Vt=vt.fixed;return Vt}),Ol=A.useRef(),Js=E(Fe,X),Hi=Js.isSticky,Dl=Js.offsetHeader,ko=Js.offsetSummary,Ao=Js.offsetScroll,V=Js.stickyClassName,oe=Js.container,Q=A.useMemo(function(){return qe==null?void 0:qe(Me)},[qe,Me]),De=(Qn||Hi)&&A.isValidElement(Q)&&Q.type===Dr&&Q.props.fixed,$e,Tt,Bn;Qn&&(Tt={overflowY:"scroll",maxHeight:ue.y}),Nn&&($e={overflowX:"auto"},Qn||(Tt={overflowY:"hidden"}),Bn={width:Yn===!0?"auto":Yn,minWidth:"100%"});var Jt=A.useCallback(function(vt,Vt){(0,Le.Z)(Pi.current)&&Cr(function(xi){if(xi.get(vt)!==Vt){var Mt=new Map(xi);return Mt.set(vt,Vt),Mt}return xi})},[]),To=p(null),Bi=(0,kt.Z)(To,2),zi=Bi[0],As=Bi[1];function Mo(vt,Vt){Vt&&(typeof Vt=="function"?Vt(vt):Vt.scrollLeft!==vt&&(Vt.scrollLeft=vt,Vt.scrollLeft!==vt&&setTimeout(function(){Vt.scrollLeft=vt},0)))}var Fn=(0,di.Z)(function(vt){var Vt=vt.currentTarget,xi=vt.scrollLeft,Mt=Ae==="rtl",dn=typeof xi=="number"?xi:Vt.scrollLeft,Tr=Vt||mo;if(!As()||As()===Tr){var Kr;zi(Tr),Mo(dn,yn.current),Mo(dn,qn.current),Mo(dn,ts.current),Mo(dn,(Kr=Ol.current)===null||Kr===void 0?void 0:Kr.setScrollLeft)}var wi=Vt||yn.current;if(wi){var oo=wi.scrollWidth,lo=wi.clientWidth;if(oo===lo){So(!1),$r(!1);return}Mt?(So(-dn<oo-lo),$r(-dn>0)):(So(dn>0),$r(dn<oo-lo))}}),Ys=function(){Nn&&qn.current?Fn({currentTarget:qn.current}):(So(!1),$r(!1))},Ro=function(Vt){var xi=Vt.width,Mt=Pi.current?Pi.current.offsetWidth:xi;et&&Ue&&Pi.current&&(Mt=Ue(Pi.current,Mt)||Mt),Mt!==Tn&&(Ys(),En(Mt))},mt=A.useRef(!1);A.useEffect(function(){mt.current&&Ys()},[Nn,le,Li.length]),A.useEffect(function(){mt.current=!0},[]);var Qs=A.useState(0),Zr=(0,kt.Z)(Qs,2),oi=Zr[0],Ii=Zr[1],eo=A.useState(!0),to=(0,kt.Z)(eo,2),Wn=to[0],Ji=to[1];A.useEffect(function(){(!Xt||!et)&&(qn.current instanceof Element?Ii((0,mn.o)(qn.current).width):Ii((0,mn.o)(Cs.current).width)),Ji((0,zo.G)("position","sticky"))},[]),A.useEffect(function(){et&&gt&&(gt.body.current=qn.current)});var Hs=A.useCallback(function(vt){return A.createElement(A.Fragment,null,A.createElement(Yr,vt),De==="top"&&A.createElement(sr,vt,Q))},[De,Q]),Ll=A.useCallback(function(vt){return A.createElement(sr,vt,Q)},[Q]),is=ot(["table"],"table"),rs=A.useMemo(function(){return Se||(ns?Yn==="max-content"?"auto":"fixed":Qn||Hi||Ut.some(function(vt){var Vt=vt.ellipsis;return Vt})?"fixed":"auto")},[Qn,ns,Ut,Se,Hi]),no,zs={colWidths:El,columCount:Ut.length,stickyOffsets:Co,onHeaderRow:rt,fixHeader:Qn,scroll:ue},Jo=A.useMemo(function(){return Xe?null:typeof Qe=="function"?Qe():Qe},[Xe,Qe]),io=A.createElement(ke,{data:Me,measureColumnWidth:Qn||Nn||Hi}),kr=A.createElement(Xn,{colWidths:Ut.map(function(vt){var Vt=vt.width;return Vt}),columns:Ut}),Vs=ze!=null?A.createElement("caption",{className:"".concat(X,"-caption")},ze):void 0,Yo=(0,pi.Z)(K,{data:!0}),ro=(0,pi.Z)(K,{aria:!0});if(Qn||Hi){var Pl;typeof Lt=="function"?(Pl=Lt(Me,{scrollbarSize:oi,ref:qn,onScroll:Fn}),zs.colWidths=Ut.map(function(vt,Vt){var xi=vt.width,Mt=Vt===Ut.length-1?xi-oi:xi;return typeof Mt=="number"&&!Number.isNaN(Mt)?Mt:0})):Pl=A.createElement("div",{style:(0,me.Z)((0,me.Z)({},$e),Tt),onScroll:Fn,ref:qn,className:Ht()("".concat(X,"-body"))},A.createElement(is,(0,je.Z)({style:(0,me.Z)((0,me.Z)({},Bn),{},{tableLayout:rs})},ro),Vs,kr,io,!De&&Q&&A.createElement(sr,{stickyOffsets:Co,flattenColumns:Ut,columns:Li},Q)));var so=(0,me.Z)((0,me.Z)((0,me.Z)({noData:!Me.length,maxContentScroll:Nn&&Yn==="max-content"},zs),wo),{},{direction:Ae,stickyClassName:V,onScroll:Fn});no=A.createElement(A.Fragment,null,Ke!==!1&&A.createElement(on,(0,je.Z)({},so,{stickyTopOffset:Dl,className:"".concat(X,"-header"),ref:yn}),Hs),Pl,De&&De!=="top"&&A.createElement(on,(0,je.Z)({},so,{stickyBottomOffset:ko,className:"".concat(X,"-summary"),ref:ts}),Ll),Hi&&qn.current&&qn.current instanceof Element&&A.createElement(Ne,{ref:Ol,offsetScroll:Ao,scrollBodyRef:qn,onScroll:Fn,container:oe}))}else no=A.createElement("div",{style:(0,me.Z)((0,me.Z)({},$e),Tt),className:Ht()("".concat(X,"-content")),onScroll:Fn,ref:qn},A.createElement(is,(0,je.Z)({style:(0,me.Z)((0,me.Z)({},Bn),{},{tableLayout:rs})},ro),Vs,kr,Ke!==!1&&A.createElement(Yr,(0,je.Z)({},zs,wo)),io,Q&&A.createElement(sr,{stickyOffsets:Co,flattenColumns:Ut,columns:Li},Q)));var Ar=A.createElement("div",(0,je.Z)({className:Ht()(X,ne,(j={},(0,We.Z)(j,"".concat(X,"-rtl"),Ae==="rtl"),(0,We.Z)(j,"".concat(X,"-ping-left"),jo),(0,We.Z)(j,"".concat(X,"-ping-right"),Sr),(0,We.Z)(j,"".concat(X,"-layout-fixed"),Se==="fixed"),(0,We.Z)(j,"".concat(X,"-fixed-header"),Qn),(0,We.Z)(j,"".concat(X,"-fixed-column"),ns),(0,We.Z)(j,"".concat(X,"-scroll-horizontal"),Nn),(0,We.Z)(j,"".concat(X,"-has-fix-left"),Ut[0]&&Ut[0].fixed),(0,We.Z)(j,"".concat(X,"-has-fix-right"),Ut[Ut.length-1]&&Ut[Ut.length-1].fixed==="right"),j)),style:de,id:Ye,ref:Pi},Yo),Ce&&A.createElement(re,{className:"".concat(X,"-title")},Ce(Me)),A.createElement("div",{ref:Cs,className:"".concat(X,"-container")},no),_e&&A.createElement(re,{className:"".concat(X,"-footer")},_e(Me)));Nn&&(Ar=A.createElement(jn.Z,{onResize:Ro},Ar));var Eo=zr(Ut,Co,Ae,Li),Oo=A.useMemo(function(){return{scrollX:Yn,prefixCls:X,getComponent:ot,scrollbarSize:oi,direction:Ae,fixedInfoList:Eo,isSticky:Hi,supportSticky:Wn,componentWidth:Tn,fixHeader:Qn,fixColumn:ns,horizonScroll:Nn,tableLayout:rs,rowClassName:he,expandedRowClassName:At.expandedRowClassName,expandIcon:Xi,expandableType:ri,expandRowByClick:At.expandRowByClick,expandedRowRender:At.expandedRowRender,onTriggerExpand:bt,expandIconColumnIndex:At.expandIconColumnIndex,indentSize:At.indentSize,allColumnsFixedLeft:Ut.every(function(vt){return vt.fixed==="left"}),emptyNode:Jo,columns:Li,flattenColumns:Ut,onColumnResize:Jt,hoverStartRow:bn,hoverEndRow:Oi,onHover:ft,rowExpandable:At.rowExpandable,onRow:Ge,getRowKey:Ve,expandedKeys:br,childrenColumnName:si}},[Yn,X,ot,oi,Ae,Eo,Hi,Wn,Tn,Qn,ns,Nn,rs,he,At.expandedRowClassName,Xi,ri,At.expandRowByClick,At.expandedRowRender,bt,At.expandIconColumnIndex,At.indentSize,Jo,Li,Ut,Jt,bn,Oi,ft,At.rowExpandable,Ge,Ve,br,si]);return A.createElement(ct.Provider,{value:Oo},Ar)}var ar=A.forwardRef($o);function bl(B){return fn(ar,B)}var Qr=bl();Qr.EXPAND_COLUMN=q,Qr.INTERNAL_HOOKS=N,Qr.Column=Gi,Qr.ColumnGroup=ji,Qr.Summary=Pr;var Zo=Qr,Sl=Pe(71123),yo=(0,Oe.kr)(null),Ko=(0,Oe.kr)(null);function Uo(B,G,j){var K=G||1;return j[B+K]-(j[B]||0)}function qo(B){var G=B.rowInfo,j=B.column,K=B.colIndex,X=B.indent,ne=B.index,he=B.renderIndex,de=B.record,le=B.style,ae=B.className,ue=B.inverse,Se=B.getHeight,Ae=j.render,Ce=j.dataIndex,_e=j.className,qe=j.width,ze=(0,Oe.qp)(Ko,["columnsOffset"]),Ye=ze.columnsOffset,Ke=Fi(G,j,K,X,ne),Te=Ke.key,Qe=Ke.fixedInfo,Ge=Ke.appendCellNode,rt=Ke.additionalCellProps,Kt=rt.style,dt=rt.colSpan,gt=dt===void 0?1:dt,Xt=rt.rowSpan,Ue=Xt===void 0?1:Xt,Fe=K-1,Me=Uo(Fe,gt,Ye),Xe=gt>1?qe-Me:0,et=(0,me.Z)((0,me.Z)((0,me.Z)({},Kt),le),{},{flex:"0 0 ".concat(Me,"px"),width:"".concat(Me,"px"),marginRight:Xe,pointerEvents:"auto"}),ot=A.useMemo(function(){return ue?Ue<=1:gt===0||Ue===0||Ue>1},[Ue,gt,ue]);ot?et.visibility="hidden":ue&&(et.height=Se==null?void 0:Se(Ue));var Ve=ot?function(){return null}:Ae,Lt={};return(Ue===0||gt===0)&&(Lt.rowSpan=1,Lt.colSpan=1),A.createElement(jt,(0,je.Z)({className:Ht()(_e,ae),ellipsis:j.ellipsis,align:j.align,scope:j.rowScope,component:"div",prefixCls:G.prefixCls,key:Te,record:de,index:ne,renderIndex:he,dataIndex:Ce,render:Ve,shouldCellUpdate:j.shouldCellUpdate},Qe,{appendNode:Ge,additionalProps:(0,me.Z)((0,me.Z)({},rt),{},{style:et},Lt)}))}var Cl=qo,bs=["data","index","className","rowKey","style","extra","getHeight"],kl=A.forwardRef(function(B,G){var j=B.data,K=B.index,X=B.className,ne=B.rowKey,he=B.style,de=B.extra,le=B.getHeight,ae=(0,Ci.Z)(B,bs),ue=j.record,Se=j.indent,Ae=j.index,Ce=(0,Oe.qp)(ct,["prefixCls","flattenColumns","fixColumn","componentWidth","scrollX"]),_e=Ce.scrollX,qe=Ce.flattenColumns,ze=Ce.prefixCls,Ye=Ce.fixColumn,Ke=Ce.componentWidth,Te=Br(ue,ne,K,Se),Qe=Te.rowSupportExpand,Ge=Te.expanded,rt=Te.rowProps,Kt=Te.expandedRowRender,dt=Te.expandedRowClassName,gt;if(Qe&&Ge){var Xt=Kt(ue,K,Se+1,Ge),Ue=dt==null?void 0:dt(ue,K,Se),Fe={};Ye&&(Fe={style:(0,We.Z)({},"--virtual-width","".concat(Ke,"px"))});var Me="".concat(ze,"-expanded-row-cell");gt=A.createElement("div",{className:Ht()("".concat(ze,"-expanded-row"),"".concat(ze,"-expanded-row-level-").concat(Se+1),Ue)},A.createElement(jt,{component:"div",prefixCls:ze,className:Ht()(Me,(0,We.Z)({},"".concat(Me,"-fixed"),Ye)),additionalProps:Fe},Xt))}var Xe=(0,me.Z)((0,me.Z)({},he),{},{width:_e});de&&(Xe.position="absolute",Xe.pointerEvents="none");var et=A.createElement("div",(0,je.Z)({},rt,ae,{ref:Qe?null:G,className:Ht()(X,"".concat(ze,"-row"),rt==null?void 0:rt.className,(0,We.Z)({},"".concat(ze,"-row-extra"),de)),style:(0,me.Z)((0,me.Z)({},Xe),rt==null?void 0:rt.style)}),qe.map(function(ot,Ve){return A.createElement(Cl,{key:Ve,rowInfo:Te,column:ot,colIndex:Ve,indent:Se,index:K,renderIndex:Ae,record:ue,inverse:de,getHeight:le})}));return Qe?A.createElement("div",{ref:G},et,gt):et}),Is=Ot(kl),Go=Is,_s=A.forwardRef(function(B,G){var j=B.data,K=B.onScroll,X=(0,Oe.qp)(ct,["flattenColumns","onColumnResize","getRowKey","prefixCls","expandedKeys","childrenColumnName","emptyNode","scrollX"]),ne=X.flattenColumns,he=X.onColumnResize,de=X.getRowKey,le=X.expandedKeys,ae=X.prefixCls,ue=X.childrenColumnName,Se=X.emptyNode,Ae=X.scrollX,Ce=(0,Oe.qp)(yo),_e=Ce.sticky,qe=Ce.scrollY,ze=Ce.listItemHeight,Ye=A.useRef(),Ke=Zn(j,ue,le,de),Te=A.useMemo(function(){var Ue=0;return ne.map(function(Fe){var Me=Fe.width,Xe=Fe.key;return Ue+=Me,[Xe,Me,Ue]})},[ne]),Qe=A.useMemo(function(){return Te.map(function(Ue){return Ue[2]})},[Te]);A.useEffect(function(){Te.forEach(function(Ue){var Fe=(0,kt.Z)(Ue,2),Me=Fe[0],Xe=Fe[1];he(Me,Xe)})},[Te]),A.useImperativeHandle(G,function(){var Ue={scrollTo:function(Me){var Xe;(Xe=Ye.current)===null||Xe===void 0||Xe.scrollTo(Me)}};return Object.defineProperty(Ue,"scrollLeft",{get:function(){var Me;return((Me=Ye.current)===null||Me===void 0?void 0:Me.getScrollInfo().x)||0},set:function(Me){var Xe;(Xe=Ye.current)===null||Xe===void 0||Xe.scrollTo({left:Me})}}),Ue});var Ge=function(Fe,Me){var Xe,et=(Xe=Ke[Me])===null||Xe===void 0?void 0:Xe.record,ot=Fe.onCell;if(ot){var Ve,Lt=ot(et,Me);return(Ve=Lt==null?void 0:Lt.rowSpan)!==null&&Ve!==void 0?Ve:1}return 1},rt=function(Fe){var Me=Fe.start,Xe=Fe.end,et=Fe.getSize,ot=Fe.offsetY;if(Xe<0)return null;for(var Ve=ne.filter(function(vn){return Ge(vn,Me)===0}),Lt=Me,An=function(St){if(Ve=Ve.filter(function(ki){return Ge(ki,St)===0}),!Ve.length)return Lt=St,"break"},wn=Me;wn>=0;wn-=1){var bn=An(wn);if(bn==="break")break}for(var Oi=ne.filter(function(vn){return Ge(vn,Xe)!==1}),ft=Xe,yi=function(St){if(Oi=Oi.filter(function(ki){return Ge(ki,St)!==1}),!Oi.length)return ft=Math.max(St-1,Xe),"break"},Un=Xe;Un<Ke.length;Un+=1){var At=yi(Un);if(At==="break")break}for(var ri=[],br=function(St){var ki=Ke[St];if(!ki)return"continue";ne.some(function(Tn){return Ge(Tn,St)>1})&&ri.push(St)},Xi=Lt;Xi<=ft;Xi+=1)var si=br(Xi);var bt=ri.map(function(vn){var St=Ke[vn],ki=de(St.record,vn),Tn=function(Di){var Li=vn+Di-1,Ut=de(Ke[Li].record,Li),hr=et(ki,Ut);return hr.bottom-hr.top},En=et(ki);return A.createElement(Go,{key:vn,data:St,rowKey:ki,index:vn,style:{top:-ot+En.top},extra:!0,getHeight:Tn})});return bt},Kt=A.useMemo(function(){return{columnsOffset:Qe}},[Qe]),dt="".concat(ae,"-tbody"),gt;if(Ke.length){var Xt={};_e&&(Xt.position="sticky",Xt.bottom=0,(0,Qt.Z)(_e)==="object"&&_e.offsetScroll&&(Xt.bottom=_e.offsetScroll)),gt=A.createElement(Sl.Z,{fullHeight:!1,ref:Ye,styles:{horizontalScrollBar:Xt},className:Ht()(dt,"".concat(dt,"-virtual")),height:qe,itemHeight:ze||24,data:Ke,itemKey:function(Fe){return de(Fe.record)},scrollWidth:Ae,onVirtualScroll:function(Fe){var Me=Fe.x;K({scrollLeft:Me})},extraRender:rt},function(Ue,Fe,Me){var Xe=de(Ue.record,Fe);return A.createElement(Go,(0,je.Z)({data:Ue,rowKey:Xe,index:Fe},Me))})}else gt=A.createElement("div",{className:Ht()("".concat(ae,"-placeholder"))},A.createElement(jt,{component:"div",prefixCls:ae},Se));return A.createElement(Ko.Provider,{value:Kt},gt)}),Ss=Ot(_s),xo=Ss,Vr=function(G,j){var K=j.ref,X=j.onScroll;return A.createElement(xo,{ref:K,data:G,onScroll:X})};function Al(B,G){var j=B.columns,K=B.scroll,X=B.sticky,ne=B.prefixCls,he=ne===void 0?xn:ne,de=B.className,le=B.listItemHeight,ae=K||{},ue=ae.x,Se=ae.y;typeof ue!="number"&&(ue=1),typeof Se!="number"&&(Se=500);var Ae=A.useMemo(function(){return{sticky:X,scrollY:Se,listItemHeight:le}},[X,Se,le]);return A.createElement(yo.Provider,{value:Ae},A.createElement(Zo,(0,je.Z)({},B,{className:Ht()(de,"".concat(he,"-virtual")),scroll:(0,me.Z)((0,me.Z)({},K),{},{x:ue}),components:{body:Vr},columns:j,internalHooks:N,tailor:!0,ref:G})))}var Ns=A.forwardRef(Al);function Tl(B){return fn(Ns,B)}var js=Tl(),Ml=Zo},68608:function(Ze){function hn(Pe){if(Pe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pe}Ze.exports=hn,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},38888:function(Ze,hn,Pe){var q=Pe(44908),N=Pe(14614),Oe=Pe(91621);function A(ee){var fn=N();return function(){var un=q(ee),Be;if(fn){var ct=q(this).constructor;Be=Reflect.construct(un,arguments,ct)}else Be=un.apply(this,arguments);return Oe(this,Be)}}Ze.exports=A,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},44908:function(Ze){function hn(Pe){return Ze.exports=hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports,hn(Pe)}Ze.exports=hn,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},58853:function(Ze,hn,Pe){var q=Pe(49154);function N(Oe,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");Oe.prototype=Object.create(A&&A.prototype,{constructor:{value:Oe,writable:!0,configurable:!0}}),Object.defineProperty(Oe,"prototype",{writable:!1}),A&&q(Oe,A)}Ze.exports=N,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},14614:function(Ze){function hn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Pe){return!1}}Ze.exports=hn,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},12342:function(Ze,hn,Pe){var q=Pe(20006);function N(Oe,A){if(Oe==null)return{};var ee=q(Oe,A),fn,Ot;if(Object.getOwnPropertySymbols){var un=Object.getOwnPropertySymbols(Oe);for(Ot=0;Ot<un.length;Ot++)fn=un[Ot],!(A.indexOf(fn)>=0)&&Object.prototype.propertyIsEnumerable.call(Oe,fn)&&(ee[fn]=Oe[fn])}return ee}Ze.exports=N,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},20006:function(Ze){function hn(Pe,q){if(Pe==null)return{};var N={},Oe=Object.keys(Pe),A,ee;for(ee=0;ee<Oe.length;ee++)A=Oe[ee],!(q.indexOf(A)>=0)&&(N[A]=Pe[A]);return N}Ze.exports=hn,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},91621:function(Ze,hn,Pe){var q=Pe(37635).default,N=Pe(68608);function Oe(A,ee){if(ee&&(q(ee)==="object"||typeof ee=="function"))return ee;if(ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(A)}Ze.exports=Oe,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},49154:function(Ze){function hn(Pe,q){return Ze.exports=hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Oe,A){return Oe.__proto__=A,Oe},Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports,hn(Pe,q)}Ze.exports=hn,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},87708:function(Ze,hn,Pe){"use strict";Pe.d(hn,{BO:function(){return or},D0:function(){return Rn},Gz:function(){return zr},IS:function(){return Hr},Py:function(){return In},QQ:function(){return ni},Wl:function(){return Lr},Xs:function(){return Jn},YW:function(){return On},as:function(){return Ln},bg:function(){return Cn},cp:function(){return Qt},f_:function(){return Fr},gc:function(){return $n},gm:function(){return Ht},jT:function(){return wt},n0:function(){return Dn},nZ:function(){return Vn},q6:function(){return Fi},r$:function(){return jt},uU:function(){return lr},xv:function(){return q},yy:function(){return on}});class q{lineAt(p){if(p<0||p>this.length)throw new RangeError(`Invalid position ${p} in document of length ${this.length}`);return this.lineInner(p,!1,1,0)}line(p){if(p<1||p>this.lines)throw new RangeError(`Invalid line number ${p} in ${this.lines}-line document`);return this.lineInner(p,!0,1,0)}replace(p,v,b){let k=[];return this.decompose(0,p,k,2),b.length&&b.decompose(0,b.length,k,3),this.decompose(v,this.length,k,1),Oe.from(k,this.length-(v-p)+b.length)}append(p){return this.replace(this.length,this.length,p)}slice(p,v=this.length){let b=[];return this.decompose(p,v,b,0),Oe.from(b,v-p)}eq(p){if(p==this)return!0;if(p.length!=this.length||p.lines!=this.lines)return!1;let v=this.scanIdentical(p,1),b=this.length-this.scanIdentical(p,-1),k=new Ot(this),E=new Ot(p);for(let D=v,W=v;;){if(k.next(D),E.next(D),D=0,k.lineBreak!=E.lineBreak||k.done!=E.done||k.value!=E.value)return!1;if(W+=k.value.length,k.done||W>=b)return!0}}iter(p=1){return new Ot(this,p)}iterRange(p,v=this.length){return new un(this,p,v)}iterLines(p,v){let b;if(p==null)b=this.iter();else{v==null&&(v=this.lines+1);let k=this.line(p).from;b=this.iterRange(k,Math.max(k,v==this.lines+1?this.length:v<=1?0:this.line(v-1).to))}return new Be(b)}toString(){return this.sliceString(0)}toJSON(){let p=[];return this.flatten(p),p}constructor(){}static of(p){if(p.length==0)throw new RangeError("A document must have at least one line");return p.length==1&&!p[0]?q.empty:p.length<=32?new N(p):Oe.from(N.split(p,[]))}}class N extends q{constructor(p,v=A(p)){super(),this.text=p,this.length=v}get lines(){return this.text.length}get children(){return null}lineInner(p,v,b,k){for(let E=0;;E++){let D=this.text[E],W=k+D.length;if((v?b:W)>=p)return new ct(k,W,b,D);k=W+1,b++}}decompose(p,v,b,k){let E=p<=0&&v>=this.length?this:new N(fn(this.text,p,v),Math.min(v,this.length)-Math.max(0,p));if(k&1){let D=b.pop(),W=ee(E.text,D.text.slice(),0,E.length);if(W.length<=32)b.push(new N(W,D.length+E.length));else{let Z=W.length>>1;b.push(new N(W.slice(0,Z)),new N(W.slice(Z)))}}else b.push(E)}replace(p,v,b){if(!(b instanceof N))return super.replace(p,v,b);let k=ee(this.text,ee(b.text,fn(this.text,0,p)),v),E=this.length+b.length-(v-p);return k.length<=32?new N(k,E):Oe.from(N.split(k,[]),E)}sliceString(p,v=this.length,b=`
`){let k="";for(let E=0,D=0;E<=v&&D<this.text.length;D++){let W=this.text[D],Z=E+W.length;E>p&&D&&(k+=b),p<Z&&v>E&&(k+=W.slice(Math.max(0,p-E),v-E)),E=Z+1}return k}flatten(p){for(let v of this.text)p.push(v)}scanIdentical(){return 0}static split(p,v){let b=[],k=-1;for(let E of p)b.push(E),k+=E.length+1,b.length==32&&(v.push(new N(b,k)),b=[],k=-1);return k>-1&&v.push(new N(b,k)),v}}class Oe extends q{constructor(p,v){super(),this.children=p,this.length=v,this.lines=0;for(let b of p)this.lines+=b.lines}lineInner(p,v,b,k){for(let E=0;;E++){let D=this.children[E],W=k+D.length,Z=b+D.lines-1;if((v?Z:W)>=p)return D.lineInner(p,v,b,k);k=W+1,b=Z+1}}decompose(p,v,b,k){for(let E=0,D=0;D<=v&&E<this.children.length;E++){let W=this.children[E],Z=D+W.length;if(p<=Z&&v>=D){let re=k&((D<=p?1:0)|(Z>=v?2:0));D>=p&&Z<=v&&!re?b.push(W):W.decompose(p-D,v-D,b,re)}D=Z+1}}replace(p,v,b){if(b.lines<this.lines)for(let k=0,E=0;k<this.children.length;k++){let D=this.children[k],W=E+D.length;if(p>=E&&v<=W){let Z=D.replace(p-E,v-E,b),re=this.lines-D.lines+Z.lines;if(Z.lines<re>>5-1&&Z.lines>re>>5+1){let fe=this.children.slice();return fe[k]=Z,new Oe(fe,this.length-(v-p)+b.length)}return super.replace(E,W,Z)}E=W+1}return super.replace(p,v,b)}sliceString(p,v=this.length,b=`
`){let k="";for(let E=0,D=0;E<this.children.length&&D<=v;E++){let W=this.children[E],Z=D+W.length;D>p&&E&&(k+=b),p<Z&&v>D&&(k+=W.sliceString(p-D,v-D,b)),D=Z+1}return k}flatten(p){for(let v of this.children)v.flatten(p)}scanIdentical(p,v){if(!(p instanceof Oe))return 0;let b=0,[k,E,D,W]=v>0?[0,0,this.children.length,p.children.length]:[this.children.length-1,p.children.length-1,-1,-1];for(;;k+=v,E+=v){if(k==D||E==W)return b;let Z=this.children[k],re=p.children[E];if(Z!=re)return b+Z.scanIdentical(re,v);b+=Z.length+1}}static from(p,v=p.reduce((b,k)=>b+k.length+1,-1)){let b=0;for(let Ne of p)b+=Ne.lines;if(b<32){let Ne=[];for(let yt of p)yt.flatten(Ne);return new N(Ne,v)}let k=Math.max(32,b>>5),E=k<<1,D=k>>1,W=[],Z=0,re=-1,fe=[];function we(Ne){let yt;if(Ne.lines>E&&Ne instanceof Oe)for(let Gi of Ne.children)we(Gi);else Ne.lines>D&&(Z>D||!Z)?(He(),W.push(Ne)):Ne instanceof N&&Z&&(yt=fe[fe.length-1])instanceof N&&Ne.lines+yt.lines<=32?(Z+=Ne.lines,re+=Ne.length+1,fe[fe.length-1]=new N(yt.text.concat(Ne.text),yt.length+1+Ne.length)):(Z+Ne.lines>k&&He(),Z+=Ne.lines,re+=Ne.length+1,fe.push(Ne))}function He(){Z!=0&&(W.push(fe.length==1?fe[0]:Oe.from(fe,re)),re=-1,Z=fe.length=0)}for(let Ne of p)we(Ne);return He(),W.length==1?W[0]:new Oe(W,v)}}q.empty=new N([""],0);function A(_){let p=-1;for(let v of _)p+=v.length+1;return p}function ee(_,p,v=0,b=1e9){for(let k=0,E=0,D=!0;E<_.length&&k<=b;E++){let W=_[E],Z=k+W.length;Z>=v&&(Z>b&&(W=W.slice(0,b-k)),k<v&&(W=W.slice(v-k)),D?(p[p.length-1]+=W,D=!1):p.push(W)),k=Z+1}return p}function fn(_,p,v){return ee(_,[""],p,v)}class Ot{constructor(p,v=1){this.dir=v,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[p],this.offsets=[v>0?1:(p instanceof N?p.text.length:p.children.length)<<1]}nextInner(p,v){for(this.done=this.lineBreak=!1;;){let b=this.nodes.length-1,k=this.nodes[b],E=this.offsets[b],D=E>>1,W=k instanceof N?k.text.length:k.children.length;if(D==(v>0?W:0)){if(b==0)return this.done=!0,this.value="",this;v>0&&this.offsets[b-1]++,this.nodes.pop(),this.offsets.pop()}else if((E&1)==(v>0?0:1)){if(this.offsets[b]+=v,p==0)return this.lineBreak=!0,this.value=`
`,this;p--}else if(k instanceof N){let Z=k.text[D+(v<0?-1:0)];if(this.offsets[b]+=v,Z.length>Math.max(0,p))return this.value=p==0?Z:v>0?Z.slice(p):Z.slice(0,Z.length-p),this;p-=Z.length}else{let Z=k.children[D+(v<0?-1:0)];p>Z.length?(p-=Z.length,this.offsets[b]+=v):(v<0&&this.offsets[b]--,this.nodes.push(Z),this.offsets.push(v>0?1:(Z instanceof N?Z.text.length:Z.children.length)<<1))}}}next(p=0){return p<0&&(this.nextInner(-p,-this.dir),p=this.value.length),this.nextInner(p,this.dir)}}class un{constructor(p,v,b){this.value="",this.done=!1,this.cursor=new Ot(p,v>b?-1:1),this.pos=v>b?p.length:0,this.from=Math.min(v,b),this.to=Math.max(v,b)}nextInner(p,v){if(v<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;p+=Math.max(0,v<0?this.pos-this.to:this.from-this.pos);let b=v<0?this.pos-this.from:this.to-this.pos;p>b&&(p=b),b-=p;let{value:k}=this.cursor.next(p);return this.pos+=(k.length+p)*v,this.value=k.length<=b?k:v<0?k.slice(k.length-b):k.slice(0,b),this.done=!this.value,this}next(p=0){return p<0?p=Math.max(p,this.from-this.pos):p>0&&(p=Math.min(p,this.to-this.pos)),this.nextInner(p,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Be{constructor(p){this.inner=p,this.afterBreak=!0,this.value="",this.done=!1}next(p=0){let{done:v,lineBreak:b,value:k}=this.inner.next(p);return v?(this.done=!0,this.value=""):b?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=k,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(q.prototype[Symbol.iterator]=function(){return this.iter()},Ot.prototype[Symbol.iterator]=un.prototype[Symbol.iterator]=Be.prototype[Symbol.iterator]=function(){return this});class ct{constructor(p,v,b,k){this.from=p,this.to=v,this.number=b,this.text=k}get length(){return this.to-this.from}}let It="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(_=>_?parseInt(_,36):1);for(let _=1;_<It.length;_++)It[_]+=It[_-1];function Wt(_){for(let p=1;p<It.length;p+=2)if(It[p]>_)return It[p-1]<=_;return!1}function Dt(_){return _>=127462&&_<=127487}const je=8205;function Qt(_,p,v=!0,b=!0){return(v?me:We)(_,p,b)}function me(_,p,v){if(p==_.length)return p;p&&kt(_.charCodeAt(p))&&gn(_.charCodeAt(p-1))&&p--;let b=Ht(_,p);for(p+=Vn(b);p<_.length;){let k=Ht(_,p);if(b==je||k==je||v&&Wt(k))p+=Vn(k),b=k;else if(Dt(k)){let E=0,D=p-2;for(;D>=0&&Dt(Ht(_,D));)E++,D-=2;if(E%2==0)break;p+=2}else break}return p}function We(_,p,v){for(;p>0;){let b=me(_,p-2,v);if(b<p)return b;p--}return 0}function kt(_){return _>=56320&&_<57344}function gn(_){return _>=55296&&_<56320}function Ht(_,p){let v=_.charCodeAt(p);if(!gn(v)||p+1==_.length)return v;let b=_.charCodeAt(p+1);return kt(b)?(v-55296<<10)+(b-56320)+65536:v}function Cn(_){return _<=65535?String.fromCharCode(_):(_-=65536,String.fromCharCode((_>>10)+55296,(_&1023)+56320))}function Vn(_){return _<65536?1:2}const zt=/\r\n?|\n/;var $n=function(_){return _[_.Simple=0]="Simple",_[_.TrackDel=1]="TrackDel",_[_.TrackBefore=2]="TrackBefore",_[_.TrackAfter=3]="TrackAfter",_}($n||($n={}));class Dn{constructor(p){this.sections=p}get length(){let p=0;for(let v=0;v<this.sections.length;v+=2)p+=this.sections[v];return p}get newLength(){let p=0;for(let v=0;v<this.sections.length;v+=2){let b=this.sections[v+1];p+=b<0?this.sections[v]:b}return p}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(p){for(let v=0,b=0,k=0;v<this.sections.length;){let E=this.sections[v++],D=this.sections[v++];D<0?(p(b,k,E),k+=E):k+=D,b+=E}}iterChangedRanges(p,v=!1){Ni(this,p,v)}get invertedDesc(){let p=[];for(let v=0;v<this.sections.length;){let b=this.sections[v++],k=this.sections[v++];k<0?p.push(b,k):p.push(k,b)}return new Dn(p)}composeDesc(p){return this.empty?p:p.empty?this:Xr(this,p)}mapDesc(p,v=!1){return p.empty?this:jr(this,p,v)}mapPos(p,v=-1,b=$n.Simple){let k=0,E=0;for(let D=0;D<this.sections.length;){let W=this.sections[D++],Z=this.sections[D++],re=k+W;if(Z<0){if(re>p)return E+(p-k);E+=W}else{if(b!=$n.Simple&&re>=p&&(b==$n.TrackDel&&k<p&&re>p||b==$n.TrackBefore&&k<p||b==$n.TrackAfter&&re>p))return null;if(re>p||re==p&&v<0&&!W)return p==k||v<0?E:E+Z;E+=Z}k=re}if(p>k)throw new RangeError(`Position ${p} is out of range for changeset of length ${k}`);return E}touchesRange(p,v=p){for(let b=0,k=0;b<this.sections.length&&k<=v;){let E=this.sections[b++],D=this.sections[b++],W=k+E;if(D>=0&&k<=v&&W>=p)return k<p&&W>v?"cover":!0;k=W}return!1}toString(){let p="";for(let v=0;v<this.sections.length;){let b=this.sections[v++],k=this.sections[v++];p+=(p?" ":"")+b+(k>=0?":"+k:"")}return p}toJSON(){return this.sections}static fromJSON(p){if(!Array.isArray(p)||p.length%2||p.some(v=>typeof v!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Dn(p)}static create(p){return new Dn(p)}}class Ln extends Dn{constructor(p,v){super(p),this.inserted=v}apply(p){if(this.length!=p.length)throw new RangeError("Applying change set to a document with the wrong length");return Ni(this,(v,b,k,E,D)=>p=p.replace(k,k+(b-v),D),!1),p}mapDesc(p,v=!1){return jr(this,p,v,!0)}invert(p){let v=this.sections.slice(),b=[];for(let k=0,E=0;k<v.length;k+=2){let D=v[k],W=v[k+1];if(W>=0){v[k]=W,v[k+1]=D;let Z=k>>1;for(;b.length<Z;)b.push(q.empty);b.push(D?p.slice(E,E+D):q.empty)}E+=D}return new Ln(v,b)}compose(p){return this.empty?p:p.empty?this:Xr(this,p,!0)}map(p,v=!1){return p.empty?this:jr(this,p,v,!0)}iterChanges(p,v=!1){Ni(this,p,v)}get desc(){return Dn.create(this.sections)}filter(p){let v=[],b=[],k=[],E=new Or(this);e:for(let D=0,W=0;;){let Z=D==p.length?1e9:p[D++];for(;W<Z||W==Z&&E.len==0;){if(E.done)break e;let fe=Math.min(E.len,Z-W);sn(k,fe,-1);let we=E.ins==-1?-1:E.off==0?E.ins:0;sn(v,fe,we),we>0&&ui(b,v,E.text),E.forward(fe),W+=fe}let re=p[D++];for(;W<re;){if(E.done)break e;let fe=Math.min(E.len,re-W);sn(v,fe,-1),sn(k,fe,E.ins==-1?-1:E.off==0?E.ins:0),E.forward(fe),W+=fe}}return{changes:new Ln(v,b),filtered:Dn.create(k)}}toJSON(){let p=[];for(let v=0;v<this.sections.length;v+=2){let b=this.sections[v],k=this.sections[v+1];k<0?p.push(b):k==0?p.push([b]):p.push([b].concat(this.inserted[v>>1].toJSON()))}return p}static of(p,v,b){let k=[],E=[],D=0,W=null;function Z(fe=!1){if(!fe&&!k.length)return;D<v&&sn(k,v-D,-1);let we=new Ln(k,E);W=W?W.compose(we.map(W)):we,k=[],E=[],D=0}function re(fe){if(Array.isArray(fe))for(let we of fe)re(we);else if(fe instanceof Ln){if(fe.length!=v)throw new RangeError(`Mismatched change set length (got ${fe.length}, expected ${v})`);Z(),W=W?W.compose(fe.map(W)):fe}else{let{from:we,to:He=we,insert:Ne}=fe;if(we>He||we<0||He>v)throw new RangeError(`Invalid change range ${we} to ${He} (in doc of length ${v})`);let yt=Ne?typeof Ne=="string"?q.of(Ne.split(b||zt)):Ne:q.empty,Gi=yt.length;if(we==He&&Gi==0)return;we<D&&Z(),we>D&&sn(k,we-D,-1),sn(k,He-we,Gi),ui(E,k,yt),D=He}}return re(p),Z(!W),W}static empty(p){return new Ln(p?[p,-1]:[],[])}static fromJSON(p){if(!Array.isArray(p))throw new RangeError("Invalid JSON representation of ChangeSet");let v=[],b=[];for(let k=0;k<p.length;k++){let E=p[k];if(typeof E=="number")v.push(E,-1);else{if(!Array.isArray(E)||typeof E[0]!="number"||E.some((D,W)=>W&&typeof D!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(E.length==1)v.push(E[0],0);else{for(;b.length<k;)b.push(q.empty);b[k]=q.of(E.slice(1)),v.push(E[0],b[k].length)}}}return new Ln(v,b)}static createSet(p,v){return new Ln(p,v)}}function sn(_,p,v,b=!1){if(p==0&&v<=0)return;let k=_.length-2;k>=0&&v<=0&&v==_[k+1]?_[k]+=p:p==0&&_[k]==0?_[k+1]+=v:b?(_[k]+=p,_[k+1]+=v):_.push(p,v)}function ui(_,p,v){if(v.length==0)return;let b=p.length-2>>1;if(b<_.length)_[_.length-1]=_[_.length-1].append(v);else{for(;_.length<b;)_.push(q.empty);_.push(v)}}function Ni(_,p,v){let b=_.inserted;for(let k=0,E=0,D=0;D<_.sections.length;){let W=_.sections[D++],Z=_.sections[D++];if(Z<0)k+=W,E+=W;else{let re=k,fe=E,we=q.empty;for(;re+=W,fe+=Z,Z&&b&&(we=we.append(b[D-2>>1])),!(v||D==_.sections.length||_.sections[D+1]<0);)W=_.sections[D++],Z=_.sections[D++];p(k,re,E,fe,we),k=re,E=fe}}}function jr(_,p,v,b=!1){let k=[],E=b?[]:null,D=new Or(_),W=new Or(p);for(let Z=-1;;)if(D.ins==-1&&W.ins==-1){let re=Math.min(D.len,W.len);sn(k,re,-1),D.forward(re),W.forward(re)}else if(W.ins>=0&&(D.ins<0||Z==D.i||D.off==0&&(W.len<D.len||W.len==D.len&&!v))){let re=W.len;for(sn(k,W.ins,-1);re;){let fe=Math.min(D.len,re);D.ins>=0&&Z<D.i&&D.len<=fe&&(sn(k,0,D.ins),E&&ui(E,k,D.text),Z=D.i),D.forward(fe),re-=fe}W.next()}else if(D.ins>=0){let re=0,fe=D.len;for(;fe;)if(W.ins==-1){let we=Math.min(fe,W.len);re+=we,fe-=we,W.forward(we)}else if(W.ins==0&&W.len<fe)fe-=W.len,W.next();else break;sn(k,re,Z<D.i?D.ins:0),E&&Z<D.i&&ui(E,k,D.text),Z=D.i,D.forward(D.len-fe)}else{if(D.done&&W.done)return E?Ln.createSet(k,E):Dn.create(k);throw new Error("Mismatched change set lengths")}}function Xr(_,p,v=!1){let b=[],k=v?[]:null,E=new Or(_),D=new Or(p);for(let W=!1;;){if(E.done&&D.done)return k?Ln.createSet(b,k):Dn.create(b);if(E.ins==0)sn(b,E.len,0,W),E.next();else if(D.len==0&&!D.done)sn(b,0,D.ins,W),k&&ui(k,b,D.text),D.next();else{if(E.done||D.done)throw new Error("Mismatched change set lengths");{let Z=Math.min(E.len2,D.len),re=b.length;if(E.ins==-1){let fe=D.ins==-1?-1:D.off?0:D.ins;sn(b,Z,fe,W),k&&fe&&ui(k,b,D.text)}else D.ins==-1?(sn(b,E.off?0:E.len,Z,W),k&&ui(k,b,E.textBit(Z))):(sn(b,E.off?0:E.len,D.off?0:D.ins,W),k&&!D.off&&ui(k,b,D.text));W=(E.ins>Z||D.ins>=0&&D.len>Z)&&(W||b.length>re),E.forward2(Z),D.forward(Z)}}}}class Or{constructor(p){this.set=p,this.i=0,this.next()}next(){let{sections:p}=this.set;this.i<p.length?(this.len=p[this.i++],this.ins=p[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:p}=this.set,v=this.i-2>>1;return v>=p.length?q.empty:p[v]}textBit(p){let{inserted:v}=this.set,b=this.i-2>>1;return b>=v.length&&!p?q.empty:v[b].slice(this.off,p==null?void 0:this.off+p)}forward(p){p==this.len?this.next():(this.len-=p,this.off+=p)}forward2(p){this.ins==-1?this.forward(p):p==this.ins?this.next():(this.ins-=p,this.off+=p)}}class en{constructor(p,v,b){this.from=p,this.to=v,this.flags=b}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let p=this.flags&7;return p==7?null:p}get goalColumn(){let p=this.flags>>6;return p==16777215?void 0:p}map(p,v=-1){let b,k;return this.empty?b=k=p.mapPos(this.from,v):(b=p.mapPos(this.from,1),k=p.mapPos(this.to,-1)),b==this.from&&k==this.to?this:new en(b,k,this.flags)}extend(p,v=p){if(p<=this.anchor&&v>=this.anchor)return wt.range(p,v);let b=Math.abs(p-this.anchor)>Math.abs(v-this.anchor)?p:v;return wt.range(this.anchor,b)}eq(p){return this.anchor==p.anchor&&this.head==p.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(p){if(!p||typeof p.anchor!="number"||typeof p.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return wt.range(p.anchor,p.head)}static create(p,v,b){return new en(p,v,b)}}class wt{constructor(p,v){this.ranges=p,this.mainIndex=v}map(p,v=-1){return p.empty?this:wt.create(this.ranges.map(b=>b.map(p,v)),this.mainIndex)}eq(p){if(this.ranges.length!=p.ranges.length||this.mainIndex!=p.mainIndex)return!1;for(let v=0;v<this.ranges.length;v++)if(!this.ranges[v].eq(p.ranges[v]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new wt([this.main],0)}addRange(p,v=!0){return wt.create([p].concat(this.ranges),v?0:this.mainIndex+1)}replaceRange(p,v=this.mainIndex){let b=this.ranges.slice();return b[v]=p,wt.create(b,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(p=>p.toJSON()),main:this.mainIndex}}static fromJSON(p){if(!p||!Array.isArray(p.ranges)||typeof p.main!="number"||p.main>=p.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new wt(p.ranges.map(v=>en.fromJSON(v)),p.main)}static single(p,v=p){return new wt([wt.range(p,v)],0)}static create(p,v=0){if(p.length==0)throw new RangeError("A selection needs at least one range");for(let b=0,k=0;k<p.length;k++){let E=p[k];if(E.empty?E.from<=b:E.from<b)return wt.normalized(p.slice(),v);b=E.to}return new wt(p,v)}static cursor(p,v=0,b,k){return en.create(p,p,(v==0?0:v<0?8:16)|(b==null?7:Math.min(6,b))|(k!=null?k:16777215)<<6)}static range(p,v,b,k){let E=(b!=null?b:16777215)<<6|(k==null?7:Math.min(6,k));return v<p?en.create(v,p,48|E):en.create(p,v,(v>p?8:0)|E)}static normalized(p,v=0){let b=p[v];p.sort((k,E)=>k.from-E.from),v=p.indexOf(b);for(let k=1;k<p.length;k++){let E=p[k],D=p[k-1];if(E.empty?E.from<=D.to:E.from<D.to){let W=D.from,Z=Math.max(E.to,D.to);k<=v&&v--,p.splice(--k,2,E.anchor>E.head?wt.range(Z,W):wt.range(W,Z))}}return new wt(p,v)}}function Gt(_,p){for(let v of _.ranges)if(v.to>p)throw new RangeError("Selection points outside of document")}let ir=0;class jt{constructor(p,v,b,k,E){this.combine=p,this.compareInput=v,this.compare=b,this.isStatic=k,this.id=ir++,this.default=p([]),this.extensions=typeof E=="function"?E(this):E}get reader(){return this}static define(p={}){return new jt(p.combine||(v=>v),p.compareInput||((v,b)=>v===b),p.compare||(p.combine?(v,b)=>v===b:ci),!!p.static,p.enables)}of(p){return new ys([],this,0,p)}compute(p,v){if(this.isStatic)throw new Error("Can't compute a static facet");return new ys(p,this,1,v)}computeN(p,v){if(this.isStatic)throw new Error("Can't compute a static facet");return new ys(p,this,2,v)}from(p,v){return v||(v=b=>b),this.compute([p],b=>v(b.field(p)))}}function ci(_,p){return _==p||_.length==p.length&&_.every((v,b)=>v===p[b])}class ys{constructor(p,v,b,k){this.dependencies=p,this.facet=v,this.type=b,this.value=k,this.id=ir++}dynamicSlot(p){var v;let b=this.value,k=this.facet.compareInput,E=this.id,D=p[E]>>1,W=this.type==2,Z=!1,re=!1,fe=[];for(let we of this.dependencies)we=="doc"?Z=!0:we=="selection"?re=!0:((v=p[we.id])!==null&&v!==void 0?v:1)&1||fe.push(p[we.id]);return{create(we){return we.values[D]=b(we),1},update(we,He){if(Z&&He.docChanged||re&&(He.docChanged||He.selection)||rr(we,fe)){let Ne=b(we);if(W?!ti(Ne,we.values[D],k):!k(Ne,we.values[D]))return we.values[D]=Ne,1}return 0},reconfigure:(we,He)=>{let Ne,yt=He.config.address[E];if(yt!=null){let Gi=di(He,yt);if(this.dependencies.every(Pn=>Pn instanceof jt?He.facet(Pn)===we.facet(Pn):Pn instanceof ni?He.field(Pn,!1)==we.field(Pn,!1):!0)||(W?ti(Ne=b(we),Gi,k):k(Ne=b(we),Gi)))return we.values[D]=Gi,0}else Ne=b(we);return we.values[D]=Ne,1}}}}function ti(_,p,v){if(_.length!=p.length)return!1;for(let b=0;b<_.length;b++)if(!v(_[b],p[b]))return!1;return!0}function rr(_,p){let v=!1;for(let b of p)mn(_,b)&1&&(v=!0);return v}function Ci(_,p,v){let b=v.map(Z=>_[Z.id]),k=v.map(Z=>Z.type),E=b.filter(Z=>!(Z&1)),D=_[p.id]>>1;function W(Z){let re=[];for(let fe=0;fe<b.length;fe++){let we=di(Z,b[fe]);if(k[fe]==2)for(let He of we)re.push(He);else re.push(we)}return p.combine(re)}return{create(Z){for(let re of b)mn(Z,re);return Z.values[D]=W(Z),1},update(Z,re){if(!rr(Z,E))return 0;let fe=W(Z);return p.compare(fe,Z.values[D])?0:(Z.values[D]=fe,1)},reconfigure(Z,re){let fe=rr(Z,b),we=re.config.facets[p.id],He=re.facet(p);if(we&&!fe&&ci(v,we))return Z.values[D]=He,0;let Ne=W(Z);return p.compare(Ne,He)?(Z.values[D]=He,0):(Z.values[D]=Ne,1)}}}const Us=jt.define({static:!0});class ni{constructor(p,v,b,k,E){this.id=p,this.createF=v,this.updateF=b,this.compareF=k,this.spec=E,this.provides=void 0}static define(p){let v=new ni(ir++,p.create,p.update,p.compare||((b,k)=>b===k),p);return p.provide&&(v.provides=p.provide(v)),v}create(p){let v=p.facet(Us).find(b=>b.field==this);return((v==null?void 0:v.create)||this.createF)(p)}slot(p){let v=p[this.id]>>1;return{create:b=>(b.values[v]=this.create(b),1),update:(b,k)=>{let E=b.values[v],D=this.updateF(E,k);return this.compareF(E,D)?0:(b.values[v]=D,1)},reconfigure:(b,k)=>k.config.address[this.id]!=null?(b.values[v]=k.field(this),0):(b.values[v]=this.create(b),1)}}init(p){return[this,Us.of({field:this,create:p})]}get extension(){return this}}const Gn={lowest:4,low:3,default:2,high:1,highest:0};function Dr(_){return p=>new sr(p,_)}const Lr={highest:Dr(Gn.highest),high:Dr(Gn.high),default:Dr(Gn.default),low:Dr(Gn.low),lowest:Dr(Gn.lowest)};class sr{constructor(p,v){this.inner=p,this.prec=v}}class Pr{of(p){return new jn(this,p)}reconfigure(p){return Pr.reconfigure.of({compartment:this,extension:p})}get(p){return p.config.compartments.get(this)}}class jn{constructor(p,v){this.compartment=p,this.inner=v}}class Le{constructor(p,v,b,k,E,D){for(this.base=p,this.compartments=v,this.dynamicSlots=b,this.address=k,this.staticValues=E,this.facets=D,this.statusTemplate=[];this.statusTemplate.length<b.length;)this.statusTemplate.push(0)}staticFacet(p){let v=this.address[p.id];return v==null?p.default:this.staticValues[v>>1]}static resolve(p,v,b){let k=[],E=Object.create(null),D=new Map;for(let He of zo(p,v,D))He instanceof ni?k.push(He):(E[He.facet.id]||(E[He.facet.id]=[])).push(He);let W=Object.create(null),Z=[],re=[];for(let He of k)W[He.id]=re.length<<1,re.push(Ne=>He.slot(Ne));let fe=b==null?void 0:b.config.facets;for(let He in E){let Ne=E[He],yt=Ne[0].facet,Gi=fe&&fe[He]||[];if(Ne.every(Pn=>Pn.type==0))if(W[yt.id]=Z.length<<1|1,ci(Gi,Ne))Z.push(b.facet(yt));else{let Pn=yt.combine(Ne.map(ji=>ji.value));Z.push(b&&yt.compare(Pn,b.facet(yt))?b.facet(yt):Pn)}else{for(let Pn of Ne)Pn.type==0?(W[Pn.id]=Z.length<<1|1,Z.push(Pn.value)):(W[Pn.id]=re.length<<1,re.push(ji=>Pn.dynamicSlot(ji)));W[yt.id]=re.length<<1,re.push(Pn=>Ci(Pn,yt,Ne))}}let we=re.map(He=>He(W));return new Le(p,D,we,W,Z,E)}}function zo(_,p,v){let b=[[],[],[],[],[]],k=new Map;function E(D,W){let Z=k.get(D);if(Z!=null){if(Z<=W)return;let re=b[Z].indexOf(D);re>-1&&b[Z].splice(re,1),D instanceof jn&&v.delete(D.compartment)}if(k.set(D,W),Array.isArray(D))for(let re of D)E(re,W);else if(D instanceof jn){if(v.has(D.compartment))throw new RangeError("Duplicate use of compartment in extensions");let re=p.get(D.compartment)||D.inner;v.set(D.compartment,re),E(re,W)}else if(D instanceof sr)E(D.inner,D.prec);else if(D instanceof ni)b[W].push(D),D.provides&&E(D.provides,W);else if(D instanceof ys)b[W].push(D),D.facet.extensions&&E(D.facet.extensions,Gn.default);else{let re=D.extension;if(!re)throw new Error(`Unrecognized extension value in extension set (${D}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);E(re,W)}}return E(_,Gn.default),b.reduce((D,W)=>D.concat(W))}function mn(_,p){if(p&1)return 2;let v=p>>1,b=_.status[v];if(b==4)throw new Error("Cyclic dependency between fields and/or facets");if(b&2)return b;_.status[v]=4;let k=_.computeSlot(_,_.config.dynamicSlots[v]);return _.status[v]=2|k}function di(_,p){return p&1?_.config.staticValues[p>>1]:_.values[p>>1]}const pi=jt.define(),gi=jt.define({combine:_=>_.some(p=>p),static:!0}),Zn=jt.define({combine:_=>_.length?_[0]:void 0,static:!0}),vr=jt.define(),Br=jt.define(),Ir=jt.define(),yr=jt.define({combine:_=>_.length?_[0]:!1});class Fi{constructor(p,v){this.type=p,this.value=v}static define(){return new xr}}class xr{of(p){return new Fi(this,p)}}class _r{constructor(p){this.map=p}of(p){return new In(this,p)}}class In{constructor(p,v){this.type=p,this.value=v}map(p){let v=this.type.map(this.value,p);return v===void 0?void 0:v==this.value?this:new In(this.type,v)}is(p){return this.type==p}static define(p={}){return new _r(p.map||(v=>v))}static mapEffects(p,v){if(!p.length)return p;let b=[];for(let k of p){let E=k.map(v);E&&b.push(E)}return b}}In.reconfigure=In.define(),In.appendConfig=In.define();class On{constructor(p,v,b,k,E,D){this.startState=p,this.changes=v,this.selection=b,this.effects=k,this.annotations=E,this.scrollIntoView=D,this._doc=null,this._state=null,b&&Gt(b,v.newLength),E.some(W=>W.type==On.time)||(this.annotations=E.concat(On.time.of(Date.now())))}static create(p,v,b,k,E,D){return new On(p,v,b,k,E,D)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(p){for(let v of this.annotations)if(v.type==p)return v.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(p){let v=this.annotation(On.userEvent);return!!(v&&(v==p||v.length>p.length&&v.slice(0,p.length)==p&&v[p.length]=="."))}}On.time=Fi.define(),On.userEvent=Fi.define(),On.addToHistory=Fi.define(),On.remote=Fi.define();function Jr(_,p){let v=[];for(let b=0,k=0;;){let E,D;if(b<_.length&&(k==p.length||p[k]>=_[b]))E=_[b++],D=_[b++];else if(k<p.length)E=p[k++],D=p[k++];else return v;!v.length||v[v.length-1]<E?v.push(E,D):v[v.length-1]<D&&(v[v.length-1]=D)}}function ke(_,p,v){var b;let k,E,D;return v?(k=p.changes,E=Ln.empty(p.changes.length),D=_.changes.compose(p.changes)):(k=p.changes.map(_.changes),E=_.changes.mapDesc(p.changes,!0),D=_.changes.compose(k)),{changes:D,selection:p.selection?p.selection.map(E):(b=_.selection)===null||b===void 0?void 0:b.map(k),effects:In.mapEffects(_.effects,k).concat(In.mapEffects(p.effects,E)),annotations:_.annotations.length?_.annotations.concat(p.annotations):p.annotations,scrollIntoView:_.scrollIntoView||p.scrollIntoView}}function ii(_,p,v){let b=p.selection,k=Xn(p.annotations);return p.userEvent&&(k=k.concat(On.userEvent.of(p.userEvent))),{changes:p.changes instanceof Ln?p.changes:Ln.of(p.changes||[],v,_.facet(Zn)),selection:b&&(b instanceof wt?b:wt.single(b.anchor,b.head)),effects:Xn(p.effects),annotations:k,scrollIntoView:!!p.scrollIntoView}}function pt(_,p,v){let b=ii(_,p.length?p[0]:{},_.doc.length);p.length&&p[0].filter===!1&&(v=!1);for(let E=1;E<p.length;E++){p[E].filter===!1&&(v=!1);let D=!!p[E].sequential;b=ke(b,ii(_,p[E],D?b.changes.newLength:_.doc.length),D)}let k=On.create(_,b.changes,b.selection,b.effects,b.annotations,b.scrollIntoView);return Nr(v?Zt(k):k)}function Zt(_){let p=_.startState,v=!0;for(let k of p.facet(vr)){let E=k(_);if(E===!1){v=!1;break}Array.isArray(E)&&(v=v===!0?E:Jr(v,E))}if(v!==!0){let k,E;if(v===!1)E=_.changes.invertedDesc,k=Ln.empty(p.doc.length);else{let D=_.changes.filter(v);k=D.changes,E=D.filtered.mapDesc(D.changes).invertedDesc}_=On.create(p,k,_.selection&&_.selection.map(E),In.mapEffects(_.effects,E),_.annotations,_.scrollIntoView)}let b=p.facet(Br);for(let k=b.length-1;k>=0;k--){let E=b[k](_);E instanceof On?_=E:Array.isArray(E)&&E.length==1&&E[0]instanceof On?_=E[0]:_=pt(p,Xn(E),!1)}return _}function Nr(_){let p=_.startState,v=p.facet(Ir),b=_;for(let k=v.length-1;k>=0;k--){let E=v[k](_);E&&Object.keys(E).length&&(b=ke(b,ii(p,E,_.changes.newLength),!0))}return b==_?_:On.create(p,_.changes,_.selection,b.effects,b.annotations,b.scrollIntoView)}const mi=[];function Xn(_){return _==null?mi:Array.isArray(_)?_:[_]}var Rn=function(_){return _[_.Word=0]="Word",_[_.Space=1]="Space",_[_.Other=2]="Other",_}(Rn||(Rn={}));const Wi=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ri;try{Ri=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(_){}function cn(_){if(Ri)return Ri.test(_);for(let p=0;p<_.length;p++){let v=_[p];if(/\w/.test(v)||v>"\x80"&&(v.toUpperCase()!=v.toLowerCase()||Wi.test(v)))return!0}return!1}function Kn(_){return p=>{if(!/\S/.test(p))return Rn.Space;if(cn(p))return Rn.Word;for(let v=0;v<_.length;v++)if(p.indexOf(_[v])>-1)return Rn.Word;return Rn.Other}}class on{constructor(p,v,b,k,E,D){this.config=p,this.doc=v,this.selection=b,this.values=k,this.status=p.statusTemplate.slice(),this.computeSlot=E,D&&(D._state=this);for(let W=0;W<this.config.dynamicSlots.length;W++)mn(this,W<<1);this.computeSlot=null}field(p,v=!0){let b=this.config.address[p.id];if(b==null){if(v)throw new RangeError("Field is not present in this state");return}return mn(this,b),di(this,b)}update(...p){return pt(this,p,!0)}applyTransaction(p){let v=this.config,{base:b,compartments:k}=v;for(let D of p.effects)D.is(Pr.reconfigure)?(v&&(k=new Map,v.compartments.forEach((W,Z)=>k.set(Z,W)),v=null),k.set(D.value.compartment,D.value.extension)):D.is(In.reconfigure)?(v=null,b=D.value):D.is(In.appendConfig)&&(v=null,b=Xn(b).concat(D.value));let E;v?E=p.startState.values.slice():(v=Le.resolve(b,k,this),E=new on(v,this.doc,this.selection,v.dynamicSlots.map(()=>null),(W,Z)=>Z.reconfigure(W,this),null).values),new on(v,p.newDoc,p.newSelection,E,(D,W)=>W.update(D,p),p)}replaceSelection(p){return typeof p=="string"&&(p=this.toText(p)),this.changeByRange(v=>({changes:{from:v.from,to:v.to,insert:p},range:wt.cursor(v.from+p.length)}))}changeByRange(p){let v=this.selection,b=p(v.ranges[0]),k=this.changes(b.changes),E=[b.range],D=Xn(b.effects);for(let W=1;W<v.ranges.length;W++){let Z=p(v.ranges[W]),re=this.changes(Z.changes),fe=re.map(k);for(let He=0;He<W;He++)E[He]=E[He].map(fe);let we=k.mapDesc(re,!0);E.push(Z.range.map(we)),k=k.compose(fe),D=In.mapEffects(D,fe).concat(In.mapEffects(Xn(Z.effects),we))}return{changes:k,selection:wt.create(E,v.mainIndex),effects:D}}changes(p=[]){return p instanceof Ln?p:Ln.of(p,this.doc.length,this.facet(on.lineSeparator))}toText(p){return q.of(p.split(this.facet(on.lineSeparator)||zt))}sliceDoc(p=0,v=this.doc.length){return this.doc.sliceString(p,v,this.lineBreak)}facet(p){let v=this.config.address[p.id];return v==null?p.default:(mn(this,v),di(this,v))}toJSON(p){let v={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(p)for(let b in p){let k=p[b];k instanceof ni&&this.config.address[k.id]!=null&&(v[b]=k.spec.toJSON(this.field(p[b]),this))}return v}static fromJSON(p,v={},b){if(!p||typeof p.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let k=[];if(b){for(let E in b)if(Object.prototype.hasOwnProperty.call(p,E)){let D=b[E],W=p[E];k.push(D.init(Z=>D.spec.fromJSON(W,Z)))}}return on.create({doc:p.doc,selection:wt.fromJSON(p.selection),extensions:v.extensions?k.concat([v.extensions]):k})}static create(p={}){let v=Le.resolve(p.extensions||[],new Map),b=p.doc instanceof q?p.doc:q.of((p.doc||"").split(v.staticFacet(on.lineSeparator)||zt)),k=p.selection?p.selection instanceof wt?p.selection:wt.single(p.selection.anchor,p.selection.head):wt.single(0);return Gt(k,b.length),v.staticFacet(gi)||(k=k.asSingle()),new on(v,b,k,v.dynamicSlots.map(()=>null),(E,D)=>D.create(E),null)}get tabSize(){return this.facet(on.tabSize)}get lineBreak(){return this.facet(on.lineSeparator)||`
`}get readOnly(){return this.facet(yr)}phrase(p,...v){for(let b of this.facet(on.phrases))if(Object.prototype.hasOwnProperty.call(b,p)){p=b[p];break}return v.length&&(p=p.replace(/\$(\$|\d*)/g,(b,k)=>{if(k=="$")return"$";let E=+(k||1);return!E||E>v.length?b:v[E-1]})),p}languageDataAt(p,v,b=-1){let k=[];for(let E of this.facet(pi))for(let D of E(this,v,b))Object.prototype.hasOwnProperty.call(D,p)&&k.push(D[p]);return k}charCategorizer(p){return Kn(this.languageDataAt("wordChars",p).join(""))}wordAt(p){let{text:v,from:b,length:k}=this.doc.lineAt(p),E=this.charCategorizer(p),D=p-b,W=p-b;for(;D>0;){let Z=Qt(v,D,!1);if(E(v.slice(Z,D))!=Rn.Word)break;D=Z}for(;W<k;){let Z=Qt(v,W);if(E(v.slice(W,Z))!=Rn.Word)break;W=Z}return D==W?null:wt.range(D+b,W+b)}}on.allowMultipleSelections=gi,on.tabSize=jt.define({combine:_=>_.length?_[0]:4}),on.lineSeparator=Zn,on.readOnly=yr,on.phrases=jt.define({compare(_,p){let v=Object.keys(_),b=Object.keys(p);return v.length==b.length&&v.every(k=>_[k]==p[k])}}),on.languageData=pi,on.changeFilter=vr,on.transactionFilter=Br,on.transactionExtender=Ir,Pr.reconfigure=In.define();function or(_,p,v={}){let b={};for(let k of _)for(let E of Object.keys(k)){let D=k[E],W=b[E];if(W===void 0)b[E]=D;else if(!(W===D||D===void 0))if(Object.hasOwnProperty.call(v,E))b[E]=v[E](W,D);else throw new Error("Config merge conflict for field "+E)}for(let k in p)b[k]===void 0&&(b[k]=p[k]);return b}class lr{eq(p){return this==p}range(p,v=p){return se.create(p,v,this)}}lr.prototype.startSide=lr.prototype.endSide=0,lr.prototype.point=!1,lr.prototype.mapMode=$n.TrackDel;class se{constructor(p,v,b){this.from=p,this.to=v,this.value=b}static create(p,v,b){return new se(p,v,b)}}function qs(_,p){return _.from-p.from||_.value.startSide-p.value.startSide}class Yr{constructor(p,v,b,k){this.from=p,this.to=v,this.value=b,this.maxPoint=k}get length(){return this.to[this.to.length-1]}findIndex(p,v,b,k=0){let E=b?this.to:this.from;for(let D=k,W=E.length;;){if(D==W)return D;let Z=D+W>>1,re=E[Z]-p||(b?this.value[Z].endSide:this.value[Z].startSide)-v;if(Z==D)return re>=0?D:W;re>=0?W=Z:D=Z+1}}between(p,v,b,k){for(let E=this.findIndex(v,-1e9,!0),D=this.findIndex(b,1e9,!1,E);E<D;E++)if(k(this.from[E]+p,this.to[E]+p,this.value[E])===!1)return!1}map(p,v){let b=[],k=[],E=[],D=-1,W=-1;for(let Z=0;Z<this.value.length;Z++){let re=this.value[Z],fe=this.from[Z]+p,we=this.to[Z]+p,He,Ne;if(fe==we){let yt=v.mapPos(fe,re.startSide,re.mapMode);if(yt==null||(He=Ne=yt,re.startSide!=re.endSide&&(Ne=v.mapPos(fe,re.endSide),Ne<He)))continue}else if(He=v.mapPos(fe,re.startSide),Ne=v.mapPos(we,re.endSide),He>Ne||He==Ne&&re.startSide>0&&re.endSide<=0)continue;(Ne-He||re.endSide-re.startSide)<0||(D<0&&(D=He),re.point&&(W=Math.max(W,Ne-He)),b.push(re),k.push(He-D),E.push(Ne-D))}return{mapped:b.length?new Yr(k,E,b,W):null,pos:D}}}class Jn{constructor(p,v,b,k){this.chunkPos=p,this.chunk=v,this.nextLayer=b,this.maxPoint=k}static create(p,v,b,k){return new Jn(p,v,b,k)}get length(){let p=this.chunk.length-1;return p<0?0:Math.max(this.chunkEnd(p),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let p=this.nextLayer.size;for(let v of this.chunk)p+=v.value.length;return p}chunkEnd(p){return this.chunkPos[p]+this.chunk[p].length}update(p){let{add:v=[],sort:b=!1,filterFrom:k=0,filterTo:E=this.length}=p,D=p.filter;if(v.length==0&&!D)return this;if(b&&(v=v.slice().sort(qs)),this.isEmpty)return v.length?Jn.of(v):this;let W=new vi(this,null,-1).goto(0),Z=0,re=[],fe=new Fr;for(;W.value||Z<v.length;)if(Z<v.length&&(W.from-v[Z].from||W.startSide-v[Z].value.startSide)>=0){let we=v[Z++];fe.addInner(we.from,we.to,we.value)||re.push(we)}else W.rangeIndex==1&&W.chunkIndex<this.chunk.length&&(Z==v.length||this.chunkEnd(W.chunkIndex)<v[Z].from)&&(!D||k>this.chunkEnd(W.chunkIndex)||E<this.chunkPos[W.chunkIndex])&&fe.addChunk(this.chunkPos[W.chunkIndex],this.chunk[W.chunkIndex])?W.nextChunk():((!D||k>W.to||E<W.from||D(W.from,W.to,W.value))&&(fe.addInner(W.from,W.to,W.value)||re.push(se.create(W.from,W.to,W.value))),W.next());return fe.finishInner(this.nextLayer.isEmpty&&!re.length?Jn.empty:this.nextLayer.update({add:re,filter:D,filterFrom:k,filterTo:E}))}map(p){if(p.empty||this.isEmpty)return this;let v=[],b=[],k=-1;for(let D=0;D<this.chunk.length;D++){let W=this.chunkPos[D],Z=this.chunk[D],re=p.touchesRange(W,W+Z.length);if(re===!1)k=Math.max(k,Z.maxPoint),v.push(Z),b.push(p.mapPos(W));else if(re===!0){let{mapped:fe,pos:we}=Z.map(W,p);fe&&(k=Math.max(k,fe.maxPoint),v.push(fe),b.push(we))}}let E=this.nextLayer.map(p);return v.length==0?E:new Jn(b,v,E||Jn.empty,k)}between(p,v,b){if(!this.isEmpty){for(let k=0;k<this.chunk.length;k++){let E=this.chunkPos[k],D=this.chunk[k];if(v>=E&&p<=E+D.length&&D.between(E,p-E,v-E,b)===!1)return}this.nextLayer.between(p,v,b)}}iter(p=0){return wr.from([this]).goto(p)}get isEmpty(){return this.nextLayer==this}static iter(p,v=0){return wr.from(p).goto(v)}static compare(p,v,b,k,E=-1){let D=p.filter(we=>we.maxPoint>0||!we.isEmpty&&we.maxPoint>=E),W=v.filter(we=>we.maxPoint>0||!we.isEmpty&&we.maxPoint>=E),Z=xs(D,W,b),re=new kn(D,Z,E),fe=new kn(W,Z,E);b.iterGaps((we,He,Ne)=>qi(re,we,fe,He,Ne,k)),b.empty&&b.length==0&&qi(re,0,fe,0,0,k)}static eq(p,v,b=0,k){k==null&&(k=1e9-1);let E=p.filter(fe=>!fe.isEmpty&&v.indexOf(fe)<0),D=v.filter(fe=>!fe.isEmpty&&p.indexOf(fe)<0);if(E.length!=D.length)return!1;if(!E.length)return!0;let W=xs(E,D),Z=new kn(E,W,0).goto(b),re=new kn(D,W,0).goto(b);for(;;){if(Z.to!=re.to||!ws(Z.active,re.active)||Z.point&&(!re.point||!Z.point.eq(re.point)))return!1;if(Z.to>k)return!0;Z.next(),re.next()}}static spans(p,v,b,k,E=-1){let D=new kn(p,null,E).goto(v),W=v,Z=D.openStart;for(;;){let re=Math.min(D.to,b);if(D.point){let fe=D.activeForPoint(D.to),we=D.pointFrom<v?fe.length+1:Math.min(fe.length,Z);k.point(W,re,D.point,fe,we,D.pointRank),Z=Math.min(D.openEnd(re),fe.length)}else re>W&&(k.span(W,re,D.active,Z),Z=D.openEnd(re));if(D.to>b)return Z+(D.point&&D.to>b?1:0);W=D.to,D.next()}}static of(p,v=!1){let b=new Fr;for(let k of p instanceof se?[p]:v?Ei(p):p)b.add(k.from,k.to,k.value);return b.finish()}}Jn.empty=new Jn([],[],null,-1);function Ei(_){if(_.length>1)for(let p=_[0],v=1;v<_.length;v++){let b=_[v];if(qs(p,b)>0)return _.slice().sort(qs);p=b}return _}Jn.empty.nextLayer=Jn.empty;class Fr{finishChunk(p){this.chunks.push(new Yr(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,p&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(p,v,b){this.addInner(p,v,b)||(this.nextLayer||(this.nextLayer=new Fr)).add(p,v,b)}addInner(p,v,b){let k=p-this.lastTo||b.startSide-this.last.endSide;if(k<=0&&(p-this.lastFrom||b.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return k<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=p),this.from.push(p-this.chunkStart),this.to.push(v-this.chunkStart),this.last=b,this.lastFrom=p,this.lastTo=v,this.value.push(b),b.point&&(this.maxPoint=Math.max(this.maxPoint,v-p)),!0)}addChunk(p,v){if((p-this.lastTo||v.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,v.maxPoint),this.chunks.push(v),this.chunkPos.push(p);let b=v.value.length-1;return this.last=v.value[b],this.lastFrom=v.from[b]+p,this.lastTo=v.to[b]+p,!0}finish(){return this.finishInner(Jn.empty)}finishInner(p){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return p;let v=Jn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(p):p,this.setMaxPoint);return this.from=null,v}}function xs(_,p,v){let b=new Map;for(let E of _)for(let D=0;D<E.chunk.length;D++)E.chunk[D].maxPoint<=0&&b.set(E.chunk[D],E.chunkPos[D]);let k=new Set;for(let E of p)for(let D=0;D<E.chunk.length;D++){let W=b.get(E.chunk[D]);W!=null&&(v?v.mapPos(W):W)==E.chunkPos[D]&&!(v!=null&&v.touchesRange(W,W+E.chunk[D].length))&&k.add(E.chunk[D])}return k}class vi{constructor(p,v,b,k=0){this.layer=p,this.skip=v,this.minPoint=b,this.rank=k}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(p,v=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(p,v,!1),this}gotoInner(p,v,b){for(;this.chunkIndex<this.layer.chunk.length;){let k=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(k)||this.layer.chunkEnd(this.chunkIndex)<p||k.maxPoint<this.minPoint))break;this.chunkIndex++,b=!1}if(this.chunkIndex<this.layer.chunk.length){let k=this.layer.chunk[this.chunkIndex].findIndex(p-this.layer.chunkPos[this.chunkIndex],v,!0);(!b||this.rangeIndex<k)&&this.setRangeIndex(k)}this.next()}forward(p,v){(this.to-p||this.endSide-v)<0&&this.gotoInner(p,v,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let p=this.layer.chunkPos[this.chunkIndex],v=this.layer.chunk[this.chunkIndex],b=p+v.from[this.rangeIndex];if(this.from=b,this.to=p+v.to[this.rangeIndex],this.value=v.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(p){if(p==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=p}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(p){return this.from-p.from||this.startSide-p.startSide||this.rank-p.rank||this.to-p.to||this.endSide-p.endSide}}class wr{constructor(p){this.heap=p}static from(p,v=null,b=-1){let k=[];for(let E=0;E<p.length;E++)for(let D=p[E];!D.isEmpty;D=D.nextLayer)D.maxPoint>=b&&k.push(new vi(D,v,b,E));return k.length==1?k[0]:new wr(k)}get startSide(){return this.value?this.value.startSide:0}goto(p,v=-1e9){for(let b of this.heap)b.goto(p,v);for(let b=this.heap.length>>1;b>=0;b--)Ui(this.heap,b);return this.next(),this}forward(p,v){for(let b of this.heap)b.forward(p,v);for(let b=this.heap.length>>1;b>=0;b--)Ui(this.heap,b);(this.to-p||this.value.endSide-v)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let p=this.heap[0];this.from=p.from,this.to=p.to,this.value=p.value,this.rank=p.rank,p.value&&p.next(),Ui(this.heap,0)}}}function Ui(_,p){for(let v=_[p];;){let b=(p<<1)+1;if(b>=_.length)break;let k=_[b];if(b+1<_.length&&k.compare(_[b+1])>=0&&(k=_[b+1],b++),v.compare(k)<0)break;_[b]=v,_[p]=k,p=b}}class kn{constructor(p,v,b){this.minPoint=b,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=wr.from(p,v,b)}goto(p,v=-1e9){return this.cursor.goto(p,v),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=p,this.endSide=v,this.openStart=-1,this.next(),this}forward(p,v){for(;this.minActive>-1&&(this.activeTo[this.minActive]-p||this.active[this.minActive].endSide-v)<0;)this.removeActive(this.minActive);this.cursor.forward(p,v)}removeActive(p){Gs(this.active,p),Gs(this.activeTo,p),Gs(this.activeRank,p),this.minActive=_n(this.active,this.activeTo)}addActive(p){let v=0,{value:b,to:k,rank:E}=this.cursor;for(;v<this.activeRank.length&&this.activeRank[v]<=E;)v++;Wr(this.active,v,b),Wr(this.activeTo,v,k),Wr(this.activeRank,v,E),p&&Wr(p,v,this.cursor.from),this.minActive=_n(this.active,this.activeTo)}next(){let p=this.to,v=this.point;this.point=null;let b=this.openStart<0?[]:null;for(;;){let k=this.minActive;if(k>-1&&(this.activeTo[k]-this.cursor.from||this.active[k].endSide-this.cursor.startSide)<0){if(this.activeTo[k]>p){this.to=this.activeTo[k],this.endSide=this.active[k].endSide;break}this.removeActive(k),b&&Gs(b,k)}else if(this.cursor.value)if(this.cursor.from>p){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let E=this.cursor.value;if(!E.point)this.addActive(b),this.cursor.next();else if(v&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=E,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=E.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(b){this.openStart=0;for(let k=b.length-1;k>=0&&b[k]<p;k--)this.openStart++}}activeForPoint(p){if(!this.active.length)return this.active;let v=[];for(let b=this.active.length-1;b>=0&&!(this.activeRank[b]<this.pointRank);b--)(this.activeTo[b]>p||this.activeTo[b]==p&&this.active[b].endSide>=this.point.endSide)&&v.push(this.active[b]);return v.reverse()}openEnd(p){let v=0;for(let b=this.activeTo.length-1;b>=0&&this.activeTo[b]>p;b--)v++;return v}}function qi(_,p,v,b,k,E){_.goto(p),v.goto(b);let D=b+k,W=b,Z=b-p;for(;;){let re=_.to+Z-v.to||_.endSide-v.endSide,fe=re<0?_.to+Z:v.to,we=Math.min(fe,D);if(_.point||v.point?_.point&&v.point&&(_.point==v.point||_.point.eq(v.point))&&ws(_.activeForPoint(_.to),v.activeForPoint(v.to))||E.comparePoint(W,we,_.point,v.point):we>W&&!ws(_.active,v.active)&&E.compareRange(W,we,_.active,v.active),fe>D)break;W=fe,re<=0&&_.next(),re>=0&&v.next()}}function ws(_,p){if(_.length!=p.length)return!1;for(let v=0;v<_.length;v++)if(_[v]!=p[v]&&!_[v].eq(p[v]))return!1;return!0}function Gs(_,p){for(let v=p,b=_.length-1;v<b;v++)_[v]=_[v+1];_.pop()}function Wr(_,p,v){for(let b=_.length-1;b>=p;b--)_[b+1]=_[b];_[p]=v}function _n(_,p){let v=-1,b=1e9;for(let k=0;k<p.length;k++)(p[k]-b||_[k].endSide-_[v].endSide)<0&&(v=k,b=p[k]);return v}function Hr(_,p,v=_.length){let b=0;for(let k=0;k<v;)_.charCodeAt(k)==9?(b+=p-b%p,k++):(b++,k=Qt(_,k));return b}function zr(_,p,v,b){for(let k=0,E=0;;){if(E>=p)return k;if(k==_.length)break;E+=_.charCodeAt(k)==9?v-E%v:1,k=Qt(_,k)}return b===!0?-1:_.length}},15543:function(Ze,hn,Pe){"use strict";Pe.d(hn,{p:function(){return Zt},Nm:function(){return W},tk:function(){return V},SJ:function(){return os},Y1:function(){return Oo},lg:function(){return _n},l9:function(){return ii},S2:function(){return ur},Uw:function(){return rs},qr:function(){return so},Sd:function(){return Po},gB:function(){return Ba},v5:function(){return ff},ZO:function(){return Bl},HQ:function(){return Io},AE:function(){return Kr},bF:function(){return ss},$f:function(){return Bi},Eu:function(){return ll},OO:function(){return qi},W$:function(){return Ea},Zs:function(){return O},$1:function(){return Mo},mH:function(){return Hl},hJ:function(){return Fl}});for(var q=Pe(87708),N=Pe(54964),Oe={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ee=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),fn=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ot=0;Ot<10;Ot++)Oe[48+Ot]=Oe[96+Ot]=String(Ot);for(var Ot=1;Ot<=24;Ot++)Oe[Ot+111]="F"+Ot;for(var Ot=65;Ot<=90;Ot++)Oe[Ot]=String.fromCharCode(Ot+32),A[Ot]=String.fromCharCode(Ot);for(var un in Oe)A.hasOwnProperty(un)||(A[un]=Oe[un]);function Be(f){var t=ee&&f.metaKey&&f.shiftKey&&!f.ctrlKey&&!f.altKey||fn&&f.shiftKey&&f.key&&f.key.length==1||f.key=="Unidentified",r=!t&&f.key||(f.shiftKey?A:Oe)[f.keyCode]||f.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function ct(f){let t;return f.nodeType==11?t=f.getSelection?f:f.ownerDocument:t=f,t.getSelection()}function It(f,t){return t?f==t||f.contains(t.nodeType!=1?t.parentNode:t):!1}function Wt(f){let t=f.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Dt(f,t){if(!t.anchorNode)return!1;try{return It(f,t.anchorNode)}catch(r){return!1}}function je(f){return f.nodeType==3?ui(f,0,f.nodeValue.length).getClientRects():f.nodeType==1?f.getClientRects():[]}function Qt(f,t,r,h){return r?We(f,t,r,h,-1)||We(f,t,r,h,1):!1}function me(f){for(var t=0;;t++)if(f=f.previousSibling,!f)return t}function We(f,t,r,h,u){for(;;){if(f==r&&t==h)return!0;if(t==(u<0?0:kt(f))){if(f.nodeName=="DIV")return!1;let g=f.parentNode;if(!g||g.nodeType!=1)return!1;t=me(f)+(u<0?0:1),f=g}else if(f.nodeType==1){if(f=f.childNodes[t+(u<0?-1:0)],f.nodeType==1&&f.contentEditable=="false")return!1;t=u<0?kt(f):0}else return!1}}function kt(f){return f.nodeType==3?f.nodeValue.length:f.childNodes.length}const gn={left:0,right:0,top:0,bottom:0};function Ht(f,t){let r=t?f.left:f.right;return{left:r,right:r,top:f.top,bottom:f.bottom}}function Cn(f){return{left:0,right:f.innerWidth,top:0,bottom:f.innerHeight}}function Vn(f,t,r,h,u,g,y,S){let M=f.ownerDocument,R=M.defaultView||window;for(let L=f;L;)if(L.nodeType==1){let z,Y=L==M.body;if(Y)z=Cn(R);else{if(L.scrollHeight<=L.clientHeight&&L.scrollWidth<=L.clientWidth){L=L.assignedSlot||L.parentNode;continue}let be=L.getBoundingClientRect();z={left:be.left,right:be.left+L.clientWidth,top:be.top,bottom:be.top+L.clientHeight}}let te=0,ce=0;if(u=="nearest")t.top<z.top?(ce=-(z.top-t.top+y),r>0&&t.bottom>z.bottom+ce&&(ce=t.bottom-z.bottom+ce+y)):t.bottom>z.bottom&&(ce=t.bottom-z.bottom+y,r<0&&t.top-ce<z.top&&(ce=-(z.top+ce-t.top+y)));else{let be=t.bottom-t.top,ve=z.bottom-z.top;ce=(u=="center"&&be<=ve?t.top+be/2-ve/2:u=="start"||u=="center"&&r<0?t.top-y:t.bottom-ve+y)-z.top}if(h=="nearest"?t.left<z.left?(te=-(z.left-t.left+g),r>0&&t.right>z.right+te&&(te=t.right-z.right+te+g)):t.right>z.right&&(te=t.right-z.right+g,r<0&&t.left<z.left+te&&(te=-(z.left+te-t.left+g))):te=(h=="center"?t.left+(t.right-t.left)/2-(z.right-z.left)/2:h=="start"==S?t.left-g:t.right-(z.right-z.left)+g)-z.left,te||ce)if(Y)R.scrollBy(te,ce);else{let be=0,ve=0;if(ce){let Re=L.scrollTop;L.scrollTop+=ce,ve=L.scrollTop-Re}if(te){let Re=L.scrollLeft;L.scrollLeft+=te,be=L.scrollLeft-Re}t={left:t.left-be,top:t.top-ve,right:t.right-be,bottom:t.bottom-ve},be&&Math.abs(be-te)<1&&(h="nearest"),ve&&Math.abs(ve-ce)<1&&(u="nearest")}if(Y)break;L=L.assignedSlot||L.parentNode}else if(L.nodeType==11)L=L.host;else break}function zt(f){let t=f.ownerDocument;for(let r=f.parentNode;r&&r!=t.body;)if(r.nodeType==1){if(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)return r;r=r.assignedSlot||r.parentNode}else if(r.nodeType==11)r=r.host;else break;return null}class $n{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,r,h,u){this.anchorNode=t,this.anchorOffset=r,this.focusNode=h,this.focusOffset=u}}let Dn=null;function Ln(f){if(f.setActive)return f.setActive();if(Dn)return f.focus(Dn);let t=[];for(let r=f;r&&(t.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(f.focus(Dn==null?{get preventScroll(){return Dn={preventScroll:!0},!0}}:void 0),!Dn){Dn=!1;for(let r=0;r<t.length;){let h=t[r++],u=t[r++],g=t[r++];h.scrollTop!=u&&(h.scrollTop=u),h.scrollLeft!=g&&(h.scrollLeft=g)}}}let sn;function ui(f,t,r=t){let h=sn||(sn=document.createRange());return h.setEnd(f,r),h.setStart(f,t),h}function Ni(f,t,r){let h={key:t,code:t,keyCode:r,which:r,cancelable:!0},u=new KeyboardEvent("keydown",h);u.synthetic=!0,f.dispatchEvent(u);let g=new KeyboardEvent("keyup",h);return g.synthetic=!0,f.dispatchEvent(g),u.defaultPrevented||g.defaultPrevented}function jr(f){for(;f;){if(f&&(f.nodeType==9||f.nodeType==11&&f.host))return f;f=f.assignedSlot||f.parentNode}return null}function Xr(f){for(;f.attributes.length;)f.removeAttributeNode(f.attributes[0])}function Or(f,t){let r=t.focusNode,h=t.focusOffset;if(!r||t.anchorNode!=r||t.anchorOffset!=h)return!1;for(;;)if(h){if(r.nodeType!=1)return!1;let u=r.childNodes[h-1];u.contentEditable=="false"?h--:(r=u,h=kt(r))}else{if(r==f)return!0;h=me(r),r=r.parentNode}}class en{constructor(t,r,h=!0){this.node=t,this.offset=r,this.precise=h}static before(t,r){return new en(t.parentNode,me(t),r)}static after(t,r){return new en(t.parentNode,me(t)+1,r)}}const wt=[];class Gt{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let r=this.posAtStart;for(let h of this.children){if(h==t)return r;r+=h.length+h.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,r){return null}sync(t,r){if(this.dirty&2){let h=this.dom,u=null,g;for(let y of this.children){if(y.dirty){if(!y.dom&&(g=u?u.nextSibling:h.firstChild)){let S=Gt.get(g);(!S||!S.parent&&S.canReuseDOM(y))&&y.reuseDOM(g)}y.sync(t,r),y.dirty=0}if(g=u?u.nextSibling:h.firstChild,r&&!r.written&&r.node==h&&g!=y.dom&&(r.written=!0),y.dom.parentNode==h)for(;g&&g!=y.dom;)g=ir(g);else h.insertBefore(y.dom,g);u=y.dom}for(g=u?u.nextSibling:h.firstChild,g&&r&&r.node==h&&(r.written=!0);g;)g=ir(g)}else if(this.dirty&1)for(let h of this.children)h.dirty&&(h.sync(t,r),h.dirty=0)}reuseDOM(t){}localPosFromDOM(t,r){let h;if(t==this.dom)h=this.dom.childNodes[r];else{let u=kt(t)==0?0:r==0?-1:1;for(;;){let g=t.parentNode;if(g==this.dom)break;u==0&&g.firstChild!=g.lastChild&&(t==g.firstChild?u=-1:u=1),t=g}u<0?h=t:h=t.nextSibling}if(h==this.dom.firstChild)return 0;for(;h&&!Gt.get(h);)h=h.nextSibling;if(!h)return this.length;for(let u=0,g=0;;u++){let y=this.children[u];if(y.dom==h)return g;g+=y.length+y.breakAfter}}domBoundsAround(t,r,h=0){let u=-1,g=-1,y=-1,S=-1;for(let M=0,R=h,L=h;M<this.children.length;M++){let z=this.children[M],Y=R+z.length;if(R<t&&Y>r)return z.domBoundsAround(t,r,R);if(Y>=t&&u==-1&&(u=M,g=R),R>r&&z.dom.parentNode==this.dom){y=M,S=L;break}L=Y,R=Y+z.breakAfter}return{from:g,to:S<0?h+this.length:S,startDOM:(u?this.children[u-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:y<this.children.length&&y>=0?this.children[y].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let r=this.parent;r;r=r.parent){if(t&&(r.dirty|=2),r.dirty&1)return;r.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let r=t.parent;if(!r)return t;t=r}}replaceChildren(t,r,h=wt){this.markDirty();for(let u=t;u<r;u++){let g=this.children[u];g.parent==this&&g.destroy()}this.children.splice(t,r-t,...h);for(let u=0;u<h.length;u++)h[u].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new jt(this.children,t,this.children.length)}childPos(t,r=1){return this.childCursor().findPos(t,r)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(t,r,h,u,g,y){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}Gt.prototype.breakAfter=0;function ir(f){let t=f.nextSibling;return f.parentNode.removeChild(f),t}class jt{constructor(t,r,h){this.children=t,this.pos=r,this.i=h,this.off=0}findPos(t,r=1){for(;;){if(t>this.pos||t==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let h=this.children[--this.i];this.pos-=h.length+h.breakAfter}}}function ci(f,t,r,h,u,g,y,S,M){let{children:R}=f,L=R.length?R[t]:null,z=g.length?g[g.length-1]:null,Y=z?z.breakAfter:y;if(!(t==h&&L&&!y&&!Y&&g.length<2&&L.merge(r,u,g.length?z:null,r==0,S,M))){if(h<R.length){let te=R[h];te&&u<te.length?(t==h&&(te=te.split(u),u=0),!Y&&z&&te.merge(0,u,z,!0,0,M)?g[g.length-1]=te:(u&&te.merge(0,u,null,!1,0,M),g.push(te))):te!=null&&te.breakAfter&&(z?z.breakAfter=1:y=1),h++}for(L&&(L.breakAfter=y,r>0&&(!y&&g.length&&L.merge(r,L.length,g[0],!1,S,0)?L.breakAfter=g.shift().breakAfter:(r<L.length||L.children.length&&L.children[L.children.length-1].length==0)&&L.merge(r,L.length,null,!1,S,0),t++));t<h&&g.length;)if(R[h-1].become(g[g.length-1]))h--,g.pop(),M=g.length?0:S;else if(R[t].become(g[0]))t++,g.shift(),S=g.length?0:M;else break;!g.length&&t&&h<R.length&&!R[t-1].breakAfter&&R[h].merge(0,0,R[t-1],!1,S,M)&&t--,(t<h||g.length)&&f.replaceChildren(t,h,g)}}function ys(f,t,r,h,u,g){let y=f.childCursor(),{i:S,off:M}=y.findPos(r,1),{i:R,off:L}=y.findPos(t,-1),z=t-r;for(let Y of h)z+=Y.length;f.length+=z,ci(f,R,L,S,M,h,0,u,g)}let ti=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},rr=typeof document!="undefined"?document:{documentElement:{style:{}}};const Ci=/Edge\/(\d+)/.exec(ti.userAgent),Us=/MSIE \d/.test(ti.userAgent),ni=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ti.userAgent),Gn=!!(Us||ni||Ci),Dr=!Gn&&/gecko\/(\d+)/i.test(ti.userAgent),Lr=!Gn&&/Chrome\/(\d+)/.exec(ti.userAgent),sr="webkitFontSmoothing"in rr.documentElement.style,Pr=!Gn&&/Apple Computer/.test(ti.vendor),jn=Pr&&(/Mobile\/\w+/.test(ti.userAgent)||ti.maxTouchPoints>2);var Le={mac:jn||/Mac/.test(ti.platform),windows:/Win/.test(ti.platform),linux:/Linux|X11/.test(ti.platform),ie:Gn,ie_version:Us?rr.documentMode||6:ni?+ni[1]:Ci?+Ci[1]:0,gecko:Dr,gecko_version:Dr?+(/Firefox\/(\d+)/.exec(ti.userAgent)||[0,0])[1]:0,chrome:!!Lr,chrome_version:Lr?+Lr[1]:0,ios:jn,android:/Android\b/.test(ti.userAgent),webkit:sr,safari:Pr,webkit_version:sr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:rr.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const zo=256;class mn extends Gt{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,r,h){return h&&(!(h instanceof mn)||this.length-(r-t)+h.length>zo)?!1:(this.text=this.text.slice(0,t)+(h?h.text:"")+this.text.slice(r),this.markDirty(),!0)}split(t){let r=new mn(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),r}localPosFromDOM(t,r){return t==this.dom?r:r?this.text.length:0}domAtPos(t){return new en(this.dom,t)}domBoundsAround(t,r,h){return{from:h,to:h+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,r){return pi(this.dom,t,r)}}class di extends Gt{constructor(t,r=[],h=0){super(),this.mark=t,this.children=r,this.length=h;for(let u of r)u.setParent(this)}setAttrs(t){if(Xr(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)t.setAttribute(r,this.mark.attrs[r]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t,r){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,r)}merge(t,r,h,u,g,y){return h&&(!(h instanceof di&&h.mark.eq(this.mark))||t&&g<=0||r<this.length&&y<=0)?!1:(ys(this,t,r,h?h.children:[],g-1,y-1),this.markDirty(),!0)}split(t){let r=[],h=0,u=-1,g=0;for(let S of this.children){let M=h+S.length;M>t&&r.push(h<t?S.split(t-h):S),u<0&&h>=t&&(u=g),h=M,g++}let y=this.length-t;return this.length=t,u>-1&&(this.children.length=u,this.markDirty()),new di(this.mark,r,y)}domAtPos(t){return Fi(this,t)}coordsAt(t,r){return _r(this,t,r)}}function pi(f,t,r){let h=f.nodeValue.length;t>h&&(t=h);let u=t,g=t,y=0;t==0&&r<0||t==h&&r>=0?Le.chrome||Le.gecko||(t?(u--,y=1):g<h&&(g++,y=-1)):r<0?u--:g<h&&g++;let S=ui(f,u,g).getClientRects();if(!S.length)return gn;let M=S[(y?y<0:r>=0)?0:S.length-1];return Le.safari&&!y&&M.width==0&&(M=Array.prototype.find.call(S,R=>R.width)||M),y?Ht(M,y<0):M||null}class gi extends Gt{constructor(t,r,h){super(),this.widget=t,this.length=r,this.side=h,this.prevWidget=null}static create(t,r,h){return new(t.customView||gi)(t,r,h)}split(t){let r=gi.create(this.widget,this.length-t,this.side);return this.length-=t,r}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,r,h,u,g,y){return h&&(!(h instanceof gi)||!this.widget.compare(h.widget)||t>0&&g<=0||r<this.length&&y<=0)?!1:(this.length=t+(h?h.length:0)+(this.length-r),!0)}become(t){return t.length==this.length&&t instanceof gi&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return q.xv.empty;let t=this;for(;t.parent;)t=t.parent;let{view:r}=t,h=r&&r.state.doc,u=this.posAtStart;return h?h.slice(u,u+this.length):q.xv.empty}domAtPos(t){return t==0?en.before(this.dom):en.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,r){let h=this.dom.getClientRects(),u=null;if(!h.length)return gn;for(let g=t>0?h.length-1:0;u=h[g],!(t>0?g==0:g==h.length-1||u.top<u.bottom);g+=t>0?-1:1);return this.length?u:Ht(u,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Zn extends gi{domAtPos(t){let{topView:r,text:h}=this.widget;return r?vr(t,0,r,h,(u,g)=>u.domAtPos(g),u=>new en(h,Math.min(u,h.nodeValue.length))):new en(h,Math.min(t,h.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,r){let{topView:h,text:u}=this.widget;return h?Br(t,r,h,u):Math.min(r,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,r){let{topView:h,text:u}=this.widget;return h?vr(t,r,h,u,(g,y,S)=>g.coordsAt(y,S),(g,y)=>pi(u,g,y)):pi(u,t,r)}destroy(){var t;super.destroy(),(t=this.widget.topView)===null||t===void 0||t.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function vr(f,t,r,h,u,g){if(r instanceof di){for(let y=r.dom.firstChild;y;y=y.nextSibling){let S=Gt.get(y);if(!S)return g(f,t);let M=It(y,h),R=S.length+(M?h.nodeValue.length:0);if(f<R||f==R&&S.getSide()<=0)return M?vr(f,t,S,h,u,g):u(S,f,t);f-=R}return u(r,r.length,-1)}else return r.dom==h?g(f,t):u(r,f,t)}function Br(f,t,r,h){if(r instanceof di)for(let u of r.children){let g=0,y=It(u.dom,h);if(It(u.dom,f))return g+(y?Br(f,t,u,h):u.localPosFromDOM(f,t));g+=y?h.nodeValue.length:u.length}else if(r.dom==h)return Math.min(t,h.nodeValue.length);return r.localPosFromDOM(f,t)}class Ir extends Gt{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof Ir&&t.side==this.side}split(){return new Ir(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return en.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let r=this.dom.getBoundingClientRect(),h=yr(this,this.side>0?-1:1);return h&&h.top<r.bottom&&h.bottom>r.top?{left:r.left,right:r.right,top:h.top,bottom:h.bottom}:r}get overrideDOMText(){return q.xv.empty}}mn.prototype.children=gi.prototype.children=Ir.prototype.children=wt;function yr(f,t){let r=f.parent,h=r?r.children.indexOf(f):-1;for(;r&&h>=0;)if(t<0?h>0:h<r.children.length){let u=r.children[h+t];if(u instanceof mn){let g=u.coordsAt(t<0?u.length:0,t);if(g)return g}h+=t}else if(r instanceof di&&r.parent)h=r.parent.children.indexOf(r)+(t<0?0:1),r=r.parent;else{let u=r.dom.lastChild;if(u&&u.nodeName=="BR")return u.getClientRects()[0];break}}function Fi(f,t){let r=f.dom,{children:h}=f,u=0;for(let g=0;u<h.length;u++){let y=h[u],S=g+y.length;if(!(S==g&&y.getSide()<=0)){if(t>g&&t<S&&y.dom.parentNode==r)return y.domAtPos(t-g);if(t<=g)break;g=S}}for(let g=u;g>0;g--){let y=h[g-1];if(y.dom.parentNode==r)return y.domAtPos(y.length)}for(let g=u;g<h.length;g++){let y=h[g];if(y.dom.parentNode==r)return y.domAtPos(0)}return new en(r,0)}function xr(f,t,r){let h,{children:u}=f;r>0&&t instanceof di&&u.length&&(h=u[u.length-1])instanceof di&&h.mark.eq(t.mark)?xr(h,t.children[0],r-1):(u.push(t),t.setParent(f)),f.length+=t.length}function _r(f,t,r){let h=null,u=-1,g=null,y=-1;function S(R,L){for(let z=0,Y=0;z<R.children.length&&Y<=L;z++){let te=R.children[z],ce=Y+te.length;ce>=L&&(te.children.length?S(te,L-Y):!g&&(ce>L||Y==ce&&te.getSide()>0)?(g=te,y=L-Y):(Y<L||Y==ce&&te.getSide()<0)&&(h=te,u=L-Y)),Y=ce}}S(f,t);let M=(r<0?h:g)||h||g;return M?M.coordsAt(Math.max(0,M==h?u:y),r):In(f)}function In(f){let t=f.dom.lastChild;if(!t)return f.dom.getBoundingClientRect();let r=je(t);return r[r.length-1]||null}function On(f,t){for(let r in f)r=="class"&&t.class?t.class+=" "+f.class:r=="style"&&t.style?t.style+=";"+f.style:t[r]=f[r];return t}function Jr(f,t){if(f==t)return!0;if(!f||!t)return!1;let r=Object.keys(f),h=Object.keys(t);if(r.length!=h.length)return!1;for(let u of r)if(h.indexOf(u)==-1||f[u]!==t[u])return!1;return!0}function ke(f,t,r){let h=null;if(t)for(let u in t)r&&u in r||f.removeAttribute(h=u);if(r)for(let u in r)t&&t[u]==r[u]||f.setAttribute(h=u,r[u]);return!!h}class ii{eq(t){return!1}updateDOM(t,r){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var pt=function(f){return f[f.Text=0]="Text",f[f.WidgetBefore=1]="WidgetBefore",f[f.WidgetAfter=2]="WidgetAfter",f[f.WidgetRange=3]="WidgetRange",f}(pt||(pt={}));class Zt extends q.uU{constructor(t,r,h,u){super(),this.startSide=t,this.endSide=r,this.widget=h,this.spec=u}get heightRelevant(){return!1}static mark(t){return new Nr(t)}static widget(t){let r=t.side||0,h=!!t.block;return r+=h?r>0?3e8:-4e8:r>0?1e8:-1e8,new Xn(t,r,r,h,t.widget||null,!1)}static replace(t){let r=!!t.block,h,u;if(t.isBlockGap)h=-5e8,u=4e8;else{let{start:g,end:y}=Rn(t,r);h=(g?r?-3e8:-1:5e8)-1,u=(y?r?2e8:1:-6e8)+1}return new Xn(t,h,u,r,t.widget||null,!0)}static line(t){return new mi(t)}static set(t,r=!1){return q.Xs.of(t,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Zt.none=q.Xs.empty;class Nr extends Zt{constructor(t){let{start:r,end:h}=Rn(t);super(r?-1:5e8,h?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof Nr&&this.tagName==t.tagName&&this.class==t.class&&Jr(this.attrs,t.attrs)}range(t,r=t){if(t>=r)throw new RangeError("Mark decorations may not be empty");return super.range(t,r)}}Nr.prototype.point=!1;class mi extends Zt{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof mi&&this.spec.class==t.spec.class&&Jr(this.spec.attributes,t.spec.attributes)}range(t,r=t){if(r!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,r)}}mi.prototype.mapMode=q.gc.TrackBefore,mi.prototype.point=!0;class Xn extends Zt{constructor(t,r,h,u,g,y){super(r,h,g,t),this.block=u,this.isReplace=y,this.mapMode=u?r<=0?q.gc.TrackBefore:q.gc.TrackAfter:q.gc.TrackDel}get type(){return this.startSide<this.endSide?pt.WidgetRange:this.startSide<=0?pt.WidgetBefore:pt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof Xn&&Wi(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,r=t){if(this.isReplace&&(t>r||t==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,r)}}Xn.prototype.point=!0;function Rn(f,t=!1){let{inclusiveStart:r,inclusiveEnd:h}=f;return r==null&&(r=f.inclusive),h==null&&(h=f.inclusive),{start:r!=null?r:t,end:h!=null?h:t}}function Wi(f,t){return f==t||!!(f&&t&&f.compare(t))}function Ri(f,t,r,h=0){let u=r.length-1;u>=0&&r[u]+h>=f?r[u]=Math.max(r[u],t):r.push(f,t)}class cn extends Gt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,r,h,u,g,y){if(h){if(!(h instanceof cn))return!1;this.dom||h.transferDOM(this)}return u&&this.setDeco(h?h.attrs:null),ys(this,t,r,h?h.children:[],g,y),!0}split(t){let r=new cn;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:h,off:u}=this.childPos(t);u&&(r.append(this.children[h].split(u),0),this.children[h].merge(u,this.children[h].length,null,!1,0,0),h++);for(let g=h;g<this.children.length;g++)r.append(this.children[g],0);for(;h>0&&this.children[h-1].length==0;)this.children[--h].destroy();return this.children.length=h,this.markDirty(),this.length=t,r}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){Jr(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,r){xr(this,t,r)}addLineDeco(t){let r=t.spec.attributes,h=t.spec.class;r&&(this.attrs=On(r,this.attrs||{})),h&&(this.attrs=On({class:h},this.attrs||{}))}domAtPos(t){return Fi(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.dirty|=6)}sync(t,r){var h;this.dom?this.dirty&4&&(Xr(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ke(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,r);let u=this.dom.lastChild;for(;u&&Gt.get(u)instanceof di;)u=u.lastChild;if(!u||!this.length||u.nodeName!="BR"&&((h=Gt.get(u))===null||h===void 0?void 0:h.isEditable)==!1&&(!Le.ios||!this.children.some(g=>g instanceof mn))){let g=document.createElement("BR");g.cmIgnore=!0,this.dom.appendChild(g)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0;for(let r of this.children){if(!(r instanceof mn)||/[^ -~]/.test(r.text))return null;let h=je(r.dom);if(h.length!=1)return null;t+=h[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,r){return _r(this,t,r)}become(t){return!1}get type(){return pt.Text}static find(t,r){for(let h=0,u=0;h<t.children.length;h++){let g=t.children[h],y=u+g.length;if(y>=r){if(g instanceof cn)return g;if(y>r)break}u=y+g.breakAfter}return null}}class Kn extends Gt{constructor(t,r,h){super(),this.widget=t,this.length=r,this.type=h,this.breakAfter=0,this.prevWidget=null}merge(t,r,h,u,g,y){return h&&(!(h instanceof Kn)||!this.widget.compare(h.widget)||t>0&&g<=0||r<this.length&&y<=0)?!1:(this.length=t+(h?h.length:0)+(this.length-r),!0)}domAtPos(t){return t==0?en.before(this.dom):en.after(this.dom,t==this.length)}split(t){let r=this.length-t;this.length=t;let h=new Kn(this.widget,r,this.type);return h.breakAfter=this.breakAfter,h}get children(){return wt}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):q.xv.empty}domBoundsAround(){return null}become(t){return t instanceof Kn&&t.type==this.type&&t.widget.constructor==this.widget.constructor?(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class on{constructor(t,r,h,u){this.doc=t,this.pos=r,this.end=h,this.disallowBlockEffectsFor=u,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Kn&&t.type==pt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new cn),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(or(new Ir(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(t,r,h){for(;t>0;){if(this.textOff==this.text.length){let{value:g,lineBreak:y,done:S}=this.cursor.next(this.skip);if(this.skip=0,S)throw new Error("Ran out of text content when drawing inline views");if(y){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=g,this.textOff=0}let u=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(r.slice(r.length-h)),this.getLine().append(or(new mn(this.text.slice(this.textOff,this.textOff+u)),r),h),this.atCursorPos=!0,this.textOff+=u,t-=u,h=0}}span(t,r,h,u){this.buildText(r-t,h,u),this.pos=r,this.openStart<0&&(this.openStart=u)}point(t,r,h,u,g,y){if(this.disallowBlockEffectsFor[y]&&h instanceof Xn){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let S=r-t;if(h instanceof Xn)if(h.block){let{type:M}=h;M==pt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Kn(h.widget||new lr("div"),S,M))}else{let M=gi.create(h.widget||new lr("span"),S,S?0:h.startSide),R=this.atCursorPos&&!M.isEditable&&g<=u.length&&(t<r||h.startSide>0),L=!M.isEditable&&(t<r||g>u.length||h.startSide<=0),z=this.getLine();this.pendingBuffer==2&&!R&&(this.pendingBuffer=0),this.flushBuffer(u),R&&(z.append(or(new Ir(1),u),g),g=u.length+Math.max(0,g-u.length)),z.append(or(M,u),g),this.atCursorPos=L,this.pendingBuffer=L?t<r||g>u.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=u.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(h);S&&(this.textOff+S<=this.text.length?this.textOff+=S:(this.skip+=S-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=g)}static build(t,r,h,u,g){let y=new on(t,r,h,g);return y.openEnd=q.Xs.spans(u,r,h,y),y.openStart<0&&(y.openStart=y.openEnd),y.finish(y.openEnd),y}}function or(f,t){for(let r of t)f=new di(r,[f],f.length);return f}class lr extends ii{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const se=q.r$.define(),qs=q.r$.define(),Yr=q.r$.define(),Jn=q.r$.define(),Ei=q.r$.define(),Fr=q.r$.define(),xs=q.r$.define(),vi=q.r$.define({combine:f=>f.some(t=>t)}),wr=q.r$.define({combine:f=>f.some(t=>t)});class Ui{constructor(t,r="nearest",h="nearest",u=5,g=5){this.range=t,this.y=r,this.x=h,this.yMargin=u,this.xMargin=g}map(t){return t.empty?this:new Ui(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const kn=q.Py.define({map:(f,t)=>f.map(t)});function qi(f,t,r){let h=f.facet(Jn);h.length?h[0](t):window.onerror?window.onerror(String(t),r,void 0,void 0,t):r?console.error(r+":",t):console.error(t)}const ws=q.r$.define({combine:f=>f.length?f[0]:!0});let Gs=0;const Wr=q.r$.define();class _n{constructor(t,r,h,u){this.id=t,this.create=r,this.domEventHandlers=h,this.extension=u(this)}static define(t,r){const{eventHandlers:h,provide:u,decorations:g}=r||{};return new _n(Gs++,t,h,y=>{let S=[Wr.of(y)];return g&&S.push(p.of(M=>{let R=M.plugin(y);return R?g(R):Zt.none})),u&&S.push(u(y)),S})}static fromClass(t,r){return _n.define(h=>new t(h),r)}}class Hr{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(h){if(qi(r.state,h,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(u){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(r){qi(t.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(h){qi(t.state,h,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const zr=q.r$.define(),_=q.r$.define(),p=q.r$.define(),v=q.r$.define(),b=q.r$.define(),k=q.r$.define();class E{constructor(t,r,h,u){this.fromA=t,this.toA=r,this.fromB=h,this.toB=u}join(t){return new E(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let r=t.length,h=this;for(;r>0;r--){let u=t[r-1];if(!(u.fromA>h.toA)){if(u.toA<h.fromA)break;h=h.join(u),t.splice(r-1,1)}}return t.splice(r,0,h),t}static extendWithRanges(t,r){if(r.length==0)return t;let h=[];for(let u=0,g=0,y=0,S=0;;u++){let M=u==t.length?null:t[u],R=y-S,L=M?M.fromB:1e9;for(;g<r.length&&r[g]<L;){let z=r[g],Y=r[g+1],te=Math.max(S,z),ce=Math.min(L,Y);if(te<=ce&&new E(te+R,ce+R,te,ce).addToSet(h),Y>L)break;g+=2}if(!M)return h;new E(M.fromA,M.toA,M.fromB,M.toB).addToSet(h),y=M.toA,S=M.toB}}}class D{constructor(t,r,h){this.view=t,this.state=r,this.transactions=h,this.flags=0,this.startState=t.state,this.changes=q.as.empty(this.startState.doc.length);for(let g of h)this.changes=this.changes.compose(g.changes);let u=[];this.changes.iterChangedRanges((g,y,S,M)=>u.push(new E(g,y,S,M))),this.changedRanges=u}static create(t,r,h){return new D(t,r,h)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var W=function(f){return f[f.LTR=0]="LTR",f[f.RTL=1]="RTL",f}(W||(W={}));const Z=W.LTR,re=W.RTL;function fe(f){let t=[];for(let r=0;r<f.length;r++)t.push(1<<+f[r]);return t}const we=fe("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),He=fe("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ne=Object.create(null),yt=[];for(let f of["()","[]","{}"]){let t=f.charCodeAt(0),r=f.charCodeAt(1);Ne[t]=r,Ne[r]=-t}function Gi(f){return f<=247?we[f]:1424<=f&&f<=1524?2:1536<=f&&f<=1785?He[f-1536]:1774<=f&&f<=2220?4:8192<=f&&f<=8203?256:64336<=f&&f<=65023?4:f==8204?256:1}const Pn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ji{constructor(t,r,h){this.from=t,this.to=r,this.level=h}get dir(){return this.level%2?re:Z}side(t,r){return this.dir==r==t?this.to:this.from}static find(t,r,h,u){let g=-1;for(let y=0;y<t.length;y++){let S=t[y];if(S.from<=r&&S.to>=r){if(S.level==h)return y;(g<0||(u!=0?u<0?S.from<r:S.to>r:t[g].level>S.level))&&(g=y)}}if(g<0)throw new RangeError("Index out of range");return g}}const xn=[];function Vo(f,t){let r=f.length,h=t==Z?1:2,u=t==Z?2:1;if(!f||h==1&&!Pn.test(f))return mo(r);for(let y=0,S=h,M=h;y<r;y++){let R=Gi(f.charCodeAt(y));R==512?R=S:R==8&&M==4&&(R=16),xn[y]=R==4?2:R,R&7&&(M=R),S=R}for(let y=0,S=h,M=h;y<r;y++){let R=xn[y];if(R==128)y<r-1&&S==xn[y+1]&&S&24?R=xn[y]=S:xn[y]=256;else if(R==64){let L=y+1;for(;L<r&&xn[L]==64;)L++;let z=y&&S==8||L<r&&xn[L]==8?M==1?1:8:256;for(let Y=y;Y<L;Y++)xn[Y]=z;y=L-1}else R==8&&M==1&&(xn[y]=1);S=R,R&7&&(M=R)}for(let y=0,S=0,M=0,R,L,z;y<r;y++)if(L=Ne[R=f.charCodeAt(y)])if(L<0){for(let Y=S-3;Y>=0;Y-=3)if(yt[Y+1]==-L){let te=yt[Y+2],ce=te&2?h:te&4?te&1?u:h:0;ce&&(xn[y]=xn[yt[Y]]=ce),S=Y;break}}else{if(yt.length==189)break;yt[S++]=y,yt[S++]=R,yt[S++]=M}else if((z=xn[y])==2||z==1){let Y=z==h;M=Y?0:1;for(let te=S-3;te>=0;te-=3){let ce=yt[te+2];if(ce&2)break;if(Y)yt[te+2]|=2;else{if(ce&4)break;yt[te+2]|=4}}}for(let y=0;y<r;y++)if(xn[y]==256){let S=y+1;for(;S<r&&xn[S]==256;)S++;let M=(y?xn[y-1]:h)==1,R=(S<r?xn[S]:h)==1,L=M==R?M?1:2:h;for(let z=y;z<S;z++)xn[z]=L;y=S-1}let g=[];if(h==1)for(let y=0;y<r;){let S=y,M=xn[y++]!=1;for(;y<r&&M==(xn[y]!=1);)y++;if(M)for(let R=y;R>S;){let L=R,z=xn[--R]!=2;for(;R>S&&z==(xn[R-1]!=2);)R--;g.push(new ji(R,L,z?2:1))}else g.push(new ji(S,y,0))}else for(let y=0;y<r;){let S=y,M=xn[y++]==2;for(;y<r&&M==(xn[y]==2);)y++;g.push(new ji(S,y,M?1:2))}return g}function mo(f){return[new ji(0,f,0)]}let vo="";function $o(f,t,r,h,u){var g;let y=h.head-f.from,S=-1;if(y==0){if(!u||!f.length)return null;t[0].level!=r&&(y=t[0].side(!1,r),S=0)}else if(y==f.length){if(u)return null;let Y=t[t.length-1];Y.level!=r&&(y=Y.side(!0,r),S=t.length-1)}S<0&&(S=ji.find(t,y,(g=h.bidiLevel)!==null&&g!==void 0?g:-1,h.assoc));let M=t[S];y==M.side(u,r)&&(M=t[S+=u?1:-1],y=M.side(!u,r));let R=u==(M.dir==r),L=(0,q.cp)(f.text,y,R);if(vo=f.text.slice(Math.min(y,L),Math.max(y,L)),L!=M.side(u,r))return q.jT.cursor(L+f.from,R?-1:1,M.level);let z=S==(u?t.length-1:0)?null:t[S+(u?1:-1)];return!z&&M.level!=r?q.jT.cursor(u?f.to:f.from,u?-1:1,r):z&&z.level<M.level?q.jT.cursor(z.side(!u,r)+f.from,u?1:-1,z.level):q.jT.cursor(L+f.from,u?-1:1,M.level)}const ar="\uFFFF";class bl{constructor(t,r){this.points=t,this.text="",this.lineSeparator=r.facet(q.yy.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=ar}readRange(t,r){if(!t)return this;let h=t.parentNode;for(let u=t;;){this.findPointBefore(h,u),this.readNode(u);let g=u.nextSibling;if(g==r)break;let y=Gt.get(u),S=Gt.get(g);(y&&S?y.breakAfter:(y?y.breakAfter:Qr(u))||Qr(g)&&(u.nodeName!="BR"||u.cmIgnore))&&this.lineBreak(),u=g}return this.findPointBefore(h,r),this}readTextNode(t){let r=t.nodeValue;for(let h of this.points)h.node==t&&(h.pos=this.text.length+Math.min(h.offset,r.length));for(let h=0,u=this.lineSeparator?null:/\r\n?|\n/g;;){let g=-1,y=1,S;if(this.lineSeparator?(g=r.indexOf(this.lineSeparator,h),y=this.lineSeparator.length):(S=u.exec(r))&&(g=S.index,y=S[0].length),this.append(r.slice(h,g<0?r.length:g)),g<0)break;if(this.lineBreak(),y>1)for(let M of this.points)M.node==t&&M.pos>this.text.length&&(M.pos-=y-1);h=g+y}}readNode(t){if(t.cmIgnore)return;let r=Gt.get(t),h=r&&r.overrideDOMText;if(h!=null){this.findPointInside(t,h.length);for(let u=h.iter();!u.next().done;)u.lineBreak?this.lineBreak():this.append(u.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,r){for(let h of this.points)h.node==t&&t.childNodes[h.offset]==r&&(h.pos=this.text.length)}findPointInside(t,r){for(let h of this.points)(t.nodeType==3?h.node==t:t.contains(h.node))&&(h.pos=this.text.length+Math.min(r,h.offset))}}function Qr(f){return f.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(f.nodeName)}class Zo{constructor(t,r){this.node=t,this.offset=r,this.pos=-1}}class Sl extends Gt{constructor(t){super(),this.view=t,this.compositionDeco=Zt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new cn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new E(0,0,0,t.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(t){let r=t.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:y,toA:S})=>S<this.minWidthFrom||y>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Zt.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=qo(this.view,t.changes)),(Le.ie||Le.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let h=this.decorations,u=this.updateDeco(),g=Go(h,u,t.changes);return r=E.extendWithRanges(r,g),this.dirty==0&&r.length==0?!1:(this.updateInner(r,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,r);let{observer:h}=this.view;h.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let g=Le.chrome||Le.ios?{node:h.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,g),this.dirty=0,g&&(g.written||h.selectionRange.focusNode!=g.node)&&(this.forceSelection=!0),this.dom.style.height=""});let u=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let g of this.children)g instanceof Kn&&g.widget instanceof Ko&&u.push(g.dom);h.updateGaps(u)}updateChildren(t,r){let h=this.childCursor(r);for(let u=t.length-1;;u--){let g=u>=0?t[u]:null;if(!g)break;let{fromA:y,toA:S,fromB:M,toB:R}=g,{content:L,breakAtStart:z,openStart:Y,openEnd:te}=on.build(this.view.state.doc,M,R,this.decorations,this.dynamicDecorationMap),{i:ce,off:be}=h.findPos(S,1),{i:ve,off:Re}=h.findPos(y,-1);ci(this,ve,Re,ce,be,L,z,Y,te)}}updateSelection(t=!1,r=!1){if((t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(r||this.mayControlSelection()))return;let h=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,g=this.domAtPos(u.anchor),y=u.empty?g:this.domAtPos(u.head);if(Le.gecko&&u.empty&&yo(g)){let M=document.createTextNode("");this.view.observer.ignore(()=>g.node.insertBefore(M,g.node.childNodes[g.offset]||null)),g=y=new en(M,0),h=!0}let S=this.view.observer.selectionRange;(h||!S.focusNode||!Qt(g.node,g.offset,S.anchorNode,S.anchorOffset)||!Qt(y.node,y.offset,S.focusNode,S.focusOffset))&&(this.view.observer.ignore(()=>{Le.android&&Le.chrome&&this.dom.contains(S.focusNode)&&_s(S.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let M=ct(this.view.root);if(M)if(u.empty){if(Le.gecko){let R=kl(g.node,g.offset);if(R&&R!=3){let L=bs(g.node,g.offset,R==1?1:-1);L&&(g=new en(L,R==1?0:L.nodeValue.length))}}M.collapse(g.node,g.offset),u.bidiLevel!=null&&S.cursorBidiLevel!=null&&(S.cursorBidiLevel=u.bidiLevel)}else if(M.extend){M.collapse(g.node,g.offset);try{M.extend(y.node,y.offset)}catch(R){}}else{let R=document.createRange();u.anchor>u.head&&([g,y]=[y,g]),R.setEnd(y.node,y.offset),R.setStart(g.node,g.offset),M.removeAllRanges(),M.addRange(R)}}),this.view.observer.setSelectionRange(g,y)),this.impreciseAnchor=g.precise?null:new en(S.anchorNode,S.anchorOffset),this.impreciseHead=y.precise?null:new en(S.focusNode,S.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:t}=this,r=t.state.selection.main,h=ct(t.root),{anchorNode:u,anchorOffset:g}=t.observer.selectionRange;if(!h||!r.empty||!r.assoc||!h.modify)return;let y=cn.find(this,r.head);if(!y)return;let S=y.posAtStart;if(r.head==S||r.head==S+y.length)return;let M=this.coordsAt(r.head,-1),R=this.coordsAt(r.head,1);if(!M||!R||M.bottom>R.top)return;let L=this.domAtPos(r.head+r.assoc);h.collapse(L.node,L.offset),h.modify("move",r.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let z=t.observer.selectionRange;t.docView.posFromDOM(z.anchorNode,z.anchorOffset)!=r.from&&h.collapse(u,g)}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||Dt(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let r=t;r;){let h=Gt.get(r);if(h&&h.rootView==this)return h;r=r.parentNode}return null}posFromDOM(t,r){let h=this.nearest(t);if(!h)throw new RangeError("Trying to find position for a DOM position outside of the document");return h.localPosFromDOM(t,r)+h.posAtStart}domAtPos(t){let{i:r,off:h}=this.childCursor().findPos(t,-1);for(;r<this.children.length-1;){let u=this.children[r];if(h<u.length||u instanceof cn)break;r++,h=0}return this.children[r].domAtPos(h)}coordsAt(t,r){for(let h=this.length,u=this.children.length-1;;u--){let g=this.children[u],y=h-g.breakAfter-g.length;if(t>y||t==y&&g.type!=pt.WidgetBefore&&g.type!=pt.WidgetAfter&&(!u||r==2||this.children[u-1].breakAfter||this.children[u-1].type==pt.WidgetBefore&&r>-2))return g.coordsAt(t-y,r);h=y}}measureVisibleLineHeights(t){let r=[],{from:h,to:u}=t,g=this.view.contentDOM.clientWidth,y=g>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,S=-1,M=this.view.textDirection==W.LTR;for(let R=0,L=0;L<this.children.length;L++){let z=this.children[L],Y=R+z.length;if(Y>u)break;if(R>=h){let te=z.dom.getBoundingClientRect();if(r.push(te.height),y){let ce=z.dom.lastChild,be=ce?je(ce):[];if(be.length){let ve=be[be.length-1],Re=M?ve.right-te.left:te.right-ve.left;Re>S&&(S=Re,this.minWidth=g,this.minWidthFrom=R,this.minWidthTo=Y)}}}R=Y+z.breakAfter}return r}textDirectionAt(t){let{i:r}=this.childPos(t,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?W.RTL:W.LTR}measureTextSize(){for(let u of this.children)if(u instanceof cn){let g=u.measureTextSize();if(g)return g}let t=document.createElement("div"),r,h;return t.className="cm-line",t.style.width="99999px",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let u=je(t.firstChild)[0];r=t.getBoundingClientRect().height,h=u?u.width/27:7,t.remove()}),{lineHeight:r,charWidth:h}}childCursor(t=this.length){let r=this.children.length;return r&&(t-=this.children[--r].length),new jt(this.children,t,r)}computeBlockGapDeco(){let t=[],r=this.view.viewState;for(let h=0,u=0;;u++){let g=u==r.viewports.length?null:r.viewports[u],y=g?g.from-1:this.length;if(y>h){let S=r.lineBlockAt(y).bottom-r.lineBlockAt(h).top;t.push(Zt.replace({widget:new Ko(S),block:!0,inclusive:!0,isBlockGap:!0}).range(h,y))}if(!g)break;h=g.to+1}return Zt.set(t)}updateDeco(){let t=this.view.state.facet(p).map((r,h)=>(this.dynamicDecorationMap[h]=typeof r=="function")?r(this.view):r);for(let r=t.length;r<t.length+3;r++)this.dynamicDecorationMap[r]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let{range:r}=t,h=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),u;if(!h)return;!r.empty&&(u=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(h={left:Math.min(h.left,u.left),top:Math.min(h.top,u.top),right:Math.max(h.right,u.right),bottom:Math.max(h.bottom,u.bottom)});let g=0,y=0,S=0,M=0;for(let L of this.view.state.facet(b).map(z=>z(this.view)))if(L){let{left:z,right:Y,top:te,bottom:ce}=L;z!=null&&(g=Math.max(g,z)),Y!=null&&(y=Math.max(y,Y)),te!=null&&(S=Math.max(S,te)),ce!=null&&(M=Math.max(M,ce))}let R={left:h.left-g,top:h.top-S,right:h.right+y,bottom:h.bottom+M};Vn(this.view.scrollDOM,R,r.head<r.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==W.LTR)}}function yo(f){return f.node.nodeType==1&&f.node.firstChild&&(f.offset==0||f.node.childNodes[f.offset-1].contentEditable=="false")&&(f.offset==f.node.childNodes.length||f.node.childNodes[f.offset].contentEditable=="false")}class Ko extends ii{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Uo(f){let t=f.observer.selectionRange,r=t.focusNode&&bs(t.focusNode,t.focusOffset,0);if(!r)return null;let h=f.docView.nearest(r);if(!h)return null;if(h instanceof cn){let u=r;for(;u.parentNode!=h.dom;)u=u.parentNode;let g=u.previousSibling;for(;g&&!Gt.get(g);)g=g.previousSibling;let y=g?Gt.get(g).posAtEnd:h.posAtStart;return{from:y,to:y,node:u,text:r}}else{for(;;){let{parent:g}=h;if(!g)return null;if(g instanceof cn)break;h=g}let u=h.posAtStart;return{from:u,to:u+h.length,node:h.dom,text:r}}}function qo(f,t){let r=Uo(f);if(!r)return Zt.none;let{from:h,to:u,node:g,text:y}=r,S=t.mapPos(h,1),M=Math.max(S,t.mapPos(u,-1)),{state:R}=f,L=g.nodeType==3?g.nodeValue:new bl([],R).readRange(g.firstChild,null).text;if(M-S<L.length)if(R.doc.sliceString(S,Math.min(R.doc.length,S+L.length),ar)==L)M=S+L.length;else if(R.doc.sliceString(Math.max(0,M-L.length),M,ar)==L)S=M-L.length;else return Zt.none;else if(R.doc.sliceString(S,M,ar)!=L)return Zt.none;let z=Gt.get(g);return z instanceof Zn?z=z.widget.topView:z&&(z.parent=null),Zt.set(Zt.replace({widget:new Cl(g,y,z),inclusive:!0}).range(S,M))}class Cl extends ii{constructor(t,r,h){super(),this.top=t,this.text=r,this.topView=h}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Zn}}function bs(f,t,r){for(;;){if(f.nodeType==3)return f;if(f.nodeType==1&&t>0&&r<=0)f=f.childNodes[t-1],t=kt(f);else if(f.nodeType==1&&t<f.childNodes.length&&r>=0)f=f.childNodes[t],t=0;else return null}}function kl(f,t){return f.nodeType!=1?0:(t&&f.childNodes[t-1].contentEditable=="false"?1:0)|(t<f.childNodes.length&&f.childNodes[t].contentEditable=="false"?2:0)}class Is{constructor(){this.changes=[]}compareRange(t,r){Ri(t,r,this.changes)}comparePoint(t,r){Ri(t,r,this.changes)}}function Go(f,t,r){let h=new Is;return q.Xs.compare(f,t,r,h),h.changes}function _s(f,t){for(let r=f;r&&r!=t;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function Ss(f,t,r=1){let h=f.charCategorizer(t),u=f.doc.lineAt(t),g=t-u.from;if(u.length==0)return q.jT.cursor(t);g==0?r=1:g==u.length&&(r=-1);let y=g,S=g;r<0?y=(0,q.cp)(u.text,g,!1):S=(0,q.cp)(u.text,g);let M=h(u.text.slice(y,S));for(;y>0;){let R=(0,q.cp)(u.text,y,!1);if(h(u.text.slice(R,y))!=M)break;y=R}for(;S<u.length;){let R=(0,q.cp)(u.text,S);if(h(u.text.slice(S,R))!=M)break;S=R}return q.jT.range(y+u.from,S+u.from)}function xo(f,t){return t.left>f?t.left-f:Math.max(0,f-t.right)}function Vr(f,t){return t.top>f?t.top-f:Math.max(0,f-t.bottom)}function Al(f,t){return f.top<t.bottom-1&&f.bottom>t.top+1}function Ns(f,t){return t<f.top?{top:t,left:f.left,right:f.right,bottom:f.bottom}:f}function Tl(f,t){return t>f.bottom?{top:f.top,left:f.left,right:f.right,bottom:t}:f}function js(f,t,r){let h,u,g,y,S=!1,M,R,L,z;for(let ce=f.firstChild;ce;ce=ce.nextSibling){let be=je(ce);for(let ve=0;ve<be.length;ve++){let Re=be[ve];u&&Al(u,Re)&&(Re=Ns(Tl(Re,u.bottom),u.top));let xt=xo(t,Re),qt=Vr(r,Re);if(xt==0&&qt==0)return ce.nodeType==3?Ml(ce,t,r):js(ce,t,r);if(!h||y>qt||y==qt&&g>xt){h=ce,u=Re,g=xt,y=qt;let _t=qt?r<Re.top?-1:1:xt?t<Re.left?-1:1:0;S=!_t||(_t>0?ve<be.length-1:ve>0)}xt==0?r>Re.bottom&&(!L||L.bottom<Re.bottom)?(M=ce,L=Re):r<Re.top&&(!z||z.top>Re.top)&&(R=ce,z=Re):L&&Al(L,Re)?L=Tl(L,Re.bottom):z&&Al(z,Re)&&(z=Ns(z,Re.top))}}if(L&&L.bottom>=r?(h=M,u=L):z&&z.top<=r&&(h=R,u=z),!h)return{node:f,offset:0};let Y=Math.max(u.left,Math.min(u.right,t));if(h.nodeType==3)return Ml(h,Y,r);if(S&&h.contentEditable!="false")return js(h,Y,r);let te=Array.prototype.indexOf.call(f.childNodes,h)+(t>=(u.left+u.right)/2?1:0);return{node:f,offset:te}}function Ml(f,t,r){let h=f.nodeValue.length,u=-1,g=1e9,y=0;for(let S=0;S<h;S++){let M=ui(f,S,S+1).getClientRects();for(let R=0;R<M.length;R++){let L=M[R];if(L.top==L.bottom)continue;y||(y=t-L.left);let z=(L.top>r?L.top-r:r-L.bottom)-1;if(L.left-1<=t&&L.right+1>=t&&z<g){let Y=t>=(L.left+L.right)/2,te=Y;if((Le.chrome||Le.gecko)&&ui(f,S).getBoundingClientRect().left==L.right&&(te=!Y),z<=0)return{node:f,offset:S+(te?1:0)};u=S+(te?1:0),g=z}}}return{node:f,offset:u>-1?u:y>0?f.nodeValue.length:0}}function B(f,t,r,h=-1){var u,g;let y=f.contentDOM.getBoundingClientRect(),S=y.top+f.viewState.paddingTop,M,{docHeight:R}=f.viewState,{x:L,y:z}=t,Y=z-S;if(Y<0)return 0;if(Y>R)return f.state.doc.length;for(let _t=f.defaultLineHeight/2,tn=!1;M=f.elementAtHeight(Y),M.type!=pt.Text;)for(;Y=h>0?M.bottom+_t:M.top-_t,!(Y>=0&&Y<=R);){if(tn)return r?null:0;tn=!0,h=-h}z=S+Y;let te=M.from;if(te<f.viewport.from)return f.viewport.from==0?0:r?null:G(f,y,M,L,z);if(te>f.viewport.to)return f.viewport.to==f.state.doc.length?f.state.doc.length:r?null:G(f,y,M,L,z);let ce=f.dom.ownerDocument,be=f.root.elementFromPoint?f.root:ce,ve=be.elementFromPoint(L,z);ve&&!f.contentDOM.contains(ve)&&(ve=null),ve||(L=Math.max(y.left+1,Math.min(y.right-1,L)),ve=be.elementFromPoint(L,z),ve&&!f.contentDOM.contains(ve)&&(ve=null));let Re,xt=-1;if(ve&&((u=f.docView.nearest(ve))===null||u===void 0?void 0:u.isEditable)!=!1){if(ce.caretPositionFromPoint){let _t=ce.caretPositionFromPoint(L,z);_t&&({offsetNode:Re,offset:xt}=_t)}else if(ce.caretRangeFromPoint){let _t=ce.caretRangeFromPoint(L,z);_t&&({startContainer:Re,startOffset:xt}=_t,(!f.contentDOM.contains(Re)||Le.safari&&j(Re,xt,L)||Le.chrome&&K(Re,xt,L))&&(Re=void 0))}}if(!Re||!f.docView.dom.contains(Re)){let _t=cn.find(f.docView,te);if(!_t)return Y>M.top+M.height/2?M.to:M.from;({node:Re,offset:xt}=js(_t.dom,L,z))}let qt=f.docView.nearest(Re);if(!qt)return null;if(qt.isWidget&&((g=qt.dom)===null||g===void 0?void 0:g.nodeType)==1){let _t=qt.dom.getBoundingClientRect();return t.y<_t.top||t.y<=_t.bottom&&t.x<=(_t.left+_t.right)/2?qt.posAtStart:qt.posAtEnd}else return qt.localPosFromDOM(Re,xt)+qt.posAtStart}function G(f,t,r,h,u){let g=Math.round((h-t.left)*f.defaultCharacterWidth);if(f.lineWrapping&&r.height>f.defaultLineHeight*1.5){let S=Math.floor((u-r.top)/f.defaultLineHeight);g+=S*f.viewState.heightOracle.lineLength}let y=f.state.sliceDoc(r.from,r.to);return r.from+(0,q.Gz)(y,g,f.state.tabSize)}function j(f,t,r){let h;if(f.nodeType!=3||t!=(h=f.nodeValue.length))return!1;for(let u=f.nextSibling;u;u=u.nextSibling)if(u.nodeType!=1||u.nodeName!="BR")return!1;return ui(f,h-1,h).getBoundingClientRect().left>r}function K(f,t,r){if(t!=0)return!1;for(let u=f;;){let g=u.parentNode;if(!g||g.nodeType!=1||g.firstChild!=u)return!1;if(g.classList.contains("cm-line"))break;u=g}let h=f.nodeType==1?f.getBoundingClientRect():ui(f,0,Math.max(f.nodeValue.length,1)).getBoundingClientRect();return r-h.left>5}function X(f,t,r,h){let u=f.state.doc.lineAt(t.head),g=!h||!f.lineWrapping?null:f.coordsAtPos(t.assoc<0&&t.head>u.from?t.head-1:t.head);if(g){let M=f.dom.getBoundingClientRect(),R=f.textDirectionAt(u.from),L=f.posAtCoords({x:r==(R==W.LTR)?M.right-1:M.left+1,y:(g.top+g.bottom)/2});if(L!=null)return q.jT.cursor(L,r?-1:1)}let y=cn.find(f.docView,t.head),S=y?r?y.posAtEnd:y.posAtStart:r?u.to:u.from;return q.jT.cursor(S,r?-1:1)}function ne(f,t,r,h){let u=f.state.doc.lineAt(t.head),g=f.bidiSpans(u),y=f.textDirectionAt(u.from);for(let S=t,M=null;;){let R=$o(u,g,y,S,r),L=vo;if(!R){if(u.number==(r?f.state.doc.lines:1))return S;L=`
`,u=f.state.doc.line(u.number+(r?1:-1)),g=f.bidiSpans(u),R=q.jT.cursor(r?u.from:u.to)}if(M){if(!M(L))return S}else{if(!h)return R;M=h(L)}S=R}}function he(f,t,r){let h=f.state.charCategorizer(t),u=h(r);return g=>{let y=h(g);return u==q.D0.Space&&(u=y),u==y}}function de(f,t,r,h){let u=t.head,g=r?1:-1;if(u==(r?f.state.doc.length:0))return q.jT.cursor(u,t.assoc);let y=t.goalColumn,S,M=f.contentDOM.getBoundingClientRect(),R=f.coordsAtPos(u),L=f.documentTop;if(R)y==null&&(y=R.left-M.left),S=g<0?R.top:R.bottom;else{let te=f.viewState.lineBlockAt(u);y==null&&(y=Math.min(M.right-M.left,f.defaultCharacterWidth*(u-te.from))),S=(g<0?te.top:te.bottom)+L}let z=M.left+y,Y=h!=null?h:f.defaultLineHeight>>1;for(let te=0;;te+=10){let ce=S+(Y+te)*g,be=B(f,{x:z,y:ce},!1,g);if(ce<M.top||ce>M.bottom||(g<0?be<u:be>u))return q.jT.cursor(be,t.assoc,void 0,y)}}function le(f,t,r){let h=f.state.facet(v).map(u=>u(f));for(;;){let u=!1;for(let g of h)g.between(r.from-1,r.from+1,(y,S,M)=>{r.from>y&&r.from<S&&(r=t.head>r.from?q.jT.cursor(y,1):q.jT.cursor(S,-1),u=!0)});if(!u)return r}}class ae{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let r=(h,u)=>{this.ignoreDuringComposition(u)||u.type=="keydown"&&this.keydown(t,u)||(this.mustFlushObserver(u)&&t.observer.forceFlush(),this.runCustomHandlers(u.type,t,u)?u.preventDefault():h(t,u))};for(let h in Te){let u=Te[h];t.contentDOM.addEventListener(h,g=>{Ke(t,g)&&r(u,g)},Qe[h]),this.registeredEvents.push(h)}t.scrollDOM.addEventListener("mousedown",h=>{h.target==t.scrollDOM&&h.clientY>t.contentDOM.getBoundingClientRect().bottom&&r(Te.mousedown,h)}),Le.chrome&&Le.chrome_version==102&&t.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=t.hasFocus,Le.safari&&t.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,r){var h;let u;this.customHandlers=[];for(let g of r)if(u=(h=g.update(t).spec)===null||h===void 0?void 0:h.domEventHandlers){this.customHandlers.push({plugin:g.value,handlers:u});for(let y in u)this.registeredEvents.indexOf(y)<0&&y!="scroll"&&(this.registeredEvents.push(y),t.contentDOM.addEventListener(y,S=>{Ke(t,S)&&this.runCustomHandlers(y,t,S)&&S.preventDefault()}))}}runCustomHandlers(t,r,h){for(let u of this.customHandlers){let g=u.handlers[t];if(g)try{if(g.call(u.plugin,h,r)||h.defaultPrevented)return!0}catch(y){qi(r.state,y)}}return!1}runScrollHandlers(t,r){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let h of this.customHandlers){let u=h.handlers.scroll;if(u)try{u.call(h.plugin,r,t)}catch(g){qi(t.state,g)}}}keydown(t,r){if(this.lastKeyCode=r.keyCode,this.lastKeyTime=Date.now(),r.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Le.android&&Le.chrome&&!r.synthetic&&(r.keyCode==13||r.keyCode==8))return t.observer.delayAndroidKey(r.key,r.keyCode),!0;let h;return Le.ios&&!r.synthetic&&!r.altKey&&!r.metaKey&&((h=ue.find(u=>u.keyCode==r.keyCode))&&!r.ctrlKey||Se.indexOf(r.key)>-1&&r.ctrlKey&&!r.shiftKey)?(this.pendingIOSKey=h||r,setTimeout(()=>this.flushIOSKey(t),250),!0):!1}flushIOSKey(t){let r=this.pendingIOSKey;return r?(this.pendingIOSKey=void 0,Ni(t.contentDOM,r.key,r.keyCode)):!1}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:Le.safari&&!Le.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(t){return t.type=="keydown"&&t.keyCode!=229}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const ue=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Se="dthko",Ae=[16,17,18,20,91,92,224,225];function Ce(f){return f*.7+8}class _e{constructor(t,r,h,u){this.view=t,this.style=h,this.mustSelect=u,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParent=zt(t.contentDOM);let g=t.contentDOM.ownerDocument;g.addEventListener("mousemove",this.move=this.move.bind(this)),g.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=t.state.facet(q.yy.allowMultipleSelections)&&qe(t,r),this.dragMove=ze(t,r),this.dragging=Ye(t,r)&&Ve(r)==1?null:!1}start(t){this.dragging===!1&&(t.preventDefault(),this.select(t))}move(t){var r;if(t.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=t);let h=0,u=0,g=((r=this.scrollParent)===null||r===void 0?void 0:r.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};t.clientX<=g.left?h=-Ce(g.left-t.clientX):t.clientX>=g.right&&(h=Ce(t.clientX-g.right)),t.clientY<=g.top?u=-Ce(g.top-t.clientY):t.clientY>=g.bottom&&(u=Ce(t.clientY-g.bottom)),this.setScrollSpeed(h,u)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(t,r){this.scrollSpeed={x:t,y:r},t||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(t){let r=this.style.get(t,this.extend,this.multiple);(this.mustSelect||!r.eq(this.view.state.selection)||r.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function qe(f,t){let r=f.state.facet(se);return r.length?r[0](t):Le.mac?t.metaKey:t.ctrlKey}function ze(f,t){let r=f.state.facet(qs);return r.length?r[0](t):Le.mac?!t.altKey:!t.ctrlKey}function Ye(f,t){let{main:r}=f.state.selection;if(r.empty)return!1;let h=ct(f.root);if(!h||h.rangeCount==0)return!0;let u=h.getRangeAt(0).getClientRects();for(let g=0;g<u.length;g++){let y=u[g];if(y.left<=t.clientX&&y.right>=t.clientX&&y.top<=t.clientY&&y.bottom>=t.clientY)return!0}return!1}function Ke(f,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target,h;r!=f.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(h=Gt.get(r))&&h.ignoreEvent(t))return!1;return!0}const Te=Object.create(null),Qe=Object.create(null),Ge=Le.ie&&Le.ie_version<15||Le.ios&&Le.webkit_version<604;function rt(f){let t=f.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{f.focus(),r.remove(),Kt(f,r.value)},50)}function Kt(f,t){let{state:r}=f,h,u=1,g=r.toText(t),y=g.lines==r.selection.ranges.length;if(ft!=null&&r.selection.ranges.every(M=>M.empty)&&ft==g.toString()){let M=-1;h=r.changeByRange(R=>{let L=r.doc.lineAt(R.from);if(L.from==M)return{range:R};M=L.from;let z=r.toText((y?g.line(u++).text:t)+r.lineBreak);return{changes:{from:L.from,insert:z},range:q.jT.cursor(R.from+z.length)}})}else y?h=r.changeByRange(M=>{let R=g.line(u++);return{changes:{from:M.from,to:M.to,insert:R.text},range:q.jT.cursor(M.from+R.length)}}):h=r.replaceSelection(g);f.dispatch(h,{userEvent:"input.paste",scrollIntoView:!0})}Te.keydown=(f,t)=>{f.inputState.setSelectionOrigin("select"),t.keyCode==27?f.inputState.lastEscPress=Date.now():Ae.indexOf(t.keyCode)<0&&(f.inputState.lastEscPress=0)},Te.touchstart=(f,t)=>{f.inputState.lastTouchTime=Date.now(),f.inputState.setSelectionOrigin("select.pointer")},Te.touchmove=f=>{f.inputState.setSelectionOrigin("select.pointer")},Qe.touchstart=Qe.touchmove={passive:!0},Te.mousedown=(f,t)=>{if(f.observer.flush(),f.inputState.lastTouchTime>Date.now()-2e3)return;let r=null;for(let h of f.state.facet(Yr))if(r=h(f,t),r)break;if(!r&&t.button==0&&(r=Lt(f,t)),r){let h=f.root.activeElement!=f.contentDOM;f.inputState.startMouseSelection(new _e(f,t,r,h)),h&&f.observer.ignore(()=>Ln(f.contentDOM)),f.inputState.mouseSelection&&f.inputState.mouseSelection.start(t)}};function dt(f,t,r,h){if(h==1)return q.jT.cursor(t,r);if(h==2)return Ss(f.state,t,r);{let u=cn.find(f.docView,t),g=f.state.doc.lineAt(u?u.posAtEnd:t),y=u?u.posAtStart:g.from,S=u?u.posAtEnd:g.to;return S<f.state.doc.length&&S==g.to&&S++,q.jT.range(y,S)}}let gt=(f,t)=>f>=t.top&&f<=t.bottom,Xt=(f,t,r)=>gt(t,r)&&f>=r.left&&f<=r.right;function Ue(f,t,r,h){let u=cn.find(f.docView,t);if(!u)return 1;let g=t-u.posAtStart;if(g==0)return 1;if(g==u.length)return-1;let y=u.coordsAt(g,-1);if(y&&Xt(r,h,y))return-1;let S=u.coordsAt(g,1);return S&&Xt(r,h,S)?1:y&&gt(h,y)?-1:1}function Fe(f,t){let r=f.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:r,bias:Ue(f,r,t.clientX,t.clientY)}}const Me=Le.ie&&Le.ie_version<=11;let Xe=null,et=0,ot=0;function Ve(f){if(!Me)return f.detail;let t=Xe,r=ot;return Xe=f,ot=Date.now(),et=!t||r>Date.now()-400&&Math.abs(t.clientX-f.clientX)<2&&Math.abs(t.clientY-f.clientY)<2?(et+1)%3:1}function Lt(f,t){let r=Fe(f,t),h=Ve(t),u=f.state.selection;return{update(g){g.docChanged&&(r.pos=g.changes.mapPos(r.pos),u=u.map(g.changes))},get(g,y,S){let M=Fe(f,g),R=dt(f,M.pos,M.bias,h);if(r.pos!=M.pos&&!y){let L=dt(f,r.pos,r.bias,h),z=Math.min(L.from,R.from),Y=Math.max(L.to,R.to);R=z<R.from?q.jT.range(z,Y):q.jT.range(Y,z)}return y?u.replaceRange(u.main.extend(R.from,R.to)):S&&u.ranges.length>1&&u.ranges.some(L=>L.eq(R))?An(u,R):S?u.addRange(R):q.jT.create([R])}}}function An(f,t){for(let r=0;;r++)if(f.ranges[r].eq(t))return q.jT.create(f.ranges.slice(0,r).concat(f.ranges.slice(r+1)),f.mainIndex==r?0:f.mainIndex-(f.mainIndex>r?1:0))}Te.dragstart=(f,t)=>{let{selection:{main:r}}=f.state,{mouseSelection:h}=f.inputState;h&&(h.dragging=r),t.dataTransfer&&(t.dataTransfer.setData("Text",f.state.sliceDoc(r.from,r.to)),t.dataTransfer.effectAllowed="copyMove")};function wn(f,t,r,h){if(!r)return;let u=f.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:g}=f.inputState,y=h&&g&&g.dragging&&g.dragMove?{from:g.dragging.from,to:g.dragging.to}:null,S={from:u,insert:r},M=f.state.changes(y?[y,S]:S);f.focus(),f.dispatch({changes:M,selection:{anchor:M.mapPos(u,-1),head:M.mapPos(u,1)},userEvent:y?"move.drop":"input.drop"})}Te.drop=(f,t)=>{if(!t.dataTransfer)return;if(f.state.readOnly)return t.preventDefault();let r=t.dataTransfer.files;if(r&&r.length){t.preventDefault();let h=Array(r.length),u=0,g=()=>{++u==r.length&&wn(f,t,h.filter(y=>y!=null).join(f.state.lineBreak),!1)};for(let y=0;y<r.length;y++){let S=new FileReader;S.onerror=g,S.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(S.result)||(h[y]=S.result),g()},S.readAsText(r[y])}}else wn(f,t,t.dataTransfer.getData("Text"),!0)},Te.paste=(f,t)=>{if(f.state.readOnly)return t.preventDefault();f.observer.flush();let r=Ge?null:t.clipboardData;r?(Kt(f,r.getData("text/plain")||r.getData("text/uri-text")),t.preventDefault()):rt(f)};function bn(f,t){let r=f.dom.parentNode;if(!r)return;let h=r.appendChild(document.createElement("textarea"));h.style.cssText="position: fixed; left: -10000px; top: 10px",h.value=t,h.focus(),h.selectionEnd=t.length,h.selectionStart=0,setTimeout(()=>{h.remove(),f.focus()},50)}function Oi(f){let t=[],r=[],h=!1;for(let u of f.selection.ranges)u.empty||(t.push(f.sliceDoc(u.from,u.to)),r.push(u));if(!t.length){let u=-1;for(let{from:g}of f.selection.ranges){let y=f.doc.lineAt(g);y.number>u&&(t.push(y.text),r.push({from:y.from,to:Math.min(f.doc.length,y.to+1)})),u=y.number}h=!0}return{text:t.join(f.lineBreak),ranges:r,linewise:h}}let ft=null;Te.copy=Te.cut=(f,t)=>{let{text:r,ranges:h,linewise:u}=Oi(f.state);if(!r&&!u)return;ft=u?r:null;let g=Ge?null:t.clipboardData;g?(t.preventDefault(),g.clearData(),g.setData("text/plain",r)):bn(f,r),t.type=="cut"&&!f.state.readOnly&&f.dispatch({changes:h,scrollIntoView:!0,userEvent:"delete.cut"})};const yi=q.q6.define();function Un(f,t){let r=[];for(let h of f.facet(xs)){let u=h(f,t);u&&r.push(u)}return r?f.update({effects:r,annotations:yi.of(!0)}):null}function At(f){setTimeout(()=>{let t=f.hasFocus;if(t!=f.inputState.notifiedFocused){let r=Un(f.state,t);r?f.dispatch(r):f.update([])}},10)}Te.focus=f=>{f.inputState.lastFocusTime=Date.now(),!f.scrollDOM.scrollTop&&(f.inputState.lastScrollTop||f.inputState.lastScrollLeft)&&(f.scrollDOM.scrollTop=f.inputState.lastScrollTop,f.scrollDOM.scrollLeft=f.inputState.lastScrollLeft),At(f)},Te.blur=f=>{f.observer.clearSelectionRange(),At(f)},Te.compositionstart=Te.compositionupdate=f=>{f.inputState.compositionFirstChange==null&&(f.inputState.compositionFirstChange=!0),f.inputState.composing<0&&(f.inputState.composing=0)},Te.compositionend=f=>{f.inputState.composing=-1,f.inputState.compositionEndedAt=Date.now(),f.inputState.compositionFirstChange=null,Le.chrome&&Le.android&&f.observer.flushSoon(),setTimeout(()=>{f.inputState.composing<0&&f.docView.compositionDeco.size&&f.update([])},50)},Te.contextmenu=f=>{f.inputState.lastContextMenu=Date.now()},Te.beforeinput=(f,t)=>{var r;let h;if(Le.chrome&&Le.android&&(h=ue.find(u=>u.inputType==t.inputType))&&(f.observer.delayAndroidKey(h.key,h.keyCode),h.key=="Backspace"||h.key=="Delete")){let u=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var g;(((g=window.visualViewport)===null||g===void 0?void 0:g.height)||0)>u+10&&f.hasFocus&&(f.contentDOM.blur(),f.focus())},100)}};const ri=["pre-wrap","normal","pre-line","break-spaces"];class br{constructor(t){this.lineWrapping=t,this.doc=q.xv.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,r){let h=this.doc.lineAt(r).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(h+=Math.max(0,Math.ceil((r-t-h*this.lineLength*.5)/this.lineLength))),this.lineHeight*h}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return ri.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let r=!1;for(let h=0;h<t.length;h++){let u=t[h];u<0?h++:this.heightSamples[Math.floor(u*10)]||(r=!0,this.heightSamples[Math.floor(u*10)]=!0)}return r}refresh(t,r,h,u,g){let y=ri.indexOf(t)>-1,S=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=y;if(this.lineWrapping=y,this.lineHeight=r,this.charWidth=h,this.lineLength=u,S){this.heightSamples={};for(let M=0;M<g.length;M++){let R=g[M];R<0?M++:this.heightSamples[Math.floor(R*10)]=!0}}return S}}class Xi{constructor(t,r){this.from=t,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class si{constructor(t,r,h,u,g){this.from=t,this.length=r,this.top=h,this.height=u,this.type=g}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let r=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new si(this.from,this.length+t.length,this.top,this.height+t.height,r)}}var bt=function(f){return f[f.ByPos=0]="ByPos",f[f.ByHeight=1]="ByHeight",f[f.ByPosNoHeight=2]="ByPosNoHeight",f}(bt||(bt={}));const vn=.001;class St{constructor(t,r,h=2){this.length=t,this.height=r,this.flags=h}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t,r){this.height!=r&&(Math.abs(this.height-r)>vn&&(t.heightChanged=!0),this.height=r)}replace(t,r,h){return St.of(h)}decomposeLeft(t,r){r.push(this)}decomposeRight(t,r){r.push(this)}applyChanges(t,r,h,u){let g=this,y=h.doc;for(let S=u.length-1;S>=0;S--){let{fromA:M,toA:R,fromB:L,toB:z}=u[S],Y=g.lineAt(M,bt.ByPosNoHeight,h.setDoc(r),0,0),te=Y.to>=R?Y:g.lineAt(R,bt.ByPosNoHeight,h,0,0);for(z+=te.to-R,R=te.to;S>0&&Y.from<=u[S-1].toA;)M=u[S-1].fromA,L=u[S-1].fromB,S--,M<Y.from&&(Y=g.lineAt(M,bt.ByPosNoHeight,h,0,0));L+=Y.from-M,M=Y.from;let ce=Ut.build(h.setDoc(y),t,L,z);g=g.replace(M,R,ce)}return g.updateHeight(h,0)}static empty(){return new Tn(0,0)}static of(t){if(t.length==1)return t[0];let r=0,h=t.length,u=0,g=0;for(;;)if(r==h)if(u>g*2){let S=t[r-1];S.break?t.splice(--r,1,S.left,null,S.right):t.splice(--r,1,S.left,S.right),h+=1+S.break,u-=S.size}else if(g>u*2){let S=t[h];S.break?t.splice(h,1,S.left,null,S.right):t.splice(h,1,S.left,S.right),h+=2+S.break,g-=S.size}else break;else if(u<g){let S=t[r++];S&&(u+=S.size)}else{let S=t[--h];S&&(g+=S.size)}let y=0;return t[r-1]==null?(y=1,r--):t[r]==null&&(y=1,h++),new es(St.of(t.slice(0,r)),y,St.of(t.slice(h)))}}St.prototype.size=1;class ki extends St{constructor(t,r,h){super(t,r),this.type=h}blockAt(t,r,h,u){return new si(u,this.length,h,this.height,this.type)}lineAt(t,r,h,u,g){return this.blockAt(0,h,u,g)}forEachLine(t,r,h,u,g,y){t<=g+this.length&&r>=g&&y(this.blockAt(0,h,u,g))}updateHeight(t,r=0,h=!1,u){return u&&u.from<=r&&u.more&&this.setHeight(t,u.heights[u.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Tn extends ki{constructor(t,r){super(t,r,pt.Text),this.collapsed=0,this.widgetHeight=0}replace(t,r,h){let u=h[0];return h.length==1&&(u instanceof Tn||u instanceof En&&u.flags&4)&&Math.abs(this.length-u.length)<10?(u instanceof En?u=new Tn(u.length,this.height):u.height=this.height,this.outdated||(u.outdated=!1),u):St.of(h)}updateHeight(t,r=0,h=!1,u){return u&&u.from<=r&&u.more?this.setHeight(t,u.heights[u.index++]):(h||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class En extends St{constructor(t){super(t,0)}heightMetrics(t,r){let h=t.doc.lineAt(r).number,u=t.doc.lineAt(r+this.length).number,g=u-h+1,y,S=0;if(t.lineWrapping){let M=Math.min(this.height,t.lineHeight*g);y=M/g,S=(this.height-M)/(this.length-g-1)}else y=this.height/g;return{firstLine:h,lastLine:u,perLine:y,perChar:S}}blockAt(t,r,h,u){let{firstLine:g,lastLine:y,perLine:S,perChar:M}=this.heightMetrics(r,u);if(r.lineWrapping){let R=u+Math.round(Math.max(0,Math.min(1,(t-h)/this.height))*this.length),L=r.doc.lineAt(R),z=S+L.length*M,Y=Math.max(h,t-z/2);return new si(L.from,L.length,Y,z,pt.Text)}else{let R=Math.max(0,Math.min(y-g,Math.floor((t-h)/S))),{from:L,length:z}=r.doc.line(g+R);return new si(L,z,h+S*R,S,pt.Text)}}lineAt(t,r,h,u,g){if(r==bt.ByHeight)return this.blockAt(t,h,u,g);if(r==bt.ByPosNoHeight){let{from:te,to:ce}=h.doc.lineAt(t);return new si(te,ce-te,0,0,pt.Text)}let{firstLine:y,perLine:S,perChar:M}=this.heightMetrics(h,g),R=h.doc.lineAt(t),L=S+R.length*M,z=R.number-y,Y=u+S*z+M*(R.from-g-z);return new si(R.from,R.length,Math.max(u,Math.min(Y,u+this.height-L)),L,pt.Text)}forEachLine(t,r,h,u,g,y){t=Math.max(t,g),r=Math.min(r,g+this.length);let{firstLine:S,perLine:M,perChar:R}=this.heightMetrics(h,g);for(let L=t,z=u;L<=r;){let Y=h.doc.lineAt(L);if(L==t){let ce=Y.number-S;z+=M*ce+R*(t-g-ce)}let te=M+R*Y.length;y(new si(Y.from,Y.length,z,te,pt.Text)),z+=te,L=Y.to+1}}replace(t,r,h){let u=this.length-r;if(u>0){let g=h[h.length-1];g instanceof En?h[h.length-1]=new En(g.length+u):h.push(null,new En(u-1))}if(t>0){let g=h[0];g instanceof En?h[0]=new En(t+g.length):h.unshift(new En(t-1),null)}return St.of(h)}decomposeLeft(t,r){r.push(new En(t-1),null)}decomposeRight(t,r){r.push(null,new En(this.length-t-1))}updateHeight(t,r=0,h=!1,u){let g=r+this.length;if(u&&u.from<=r+this.length&&u.more){let y=[],S=Math.max(r,u.from),M=-1;for(u.from>r&&y.push(new En(u.from-r-1).updateHeight(t,r));S<=g&&u.more;){let L=t.doc.lineAt(S).length;y.length&&y.push(null);let z=u.heights[u.index++];M==-1?M=z:Math.abs(z-M)>=vn&&(M=-2);let Y=new Tn(L,z);Y.outdated=!1,y.push(Y),S+=L+1}S<=g&&y.push(null,new En(g-S).updateHeight(t,S));let R=St.of(y);return(M<0||Math.abs(R.height-this.height)>=vn||Math.abs(M-this.heightMetrics(t,r).perLine)>=vn)&&(t.heightChanged=!0),R}else(h||this.outdated)&&(this.setHeight(t,t.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class es extends St{constructor(t,r,h){super(t.length+r+h.length,t.height+h.height,r|(t.outdated||h.outdated?2:0)),this.left=t,this.right=h,this.size=t.size+h.size}get break(){return this.flags&1}blockAt(t,r,h,u){let g=h+this.left.height;return t<g?this.left.blockAt(t,r,h,u):this.right.blockAt(t,r,g,u+this.left.length+this.break)}lineAt(t,r,h,u,g){let y=u+this.left.height,S=g+this.left.length+this.break,M=r==bt.ByHeight?t<y:t<S,R=M?this.left.lineAt(t,r,h,u,g):this.right.lineAt(t,r,h,y,S);if(this.break||(M?R.to<S:R.from>S))return R;let L=r==bt.ByPosNoHeight?bt.ByPosNoHeight:bt.ByPos;return M?R.join(this.right.lineAt(S,L,h,y,S)):this.left.lineAt(S,L,h,u,g).join(R)}forEachLine(t,r,h,u,g,y){let S=u+this.left.height,M=g+this.left.length+this.break;if(this.break)t<M&&this.left.forEachLine(t,r,h,u,g,y),r>=M&&this.right.forEachLine(t,r,h,S,M,y);else{let R=this.lineAt(M,bt.ByPos,h,u,g);t<R.from&&this.left.forEachLine(t,R.from-1,h,u,g,y),R.to>=t&&R.from<=r&&y(R),r>R.to&&this.right.forEachLine(R.to+1,r,h,S,M,y)}}replace(t,r,h){let u=this.left.length+this.break;if(r<u)return this.balanced(this.left.replace(t,r,h),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-u,r-u,h));let g=[];t>0&&this.decomposeLeft(t,g);let y=g.length;for(let S of h)g.push(S);if(t>0&&Di(g,y-1),r<this.length){let S=g.length;this.decomposeRight(r,g),Di(g,S)}return St.of(g)}decomposeLeft(t,r){let h=this.left.length;if(t<=h)return this.left.decomposeLeft(t,r);r.push(this.left),this.break&&(h++,t>=h&&r.push(null)),t>h&&this.right.decomposeLeft(t-h,r)}decomposeRight(t,r){let h=this.left.length,u=h+this.break;if(t>=u)return this.right.decomposeRight(t-u,r);t<h&&this.left.decomposeRight(t,r),this.break&&t<u&&r.push(null),r.push(this.right)}balanced(t,r){return t.size>2*r.size||r.size>2*t.size?St.of(this.break?[t,null,r]:[t,r]):(this.left=t,this.right=r,this.height=t.height+r.height,this.outdated=t.outdated||r.outdated,this.size=t.size+r.size,this.length=t.length+this.break+r.length,this)}updateHeight(t,r=0,h=!1,u){let{left:g,right:y}=this,S=r+g.length+this.break,M=null;return u&&u.from<=r+g.length&&u.more?M=g=g.updateHeight(t,r,h,u):g.updateHeight(t,r,h),u&&u.from<=S+y.length&&u.more?M=y=y.updateHeight(t,S,h,u):y.updateHeight(t,S,h),M?this.balanced(g,y):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Di(f,t){let r,h;f[t]==null&&(r=f[t-1])instanceof En&&(h=f[t+1])instanceof En&&f.splice(t-1,3,new En(r.length+1+h.length))}const Li=5;class Ut{constructor(t,r){this.pos=t,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,r){if(this.lineStart>-1){let h=Math.min(r,this.lineEnd),u=this.nodes[this.nodes.length-1];u instanceof Tn?u.length+=h-this.pos:(h>this.pos||!this.isCovered)&&this.nodes.push(new Tn(h-this.pos,-1)),this.writtenTo=h,r>h&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(t,r,h){if(t<r||h.heightRelevant){let u=h.widget?h.widget.estimatedHeight:0;u<0&&(u=this.oracle.lineHeight);let g=r-t;h.block?this.addBlock(new ki(g,u,h.type)):(g||u>=Li)&&this.addLineDeco(u,g)}else r>t&&this.span(t,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=r,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Tn(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,r){let h=new En(r-t);return this.oracle.doc.lineAt(t).to==r&&(h.flags|=4),h}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Tn)return t;let r=new Tn(0,-1);return this.nodes.push(r),r}addBlock(t){this.enterLine(),t.type==pt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=pt.WidgetBefore&&(this.covering=t)}addLineDeco(t,r){let h=this.ensureLine();h.length+=r,h.collapsed+=r,h.widgetHeight=Math.max(h.widgetHeight,t),this.writtenTo=this.pos=this.pos+r}finish(t){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof Tn)&&!this.isCovered?this.nodes.push(new Tn(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let h=t;for(let u of this.nodes)u instanceof Tn&&u.updateHeight(this.oracle,h),h+=u?u.length:1;return this.nodes}static build(t,r,h,u){let g=new Ut(h,t);return q.Xs.spans(r,h,u,g,0),g.finish(h)}}function hr(f,t,r){let h=new Yn;return q.Xs.compare(f,t,r,h,0),h.changes}class Yn{constructor(){this.changes=[]}compareRange(){}comparePoint(t,r,h,u){(t<r||h&&h.heightRelevant||u&&u.heightRelevant)&&Ri(t,r,this.changes,5)}}function wo(f,t){let r=f.getBoundingClientRect(),h=f.ownerDocument,u=h.defaultView||window,g=Math.max(0,r.left),y=Math.min(u.innerWidth,r.right),S=Math.max(0,r.top),M=Math.min(u.innerHeight,r.bottom);for(let R=f.parentNode;R&&R!=h.body;)if(R.nodeType==1){let L=R,z=window.getComputedStyle(L);if((L.scrollHeight>L.clientHeight||L.scrollWidth>L.clientWidth)&&z.overflow!="visible"){let Y=L.getBoundingClientRect();g=Math.max(g,Y.left),y=Math.min(y,Y.right),S=Math.max(S,Y.top),M=R==f.parentNode?Y.bottom:Math.min(M,Y.bottom)}R=z.position=="absolute"||z.position=="fixed"?L.offsetParent:L.parentNode}else if(R.nodeType==11)R=R.host;else break;return{left:g-r.left,right:Math.max(g,y)-r.left,top:S-(r.top+t),bottom:Math.max(S,M)-(r.top+t)}}function Pi(f,t){let r=f.getBoundingClientRect();return{left:0,right:r.right-r.left,top:t,bottom:r.bottom-(r.top+t)}}class yn{constructor(t,r,h){this.from=t,this.to=r,this.size=h}static same(t,r){if(t.length!=r.length)return!1;for(let h=0;h<t.length;h++){let u=t[h],g=r[h];if(u.from!=g.from||u.to!=g.to||u.size!=g.size)return!1}return!0}draw(t){return Zt.replace({widget:new qn(this.size,t)}).range(this.from,this.to)}}class qn extends ii{constructor(t,r){super(),this.size=t,this.vertical=r}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Cs{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=ta,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=W.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=t.facet(_).some(h=>typeof h!="function"&&h.class=="cm-lineWrapping");this.heightOracle=new br(r),this.stateDeco=t.facet(p).filter(h=>typeof h!="function"),this.heightMap=St.empty().applyChanges(this.stateDeco,q.xv.empty,this.heightOracle.setDoc(t.doc),[new E(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Zt.set(this.lineGaps.map(h=>h.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:r}=this.state.selection;for(let h=0;h<=1;h++){let u=h?r.head:r.anchor;if(!t.some(({from:g,to:y})=>u>=g&&u<=y)){let{from:g,to:y}=this.lineBlockAt(u);t.push(new ts(g,y))}}this.viewports=t.sort((h,u)=>h.from-u.from),this.scaler=this.heightMap.height<=7e6?ta:new na(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(this.scaler.scale==1?t:Sr(t,this.scaler))})}update(t,r=null){this.state=t.state;let h=this.stateDeco;this.stateDeco=this.state.facet(p).filter(R=>typeof R!="function");let u=t.changedRanges,g=E.extendWithRanges(u,hr(h,this.stateDeco,t?t.changes:q.as.empty(this.state.doc.length))),y=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),g),this.heightMap.height!=y&&(t.flags|=2);let S=g.length?this.mapViewport(this.viewport,t.changes):this.viewport;(r&&(r.range.head<S.from||r.range.head>S.to)||!this.viewportIsAppropriate(S))&&(S=this.getViewport(0,r));let M=!t.changes.empty||t.flags&2||S.from!=this.viewport.from||S.to!=this.viewport.to;this.viewport=S,this.updateForViewport(),M&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(wr)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let r=t.contentDOM,h=window.getComputedStyle(r),u=this.heightOracle,g=h.whiteSpace;this.defaultTextDirection=h.direction=="rtl"?W.RTL:W.LTR;let y=this.heightOracle.mustRefreshForWrapping(g),S=r.getBoundingClientRect(),M=y||this.mustMeasureContent||this.contentDOMHeight!=S.height;this.contentDOMHeight=S.height,this.mustMeasureContent=!1;let R=0,L=0,z=parseInt(h.paddingTop)||0,Y=parseInt(h.paddingBottom)||0;(this.paddingTop!=z||this.paddingBottom!=Y)&&(this.paddingTop=z,this.paddingBottom=Y,R|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(u.lineWrapping&&(M=!0),this.editorWidth=t.scrollDOM.clientWidth,R|=8);let te=(this.printing?Pi:wo)(r,this.paddingTop),ce=te.top-this.pixelViewport.top,be=te.bottom-this.pixelViewport.bottom;this.pixelViewport=te;let ve=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(ve!=this.inView&&(this.inView=ve,ve&&(M=!0)),!this.inView&&!this.scrollTarget)return 0;let Re=S.width;if((this.contentDOMWidth!=Re||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=S.width,this.editorHeight=t.scrollDOM.clientHeight,R|=8),M){let qt=t.docView.measureVisibleLineHeights(this.viewport);if(u.mustRefreshForHeights(qt)&&(y=!0),y||u.lineWrapping&&Math.abs(Re-this.contentDOMWidth)>u.charWidth){let{lineHeight:_t,charWidth:tn}=t.docView.measureTextSize();y=_t>0&&u.refresh(g,_t,tn,Re/tn,qt),y&&(t.docView.minWidth=0,R|=8)}ce>0&&be>0?L=Math.max(ce,be):ce<0&&be<0&&(L=Math.min(ce,be)),u.heightChanged=!1;for(let _t of this.viewports){let tn=_t.from==this.viewport.from?qt:t.docView.measureVisibleLineHeights(_t);this.heightMap=(y?St.empty().applyChanges(this.stateDeco,q.xv.empty,this.heightOracle,[new E(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(u,0,y,new Xi(_t.from,tn))}u.heightChanged&&(R|=2)}let xt=!this.viewportIsAppropriate(this.viewport,L)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return xt&&(this.viewport=this.getViewport(L,this.scrollTarget)),this.updateForViewport(),(R&2||xt)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(y?[]:this.lineGaps,t)),R|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),R}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,r){let h=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),u=this.heightMap,g=this.heightOracle,{visibleTop:y,visibleBottom:S}=this,M=new ts(u.lineAt(y-h*1e3,bt.ByHeight,g,0,0).from,u.lineAt(S+(1-h)*1e3,bt.ByHeight,g,0,0).to);if(r){let{head:R}=r.range;if(R<M.from||R>M.to){let L=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),z=u.lineAt(R,bt.ByPos,g,0,0),Y;r.y=="center"?Y=(z.top+z.bottom)/2-L/2:r.y=="start"||r.y=="nearest"&&R<M.from?Y=z.top:Y=z.bottom-L,M=new ts(u.lineAt(Y-1e3/2,bt.ByHeight,g,0,0).from,u.lineAt(Y+L+1e3/2,bt.ByHeight,g,0,0).to)}}return M}mapViewport(t,r){let h=r.mapPos(t.from,-1),u=r.mapPos(t.to,1);return new ts(this.heightMap.lineAt(h,bt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(u,bt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:r},h=0){if(!this.inView)return!0;let{top:u}=this.heightMap.lineAt(t,bt.ByPos,this.heightOracle,0,0),{bottom:g}=this.heightMap.lineAt(r,bt.ByPos,this.heightOracle,0,0),{visibleTop:y,visibleBottom:S}=this;return(t==0||u<=y-Math.max(10,Math.min(-h,250)))&&(r==this.state.doc.length||g>=S+Math.max(10,Math.min(h,250)))&&u>y-2*1e3&&g<S+2*1e3}mapLineGaps(t,r){if(!t.length||r.empty)return t;let h=[];for(let u of t)r.touchesRange(u.from,u.to)||h.push(new yn(r.mapPos(u.from),r.mapPos(u.to),u.size));return h}ensureLineGaps(t,r){let h=this.heightOracle.lineWrapping,u=h?1e4:2e3,g=u>>1,y=u<<1;if(this.defaultTextDirection!=W.LTR&&!h)return[];let S=[],M=(R,L,z,Y)=>{if(L-R<g)return;let te=this.state.selection.main,ce=[te.from];te.empty||ce.push(te.to);for(let ve of ce)if(ve>R&&ve<L){M(R,ve-10,z,Y),M(ve+10,L,z,Y);return}let be=So(t,ve=>ve.from>=z.from&&ve.to<=z.to&&Math.abs(ve.from-R)<g&&Math.abs(ve.to-L)<g&&!ce.some(Re=>ve.from<Re&&ve.to>Re));if(!be){if(L<z.to&&r&&h&&r.visibleRanges.some(ve=>ve.from<=L&&ve.to>=L)){let ve=r.moveToLineBoundary(q.jT.cursor(L),!1,!0).head;ve>R&&(L=ve)}be=new yn(R,L,this.gapSize(z,R,L,Y))}S.push(be)};for(let R of this.viewportLines){if(R.length<y)continue;let L=Rl(R.from,R.to,this.stateDeco);if(L.total<y)continue;let z=this.scrollTarget?this.scrollTarget.range.head:null,Y,te;if(h){let ce=u/this.heightOracle.lineLength*this.heightOracle.lineHeight,be,ve;if(z!=null){let Re=jo(L,z),xt=((this.visibleBottom-this.visibleTop)/2+ce)/R.height;be=Re-xt,ve=Re+xt}else be=(this.visibleTop-R.top-ce)/R.height,ve=(this.visibleBottom-R.top+ce)/R.height;Y=bo(L,be),te=bo(L,ve)}else{let ce=L.total*this.heightOracle.charWidth,be=u*this.heightOracle.charWidth,ve,Re;if(z!=null){let xt=jo(L,z),qt=((this.pixelViewport.right-this.pixelViewport.left)/2+be)/ce;ve=xt-qt,Re=xt+qt}else ve=(this.pixelViewport.left-be)/ce,Re=(this.pixelViewport.right+be)/ce;Y=bo(L,ve),te=bo(L,Re)}Y>R.from&&M(R.from,Y,R,L),te<R.to&&M(te,R.to,R,L)}return S}gapSize(t,r,h,u){let g=jo(u,h)-jo(u,r);return this.heightOracle.lineWrapping?t.height*g:u.total*this.heightOracle.charWidth*g}updateLineGaps(t){yn.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Zt.set(t.map(r=>r.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];q.Xs.spans(t,this.viewport.from,this.viewport.to,{span(u,g){r.push({from:u,to:g})},point(){}},20);let h=r.length!=this.visibleRanges.length||this.visibleRanges.some((u,g)=>u.from!=r[g].from||u.to!=r[g].to);return this.visibleRanges=r,h?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(r=>r.from<=t&&r.to>=t)||Sr(this.heightMap.lineAt(t,bt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return Sr(this.heightMap.lineAt(this.scaler.fromDOM(t),bt.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(t){return Sr(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ts{constructor(t,r){this.from=t,this.to=r}}function Rl(f,t,r){let h=[],u=f,g=0;return q.Xs.spans(r,f,t,{span(){},point(y,S){y>u&&(h.push({from:u,to:y}),g+=y-u),u=S}},20),u<t&&(h.push({from:u,to:t}),g+=t-u),{total:g,ranges:h}}function bo({total:f,ranges:t},r){if(r<=0)return t[0].from;if(r>=1)return t[t.length-1].to;let h=Math.floor(f*r);for(let u=0;;u++){let{from:g,to:y}=t[u],S=y-g;if(h<=S)return g+h;h-=S}}function jo(f,t){let r=0;for(let{from:h,to:u}of f.ranges){if(t<=u){r+=t-h;break}r+=u-h}return r/f.total}function So(f,t){for(let r of f)if(t(r))return r}const ta={toDOM(f){return f},fromDOM(f){return f},scale:1};class na{constructor(t,r,h){let u=0,g=0,y=0;this.viewports=h.map(({from:S,to:M})=>{let R=r.lineAt(S,bt.ByPos,t,0,0).top,L=r.lineAt(M,bt.ByPos,t,0,0).bottom;return u+=L-R,{from:S,to:M,top:R,bottom:L,domTop:0,domBottom:0}}),this.scale=(7e6-u)/(r.height-u);for(let S of this.viewports)S.domTop=y+(S.top-g)*this.scale,y=S.domBottom=S.domTop+(S.bottom-S.top),g=S.bottom}toDOM(t){for(let r=0,h=0,u=0;;r++){let g=r<this.viewports.length?this.viewports[r]:null;if(!g||t<g.top)return u+(t-h)*this.scale;if(t<=g.bottom)return g.domTop+(t-g.top);h=g.bottom,u=g.domBottom}}fromDOM(t){for(let r=0,h=0,u=0;;r++){let g=r<this.viewports.length?this.viewports[r]:null;if(!g||t<g.domTop)return h+(t-u)/this.scale;if(t<=g.domBottom)return g.top+(t-g.domTop);h=g.bottom,u=g.domBottom}}}function Sr(f,t){if(t.scale==1)return f;let r=t.toDOM(f.top),h=t.toDOM(f.bottom);return new si(f.from,f.length,r,h-r,Array.isArray(f.type)?f.type.map(u=>Sr(u,t)):f.type)}const $r=q.r$.define({combine:f=>f.join(" ")}),ks=q.r$.define({combine:f=>f.indexOf(!0)>-1}),Fs=N.V.newName(),Xo=N.V.newName(),Cr=N.V.newName(),Xs={"&light":"."+Xo,"&dark":"."+Cr};function Ws(f,t,r){return new N.V(t,{finish(h){return/&/.test(h)?h.replace(/&\w*/,u=>{if(u=="&")return f;if(!r||!r[u])throw new RangeError(`Unsupported selector: ${u}`);return r[u]}):f+" "+h}})}const El=Ws("."+Fs,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Xs);class Co{constructor(t,r,h,u){this.typeOver=u,this.bounds=null,this.text="";let{impreciseHead:g,impreciseAnchor:y}=t.docView;if(t.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=t.docView.domBoundsAround(r,h,0))){let S=g||y?[]:ns(t),M=new bl(S,t.state);M.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=M.text,this.newSel=Ol(S,this.bounds.from)}else{let S=t.observer.selectionRange,M=g&&g.node==S.focusNode&&g.offset==S.focusOffset||!It(t.contentDOM,S.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(S.focusNode,S.focusOffset),R=y&&y.node==S.anchorNode&&y.offset==S.anchorOffset||!It(t.contentDOM,S.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(S.anchorNode,S.anchorOffset);this.newSel=q.jT.single(R,M)}}}function Qn(f,t){let r,{newSel:h}=t,u=f.state.selection.main;if(t.bounds){let{from:g,to:y}=t.bounds,S=u.from,M=null;(f.inputState.lastKeyCode===8&&f.inputState.lastKeyTime>Date.now()-100||Le.android&&t.text.length<y-g)&&(S=u.to,M="end");let R=Nn(f.state.doc.sliceString(g,y,ar),t.text,S-g,M);R&&(Le.chrome&&f.inputState.lastKeyCode==13&&R.toB==R.from+2&&t.text.slice(R.from,R.toB)==ar+ar&&R.toB--,r={from:g+R.from,to:g+R.toA,insert:q.xv.of(t.text.slice(R.from,R.toB).split(ar))})}else h&&(!f.hasFocus&&f.state.facet(ws)||h.main.eq(u))&&(h=null);if(!r&&!h)return!1;if(!r&&t.typeOver&&!u.empty&&h&&h.main.empty?r={from:u.from,to:u.to,insert:f.state.doc.slice(u.from,u.to)}:r&&r.from>=u.from&&r.to<=u.to&&(r.from!=u.from||r.to!=u.to)&&u.to-u.from-(r.to-r.from)<=4?r={from:u.from,to:u.to,insert:f.state.doc.slice(u.from,r.from).append(r.insert).append(f.state.doc.slice(r.to,u.to))}:(Le.mac||Le.android)&&r&&r.from==r.to&&r.from==u.head-1&&/^\. ?$/.test(r.insert.toString())&&f.contentDOM.getAttribute("autocorrect")=="off"?(h&&r.insert.length==2&&(h=q.jT.single(h.main.anchor-1,h.main.head-1)),r={from:u.from,to:u.to,insert:q.xv.of([" "])}):Le.chrome&&r&&r.from==r.to&&r.from==u.head&&r.insert.toString()==`
 `&&f.lineWrapping&&(h&&(h=q.jT.single(h.main.anchor-1,h.main.head-1)),r={from:u.from,to:u.to,insert:q.xv.of([" "])}),r){let g=f.state;if(Le.ios&&f.inputState.flushIOSKey(f)||Le.android&&(r.from==u.from&&r.to==u.to&&r.insert.length==1&&r.insert.lines==2&&Ni(f.contentDOM,"Enter",13)||r.from==u.from-1&&r.to==u.to&&r.insert.length==0&&Ni(f.contentDOM,"Backspace",8)||r.from==u.from&&r.to==u.to+1&&r.insert.length==0&&Ni(f.contentDOM,"Delete",46)))return!0;let y=r.insert.toString();if(f.state.facet(Fr).some(R=>R(f,r.from,r.to,y)))return!0;f.inputState.composing>=0&&f.inputState.composing++;let S;if(r.from>=u.from&&r.to<=u.to&&r.to-r.from>=(u.to-u.from)/3&&(!h||h.main.empty&&h.main.from==r.from+r.insert.length)&&f.inputState.composing<0){let R=u.from<r.from?g.sliceDoc(u.from,r.from):"",L=u.to>r.to?g.sliceDoc(r.to,u.to):"";S=g.replaceSelection(f.state.toText(R+r.insert.sliceString(0,void 0,f.state.lineBreak)+L))}else{let R=g.changes(r),L=h&&!g.selection.main.eq(h.main)&&h.main.to<=R.newLength?h.main:void 0;if(g.selection.ranges.length>1&&f.inputState.composing>=0&&r.to<=u.to&&r.to>=u.to-10){let z=f.state.sliceDoc(r.from,r.to),Y=Uo(f)||f.state.doc.lineAt(u.head),te=u.to-r.to,ce=u.to-u.from;S=g.changeByRange(be=>{if(be.from==u.from&&be.to==u.to)return{changes:R,range:L||be.map(R)};let ve=be.to-te,Re=ve-z.length;if(be.to-be.from!=ce||f.state.sliceDoc(Re,ve)!=z||Y&&be.to>=Y.from&&be.from<=Y.to)return{range:be};let xt=g.changes({from:Re,to:ve,insert:r.insert}),qt=be.to-u.to;return{changes:xt,range:L?q.jT.range(Math.max(0,L.anchor+qt),Math.max(0,L.head+qt)):be.map(xt)}})}else S={changes:R,selection:L&&g.selection.replaceRange(L)}}let M="input.type";return f.composing&&(M+=".compose",f.inputState.compositionFirstChange&&(M+=".start",f.inputState.compositionFirstChange=!1)),f.dispatch(S,{scrollIntoView:!0,userEvent:M}),!0}else if(h&&!h.main.eq(u)){let g=!1,y="select";return f.inputState.lastSelectionTime>Date.now()-50&&(f.inputState.lastSelectionOrigin=="select"&&(g=!0),y=f.inputState.lastSelectionOrigin),f.dispatch({selection:h,scrollIntoView:g,userEvent:y}),!0}else return!1}function Nn(f,t,r,h){let u=Math.min(f.length,t.length),g=0;for(;g<u&&f.charCodeAt(g)==t.charCodeAt(g);)g++;if(g==u&&f.length==t.length)return null;let y=f.length,S=t.length;for(;y>0&&S>0&&f.charCodeAt(y-1)==t.charCodeAt(S-1);)y--,S--;if(h=="end"){let M=Math.max(0,g-Math.min(y,S));r-=y+M-g}if(y<g&&f.length<t.length){let M=r<=g&&r>=y?g-r:0;g-=M,S=g+(S-y),y=g}else if(S<g){let M=r<=g&&r>=S?g-r:0;g-=M,y=g+(y-S),S=g}return{from:g,toA:y,toB:S}}function ns(f){let t=[];if(f.root.activeElement!=f.contentDOM)return t;let{anchorNode:r,anchorOffset:h,focusNode:u,focusOffset:g}=f.observer.selectionRange;return r&&(t.push(new Zo(r,h)),(u!=r||g!=h)&&t.push(new Zo(u,g))),t}function Ol(f,t){if(f.length==0)return null;let r=f[0].pos,h=f.length==2?f[1].pos:r;return r>-1&&h>-1?q.jT.single(r+t,h+t):null}const Js={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Hi=Le.ie&&Le.ie_version<=11;class Dl{constructor(t){this.view=t,this.active=!1,this.selectionRange=new $n,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(r=>{for(let h of r)this.queue.push(h);(Le.ie&&Le.ie_version<=11||Le.ios&&t.composing)&&r.some(h=>h.type=="childList"&&h.removedNodes.length||h.type=="characterData"&&h.oldValue.length>h.target.nodeValue.length)?this.flushSoon():this.flush()}),Hi&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(t.contentDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runScrollHandlers(this.view,t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((r,h)=>r!=t[h]))){this.gapIntersection.disconnect();for(let r of t)this.gapIntersection.observe(r);this.gaps=t}}onSelectionChange(t){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:h}=this,u=this.selectionRange;if(h.state.facet(ws)?h.root.activeElement!=this.dom:!Dt(h.dom,u))return;let g=u.anchorNode&&h.docView.nearest(u.anchorNode);if(g&&g.ignoreEvent(t)){r||(this.selectionChanged=!1);return}(Le.ie&&Le.ie_version<=11||Le.android&&Le.chrome)&&!h.state.selection.main.empty&&u.focusNode&&Qt(u.focusNode,u.focusOffset,u.anchorNode,u.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,r=Le.safari&&t.root.nodeType==11&&Wt(this.dom.ownerDocument)==this.dom&&Ao(this.view)||ct(t.root);if(!r||this.selectionRange.eq(r))return!1;let h=Dt(this.dom,r);return h&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Or(this.dom,r)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(r),h&&(this.selectionChanged=!0),!0)}setSelectionRange(t,r){this.selectionRange.set(t.node,t.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,r=null;for(let h=this.dom;h;)if(h.nodeType==1)!r&&t<this.scrollTargets.length&&this.scrollTargets[t]==h?t++:r||(r=this.scrollTargets.slice(0,t)),r&&r.push(h),h=h.assignedSlot||h.parentNode;else if(h.nodeType==11)h=h.host;else break;if(t<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,t)),r){for(let h of this.scrollTargets)h.removeEventListener("scroll",this.onScroll);for(let h of this.scrollTargets=r)h.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Js),Hi&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Hi&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,r){var h;if(!this.delayedAndroidKey){let u=()=>{let g=this.delayedAndroidKey;g&&(this.clearDelayedAndroidKey(),!this.flush()&&g.force&&Ni(this.dom,g.key,g.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(u)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((h=this.delayedAndroidKey)===null||h===void 0)&&h.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let g of this.observer.takeRecords())t.push(g);t.length&&(this.queue=[]);let r=-1,h=-1,u=!1;for(let g of t){let y=this.readMutation(g);y&&(y.typeOver&&(u=!0),r==-1?{from:r,to:h}=y:(r=Math.min(y.from,r),h=Math.max(y.to,h)))}return{from:r,to:h,typeOver:u}}readChange(){let{from:t,to:r,typeOver:h}=this.processRecords(),u=this.selectionChanged&&Dt(this.dom,this.selectionRange);return t<0&&!u?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Co(this.view,t,r,h))}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let r=this.readChange();if(!r)return!1;let h=this.view.state,u=Qn(this.view,r);return this.view.state==h&&this.view.update([]),u}readMutation(t){let r=this.view.docView.nearest(t.target);if(!r||r.ignoreMutation(t))return null;if(r.markDirty(t.type=="attributes"),t.type=="attributes"&&(r.dirty|=4),t.type=="childList"){let h=ko(r,t.previousSibling||t.target.previousSibling,-1),u=ko(r,t.nextSibling||t.target.nextSibling,1);return{from:h?r.posAfter(h):r.posAtStart,to:u?r.posBefore(u):r.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,r,h,u;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(h=this.resizeScroll)===null||h===void 0||h.disconnect(),(u=this.resizeContent)===null||u===void 0||u.disconnect();for(let g of this.scrollTargets)g.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function ko(f,t,r){for(;t;){let h=Gt.get(t);if(h&&h.parent==f)return h;let u=t.parentNode;t=u!=f.dom?u:r>0?t.nextSibling:t.previousSibling}return null}function Ao(f){let t=null;function r(M){M.preventDefault(),M.stopImmediatePropagation(),t=M.getTargetRanges()[0]}if(f.contentDOM.addEventListener("beforeinput",r,!0),f.dom.ownerDocument.execCommand("indent"),f.contentDOM.removeEventListener("beforeinput",r,!0),!t)return null;let h=t.startContainer,u=t.startOffset,g=t.endContainer,y=t.endOffset,S=f.docView.domAtPos(f.state.selection.main.anchor);return Qt(S.node,S.offset,g,y)&&([h,u,g,y]=[g,y,h,u]),{anchorNode:h,anchorOffset:u,focusNode:g,focusOffset:y}}class V{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(r=>this.update([r])),this.dispatch=this.dispatch.bind(this),this._root=t.root||jr(t.parent)||document,this.viewState=new Cs(t.state||q.yy.create(t)),this.plugins=this.state.facet(Wr).map(r=>new Hr(r));for(let r of this.plugins)r.update(this);this.observer=new Dl(this),this.inputState=new ae(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Sl(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(t.length==1&&t[0]instanceof q.YW?t[0]:this.state.update(...t))}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,h=!1,u,g=this.state;for(let Y of t){if(Y.startState!=g)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");g=Y.state}if(this.destroyed){this.viewState.state=g;return}let y=this.hasFocus,S=0,M=null;t.some(Y=>Y.annotation(yi))?(this.inputState.notifiedFocused=y,S=1):y!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=y,M=Un(g,y),M||(S=1));let R=this.observer.delayedAndroidKey,L=null;if(R?(this.observer.clearDelayedAndroidKey(),L=this.observer.readChange(),(L&&!this.state.doc.eq(g.doc)||!this.state.selection.eq(g.selection))&&(L=null)):this.observer.clear(),g.facet(q.yy.phrases)!=this.state.facet(q.yy.phrases))return this.setState(g);u=D.create(this,g,t),u.flags|=S;let z=this.viewState.scrollTarget;try{this.updateState=2;for(let Y of t){if(z&&(z=z.map(Y.changes)),Y.scrollIntoView){let{main:te}=Y.state.selection;z=new Ui(te.empty?te:q.jT.cursor(te.head,te.head>te.anchor?-1:1))}for(let te of Y.effects)te.is(kn)&&(z=te.value)}this.viewState.update(u,z),this.bidiCache=De.update(this.bidiCache,u.changes),u.empty||(this.updatePlugins(u),this.inputState.update(u)),r=this.docView.update(u),this.state.facet(k)!=this.styleModules&&this.mountStyles(),h=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(r,t.some(Y=>Y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(u.startState.facet($r)!=u.state.facet($r)&&(this.viewState.mustMeasureContent=!0),(r||h||z||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!u.empty)for(let Y of this.state.facet(Ei))Y(u);(M||L)&&Promise.resolve().then(()=>{M&&this.state==M.startState&&this.dispatch(M),L&&!Qn(this,L)&&R.force&&Ni(this.contentDOM,R.key,R.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let r=this.hasFocus;try{for(let h of this.plugins)h.destroy(this);this.viewState=new Cs(t),this.plugins=t.facet(Wr).map(h=>new Hr(h)),this.pluginMap.clear();for(let h of this.plugins)h.update(this);this.docView=new Sl(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(t){let r=t.startState.facet(Wr),h=t.state.facet(Wr);if(r!=h){let u=[];for(let g of h){let y=r.indexOf(g);if(y<0)u.push(new Hr(g));else{let S=this.plugins[y];S.mustUpdate=t,u.push(S)}}for(let g of this.plugins)g.mustUpdate!=t&&g.destroy(this);this.plugins=u,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let u of this.plugins)u.mustUpdate=t;for(let u=0;u<this.plugins.length;u++)this.plugins[u].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let r=null,{scrollHeight:h,scrollTop:u,clientHeight:g}=this.scrollDOM,y=u>h-g-4?h:u;try{for(let S=0;;S++){this.updateState=1;let M=this.viewport,R=this.viewState.lineBlockAtHeight(y),L=this.viewState.measure(this);if(!L&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(S>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let z=[];L&4||([this.measureRequests,z]=[z,this.measureRequests]);let Y=z.map(ve=>{try{return ve.read(this)}catch(Re){return qi(this.state,Re),Q}}),te=D.create(this,this.state,[]),ce=!1,be=!1;te.flags|=L,r?r.flags|=L:r=te,this.updateState=2,te.empty||(this.updatePlugins(te),this.inputState.update(te),this.updateAttrs(),ce=this.docView.update(te));for(let ve=0;ve<z.length;ve++)if(Y[ve]!=Q)try{let Re=z[ve];Re.write&&Re.write(Y[ve],this)}catch(Re){qi(this.state,Re)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,be=!0;else{let ve=this.viewState.lineBlockAt(R.from).top-R.top;(ve>1||ve<-1)&&(this.scrollDOM.scrollTop+=ve,be=!0)}if(ce&&this.docView.updateSelection(!0),this.viewport.from==M.from&&this.viewport.to==M.to&&!be&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let S of this.state.facet(Ei))S(r)}get themeClasses(){return Fs+" "+(this.state.facet(ks)?Cr:Xo)+" "+this.state.facet($r)}updateAttrs(){let t=$e(this,zr,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ws)?"true":"false",class:"cm-content",style:`${Le.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),$e(this,_,r);let h=this.observer.ignore(()=>{let u=ke(this.contentDOM,this.contentAttrs,r),g=ke(this.dom,this.editorAttrs,t);return u||g});return this.editorAttrs=t,this.contentAttrs=r,h}showAnnouncements(t){let r=!0;for(let h of t)for(let u of h.effects)if(u.is(V.announce)){r&&(this.announceDOM.textContent=""),r=!1;let g=this.announceDOM.appendChild(document.createElement("div"));g.textContent=u.value}}mountStyles(){this.styleModules=this.state.facet(k),N.V.mount(this.root,this.styleModules.concat(El).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===t.key){this.measureRequests[r]=t;return}}this.measureRequests.push(t)}}plugin(t){let r=this.pluginMap.get(t);return(r===void 0||r&&r.spec!=t)&&this.pluginMap.set(t,r=this.plugins.find(h=>h.spec==t)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,r,h){return le(this,t,ne(this,t,r,h))}moveByGroup(t,r){return le(this,t,ne(this,t,r,h=>he(this,t.head,h)))}moveToLineBoundary(t,r,h=!0){return X(this,t,r,h)}moveVertically(t,r,h){return le(this,t,de(this,t,r,h))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,r=0){return this.docView.posFromDOM(t,r)}posAtCoords(t,r=!0){return this.readMeasured(),B(this,t,r)}coordsAtPos(t,r=1){this.readMeasured();let h=this.docView.coordsAt(t,r);if(!h||h.left==h.right)return h;let u=this.state.doc.lineAt(t),g=this.bidiSpans(u),y=g[ji.find(g,t-u.from,-1,r)];return Ht(h,y.dir==W.LTR==r>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(vi)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>oe)return mo(t.length);let r=this.textDirectionAt(t.from);for(let u of this.bidiCache)if(u.from==t.from&&u.dir==r)return u.order;let h=Vo(t.text,r);return this.bidiCache.push(new De(t.from,t.to,r,h)),h}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||Le.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Ln(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,r={}){return kn.of(new Ui(typeof t=="number"?q.jT.cursor(t):t,r.y,r.x,r.yMargin,r.xMargin))}static domEventHandlers(t){return _n.define(()=>({}),{eventHandlers:t})}static theme(t,r){let h=N.V.newName(),u=[$r.of(h),k.of(Ws(`.${h}`,t))];return r&&r.dark&&u.push(ks.of(!0)),u}static baseTheme(t){return q.Wl.lowest(k.of(Ws("."+Fs,t,Xs)))}static findFromDOM(t){var r;let h=t.querySelector(".cm-content"),u=h&&Gt.get(h)||Gt.get(t);return((r=u==null?void 0:u.rootView)===null||r===void 0?void 0:r.view)||null}}V.styleModule=k,V.inputHandler=Fr,V.focusChangeEffect=xs,V.perLineTextDirection=vi,V.exceptionSink=Jn,V.updateListener=Ei,V.editable=ws,V.mouseSelectionStyle=Yr,V.dragMovesSelection=qs,V.clickAddsSelectionRange=se,V.decorations=p,V.atomicRanges=v,V.scrollMargins=b,V.darkTheme=ks,V.contentAttributes=_,V.editorAttributes=zr,V.lineWrapping=V.contentAttributes.of({class:"cm-lineWrapping"}),V.announce=q.Py.define();const oe=4096,Q={};class De{constructor(t,r,h,u){this.from=t,this.to=r,this.dir=h,this.order=u}static update(t,r){if(r.empty)return t;let h=[],u=t.length?t[t.length-1].dir:W.LTR;for(let g=Math.max(0,t.length-10);g<t.length;g++){let y=t[g];y.dir==u&&!r.touchesRange(y.from,y.to)&&h.push(new De(r.mapPos(y.from,1),r.mapPos(y.to,-1),y.dir,y.order))}return h}}function $e(f,t,r){for(let h=f.state.facet(t),u=h.length-1;u>=0;u--){let g=h[u],y=typeof g=="function"?g(f):g;y&&On(y,r)}return r}const Tt=Le.mac?"mac":Le.windows?"win":Le.linux?"linux":"key";function Bn(f,t){const r=f.split(/-(?!$)/);let h=r[r.length-1];h=="Space"&&(h=" ");let u,g,y,S;for(let M=0;M<r.length-1;++M){const R=r[M];if(/^(cmd|meta|m)$/i.test(R))S=!0;else if(/^a(lt)?$/i.test(R))u=!0;else if(/^(c|ctrl|control)$/i.test(R))g=!0;else if(/^s(hift)?$/i.test(R))y=!0;else if(/^mod$/i.test(R))t=="mac"?S=!0:g=!0;else throw new Error("Unrecognized modifier name: "+R)}return u&&(h="Alt-"+h),g&&(h="Ctrl-"+h),S&&(h="Meta-"+h),y&&(h="Shift-"+h),h}function Jt(f,t,r){return t.altKey&&(f="Alt-"+f),t.ctrlKey&&(f="Ctrl-"+f),t.metaKey&&(f="Meta-"+f),r!==!1&&t.shiftKey&&(f="Shift-"+f),f}const To=q.Wl.default(V.domEventHandlers({keydown(f,t){return mt(As(t.state),f,t,"editor")}})),Bi=q.r$.define({enables:To}),zi=new WeakMap;function As(f){let t=f.facet(Bi),r=zi.get(t);return r||zi.set(t,r=Ro(t.reduce((h,u)=>h.concat(u),[]))),r}function Mo(f,t,r){return mt(As(f.state),t,f,r)}let Fn=null;const Ys=4e3;function Ro(f,t=Tt){let r=Object.create(null),h=Object.create(null),u=(y,S)=>{let M=h[y];if(M==null)h[y]=S;else if(M!=S)throw new Error("Key binding "+y+" is used both as a regular binding and as a multi-stroke prefix")},g=(y,S,M,R)=>{var L,z;let Y=r[y]||(r[y]=Object.create(null)),te=S.split(/ (?!$)/).map(ve=>Bn(ve,t));for(let ve=1;ve<te.length;ve++){let Re=te.slice(0,ve).join(" ");u(Re,!0),Y[Re]||(Y[Re]={preventDefault:!0,run:[xt=>{let qt=Fn={view:xt,prefix:Re,scope:y};return setTimeout(()=>{Fn==qt&&(Fn=null)},Ys),!0}]})}let ce=te.join(" ");u(ce,!1);let be=Y[ce]||(Y[ce]={preventDefault:!1,run:((z=(L=Y._any)===null||L===void 0?void 0:L.run)===null||z===void 0?void 0:z.slice())||[]});M&&be.run.push(M),R&&(be.preventDefault=!0)};for(let y of f){let S=y.scope?y.scope.split(" "):["editor"];if(y.any)for(let R of S){let L=r[R]||(r[R]=Object.create(null));L._any||(L._any={preventDefault:!1,run:[]});for(let z in L)L[z].run.push(y.any)}let M=y[t]||y.key;if(M)for(let R of S)g(R,M,y.run,y.preventDefault),y.shift&&g(R,"Shift-"+M,y.shift,y.preventDefault)}return r}function mt(f,t,r,h){let u=Be(t),g=(0,q.gm)(u,0),y=(0,q.nZ)(g)==u.length&&u!=" ",S="",M=!1;Fn&&Fn.view==r&&Fn.scope==h&&(S=Fn.prefix+" ",(M=Ae.indexOf(t.keyCode)<0)&&(Fn=null));let R=new Set,L=ce=>{if(ce){for(let be of ce.run)if(!R.has(be)&&(R.add(be),be(r,t)))return!0;ce.preventDefault&&(M=!0)}return!1},z=f[h],Y,te;if(z){if(L(z[S+Jt(u,t,!y)]))return!0;if(y&&(t.altKey||t.metaKey||t.ctrlKey)&&!(Le.windows&&t.ctrlKey&&t.altKey)&&(Y=Oe[t.keyCode])&&Y!=u){if(L(z[S+Jt(Y,t,!0)]))return!0;if(t.shiftKey&&(te=A[t.keyCode])!=u&&te!=Y&&L(z[S+Jt(te,t,!1)]))return!0}else if(y&&t.shiftKey&&L(z[S+Jt(u,t,!0)]))return!0;if(L(z._any))return!0}return M}class Qs{constructor(t,r,h,u,g){this.className=t,this.left=r,this.top=h,this.width=u,this.height=g}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,r){return r.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,r,h){if(h.empty){let u=t.coordsAtPos(h.head,h.assoc||1);if(!u)return[];let g=Zr(t);return[new Qs(r,u.left-g.left,u.top-g.top,null,u.bottom-u.top)]}else return eo(t,r,h)}}function Zr(f){let t=f.scrollDOM.getBoundingClientRect();return{left:(f.textDirection==W.LTR?t.left:t.right-f.scrollDOM.clientWidth)-f.scrollDOM.scrollLeft,top:t.top-f.scrollDOM.scrollTop}}function oi(f,t,r){let h=q.jT.cursor(t);return{from:Math.max(r.from,f.moveToLineBoundary(h,!1,!0).from),to:Math.min(r.to,f.moveToLineBoundary(h,!0,!0).from),type:pt.Text}}function Ii(f,t){let r=f.lineBlockAt(t);if(Array.isArray(r.type)){for(let h of r.type)if(h.to>t||h.to==t&&(h.to==r.to||h.type==pt.Text))return h}return r}function eo(f,t,r){if(r.to<=f.viewport.from||r.from>=f.viewport.to)return[];let h=Math.max(r.from,f.viewport.from),u=Math.min(r.to,f.viewport.to),g=f.textDirection==W.LTR,y=f.contentDOM,S=y.getBoundingClientRect(),M=Zr(f),R=y.querySelector(".cm-line"),L=R&&window.getComputedStyle(R),z=S.left+(L?parseInt(L.paddingLeft)+Math.min(0,parseInt(L.textIndent)):0),Y=S.right-(L?parseInt(L.paddingRight):0),te=Ii(f,h),ce=Ii(f,u),be=te.type==pt.Text?te:null,ve=ce.type==pt.Text?ce:null;if(f.lineWrapping&&(be&&(be=oi(f,h,be)),ve&&(ve=oi(f,u,ve))),be&&ve&&be.from==ve.from)return xt(qt(r.from,r.to,be));{let tn=be?qt(r.from,null,be):_t(te,!1),pn=ve?qt(null,r.to,ve):_t(ce,!0),_i=[];return(be||te).to<(ve||ce).from-1?_i.push(Re(z,tn.bottom,Y,pn.top)):tn.bottom<pn.top&&f.elementAtHeight((tn.bottom+pn.top)/2).type==pt.Text&&(tn.bottom=pn.top=(tn.bottom+pn.top)/2),xt(tn).concat(_i).concat(xt(pn))}function Re(tn,pn,_i,hs){return new Qs(t,tn-M.left,pn-M.top-.01,_i-tn,hs-pn+.01)}function xt({top:tn,bottom:pn,horizontal:_i}){let hs=[];for(let Es=0;Es<_i.length;Es+=2)hs.push(Re(_i[Es],tn,_i[Es+1],pn));return hs}function qt(tn,pn,_i){let hs=1e9,Es=-1e9,al=[];function da(ho,us,fo,dr,hl){let cs=f.coordsAtPos(ho,ho==_i.to?-2:2),Yi=f.coordsAtPos(fo,fo==_i.from?2:-2);hs=Math.min(cs.top,Yi.top,hs),Es=Math.max(cs.bottom,Yi.bottom,Es),hl==W.LTR?al.push(g&&us?z:cs.left,g&&dr?Y:Yi.right):al.push(!g&&dr?z:Yi.left,!g&&us?Y:cs.right)}let ao=tn!=null?tn:_i.from,fs=pn!=null?pn:_i.to;for(let ho of f.visibleRanges)if(ho.to>ao&&ho.from<fs)for(let us=Math.max(ho.from,ao),fo=Math.min(ho.to,fs);;){let dr=f.state.doc.lineAt(us);for(let hl of f.bidiSpans(dr)){let cs=hl.from+dr.from,Yi=hl.to+dr.from;if(cs>=fo)break;Yi>us&&da(Math.max(cs,us),tn==null&&cs<=ao,Math.min(Yi,fo),pn==null&&Yi>=fs,hl.dir)}if(us=dr.to+1,us>=fo)break}return al.length==0&&da(ao,tn==null,fs,pn==null,f.textDirection),{top:hs,bottom:Es,horizontal:al}}function _t(tn,pn){let _i=S.top+(pn?tn.top:tn.bottom);return{top:_i,bottom:_i,horizontal:[]}}}function to(f,t){return f.constructor==t.constructor&&f.eq(t)}class Wn{constructor(t,r){this.view=t,this.layer=r,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,t)}update(t){t.startState.facet(Ji)!=t.state.facet(Ji)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&t.view.requestMeasure(this.measureReq)}setOrder(t){let r=0,h=t.facet(Ji);for(;r<h.length&&h[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}draw(t){if(t.length!=this.drawn.length||t.some((r,h)=>!to(r,this.drawn[h]))){let r=this.dom.firstChild,h=0;for(let u of t)u.update&&r&&u.constructor&&this.drawn[h].constructor&&u.update(r,this.drawn[h])?(r=r.nextSibling,h++):this.dom.insertBefore(u.draw(),r);for(;r;){let u=r.nextSibling;r.remove(),r=u}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ji=q.r$.define();function Hs(f){return[_n.define(t=>new Wn(t,f)),Ji.of(f)]}const Ll=!Le.ios,is=q.r$.define({combine(f){return(0,q.BO)(f,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,r)=>Math.min(t,r),drawRangeCursor:(t,r)=>t||r})}});function rs(f={}){return[is.of(f),zs,io,Vs,wr.of(!0)]}function no(f){return f.startState.facet(is)!=f.state.facet(is)}const zs=Hs({above:!0,markers(f){let{state:t}=f,r=t.facet(is),h=[];for(let u of t.selection.ranges){let g=u==t.selection.main;if(u.empty?!g||Ll:r.drawRangeCursor){let y=g?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",S=u.empty?u:q.jT.cursor(u.head,u.head>u.anchor?-1:1);for(let M of Qs.forRange(f,y,S))h.push(M)}}return h},update(f,t){f.transactions.some(h=>h.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=no(f);return r&&Jo(f.state,t),f.docChanged||f.selectionSet||r},mount(f,t){Jo(t.state,f)},class:"cm-cursorLayer"});function Jo(f,t){t.style.animationDuration=f.facet(is).cursorBlinkRate+"ms"}const io=Hs({above:!1,markers(f){return f.state.selection.ranges.map(t=>t.empty?[]:Qs.forRange(f,"cm-selectionBackground",t)).reduce((t,r)=>t.concat(r))},update(f,t){return f.docChanged||f.selectionSet||f.viewportChanged||no(f)},class:"cm-selectionLayer"}),kr={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Ll&&(kr[".cm-line"].caretColor="transparent !important");const Vs=q.Wl.highest(V.theme(kr)),Yo=q.Py.define({map(f,t){return f==null?null:t.mapPos(f)}}),ro=q.QQ.define({create(){return null},update(f,t){return f!=null&&(f=t.changes.mapPos(f)),t.effects.reduce((r,h)=>h.is(Yo)?h.value:r,f)}}),Pl=_n.fromClass(class{constructor(f){this.view=f,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(f){var t;let r=f.state.field(ro);r==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(f.startState.field(ro)!=r||f.docChanged||f.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let f=this.view.state.field(ro),t=f!=null&&this.view.coordsAtPos(f);if(!t)return null;let r=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+this.view.scrollDOM.scrollLeft,top:t.top-r.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(f){this.cursor&&(f?(this.cursor.style.left=f.left+"px",this.cursor.style.top=f.top+"px",this.cursor.style.height=f.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(f){this.view.state.field(ro)!=f&&this.view.dispatch({effects:Yo.of(f)})}},{eventHandlers:{dragover(f){this.setDropPos(this.view.posAtCoords({x:f.clientX,y:f.clientY}))},dragleave(f){(f.target==this.view.contentDOM||!this.view.contentDOM.contains(f.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function so(){return[ro,Pl]}function Ar(f,t,r,h,u){t.lastIndex=0;for(let g=f.iterRange(r,h),y=r,S;!g.next().done;y+=g.value.length)if(!g.lineBreak)for(;S=t.exec(g.value);)u(y+S.index,S)}function Eo(f,t){let r=f.visibleRanges;if(r.length==1&&r[0].from==f.viewport.from&&r[0].to==f.viewport.to)return r;let h=[];for(let{from:u,to:g}of r)u=Math.max(f.state.doc.lineAt(u).from,u-t),g=Math.min(f.state.doc.lineAt(g).to,g+t),h.length&&h[h.length-1].to>=u?h[h.length-1].to=g:h.push({from:u,to:g});return h}class Oo{constructor(t){const{regexp:r,decoration:h,decorate:u,boundary:g,maxLength:y=1e3}=t;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,u)this.addMatch=(S,M,R,L)=>u(L,R,R+S[0].length,S,M);else if(typeof h=="function")this.addMatch=(S,M,R,L)=>{let z=h(S,M,R);z&&L(R,R+S[0].length,z)};else if(h)this.addMatch=(S,M,R,L)=>L(R,R+S[0].length,h);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=g,this.maxLength=y}createDeco(t){let r=new q.f_,h=r.add.bind(r);for(let{from:u,to:g}of Eo(t,this.maxLength))Ar(t.state.doc,this.regexp,u,g,(y,S)=>this.addMatch(S,t,y,h));return r.finish()}updateDeco(t,r){let h=1e9,u=-1;return t.docChanged&&t.changes.iterChanges((g,y,S,M)=>{M>t.view.viewport.from&&S<t.view.viewport.to&&(h=Math.min(S,h),u=Math.max(M,u))}),t.viewportChanged||u-h>1e3?this.createDeco(t.view):u>-1?this.updateRange(t.view,r.map(t.changes),h,u):r}updateRange(t,r,h,u){for(let g of t.visibleRanges){let y=Math.max(g.from,h),S=Math.min(g.to,u);if(S>y){let M=t.state.doc.lineAt(y),R=M.to<S?t.state.doc.lineAt(S):M,L=Math.max(g.from,M.from),z=Math.min(g.to,R.to);if(this.boundary){for(;y>M.from;y--)if(this.boundary.test(M.text[y-1-M.from])){L=y;break}for(;S<R.to;S++)if(this.boundary.test(R.text[S-R.from])){z=S;break}}let Y=[],te,ce=(be,ve,Re)=>Y.push(Re.range(be,ve));if(M==R)for(this.regexp.lastIndex=L-M.from;(te=this.regexp.exec(M.text))&&te.index<z-M.from;)this.addMatch(te,t,te.index+M.from,ce);else Ar(t.state.doc,this.regexp,L,z,(be,ve)=>this.addMatch(ve,t,be,ce));r=r.update({filterFrom:L,filterTo:z,filter:(be,ve)=>be<L||ve>z,add:Y})}}return r}}const vt=/x/.unicode!=null?"gu":"g",Vt=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,vt),xi={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Mt=null;function dn(){var f;if(Mt==null&&typeof document!="undefined"&&document.body){let t=document.body.style;Mt=((f=t.tabSize)!==null&&f!==void 0?f:t.MozTabSize)!=null}return Mt||!1}const Tr=q.r$.define({combine(f){let t=(0,q.BO)(f,{render:null,specialChars:Vt,addSpecialChars:null});return(t.replaceTabs=!dn())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,vt)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,vt)),t}});function Kr(f={}){return[Tr.of(f),oo()]}let wi=null;function oo(){return wi||(wi=_n.fromClass(class{constructor(f){this.view=f,this.decorations=Zt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(f.state.facet(Tr)),this.decorations=this.decorator.createDeco(f)}makeDecorator(f){return new Oo({regexp:f.specialChars,decoration:(t,r,h)=>{let{doc:u}=r.state,g=(0,q.gm)(t[0],0);if(g==9){let y=u.lineAt(h),S=r.state.tabSize,M=(0,q.IS)(y.text,S,h-y.from);return Zt.replace({widget:new Do((S-M%S)*this.view.defaultCharacterWidth)})}return this.decorationCache[g]||(this.decorationCache[g]=Zt.replace({widget:new ia(f,g)}))},boundary:f.replaceTabs?void 0:/[^]/})}update(f){let t=f.state.facet(Tr);f.startState.facet(Tr)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(f.view)):this.decorations=this.decorator.updateDeco(f,this.decorations)}},{decorations:f=>f.decorations}))}const lo="\u2022";function Qo(f){return f>=32?lo:f==10?"\u2424":String.fromCharCode(9216+f)}class ia extends ii{constructor(t,r){super(),this.options=t,this.code=r}eq(t){return t.code==this.code}toDOM(t){let r=Qo(this.code),h=t.state.phrase("Control character")+" "+(xi[this.code]||"0x"+this.code.toString(16)),u=this.options.render&&this.options.render(this.code,h,r);if(u)return u;let g=document.createElement("span");return g.textContent=r,g.title=h,g.setAttribute("aria-label",h),g.className="cm-specialChar",g}ignoreEvent(){return!1}}class Do extends ii{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}const Lo=null;function el(){return[Lo,_.of(f=>{var t;return((t=f.plugin(Lo))===null||t===void 0?void 0:t.attrs)||null})]}function Bl(){return fr}const tl=Zt.line({class:"cm-activeLine"}),fr=_n.fromClass(class{constructor(f){this.decorations=this.getDeco(f)}update(f){(f.docChanged||f.selectionSet)&&(this.decorations=this.getDeco(f.view))}getDeco(f){let t=-1,r=[];for(let h of f.state.selection.ranges){let u=f.lineBlockAt(h.head);u.from>t&&(r.push(tl.range(u.from)),t=u.from)}return Zt.set(r)}},{decorations:f=>f.decorations});class Il extends ii{constructor(t){super(),this.content=t}toDOM(){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}ignoreEvent(){return!1}}function Ea(f){return _n.fromClass(class{constructor(t){this.view=t,this.placeholder=Zt.set([Zt.widget({widget:new Il(f),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Zt.none:this.placeholder}},{decorations:t=>t.decorations})}const _l=2e3;function sf(f,t,r){let h=Math.min(t.line,r.line),u=Math.max(t.line,r.line),g=[];if(t.off>_l||r.off>_l||t.col<0||r.col<0){let y=Math.min(t.off,r.off),S=Math.max(t.off,r.off);for(let M=h;M<=u;M++){let R=f.doc.line(M);R.length<=S&&g.push(q.jT.range(R.from+y,R.to+S))}}else{let y=Math.min(t.col,r.col),S=Math.max(t.col,r.col);for(let M=h;M<=u;M++){let R=f.doc.line(M),L=(0,q.Gz)(R.text,y,f.tabSize,!0);if(L<0)g.push(q.jT.cursor(R.to));else{let z=(0,q.Gz)(R.text,S,f.tabSize);g.push(q.jT.range(R.from+L,R.from+z))}}}return g}function ra(f,t){let r=f.coordsAtPos(f.viewport.from);return r?Math.round(Math.abs((r.left-t)/f.defaultCharacterWidth)):-1}function Ts(f,t){let r=f.posAtCoords({x:t.clientX,y:t.clientY},!1),h=f.state.doc.lineAt(r),u=r-h.from,g=u>_l?-1:u==h.length?ra(f,t.clientX):(0,q.IS)(h.text,f.state.tabSize,r-h.from);return{line:h.number,col:g,off:u}}function Oa(f,t){let r=Ts(f,t),h=f.state.selection;return r?{update(u){if(u.docChanged){let g=u.changes.mapPos(u.startState.doc.line(r.line).from),y=u.state.doc.lineAt(g);r={line:y.number,col:r.col,off:Math.min(r.off,y.length)},h=h.map(u.changes)}},get(u,g,y){let S=Ts(f,u);if(!S)return h;let M=sf(f.state,r,S);return M.length?y?q.jT.create(M.concat(h.ranges)):q.jT.create(M):h}}:null}function O(f){let t=(f==null?void 0:f.eventFilter)||(r=>r.altKey&&r.button==0);return V.mouseSelectionStyle.of((r,h)=>t(h)?Oa(r,h):null)}const nl={Alt:[18,f=>f.altKey],Control:[17,f=>f.ctrlKey],Shift:[16,f=>f.shiftKey],Meta:[91,f=>f.metaKey]},sa={style:"cursor: crosshair"};function ur(f={}){let[t,r]=nl[f.key||"Alt"],h=_n.fromClass(class{constructor(u){this.view=u,this.isDown=!1}set(u){this.isDown!=u&&(this.isDown=u,this.view.update([]))}},{eventHandlers:{keydown(u){this.set(u.keyCode==t||r(u))},keyup(u){(u.keyCode==t||!r(u))&&this.set(!1)},mousemove(u){this.set(r(u))}}});return[h,V.contentAttributes.of(u=>{var g;return!((g=u.plugin(h))===null||g===void 0)&&g.isDown?sa:null})]}const Pt="-10000px";class Ch{constructor(t,r,h){this.facet=r,this.createTooltipView=h,this.input=t.state.facet(r),this.tooltips=this.input.filter(u=>u),this.tooltipViews=this.tooltips.map(h)}update(t){var r;let h=t.state.facet(this.facet),u=h.filter(y=>y);if(h===this.input){for(let y of this.tooltipViews)y.update&&y.update(t);return!1}let g=[];for(let y=0;y<u.length;y++){let S=u[y],M=-1;if(S){for(let R=0;R<this.tooltips.length;R++){let L=this.tooltips[R];L&&L.create==S.create&&(M=R)}if(M<0)g[y]=this.createTooltipView(S);else{let R=g[y]=this.tooltipViews[M];R.update&&R.update(t)}}}for(let y of this.tooltipViews)g.indexOf(y)<0&&(y.dom.remove(),(r=y.destroy)===null||r===void 0||r.call(y));return this.input=h,this.tooltips=u,this.tooltipViews=g,!0}}function of(f={}){return Ur.of(f)}function kh(f){let{win:t}=f;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const Ur=q.r$.define({combine:f=>{var t,r,h;return{position:Le.ios?"absolute":((t=f.find(u=>u.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((r=f.find(u=>u.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((h=f.find(u=>u.tooltipSpace))===null||h===void 0?void 0:h.tooltipSpace)||kh}}}),oa=new WeakMap,Nl=_n.fromClass(class{constructor(f){this.view=f,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=f.state.facet(Ur);this.position=t.position,this.parent=t.parent,this.classes=f.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Ch(f,Fl,r=>this.createTooltip(r)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),f.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let f of this.manager.tooltipViews)this.intersectionObserver.observe(f.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(f){f.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(f);t&&this.observeIntersection();let r=t||f.geometryChanged,h=f.state.facet(Ur);if(h.position!=this.position){this.position=h.position;for(let u of this.manager.tooltipViews)u.dom.style.position=this.position;r=!0}if(h.parent!=this.parent){this.parent&&this.container.remove(),this.parent=h.parent,this.createContainer();for(let u of this.manager.tooltipViews)this.container.appendChild(u.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(f){let t=f.create(this.view);if(t.dom.classList.add("cm-tooltip"),f.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=Pt,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var f,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(f=r.destroy)===null||f===void 0||f.call(r);(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let f=this.view.dom.getBoundingClientRect();return{editor:f,parent:this.parent?this.container.getBoundingClientRect():f,pos:this.manager.tooltips.map((t,r)=>{let h=this.manager.tooltipViews[r];return h.getCoords?h.getCoords(t.pos):this.view.coordsAtPos(t.pos)}),size:this.manager.tooltipViews.map(({dom:t})=>t.getBoundingClientRect()),space:this.view.state.facet(Ur).tooltipSpace(this.view)}}writeMeasure(f){var t;let{editor:r,space:h}=f,u=[];for(let g=0;g<this.manager.tooltips.length;g++){let y=this.manager.tooltips[g],S=this.manager.tooltipViews[g],{dom:M}=S,R=f.pos[g],L=f.size[g];if(!R||R.bottom<=Math.max(r.top,h.top)||R.top>=Math.min(r.bottom,h.bottom)||R.right<Math.max(r.left,h.left)-.1||R.left>Math.min(r.right,h.right)+.1){M.style.top=Pt;continue}let z=y.arrow?S.dom.querySelector(".cm-tooltip-arrow"):null,Y=z?7:0,te=L.right-L.left,ce=(t=oa.get(S))!==null&&t!==void 0?t:L.bottom-L.top,be=S.offset||La,ve=this.view.textDirection==W.LTR,Re=L.width>h.right-h.left?ve?h.left:h.right-L.width:ve?Math.min(R.left-(z?14:0)+be.x,h.right-te):Math.max(h.left,R.left-te+(z?14:0)-be.x),xt=!!y.above;!y.strictSide&&(xt?R.top-(L.bottom-L.top)-be.y<h.top:R.bottom+(L.bottom-L.top)+be.y>h.bottom)&&xt==h.bottom-R.bottom>R.top-h.top&&(xt=!xt);let qt=(xt?R.top-h.top:h.bottom-R.bottom)-Y;if(qt<ce&&S.resize!==!1){if(qt<this.view.defaultLineHeight){M.style.top=Pt;continue}oa.set(S,ce),M.style.height=(ce=qt)+"px"}else M.style.height&&(M.style.height="");let _t=xt?R.top-ce-Y-be.y:R.bottom+Y+be.y,tn=Re+te;if(S.overlap!==!0)for(let pn of u)pn.left<tn&&pn.right>Re&&pn.top<_t+ce&&pn.bottom>_t&&(_t=xt?pn.top-ce-2-Y:pn.bottom+Y+2);this.position=="absolute"?(M.style.top=_t-f.parent.top+"px",M.style.left=Re-f.parent.left+"px"):(M.style.top=_t+"px",M.style.left=Re+"px"),z&&(z.style.left=`${R.left+(ve?be.x:-be.x)-(Re+14-7)}px`),S.overlap!==!0&&u.push({left:Re,top:_t,right:tn,bottom:_t+ce}),M.classList.toggle("cm-tooltip-above",xt),M.classList.toggle("cm-tooltip-below",!xt),S.positioned&&S.positioned(f.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let f of this.manager.tooltipViews)f.dom.style.top=Pt}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Da=V.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),La={x:0,y:0},Fl=q.r$.define({enables:[Nl,Da]}),cr=q.r$.define();class la{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ch(t,cr,r=>this.createHostedView(r))}static create(t){return new la(t)}createHostedView(t){let r=t.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(r.dom),this.mounted&&r.mount&&r.mount(this.view),r}mount(t){for(let r of this.manager.tooltipViews)r.mount&&r.mount(t);this.mounted=!0}positioned(t){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(t)}update(t){this.manager.update(t)}}const Ah=Fl.compute([cr],f=>{let t=f.facet(cr).filter(r=>r);return t.length===0?null:{pos:Math.min(...t.map(r=>r.pos)),end:Math.max(...t.filter(r=>r.end!=null).map(r=>r.end)),create:la.create,above:t[0].above,arrow:t.some(r=>r.arrow)}});class Th{constructor(t,r,h,u,g){this.view=t,this.source=r,this.field=h,this.setHover=u,this.hoverTime=g,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,r=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(r==null)return;let h=this.view.coordsAtPos(r);if(h==null||t.y<h.top||t.y>h.bottom||t.x<h.left-this.view.defaultCharacterWidth||t.x>h.right+this.view.defaultCharacterWidth)return;let u=this.view.bidiSpans(this.view.state.doc.lineAt(r)).find(S=>S.from<=r&&S.to>=r),g=u&&u.dir==W.RTL?-1:1,y=this.source(this.view,r,t.x<h.left?-g:g);if(y!=null&&y.then){let S=this.pending={pos:r};y.then(M=>{this.pending==S&&(this.pending=null,M&&this.view.dispatch({effects:this.setHover.of(M)}))},M=>qi(this.view.state,M,"hover tooltip"))}else y&&this.view.dispatch({effects:this.setHover.of(y)})}mousemove(t){var r;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let h=this.active;if(h&&!Pa(this.lastMove.target)||this.pending){let{pos:u}=h||this.pending,g=(r=h==null?void 0:h.end)!==null&&r!==void 0?r:u;(u==g?this.view.posAtCoords(this.lastMove)!=u:!Mh(this.view,u,g,t.clientX,t.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Pa(t.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Pa(f){for(let t=f;t;t=t.parentNode)if(t.nodeType==1&&t.classList.contains("cm-tooltip"))return!0;return!1}function Mh(f,t,r,h,u,g){let y=document.createRange(),S=f.domAtPos(t),M=f.domAtPos(r);y.setEnd(M.node,M.offset),y.setStart(S.node,S.offset);let R=y.getClientRects();y.detach();for(let L=0;L<R.length;L++){let z=R[L];if(Math.max(z.top-u,u-z.bottom,z.left-h,h-z.right)<=g)return!0}return!1}function ss(f,t={}){let r=q.Py.define(),h=q.QQ.define({create(){return null},update(u,g){if(u&&(t.hideOnChange&&(g.docChanged||g.selection)||t.hideOn&&t.hideOn(g,u)))return null;if(u&&g.docChanged){let y=g.changes.mapPos(u.pos,-1,q.gc.TrackDel);if(y==null)return null;let S=Object.assign(Object.create(null),u);S.pos=y,u.end!=null&&(S.end=g.changes.mapPos(u.end)),u=S}for(let y of g.effects)y.is(r)&&(u=y.value),y.is(Ia)&&(u=null);return u},provide:u=>cr.from(u)});return[h,_n.define(u=>new Th(u,f,h,r,t.hoverTime||300)),Ah]}function Ba(f,t){let r=f.plugin(Nl);if(!r)return null;let h=r.manager.tooltips.indexOf(t);return h<0?null:r.manager.tooltipViews[h]}function Rh(f){return f.facet(cr).some(t=>t)}const Ia=q.Py.define(),lf=null;function af(f){var t;(t=f.plugin(Nl))===null||t===void 0||t.maybeMeasure()}const Ms=q.r$.define({combine(f){let t,r;for(let h of f)t=t||h.topContainer,r=r||h.bottomContainer;return{topContainer:t,bottomContainer:r}}});function hf(f){return f?[Ms.of(f)]:[]}function Po(f,t){let r=f.plugin(Vi),h=r?r.specs.indexOf(t):-1;return h>-1?r.panels[h]:null}const Vi=_n.fromClass(class{constructor(f){this.input=f.state.facet(Hl),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(f));let t=f.state.facet(Ms);this.top=new il(f,!0,t.topContainer),this.bottom=new il(f,!1,t.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(f){let t=f.state.facet(Ms);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new il(f.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new il(f.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=f.state.facet(Hl);if(r!=this.input){let h=r.filter(M=>M),u=[],g=[],y=[],S=[];for(let M of h){let R=this.specs.indexOf(M),L;R<0?(L=M(f.view),S.push(L)):(L=this.panels[R],L.update&&L.update(f)),u.push(L),(L.top?g:y).push(L)}this.specs=h,this.panels=u,this.top.sync(g),this.bottom.sync(y);for(let M of S)M.dom.classList.add("cm-panel"),M.mount&&M.mount()}else for(let h of this.panels)h.update&&h.update(f)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:f=>V.scrollMargins.of(t=>{let r=t.plugin(f);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class il{constructor(t,r,h){this.view=t,this.top=r,this.container=h,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let r of this.panels)r.destroy&&t.indexOf(r)<0&&r.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let t=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;t!=r.dom;)t=Wl(t);t=t.nextSibling}else this.dom.insertBefore(r.dom,t);for(;t;)t=Wl(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Wl(f){let t=f.nextSibling;return f.remove(),t}const Hl=q.r$.define({enables:Vi});class os extends q.uU{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}os.prototype.elementClass="",os.prototype.toDOM=void 0,os.prototype.mapMode=q.gc.TrackBefore,os.prototype.startSide=os.prototype.endSide=-1,os.prototype.point=!0;const rl=q.r$.define(),_a={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>q.Xs.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Bo=q.r$.define();function ff(f){return[zl(),Bo.of(Object.assign(Object.assign({},_a),f))]}const aa=q.r$.define({combine:f=>f.some(t=>t)});function zl(f){let t=[Vl];return f&&f.fixed===!1&&t.push(aa.of(!0)),t}const Vl=_n.fromClass(class{constructor(f){this.view=f,this.prevViewport=f.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=f.state.facet(Bo).map(t=>new ha(f,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!f.state.facet(aa),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),f.scrollDOM.insertBefore(this.dom,f.contentDOM)}update(f){if(this.updateGutters(f)){let t=this.prevViewport,r=f.view.viewport,h=Math.min(t.to,r.to)-Math.max(t.from,r.from);this.syncGutters(h<(r.to-r.from)*.8)}f.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(aa)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=f.view.viewport}syncGutters(f){let t=this.dom.nextSibling;f&&this.dom.remove();let r=q.Xs.iter(this.view.state.facet(rl),this.view.viewport.from),h=[],u=this.gutters.map(g=>new ol(g,this.view.viewport,-this.view.documentPadding.top));for(let g of this.view.viewportLineBlocks){let y;if(Array.isArray(g.type)){for(let S of g.type)if(S.type==pt.Text){y=S;break}}else y=g.type==pt.Text?g:void 0;if(y){h.length&&(h=[]),Na(r,h,g.from);for(let S of u)S.line(this.view,y,h)}}for(let g of u)g.finish();f&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(f){let t=f.startState.facet(Bo),r=f.state.facet(Bo),h=f.docChanged||f.heightChanged||f.viewportChanged||!q.Xs.eq(f.startState.facet(rl),f.state.facet(rl),f.view.viewport.from,f.view.viewport.to);if(t==r)for(let u of this.gutters)u.update(f)&&(h=!0);else{h=!0;let u=[];for(let g of r){let y=t.indexOf(g);y<0?u.push(new ha(this.view,g)):(this.gutters[y].update(f),u.push(this.gutters[y]))}for(let g of this.gutters)g.dom.remove(),u.indexOf(g)<0&&g.destroy();for(let g of u)this.dom.appendChild(g.dom);this.gutters=u}return h}destroy(){for(let f of this.gutters)f.destroy();this.dom.remove()}},{provide:f=>V.scrollMargins.of(t=>{let r=t.plugin(f);return!r||r.gutters.length==0||!r.fixed?null:t.textDirection==W.LTR?{left:r.dom.offsetWidth}:{right:r.dom.offsetWidth}})});function sl(f){return Array.isArray(f)?f:[f]}function Na(f,t,r){for(;f.value&&f.from<=r;)f.from==r&&t.push(f.value),f.next()}class ol{constructor(t,r,h){this.gutter=t,this.height=h,this.i=0,this.cursor=q.Xs.iter(t.markers,r.from)}line(t,r,h){let u=[];Na(this.cursor,u,r.from),h.length&&(u=u.concat(h));let g=this.gutter.config.lineMarker(t,r,u);g&&u.unshift(g);let y=this.gutter;if(u.length==0&&!y.config.renderEmptyElements)return;let S=r.top-this.height;if(this.i==y.elements.length){let M=new ls(t,r.height,S,u);y.elements.push(M),y.dom.appendChild(M.dom)}else y.elements[this.i].update(t,r.height,S,u);this.height=r.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let r=t.elements.pop();t.dom.removeChild(r.dom),r.destroy()}}}class ha{constructor(t,r){this.view=t,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let h in r.domEventHandlers)this.dom.addEventListener(h,u=>{let g=u.target,y;if(g!=this.dom&&this.dom.contains(g)){for(;g.parentNode!=this.dom;)g=g.parentNode;let M=g.getBoundingClientRect();y=(M.top+M.bottom)/2}else y=u.clientY;let S=t.lineBlockAtHeight(y-t.documentTop);r.domEventHandlers[h](t,S,u)&&u.preventDefault()});this.markers=sl(r.markers(t)),r.initialSpacer&&(this.spacer=new ls(t,0,0,[r.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let r=this.markers;if(this.markers=sl(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let u=this.config.updateSpacer(this.spacer.markers[0],t);u!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[u])}let h=t.view.viewport;return!q.Xs.eq(this.markers,r,h.from,h.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class ls{constructor(t,r,h,u){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,r,h,u)}update(t,r,h,u){this.height!=r&&(this.dom.style.height=(this.height=r)+"px"),this.above!=h&&(this.dom.style.marginTop=(this.above=h)?h+"px":""),fa(this.markers,u)||this.setMarkers(t,u)}setMarkers(t,r){let h="cm-gutterElement",u=this.dom.firstChild;for(let g=0,y=0;;){let S=y,M=g<r.length?r[g++]:null,R=!1;if(M){let L=M.elementClass;L&&(h+=" "+L);for(let z=y;z<this.markers.length;z++)if(this.markers[z].compare(M)){S=z,R=!0;break}}else S=this.markers.length;for(;y<S;){let L=this.markers[y++];if(L.toDOM){L.destroy(u);let z=u.nextSibling;u.remove(),u=z}}if(!M)break;M.toDOM&&(R?u=u.nextSibling:this.dom.insertBefore(M.toDOM(t),u)),R&&y++}this.dom.className=h,this.markers=r}destroy(){this.setMarkers(null,[])}}function fa(f,t){if(f.length!=t.length)return!1;for(let r=0;r<f.length;r++)if(!f[r].compare(t[r]))return!1;return!0}const $s=q.r$.define(),Ai=q.r$.define({combine(f){return(0,q.BO)(f,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,r){let h=Object.assign({},t);for(let u in r){let g=h[u],y=r[u];h[u]=g?(S,M,R)=>g(S,M,R)||y(S,M,R):y}return h}})}});class ua extends os{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function $l(f,t){return f.state.facet(Ai).formatNumber(t,f.state)}const Eh=Bo.compute([Ai],f=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet($s)},lineMarker(t,r,h){return h.some(u=>u.toDOM)?null:new ua($l(t,t.state.doc.lineAt(r.from).number))},lineMarkerChange:t=>t.startState.facet(Ai)!=t.state.facet(Ai),initialSpacer(t){return new ua($l(t,Rs(t.state.doc.lines)))},updateSpacer(t,r){let h=$l(r.view,Rs(r.view.state.doc.lines));return h==t.number?t:new ua(h)},domEventHandlers:f.facet(Ai).domEventHandlers}));function ll(f={}){return[Ai.of(f),zl(),Eh]}function Rs(f){let t=9;for(;t<f;)t=t*10+9;return t}const Fa=new class extends os{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Wa=rl.compute(["selection"],f=>{let t=[],r=-1;for(let h of f.selection.ranges){let u=f.doc.lineAt(h.head).from;u>r&&(r=u,t.push(Fa.range(u)))}return q.Xs.of(t)});function Io(){return Wa}const Ha=new Map;function Zl(f){let t=Ha.get(f);return t||Ha.set(f,t=Zt.mark({attributes:f==="	"?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":f.replace(/ /g,"\xB7")}})),t}function li(f){return _n.define(t=>({decorations:f.createDeco(t),update(r){this.decorations=f.updateDeco(r,this.decorations)}}),{decorations:t=>t.decorations})}const za=li(new Oo({regexp:/\t| +/g,decoration:f=>Zl(f[0]),boundary:/\S/}));function Oh(){return za}const as=li(new Oo({regexp:/\s+$/g,decoration:Zt.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function Va(){return as}const ca={HeightMap:St,HeightOracle:br,MeasuredHeights:Xi,QueryType:bt,ChangedRange:E,computeOrder:Vo,moveVisually:$o}},54964:function(Ze,hn,Pe){"use strict";Pe.d(hn,{V:function(){return ee}});const q="\u037C",N=typeof Symbol=="undefined"?"__"+q:Symbol.for(q),Oe=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),A=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class ee{constructor(Be,ct){this.rules=[];let{finish:It}=ct||{};function Wt(je){return/^@/.test(je)?[je]:je.split(/,\s*/)}function Dt(je,Qt,me,We){let kt=[],gn=/^@(\w+)\b/.exec(je[0]),Ht=gn&&gn[1]=="keyframes";if(gn&&Qt==null)return me.push(je[0]+";");for(let Cn in Qt){let Vn=Qt[Cn];if(/&/.test(Cn))Dt(Cn.split(/,\s*/).map(zt=>je.map($n=>zt.replace(/&/,$n))).reduce((zt,$n)=>zt.concat($n)),Vn,me);else if(Vn&&typeof Vn=="object"){if(!gn)throw new RangeError("The value of a property ("+Cn+") should be a primitive value.");Dt(Wt(Cn),Vn,kt,Ht)}else Vn!=null&&kt.push(Cn.replace(/_.*/,"").replace(/[A-Z]/g,zt=>"-"+zt.toLowerCase())+": "+Vn+";")}(kt.length||Ht)&&me.push((It&&!gn&&!We?je.map(It):je).join(", ")+" {"+kt.join(" ")+"}")}for(let je in Be)Dt(Wt(je),Be[je],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let Be=A[N]||1;return A[N]=Be+1,q+Be.toString(36)}static mount(Be,ct,It){let Wt=Be[Oe],Dt=It&&It.nonce;Wt?Dt&&Wt.setNonce(Dt):Wt=new Ot(Be,Dt),Wt.mount(Array.isArray(ct)?ct:[ct])}}let fn=new Map;class Ot{constructor(Be,ct){let It=Be.ownerDocument||Be,Wt=It.defaultView;if(!Be.head&&Be.adoptedStyleSheets&&Wt.CSSStyleSheet){let Dt=fn.get(It);if(Dt)return Be.adoptedStyleSheets=[Dt.sheet,...Be.adoptedStyleSheets],Be[Oe]=Dt;this.sheet=new Wt.CSSStyleSheet,Be.adoptedStyleSheets=[this.sheet,...Be.adoptedStyleSheets],fn.set(It,this)}else{this.styleTag=It.createElement("style"),ct&&this.styleTag.setAttribute("nonce",ct);let Dt=Be.head||Be;Dt.insertBefore(this.styleTag,Dt.firstChild)}this.modules=[],Be[Oe]=this}mount(Be){let ct=this.sheet,It=0,Wt=0;for(let Dt=0;Dt<Be.length;Dt++){let je=Be[Dt],Qt=this.modules.indexOf(je);if(Qt<Wt&&Qt>-1&&(this.modules.splice(Qt,1),Wt--,Qt=-1),Qt==-1){if(this.modules.splice(Wt++,0,je),ct)for(let me=0;me<je.rules.length;me++)ct.insertRule(je.rules[me],It++)}else{for(;Wt<Qt;)It+=this.modules[Wt++].rules.length;It+=je.rules.length,Wt++}}if(!ct){let Dt="";for(let je=0;je<this.modules.length;je++)Dt+=this.modules[je].getRules()+`
`;this.styleTag.textContent=Dt}}setNonce(Be){this.styleTag&&this.styleTag.getAttribute("nonce")!=Be&&this.styleTag.setAttribute("nonce",Be)}}}}]);
