(self.webpackChunklsbiz_ui=self.webpackChunklsbiz_ui||[]).push([[642],{87276:function(at,gi,Le){"use strict";Le.d(gi,{ZP:function(){return tv}});var q=Le(87462),W=Le(63366),je=Le(67294),k=Le(78120),Y=Le(47421);const oi=1024;let Li=0;class Be{constructor(e,t){this.from=e,this.to=t}}class Ze{constructor(e={}){this.id=Li++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Fe.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Ze.closedBy=new Ze({deserialize:n=>n.split(" ")}),Ze.openedBy=new Ze({deserialize:n=>n.split(" ")}),Ze.group=new Ze({deserialize:n=>n.split(" ")}),Ze.contextHash=new Ze({perNode:!0}),Ze.lookAhead=new Ze({perNode:!0}),Ze.mounted=new Ze({perNode:!0});class tt{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Ze.mounted.id]}}const fi=Object.create(null);class Fe{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):fi,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Fe(e.name||"",t,e.id,i);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(r)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ze.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(Ze.group),l=-1;l<(r?r.length:0);l++){let c=t[l<0?i.name:r[l]];if(c)return c}}}}Fe.none=new Fe("",Object.create(null),0,8);class Yt{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let l of e){let c=l(i);c&&(r||(r=Object.assign({},i.props)),r[c[0].id]=c[1])}t.push(r?new Fe(i.name,r,i.id,i.flags):i)}return new Yt(t)}}const ct=new WeakMap,Ti=new WeakMap;var Se;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Se||(Se={}));class nt{constructor(e,t,i,r,l){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,l&&l.length){this.props=Object.create(null);for(let[c,u]of l)this.props[typeof c=="number"?c:c.id]=u}}toString(){let e=tt.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Ue(this.topNode,e)}cursorAt(e,t=0,i=0){let r=ct.get(this)||this.topNode,l=new Ue(r);return l.moveTo(e,t),ct.set(this,l._tree),l}get topNode(){return new kt(this,0,0,null)}resolve(e,t=0){let i=Bi(ct.get(this)||this.topNode,e,t,!1);return ct.set(this,i),i}resolveInner(e,t=0){let i=Bi(Ti.get(this)||this.topNode,e,t,!0);return Ti.set(this,i),i}resolveStack(e,t=0){return re(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:l=this.length}=e,c=e.mode||0,u=(c&Se.IncludeAnonymous)>0;for(let m=this.cursor(c|Se.IncludeAnonymous);;){let x=!1;if(m.from<=l&&m.to>=r&&(!u&&m.type.isAnonymous||t(m)!==!1)){if(m.firstChild())continue;x=!0}for(;x&&i&&(u||!m.type.isAnonymous)&&i(m),!m.nextSibling();){if(!m.parent())return;x=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:rt(Fe.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new nt(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new nt(Fe.none,t,i,r)))}static build(e){return qe(e)}}nt.empty=new nt(Fe.none,[],[],0);class ei{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ei(this.buffer,this.index)}}class Jt{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Fe.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],l=r.name;if(/\W/.test(l)&&!r.isError&&(l=JSON.stringify(l)),e+=4,i==e)return l;let c=[];for(;e<i;)c.push(this.childString(e)),e=this.buffer[e+3];return l+"("+c.join(",")+")"}findChild(e,t,i,r,l){let{buffer:c}=this,u=-1;for(let m=e;m!=t&&!(jt(l,r,c[m+1],c[m+2])&&(u=m,i>0));m=c[m+3]);return u}slice(e,t,i){let r=this.buffer,l=new Uint16Array(t-e),c=0;for(let u=e,m=0;u<t;){l[m++]=r[u++],l[m++]=r[u++]-i;let x=l[m++]=r[u++]-i;l[m++]=r[u++]-e,c=Math.max(c,x)}return new Jt(l,c,this.set)}}function jt(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Bi(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let c=!i&&n instanceof kt&&n.index<0?null:n.parent;if(!c)return n;n=c}let l=i?0:Se.IgnoreOverlays;if(i)for(let c=n,u=c.parent;u;c=u,u=c.parent)c instanceof kt&&c.index<0&&((r=u.enter(e,t,l))===null||r===void 0?void 0:r.from)!=c.from&&(n=u);for(;;){let c=n.enter(e,t,l);if(!c)return n;n=c}}class _i{cursor(e=0){return new Ue(this,e)}getChild(e,t=null,i=null){let r=sn(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return sn(this,e,t,i)}resolve(e,t=0){return Bi(this,e,t,!1)}resolveInner(e,t=0){return Bi(this,e,t,!0)}matchContext(e){return An(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class kt extends _i{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,l=0){for(let c=this;;){for(let{children:u,positions:m}=c._tree,x=t>0?u.length:-1;e!=x;e+=t){let w=u[e],T=m[e]+c.from;if(jt(r,i,T,T+w.length)){if(w instanceof Jt){if(l&Se.ExcludeBuffers)continue;let P=w.findChild(0,w.buffer.length,t,i-T,r);if(P>-1)return new et(new mi(c,w,e,T),null,P)}else if(l&Se.IncludeAnonymous||!w.type.isAnonymous||Dt(w)){let P;if(!(l&Se.IgnoreMounts)&&(P=tt.get(w))&&!P.overlay)return new kt(P.tree,T,e,c);let V=new kt(w,T,e,c);return l&Se.IncludeAnonymous||!V.type.isAnonymous?V:V.nextChild(t<0?w.children.length-1:0,t,i,r)}}}if(l&Se.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+t:e=t<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Se.IgnoreOverlays)&&(r=tt.get(this._tree))&&r.overlay){let l=e-this.from;for(let{from:c,to:u}of r.overlay)if((t>0?c<=l:c<l)&&(t<0?u>=l:u>l))return new kt(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function sn(n,e,t,i){let r=n.cursor(),l=[];if(!r.firstChild())return l;if(t!=null){for(;!r.type.is(t);)if(!r.nextSibling())return l}for(;;){if(i!=null&&r.type.is(i))return l;if(r.type.is(e)&&l.push(r.node),!r.nextSibling())return i==null?l:[]}}function An(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class mi{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class et extends _i{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return l<0?null:new et(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Se.ExcludeBuffers)return null;let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new et(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new et(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new et(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,l=i.buffer[this.index+3];if(l>r){let c=i.buffer[this.index+1];e.push(i.slice(r,l,c)),t.push(0)}return new nt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function li(n){if(!n.length)return null;if(n.length==1)return n[0];let e=0,t=n[0];for(let l=1;l<n.length;l++){let c=n[l];(c.from>t.from||c.to<t.to)&&(t=c,e=l)}let i=t instanceof kt&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new $e(r,t)}class $e{constructor(e,t){this.heads=e,this.node=t}get next(){return li(this.heads)}}function re(n,e,t){let i=n.resolveInner(e,t),r=null;for(let l=i instanceof kt?i:i.context.parent;l;l=l.parent)if(l.index<0){let c=l.parent;(r||(r=[i])).push(c.resolve(e,t)),l=c}else{let c=tt.get(l.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let u=new kt(c.tree,c.overlay[0].from+l.from,0,null);(r||(r=[i])).push(Bi(u,e,t,!1))}}return r?li(r):i}class Ue{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof kt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof kt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Se.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Se.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Se.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(r.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let l=t+e,c=e<0?-1:i._tree.children.length;l!=c;l+=e){let u=i._tree.children[l];if(this.mode&Se.IncludeAnonymous||u instanceof Jt||!u.type.isAnonymous||Dt(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,l=this.stack.length;l>=0;){for(let c=e;c;c=c._parent)if(c.index==r){if(r==this.index)return c;t=c,i=l+1;break e}r=this.stack[--l]}for(let r=i;r<this.stack.length;r++)t=new et(this.buffer,t,this.stack[r]);return this.bufferNode=new et(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return An(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,l=this.stack.length-1;r>=0;l--){if(l<0)return An(this.node,e,r);let c=i[t.buffer[this.stack[l]]];if(!c.isAnonymous){if(e[r]&&e[r]!=c.name)return!1;r--}}return!0}}function Dt(n){return n.children.some(e=>e instanceof Jt||!e.type.isAnonymous||Dt(e))}function qe(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=oi,reused:l=[],minRepeatType:c=i.types.length}=n,u=Array.isArray(t)?new ei(t,t.length):t,m=i.types,x=0,w=0;function T(Oe,De,Ne,yt,ci){let{id:St,start:It,end:Vi,size:Cn}=u,dr=w;for(;Cn<0;)if(u.next(),Cn==-1){let pr=l[St];Ne.push(pr),yt.push(It-Oe);return}else if(Cn==-3){x=St;return}else if(Cn==-4){w=St;return}else throw new RangeError(`Unrecognized record size: ${Cn}`);let jr=m[St],nr,qi,Xn=It-Oe;if(Vi-It<=r&&(qi=ie(u.pos-De,ci))){let pr=new Uint16Array(qi.size-qi.skip),kn=u.pos-qi.size,rr=pr.length;for(;u.pos>kn;)rr=se(qi.start,pr,rr);nr=new Jt(pr,Vi-qi.start,i),Xn=qi.start-Oe}else{let pr=u.pos-Cn;u.next();let kn=[],rr=[],Eh=St>=c?St:-1,Tc=0,Xd=Vi;for(;u.pos>pr;)Eh>=0&&u.id==Eh&&u.size>=0?(u.end<=Xd-r&&(V(kn,rr,It,Tc,u.end,Xd,Eh,dr),Tc=kn.length,Xd=u.end),u.next()):T(It,pr,kn,rr,Eh);if(Eh>=0&&Tc>0&&Tc<kn.length&&V(kn,rr,It,Tc,It,Xd,Eh,dr),kn.reverse(),rr.reverse(),Eh>-1&&Tc>0){let r0=P(jr);nr=rt(jr,kn,rr,0,kn.length,0,Vi-It,r0,r0)}else nr=Z(jr,kn,rr,Vi-It,dr-Vi)}Ne.push(nr),yt.push(Xn)}function P(Oe){return(De,Ne,yt)=>{let ci=0,St=De.length-1,It,Vi;if(St>=0&&(It=De[St])instanceof nt){if(!St&&It.type==Oe&&It.length==yt)return It;(Vi=It.prop(Ze.lookAhead))&&(ci=Ne[St]+It.length+Vi)}return Z(Oe,De,Ne,yt,ci)}}function V(Oe,De,Ne,yt,ci,St,It,Vi){let Cn=[],dr=[];for(;Oe.length>yt;)Cn.push(Oe.pop()),dr.push(De.pop()+Ne-ci);Oe.push(Z(i.types[It],Cn,dr,St-ci,Vi-St)),De.push(ci-Ne)}function Z(Oe,De,Ne,yt,ci=0,St){if(x){let It=[Ze.contextHash,x];St=St?[It].concat(St):[It]}if(ci>25){let It=[Ze.lookAhead,ci];St=St?[It].concat(St):[It]}return new nt(Oe,De,Ne,yt,St)}function ie(Oe,De){let Ne=u.fork(),yt=0,ci=0,St=0,It=Ne.end-r,Vi={size:0,start:0,skip:0};e:for(let Cn=Ne.pos-Oe;Ne.pos>Cn;){let dr=Ne.size;if(Ne.id==De&&dr>=0){Vi.size=yt,Vi.start=ci,Vi.skip=St,St+=4,yt+=4,Ne.next();continue}let jr=Ne.pos-dr;if(dr<0||jr<Cn||Ne.start<It)break;let nr=Ne.id>=c?4:0,qi=Ne.start;for(Ne.next();Ne.pos>jr;){if(Ne.size<0)if(Ne.size==-3)nr+=4;else break e;else Ne.id>=c&&(nr+=4);Ne.next()}ci=qi,yt+=dr,St+=nr}return(De<0||yt==Oe)&&(Vi.size=yt,Vi.start=ci,Vi.skip=St),Vi.size>4?Vi:void 0}function se(Oe,De,Ne){let{id:yt,start:ci,end:St,size:It}=u;if(u.next(),It>=0&&yt<c){let Vi=Ne;if(It>4){let Cn=u.pos-(It-4);for(;u.pos>Cn;)Ne=se(Oe,De,Ne)}De[--Ne]=Vi,De[--Ne]=St-Oe,De[--Ne]=ci-Oe,De[--Ne]=yt}else It==-3?x=yt:It==-4&&(w=yt);return Ne}let he=[],Re=[];for(;u.pos>0;)T(n.start||0,n.bufferStart||0,he,Re,-1);let Ge=(e=n.length)!==null&&e!==void 0?e:he.length?Re[0]+he[0].length:0;return new nt(m[n.topID],he.reverse(),Re.reverse(),Ge)}const Ie=new WeakMap;function Je(n,e){if(!n.isAnonymous||e instanceof Jt||e.type!=n)return 1;let t=Ie.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof nt)){t=1;break}t+=Je(n,i)}Ie.set(e,t)}return t}function rt(n,e,t,i,r,l,c,u,m){let x=0;for(let Z=i;Z<r;Z++)x+=Je(n,e[Z]);let w=Math.ceil(x*1.5/8),T=[],P=[];function V(Z,ie,se,he,Re){for(let Ge=se;Ge<he;){let Oe=Ge,De=ie[Ge],Ne=Je(n,Z[Ge]);for(Ge++;Ge<he;Ge++){let yt=Je(n,Z[Ge]);if(Ne+yt>=w)break;Ne+=yt}if(Ge==Oe+1){if(Ne>w){let yt=Z[Oe];V(yt.children,yt.positions,0,yt.children.length,ie[Oe]+Re);continue}T.push(Z[Oe])}else{let yt=ie[Ge-1]+Z[Ge-1].length-De;T.push(rt(n,Z,ie,Oe,Ge,De,yt,null,m))}P.push(De+Re-l)}}return V(e,t,i,r,0),(u||m)(T,P,c)}class Ke{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof et?this.setBuffer(e.context.buffer,e.index,t):e instanceof kt&&this.map.set(e.tree,t)}get(e){return e instanceof et?this.getBuffer(e.context.buffer,e.index):e instanceof kt?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class _t{constructor(e,t,i,r,l=!1,c=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(l?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new _t(0,e.length,e,0,!1,i)];for(let l of t)l.to>e.length&&r.push(l);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],l=1,c=e.length?e[0]:null;for(let u=0,m=0,x=0;;u++){let w=u<t.length?t[u]:null,T=w?w.fromA:1e9;if(T-m>=i)for(;c&&c.from<T;){let P=c;if(m>=P.from||T<=P.to||x){let V=Math.max(P.from,m)-x,Z=Math.min(P.to,T)-x;P=V>=Z?null:new _t(V,Z,P.tree,P.offset+x,u>0,!!w)}if(P&&r.push(P),c.to>T)break;c=l<e.length?e[l++]:null}if(!w)break;m=w.toA,x=w.toA-w.toB}return r}}class ai{startParse(e,t,i){return typeof e=="string"&&(e=new Oi(e)),i=i?i.length?i.map(r=>new Be(r.from,r.to)):[new Be(0,0)]:[new Be(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let l=r.advance();if(l)return l}}}class Oi{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function Qi(n){return(e,t,i,r)=>new Ve(e,n,t,i,r)}class on{constructor(e,t,i,r,l){if(this.parser=e,this.parse=t,this.overlay=i,this.target=r,this.ranges=l,!l.length||l.some(c=>c.from>=c.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(l))}}class ln{constructor(e,t,i,r,l,c,u){this.parser=e,this.predicate=t,this.mounts=i,this.index=r,this.start=l,this.target=c,this.prev=u,this.depth=0,this.ranges=[]}}const ki=new Ze({perNode:!0});class Ve{constructor(e,t,i,r,l){this.nest=t,this.input=i,this.fragments=r,this.ranges=l,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let r of this.inner)r.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new nt(i.type,i.children,i.positions,i.length,i.propValues.concat([[ki,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[Ze.mounted.id]=new tt(t,e.overlay,e.parser),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new di(this.fragments),t=null,i=null,r=new Ue(new kt(this.baseTree,this.ranges[0].from,0,null),Se.IncludeAnonymous|Se.IgnoreMounts);e:for(let l,c;this.stoppedAt==null||r.from<this.stoppedAt;){let u=!0,m;if(e.hasNode(r)){if(t){let x=t.mounts.find(w=>w.frag.from<=r.from&&w.frag.to>=r.to&&w.mount.overlay);if(x)for(let w of x.mount.overlay){let T=w.from+x.pos,P=w.to+x.pos;T>=r.from&&P<=r.to&&!t.ranges.some(V=>V.from<P&&V.to>T)&&t.ranges.push({from:T,to:P})}}u=!1}else if(i&&(c=sr(i.ranges,r.from,r.to)))u=c!=2;else if(!r.type.isAnonymous&&r.from<r.to&&(l=this.nest(r,this.input))){r.tree||zi(r);let x=e.findMounts(r.from,l.parser);if(typeof l.overlay=="function")t=new ln(l.parser,l.overlay,x,this.inner.length,r.from,r.tree,t);else{let w=$t(this.ranges,l.overlay||[new Be(r.from,r.to)]);w.length&&this.inner.push(new on(l.parser,l.parser.startParse(this.input,an(x,w),w),l.overlay?l.overlay.map(T=>new Be(T.from-r.from,T.to-r.from)):null,r.tree,w)),l.overlay?w.length&&(i={ranges:w,depth:0,prev:i}):u=!1}}else t&&(m=t.predicate(r))&&(m===!0&&(m=new Be(r.from,r.to)),m.from<m.to&&t.ranges.push(m));if(u&&r.firstChild())t&&t.depth++,i&&i.depth++;else for(;!r.nextSibling();){if(!r.parent())break e;if(t&&!--t.depth){let x=$t(this.ranges,t.ranges);x.length&&this.inner.splice(t.index,0,new on(t.parser,t.parser.startParse(this.input,an(t.mounts,x),x),t.ranges.map(w=>new Be(w.from-t.start,w.to-t.start)),t.target,x)),t=t.prev}i&&!--i.depth&&(i=i.prev)}}}}function sr(n,e,t){for(let i of n){if(i.from>=t)break;if(i.to>e)return i.from<=e&&i.to>=t?2:1}return 0}function bn(n,e,t,i,r,l){if(e<t){let c=n.buffer[e+1];i.push(n.slice(e,t,c)),r.push(c-l)}}function zi(n){let{node:e}=n,t=0;do n.parent(),t++;while(!n.tree);let i=0,r=n.tree,l=0;for(;l=r.positions[i]+n.from,!(l<=e.from&&l+r.children[i].length>=e.to);i++);let c=r.children[i],u=c.buffer;function m(x,w,T,P,V){let Z=x;for(;u[Z+2]+l<=e.from;)Z=u[Z+3];let ie=[],se=[];bn(c,x,Z,ie,se,P);let he=u[Z+1],Re=u[Z+2],Ge=he+l==e.from&&Re+l==e.to&&u[Z]==e.type.id;return ie.push(Ge?e.toTree():m(Z+4,u[Z+3],c.set.types[u[Z]],he,Re-he)),se.push(he-P),bn(c,u[Z+3],w,ie,se,P),new nt(T,ie,se,V)}r.children[i]=m(0,u.length,Fe.none,0,c.length);for(let x=0;x<=t;x++)n.childAfter(e.from)}class Yn{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Se.IncludeAnonymous|Se.IgnoreMounts)}moveTo(e){let{cursor:t}=this,i=e-this.offset;for(;!this.done&&t.from<i;)t.to>=e&&t.enter(i,1,Se.IgnoreOverlays|Se.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof nt)t=t.children[0];else break}return!1}}class di{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(t=i.tree.prop(ki))!==null&&t!==void 0?t:i.to,this.inner=new Yn(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(ki))!==null&&e!==void 0?e:t.to,this.inner=new Yn(t.tree,-t.offset)}}findMounts(e,t){var i;let r=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let l=this.inner.cursor.node;l;l=l.parent){let c=(i=l.tree)===null||i===void 0?void 0:i.prop(Ze.mounted);if(c&&c.parser==t)for(let u=this.fragI;u<this.fragments.length;u++){let m=this.fragments[u];if(m.from>=l.to)break;m.tree==this.curFrag.tree&&r.push({frag:m,pos:l.from-m.offset,mount:c})}}}return r}}function $t(n,e){let t=null,i=e;for(let r=1,l=0;r<n.length;r++){let c=n[r-1].to,u=n[r].from;for(;l<i.length;l++){let m=i[l];if(m.from>=u)break;m.to<=c||(t||(i=t=e.slice()),m.from<c?(t[l]=new Be(m.from,c),m.to>u&&t.splice(l+1,0,new Be(u,m.to))):m.to>u?t[l--]=new Be(u,m.to):t.splice(l--,1))}}return i}function Or(n,e,t,i){let r=0,l=0,c=!1,u=!1,m=-1e9,x=[];for(;;){let w=r==n.length?1e9:c?n[r].to:n[r].from,T=l==e.length?1e9:u?e[l].to:e[l].from;if(c!=u){let P=Math.max(m,t),V=Math.min(w,T,i);P<V&&x.push(new Be(P,V))}if(m=Math.min(w,T),m==1e9)break;w==m&&(c?(c=!1,r++):c=!0),T==m&&(u?(u=!1,l++):u=!0)}return x}function an(n,e){let t=[];for(let{pos:i,mount:r,frag:l}of n){let c=i+(r.overlay?r.overlay[0].from:0),u=c+r.tree.length,m=Math.max(l.from,c),x=Math.min(l.to,u);if(r.overlay){let w=r.overlay.map(P=>new Be(P.from+i,P.to+i)),T=Or(e,w,m,x);for(let P=0,V=m;;P++){let Z=P==T.length,ie=Z?x:T[P].from;if(ie>V&&t.push(new _t(V,ie,r.tree,-c,l.from>=V||l.openStart,l.to<=ie||l.openEnd)),Z)break;V=T[P].to}}else t.push(new _t(m,x,r.tree,-c,l.from>=c||l.openStart,l.to<=u||l.openEnd))}return t}let vi=0;class Ri{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=vi++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Ri([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new hn;return t=>t.modified.indexOf(e)>-1?t:hn.get(t.base||t,t.modified.concat(e).sort((i,r)=>i.id-r.id))}}let gr=0;class hn{constructor(){this.instances=[],this.id=gr++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(u=>u.base==e&&Rr(t,u.modified));if(i)return i;let r=[],l=new Ri(r,e,t);for(let u of t)u.instances.push(l);let c=Fr(t);for(let u of e.set)if(!u.modified.length)for(let m of c)r.push(hn.get(u,m));return l}}function Rr(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function Fr(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function Dr(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let l=[],c=2,u=r;for(let T=0;;){if(u=="..."&&T>0&&T+3==r.length){c=1;break}let P=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!P)throw new RangeError("Invalid path: "+r);if(l.push(P[0]=="*"?"":P[0][0]=='"'?JSON.parse(P[0]):P[0]),T+=P[0].length,T==r.length)break;let V=r[T++];if(T==r.length&&V=="!"){c=0;break}if(V!="/")throw new RangeError("Invalid path: "+r);u=r.slice(T)}let m=l.length-1,x=l[m];if(!x)throw new RangeError("Invalid path: "+r);let w=new Gi(i,c,m>0?l.slice(0,m):null);e[x]=w.sort(e[x])}}return Nn.add(e)}const Nn=new Ze;class Gi{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Gi.empty=new Gi([],2,null);function Mn(n,e){let t=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let c of l.tag)t[c.id]=l.class;let{scope:i,all:r=null}=e||{};return{style:l=>{let c=r;for(let u of l)for(let m of u.set){let x=t[m.id];if(x){c=c?c+" "+x:x;break}}return c},scope:i}}function qt(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function Ct(n,e,t,i=0,r=n.length){let l=new Hi(i,Array.isArray(e)?e:[e],t);l.highlightRange(n.cursor(),i,r,"",l.highlighters),l.flush(r)}class Hi{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,l){let{type:c,from:u,to:m}=e;if(u>=i||m<=t)return;c.isTop&&(l=this.highlighters.filter(V=>!V.scope||V.scope(c)));let x=r,w=mr(e)||Gi.empty,T=qt(l,w.tags);if(T&&(x&&(x+=" "),x+=T,w.mode==1&&(r+=(r?" ":"")+T)),this.startSpan(Math.max(t,u),x),w.opaque)return;let P=e.tree&&e.tree.prop(Ze.mounted);if(P&&P.overlay){let V=e.node.enter(P.overlay[0].from+u,1),Z=this.highlighters.filter(se=>!se.scope||se.scope(P.tree.type)),ie=e.firstChild();for(let se=0,he=u;;se++){let Re=se<P.overlay.length?P.overlay[se]:null,Ge=Re?Re.from+u:m,Oe=Math.max(t,he),De=Math.min(i,Ge);if(Oe<De&&ie)for(;e.from<De&&(this.highlightRange(e,Oe,De,r,l),this.startSpan(Math.min(De,e.to),x),!(e.to>=Ge||!e.nextSibling())););if(!Re||Ge>i)break;he=Re.to+u,he>t&&(this.highlightRange(V.cursor(),Math.max(t,Re.from+u),Math.min(i,he),"",Z),this.startSpan(Math.min(i,he),x))}ie&&e.parent()}else if(e.firstChild()){P&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,l),this.startSpan(Math.min(i,e.to),x)}while(e.nextSibling());e.parent()}}}function mr(n){let e=n.type.prop(Nn);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const Ee=Ri.define,In=Ee(),Vn=Ee(),qr=Ee(Vn),cn=Ee(Vn),dn=Ee(),_n=Ee(dn),Di=Ee(dn),En=Ee(),Tn=Ee(En),zn=Ee(),Pn=Ee(),yi=Ee(),vr=Ee(yi),or=Ee(),fe={comment:In,lineComment:Ee(In),blockComment:Ee(In),docComment:Ee(In),name:Vn,variableName:Ee(Vn),typeName:qr,tagName:Ee(qr),propertyName:cn,attributeName:Ee(cn),className:Ee(Vn),labelName:Ee(Vn),namespace:Ee(Vn),macroName:Ee(Vn),literal:dn,string:_n,docString:Ee(_n),character:Ee(_n),attributeValue:Ee(_n),number:Di,integer:Ee(Di),float:Ee(Di),bool:Ee(dn),regexp:Ee(dn),escape:Ee(dn),color:Ee(dn),url:Ee(dn),keyword:zn,self:Ee(zn),null:Ee(zn),atom:Ee(zn),unit:Ee(zn),modifier:Ee(zn),operatorKeyword:Ee(zn),controlKeyword:Ee(zn),definitionKeyword:Ee(zn),moduleKeyword:Ee(zn),operator:Pn,derefOperator:Ee(Pn),arithmeticOperator:Ee(Pn),logicOperator:Ee(Pn),bitwiseOperator:Ee(Pn),compareOperator:Ee(Pn),updateOperator:Ee(Pn),definitionOperator:Ee(Pn),typeOperator:Ee(Pn),controlOperator:Ee(Pn),punctuation:yi,separator:Ee(yi),bracket:vr,angleBracket:Ee(vr),squareBracket:Ee(vr),paren:Ee(vr),brace:Ee(vr),content:En,heading:Tn,heading1:Ee(Tn),heading2:Ee(Tn),heading3:Ee(Tn),heading4:Ee(Tn),heading5:Ee(Tn),heading6:Ee(Tn),contentSeparator:Ee(En),list:Ee(En),quote:Ee(En),emphasis:Ee(En),strong:Ee(En),link:Ee(En),monospace:Ee(En),strikethrough:Ee(En),inserted:Ee(),deleted:Ee(),changed:Ee(),invalid:Ee(),meta:or,documentMeta:Ee(or),annotation:Ee(or),processingInstruction:Ee(or),definition:Ri.defineModifier(),constant:Ri.defineModifier(),function:Ri.defineModifier(),standard:Ri.defineModifier(),local:Ri.defineModifier(),special:Ri.defineModifier()},bo=Mn([{tag:fe.link,class:"tok-link"},{tag:fe.heading,class:"tok-heading"},{tag:fe.emphasis,class:"tok-emphasis"},{tag:fe.strong,class:"tok-strong"},{tag:fe.keyword,class:"tok-keyword"},{tag:fe.atom,class:"tok-atom"},{tag:fe.bool,class:"tok-bool"},{tag:fe.url,class:"tok-url"},{tag:fe.labelName,class:"tok-labelName"},{tag:fe.inserted,class:"tok-inserted"},{tag:fe.deleted,class:"tok-deleted"},{tag:fe.literal,class:"tok-literal"},{tag:fe.string,class:"tok-string"},{tag:fe.number,class:"tok-number"},{tag:[fe.regexp,fe.escape,fe.special(fe.string)],class:"tok-string2"},{tag:fe.variableName,class:"tok-variableName"},{tag:fe.local(fe.variableName),class:"tok-variableName tok-local"},{tag:fe.definition(fe.variableName),class:"tok-variableName tok-definition"},{tag:fe.special(fe.variableName),class:"tok-variableName2"},{tag:fe.definition(fe.propertyName),class:"tok-propertyName tok-definition"},{tag:fe.typeName,class:"tok-typeName"},{tag:fe.namespace,class:"tok-namespace"},{tag:fe.className,class:"tok-className"},{tag:fe.macroName,class:"tok-macroName"},{tag:fe.propertyName,class:"tok-propertyName"},{tag:fe.operator,class:"tok-operator"},{tag:fe.comment,class:"tok-comment"},{tag:fe.meta,class:"tok-meta"},{tag:fe.invalid,class:"tok-invalid"},{tag:fe.punctuation,class:"tok-punctuation"}]);var lr=Le(28699),wn;const yr=new Ze;function Kn(n){return Facet.define({combine:n?e=>e.concat(n):void 0})}const cs=new Ze;class Jn{constructor(e,t,i=[],r=""){this.data=e,this.name=r,k.yy.prototype.hasOwnProperty("tree")||Object.defineProperty(k.yy.prototype,"tree",{get(){return Ki(this)}}),this.parser=t,this.extension=[L.of(this),k.yy.languageData.of((l,c,u)=>{let m=xr(l,c,u),x=m.type.prop(yr);if(!x)return[];let w=l.facet(x),T=m.type.prop(cs);if(T){let P=m.resolve(c-m.from,u);for(let V of T)if(V.test(P,l)){let Z=l.facet(V.facet);return V.type=="replace"?Z:Z.concat(w)}}return w})].concat(i)}isActiveAt(e,t,i=-1){return xr(e,t,i).type.prop(yr)==this.data}findRegions(e){let t=e.facet(L);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(l,c)=>{if(l.prop(yr)==this.data){i.push({from:c,to:c+l.length});return}let u=l.prop(Ze.mounted);if(u){if(u.tree.prop(yr)==this.data){if(u.overlay)for(let m of u.overlay)i.push({from:m.from+c,to:m.to+c});else i.push({from:c,to:c+l.length});return}else if(u.overlay){let m=i.length;if(r(u.tree,u.overlay[0].from+c),i.length>m)return}}for(let m=0;m<l.children.length;m++){let x=l.children[m];x instanceof nt&&r(x,l.positions[m]+c)}};return r(Ki(e),0),i}get allowsNesting(){return!0}}Jn.setState=k.Py.define();function xr(n,e,t){let i=n.facet(L),r=Ki(n).topNode;if(!i||i.allowsNesting)for(let l=r;l;l=l.enter(e,t,Se.ExcludeBuffers))l.type.isTop&&(r=l);return r}class Xi extends null{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=Kn(e.languageData);return new Xi(t,e.parser.configure({props:[yr.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Xi(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ki(n){let e=n.field(Jn.state,!1);return e?e.tree:nt.empty}function wo(n,e,t=50){var i;let r=(i=n.field(Jn.state,!1))===null||i===void 0?void 0:i.context;if(!r)return null;let l=r.viewport;r.updateViewport({from:0,to:e});let c=r.isDone(e)||r.work(t,e)?r.tree:null;return r.updateViewport(l),c}function Ls(n,e=n.doc.length){var t;return((t=n.field(Jn.state,!1))===null||t===void 0?void 0:t.context.isDone(e))||!1}function fs(n,e=n.viewport.to,t=100){let i=wo(n.state,e,t);return i!=Ki(n.state)&&n.dispatch({}),!!i}function io(n){var e;return((e=n.plugin(O))===null||e===void 0?void 0:e.isWorking())||!1}class no{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Vr=null;class Ln{constructor(e,t,i=[],r,l,c,u,m){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=l,this.viewport=c,this.skipped=u,this.scheduleOn=m,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Ln(e,t,[],nt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new no(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=nt.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(_t.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(_t.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Vr;Vr=this;try{return e()}finally{Vr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=F(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:l,viewport:c,skipped:u}=this;if(this.takeTree(),!e.empty){let m=[];if(e.iterChangedRanges((x,w,T,P)=>m.push({fromA:x,toA:w,fromB:T,toB:P})),i=_t.applyChanges(i,m),r=nt.empty,l=0,c={from:e.mapPos(c.from,-1),to:e.mapPos(c.to,1)},this.skipped.length){u=[];for(let x of this.skipped){let w=e.mapPos(x.from,1),T=e.mapPos(x.to,-1);w<T&&u.push({from:w,to:T})}}}return new Ln(this.parser,t,i,r,l,c,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:l}=this.skipped[i];r<e.to&&l>e.from&&(this.fragments=F(this.fragments,r,l),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends ai{createParse(t,i,r){let l=r[0].from,c=r[r.length-1].to;return{parsedPos:l,advance(){let m=Vr;if(m){for(let x of r)m.tempSkipped.push(x);e&&(m.scheduleOn=m.scheduleOn?Promise.all([m.scheduleOn,e]):e)}return this.parsedPos=c,new nt(Fe.none,[],[],c-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Vr}}function F(n,e,t){return _t.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class v{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new v(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Ln.create(e.facet(L).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new v(i)}}Jn.state=k.QQ.define({create:v.init,update(n,e){for(let t of e.effects)if(t.is(Jn.setState))return t.value;return e.startState.facet(L)!=e.state.facet(L)?v.init(e.state):n.apply(e)}});let b=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(b=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const A=typeof navigator!="undefined"&&(!((wn=navigator.scheduling)===null||wn===void 0)&&wn.isInputPending)?()=>navigator.scheduling.isInputPending():null,O=Y.lg.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Jn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Jn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=b(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,l=i.field(Jn.state);if(l.tree==l.context.tree&&l.context.isDone(r+1e5))return;let c=Date.now()+Math.min(this.chunkBudget,100,e&&!A?Math.max(25,e.timeRemaining()-5):1e9),u=l.context.treeLen<r&&i.doc.length>r+1e3,m=l.context.work(()=>A&&A()||Date.now()>c,r+(u?0:1e5));this.chunkBudget-=Date.now()-t,(m||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Jn.setState.of(new v(l.context))})),this.chunkBudget>0&&!(m&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>(0,Y.OO)(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),L=k.r$.define({combine(n){return n.length?n[0]:null},enables:n=>[Jn.state,O,Y.tk.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class N{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class K{constructor(e,t,i,r,l,c=void 0){this.name=e,this.alias=t,this.extensions=i,this.filename=r,this.loadFunc=l,this.support=c,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:i}=e;if(!t){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(i)}return new K(e.name,(e.alias||[]).concat(e.name).map(r=>r.toLowerCase()),e.extensions||[],e.filename,t,i)}static matchFilename(e,t){for(let r of e)if(r.filename&&r.filename.test(t))return r;let i=/\.([^.]+)$/.exec(t);if(i){for(let r of e)if(r.extensions.indexOf(i[1])>-1)return r}return null}static matchLanguageName(e,t,i=!0){t=t.toLowerCase();for(let r of e)if(r.alias.some(l=>l==t))return r;if(i)for(let r of e)for(let l of r.alias){let c=t.indexOf(l);if(c>-1&&(l.length>2||!/\w/.test(t[c-1])&&!/\w/.test(t[c+l.length])))return r}return null}}const j=k.r$.define(),ce=k.r$.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function ve(n){let e=n.facet(ce);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function ke(n,e){let t="",i=n.tabSize,r=n.facet(ce)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let l=0;l<e;l++)t+=r;return t}function He(n,e){n instanceof k.yy&&(n=new xi(n));for(let i of n.state.facet(j)){let r=i(n,e);if(r!==void 0)return r}let t=Ki(n.state);return t.length>=e?fn(n,t,e):null}function st(n,e,t){let i=Object.create(null),r=new xi(n,{overrideIndentation:c=>{var u;return(u=i[c])!==null&&u!==void 0?u:-1}}),l=[];for(let c=e;c<=t;){let u=n.doc.lineAt(c);c=u.to+1;let m=He(r,u.from);if(m==null)continue;/\S/.test(u.text)||(m=0);let x=/^\s*/.exec(u.text)[0],w=ke(n,m);x!=w&&(i[u.from]=m,l.push({from:u.from,to:u.from+x.length,insert:w}))}return n.changes(l)}class xi{constructor(e,t={}){this.state=e,this.options=t,this.unit=ve(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:l}=this.options;return r!=null&&r>=i.from&&r<=i.to?l&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),l=this.countColumn(i,e-r),c=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return c>-1&&(l+=c-this.countColumn(i,i.search(/\S|$/))),l}countColumn(e,t=e.length){return(0,k.IS)(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let c=l(r);if(c>-1)return c}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const br=new Ze;function fn(n,e,t){let i=e.resolveStack(t),r=i.node.enterUnfinishedNodesBefore(t);if(r!=i.node){let l=[];for(let c=r;c!=i.node;c=c.parent)l.push(c);for(let c=l.length-1;c>=0;c--)i={node:l[c],next:i}}return ar(i,n,t)}function ar(n,e,t){for(let i=n;i;i=i.next){let r=Tl(i.node);if(r)return r(qo.create(e,t,i))}return 0}function Uo(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function Tl(n){let e=n.type.prop(br);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Ze.closedBy))){let r=n.lastChild,l=r&&i.indexOf(r.name)>-1;return c=>Bs(c,!0,1,void 0,l&&!Uo(c)?r.from:void 0)}return n.parent==null?jo:null}function jo(){return 0}class qo extends xi{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new qo(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(jl(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return ar(this.context.next,this.base,this.pos)}}function jl(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function So(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,l=n.state.doc.lineAt(t.from),c=r==null||r<=l.from?l.to:Math.min(l.to,r);for(let u=t.to;;){let m=e.childAfter(u);if(!m||m==i)return null;if(!m.type.isSkipped)return m.from<c?t:null;u=m.to}}function ql({closing:n,align:e=!0,units:t=1}){return i=>Bs(i,e,t,n)}function Bs(n,e,t,i,r){let l=n.textAfter,c=l.match(/^\s*/)[0].length,u=i&&l.slice(c,c+i.length)==i||r==n.pos+c,m=e?So(n):null;return m?u?n.column(m.from):n.column(m.to):n.baseIndent+(u?0:n.unit*t)}const Gl=n=>n.baseIndent;function Xl({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const Go=200;function Yl(){return k.yy.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+Go)return n;let l=t.sliceString(r.from,i);if(!e.some(x=>x.test(l)))return n;let{state:c}=n,u=-1,m=[];for(let{head:x}of c.selection.ranges){let w=c.doc.lineAt(x);if(w.from==u)continue;u=w.from;let T=He(c,w.from);if(T==null)continue;let P=/^\s*/.exec(w.text)[0],V=ke(c,T);P!=V&&m.push({from:w.from,to:w.from+P.length,insert:V})}return m.length?[n,{changes:m,sequential:!0}]:n})}const Jl=k.r$.define(),Ol=new Ze;function Ql(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function ro(n,e,t){let i=Ki(n);if(i.length<t)return null;let r=i.resolveStack(t,1),l=null;for(let c=r;c;c=c.next){let u=c.node;if(u.to<=t||u.from>t)continue;if(l&&u.from<e)break;let m=u.type.prop(Ol);if(m&&(u.to<i.length-50||i.length==n.doc.length||!ea(u))){let x=m(u,n);x&&x.from<=t&&x.from>=e&&x.to>t&&(l=x)}}return l}function ea(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function ks(n,e,t){for(let i of n.facet(Jl)){let r=i(n,e,t);if(r)return r}return ro(n,e,t)}function Xo(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Ns=k.Py.define({map:Xo}),us=k.Py.define({map:Xo});function Co(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Gr=k.QQ.define({create(){return Y.p.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(Ns)&&!Da(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(ge),r=i?Y.p.replace({widget:new _e(i(e.state,t.value))}):Pe;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(us)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(r,l)=>{r<i&&l>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(r,l)=>l<=i||r>=i}))}return n},provide:n=>Y.tk.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(Pe.range(i,r))}return Y.p.set(e,!0)}});function Ra(n){return n.field(Gr,!1)||RangeSet.empty}function ko(n,e,t){var i;let r=null;return(i=n.field(Gr,!1))===null||i===void 0||i.between(e,t,(l,c)=>{(!r||r.from>l)&&(r={from:l,to:c})}),r}function Da(n,e,t){let i=!1;return n.between(e,e,(r,l)=>{r==e&&l==t&&(i=!0)}),i}function Rl(n,e){return n.field(Gr,!1)?e:e.concat(k.Py.appendConfig.of(de()))}const ta=n=>{for(let e of Co(n)){let t=ks(n.state,e.from,e.to);if(t)return n.dispatch({effects:Rl(n.state,[Ns.of(t),J(n,t)])}),!0}return!1},H=n=>{if(!n.state.field(Gr,!1))return!1;let e=[];for(let t of Co(n)){let i=ko(n.state,t.from,t.to);i&&e.push(us.of(i),J(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function J(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return Y.tk.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const Q=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),l=ks(e,r.from,r.to);l&&t.push(Ns.of(l)),i=(l?n.lineBlockAt(l.to):r).to+1}return t.length&&n.dispatch({effects:Rl(n.state,t)}),!!t.length},G=n=>{let e=n.state.field(Gr,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(us.of({from:i,to:r}))}),n.dispatch({effects:t}),!0};function ee(n,e){for(let t=e;;){let i=ks(n.state,t.from,t.to);if(i&&i.to>e.from)return i;if(!t.from)return null;t=n.lineBlockAt(t.from-1)}}const ae=n=>{let e=[];for(let t of Co(n)){let i=ko(n.state,t.from,t.to);if(i)e.push(us.of(i),J(n,i,!1));else{let r=ee(n,t);r&&e.push(Ns.of(r),J(n,r))}}return e.length>0&&n.dispatch({effects:Rl(n.state,e)}),!!e.length},pe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:ta},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:H},{key:"Ctrl-Alt-[",run:Q},{key:"Ctrl-Alt-]",run:G}],ye={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},ge=k.r$.define({combine(n){return(0,k.BO)(n,ye)}});function de(n){let e=[Gr,ot];return n&&e.push(ge.of(n)),e}function xe(n,e){let{state:t}=n,i=t.facet(ge),r=c=>{let u=n.lineBlockAt(n.posAtDOM(c.target)),m=ko(n.state,u.from,u.to);m&&n.dispatch({effects:us.of(m)}),c.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let l=document.createElement("span");return l.textContent=i.placeholderText,l.setAttribute("aria-label",t.phrase("folded code")),l.title=t.phrase("unfold"),l.className="cm-foldPlaceholder",l.onclick=r,l}const Pe=Y.p.replace({widget:new class extends Y.l9{toDOM(n){return xe(n,null)}}});class _e extends Y.l9{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return xe(e,this.value)}}const Ce={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Qe extends Y.SJ{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function vt(n={}){let e=Object.assign(Object.assign({},Ce),n),t=new Qe(e,!0),i=new Qe(e,!1),r=Y.lg.fromClass(class{constructor(c){this.from=c.viewport.from,this.markers=this.buildMarkers(c)}update(c){(c.docChanged||c.viewportChanged||c.startState.facet(L)!=c.state.facet(L)||c.startState.field(Gr,!1)!=c.state.field(Gr,!1)||Ki(c.startState)!=Ki(c.state)||e.foldingChanged(c))&&(this.markers=this.buildMarkers(c.view))}buildMarkers(c){let u=new k.f_;for(let m of c.viewportLineBlocks){let x=ko(c.state,m.from,m.to)?i:ks(c.state,m.from,m.to)?t:null;x&&u.add(m.from,m.from,x)}return u.finish()}}),{domEventHandlers:l}=e;return[r,(0,Y.v5)({class:"cm-foldGutter",markers(c){var u;return((u=c.plugin(r))===null||u===void 0?void 0:u.markers)||k.Xs.empty},initialSpacer(){return new Qe(e,!1)},domEventHandlers:Object.assign(Object.assign({},l),{click:(c,u,m)=>{if(l.click&&l.click(c,u,m))return!0;let x=ko(c.state,u.from,u.to);if(x)return c.dispatch({effects:us.of(x)}),!0;let w=ks(c.state,u.from,u.to);return w?(c.dispatch({effects:Ns.of(w)}),!0):!1}})}),de()]}const ot=Y.tk.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class wt{constructor(e,t){this.specs=e;let i;function r(u){let m=lr.V.newName();return(i||(i=Object.create(null)))["."+m]=u,m}const l=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,c=t.scope;this.scope=c instanceof Jn?u=>u.prop(yr)==c.data:c?u=>u==c:void 0,this.style=Mn(e.map(u=>({tag:u.tag,class:u.class||r(Object.assign({},u,{tag:null}))})),{all:l}).style,this.module=i?new lr.V(i):null,this.themeType=t.themeType}static define(e,t){return new wt(e,t||{})}}const gt=k.r$.define(),it=k.r$.define({combine(n){return n.length?[n[0]]:null}});function At(n){let e=n.facet(gt);return e.length?e:n.facet(it)}function xt(n,e){let t=[Bt],i;return n instanceof wt&&(n.module&&t.push(Y.tk.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(it.of(n)):i?t.push(gt.computeN([Y.tk.darkTheme],r=>r.facet(Y.tk.darkTheme)==(i=="dark")?[n]:[])):t.push(gt.of(n)),t}function Tt(n,e,t){let i=At(n),r=null;if(i){for(let l of i)if(!l.scope||t&&l.scope(t)){let c=l.style(e);c&&(r=r?r+" "+c:c)}}return r}class pi{constructor(e){this.markCache=Object.create(null),this.tree=Ki(e.state),this.decorations=this.buildDeco(e,At(e.state))}update(e){let t=Ki(e.state),i=At(e.state),r=i!=At(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return Y.p.none;let i=new k.f_;for(let{from:r,to:l}of e.visibleRanges)Ct(this.tree,t,(c,u,m)=>{i.add(c,u,this.markCache[m]||(this.markCache[m]=Y.p.mark({class:m})))},r,l);return i.finish()}}const Bt=k.Wl.high(Y.lg.fromClass(pi,{decorations:n=>n.decorations})),Ht=wt.define([{tag:fe.meta,color:"#404740"},{tag:fe.link,textDecoration:"underline"},{tag:fe.heading,textDecoration:"underline",fontWeight:"bold"},{tag:fe.emphasis,fontStyle:"italic"},{tag:fe.strong,fontWeight:"bold"},{tag:fe.strikethrough,textDecoration:"line-through"},{tag:fe.keyword,color:"#708"},{tag:[fe.atom,fe.bool,fe.url,fe.contentSeparator,fe.labelName],color:"#219"},{tag:[fe.literal,fe.inserted],color:"#164"},{tag:[fe.string,fe.deleted],color:"#a11"},{tag:[fe.regexp,fe.escape,fe.special(fe.string)],color:"#e40"},{tag:fe.definition(fe.variableName),color:"#00f"},{tag:fe.local(fe.variableName),color:"#30a"},{tag:[fe.typeName,fe.namespace],color:"#085"},{tag:fe.className,color:"#167"},{tag:[fe.special(fe.variableName),fe.macroName],color:"#256"},{tag:fe.definition(fe.propertyName),color:"#00c"},{tag:fe.comment,color:"#940"},{tag:fe.invalid,color:"#f00"}]),bi=Y.tk.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ut=1e4,lt="()[]{}",ze=k.r$.define({combine(n){return(0,k.BO)(n,{afterCursor:!0,brackets:lt,maxScanDistance:ut,renderMatch:Et})}}),bt=Y.p.mark({class:"cm-matchingBracket"}),Ot=Y.p.mark({class:"cm-nonmatchingBracket"});function Et(n){let e=[],t=n.matched?bt:Ot;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const Gt=[k.QQ.define({create(){return Y.p.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(ze);for(let r of e.state.selection.ranges){if(!r.empty)continue;let l=Lt(e.state,r.head,-1,i)||r.head>0&&Lt(e.state,r.head-1,1,i)||i.afterCursor&&(Lt(e.state,r.head,1,i)||r.head<e.state.doc.length&&Lt(e.state,r.head+1,-1,i));l&&(t=t.concat(i.renderMatch(l,e.state)))}return Y.p.set(t,!0)},provide:n=>Y.tk.decorations.from(n)}),bi];function $i(n={}){return[ze.of(n),Gt]}const Zi=new Ze;function Wi(n,e,t){let i=n.prop(e<0?Ze.openedBy:Ze.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function Qn(n){let e=n.type.prop(Zi);return e?e(n.node):n}function Lt(n,e,t,i={}){let r=i.maxScanDistance||ut,l=i.brackets||lt,c=Ki(n),u=c.resolveInner(e,t);for(let m=u;m;m=m.parent){let x=Wi(m.type,t,l);if(x&&m.from<m.to){let w=Qn(m);if(w&&(t>0?e>=w.from&&e<w.to:e>w.from&&e<=w.to))return en(n,e,t,m,w,x,l)}}return Pt(n,e,t,c,u.type,r,l)}function en(n,e,t,i,r,l,c){let u=i.parent,m={from:r.from,to:r.to},x=0,w=u==null?void 0:u.cursor();if(w&&(t<0?w.childBefore(i.from):w.childAfter(i.to)))do if(t<0?w.to<=i.from:w.from>=i.to){if(x==0&&l.indexOf(w.type.name)>-1&&w.from<w.to){let T=Qn(w);return{start:m,end:T?{from:T.from,to:T.to}:void 0,matched:!0}}else if(Wi(w.type,t,c))x++;else if(Wi(w.type,-t,c)){if(x==0){let T=Qn(w);return{start:m,end:T&&T.from<T.to?{from:T.from,to:T.to}:void 0,matched:!1}}x--}}while(t<0?w.prevSibling():w.nextSibling());return{start:m,matched:!1}}function Pt(n,e,t,i,r,l,c){let u=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),m=c.indexOf(u);if(m<0||m%2==0!=t>0)return null;let x={from:t<0?e-1:e,to:t>0?e+1:e},w=n.doc.iterRange(e,t>0?n.doc.length:0),T=0;for(let P=0;!w.next().done&&P<=l;){let V=w.value;t<0&&(P+=V.length);let Z=e+P*t;for(let ie=t>0?0:V.length-1,se=t>0?V.length:-1;ie!=se;ie+=t){let he=c.indexOf(V[ie]);if(!(he<0||i.resolveInner(Z+ie,1).type!=r))if(he%2==0==t>0)T++;else{if(T==1)return{start:x,end:{from:Z+ie,to:Z+ie+1},matched:he>>1==m>>1};T--}}t>0&&(P+=V.length)}return w.done?{start:x,matched:!1}:null}function Vt(n,e,t,i=0,r=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let l=r;for(let c=i;c<e;c++)n.charCodeAt(c)==9?l+=t-l%t:l++;return l}class wi{constructor(e,t,i,r){this.string=e,this.tabSize=t,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e instanceof RegExp?e.test(t):e(t)),i)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Vt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Vt(this.string,null,this.tabSize)}match(e,t,i){if(typeof e=="string"){let r=c=>i?c.toLowerCase():c,l=this.string.substr(this.pos,e.length);return r(l)==r(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Xr(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||tn,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||As}}function tn(n){if(typeof n!="object")return n;let e={};for(let t in n){let i=n[t];e[t]=i instanceof Array?i.slice():i}return e}const Ui=new WeakMap;class wr extends null{constructor(e){let t=Kn(e.languageData),i=Xr(e),r,l=new class extends Parser{createParse(c,u,m){return new Er(r,c,u,m)}};super(t,l,[j.of((c,u)=>this.getIndent(c,u))],e.name),this.topNode=On(t),r=this,this.streamParser=i,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=e.tokenTable?new pn(i.tokenTable):Yo}static define(e){return new wr(e)}getIndent(e,t){let i=Ki(e.state),r=i.resolve(t);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let l,{overrideIndentation:c}=e.options;c&&(l=Ui.get(e.state),l!=null&&l<t-1e4&&(l=void 0));let u=Yi(this,i,0,r.from,l!=null?l:t),m,x;if(u?(x=u.state,m=u.pos+1):(x=this.streamParser.startState(e.unit),m=0),t-m>1e4)return null;for(;m<t;){let T=e.state.doc.lineAt(m),P=Math.min(t,T.to);if(T.length){let V=c?c(T.from):-1,Z=new wi(T.text,e.state.tabSize,e.unit,V<0?void 0:V);for(;Z.pos<P-T.from;)Is(this.streamParser.token,Z,x)}else this.streamParser.blankLine(x,e.unit);if(P==t)break;m=T.to+1}let w=e.lineAt(t);return c&&l==null&&Ui.set(e.state,w.from),this.streamParser.indent(x,/^\s*(.*)/.exec(w.text)[1],e)}get allowsNesting(){return!1}}function Yi(n,e,t,i,r){let l=t>=i&&t+e.length<=r&&e.prop(n.stateAfter);if(l)return{state:n.streamParser.copyState(l),pos:t+e.length};for(let c=e.children.length-1;c>=0;c--){let u=e.children[c],m=t+e.positions[c],x=u instanceof Tree&&m<r&&Yi(n,u,m,i,r);if(x)return x}return null}function nn(n,e,t,i,r){if(r&&t<=0&&i>=e.length)return e;!r&&e.type==n.topNode&&(r=!0);for(let l=e.children.length-1;l>=0;l--){let c=e.positions[l],u=e.children[l],m;if(c<i&&u instanceof Tree){if(!(m=nn(n,u,t-c,i-c,r)))break;return r?new Tree(e.type,e.children.slice(0,l).concat(m),e.positions.slice(0,l+1),c+m.length):m}}return null}function $n(n,e,t,i){for(let r of e){let l=r.from+(r.openStart?25:0),c=r.to-(r.openEnd?25:0),u=l<=t&&c>t&&Yi(n,r.tree,0-r.offset,t,c),m;if(u&&(m=nn(n,r.tree,t+r.offset,u.pos+r.offset,!1)))return{state:u.state,tree:m}}return{state:n.streamParser.startState(i?ve(i):4),tree:Tree.empty}}class Er{constructor(e,t,i,r){this.lang=e,this.input=t,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let l=Ln.get(),c=r[0].from,{state:u,tree:m}=$n(e,i,c,l==null?void 0:l.state);this.state=u,this.parsedPos=this.chunkStart=c+m.length;for(let x=0;x<m.children.length;x++)this.chunks.push(m.children[x]),this.chunkPos.push(m.positions[x]);l&&this.parsedPos<l.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(ve(l.state)),l.skipUntilInView(this.parsedPos,l.viewport.from),this.parsedPos=l.viewport.from),this.moveRangeIndex()}advance(){let e=Ln.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(t,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let i=t.indexOf(`
`);i>-1&&(t=t.slice(0,i))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),i=e+t.length;for(let r=this.rangeIndex;;){let l=this.ranges[r].to;if(l>=i||(t=t.slice(0,l-(i-t.length)),r++,r==this.ranges.length))break;let c=this.ranges[r].from,u=this.lineAfter(c);t+=u,i=c+u.length}return{line:t,end:i}}skipGapsTo(e,t,i){for(;;){let r=this.ranges[this.rangeIndex].to,l=e+t;if(i>0?r>l:r>=l)break;let c=this.ranges[++this.rangeIndex].from;t+=c-r}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,i,r,l){if(this.ranges.length>1){l=this.skipGapsTo(t,l,1),t+=l;let c=this.chunk.length;l=this.skipGapsTo(i,l,-1),i+=l,r+=this.chunk.length-c}return this.chunk.push(e,t,i,r),l}parseLine(e){let{line:t,end:i}=this.nextLine(),r=0,{streamParser:l}=this.lang,c=new wi(t,e?e.state.tabSize:4,e?ve(e.state):2);if(c.eol())l.blankLine(this.state,c.indentUnit);else for(;!c.eol();){let u=Is(l.token,c,this.state);if(u&&(r=this.emitToken(this.lang.tokenTable.resolve(u),this.parsedPos+c.start,this.parsedPos+c.pos,4,r)),c.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Zn,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Tree(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Is(n,e,t){e.start=e.pos;for(let i=0;i<10;i++){let r=n(e,t);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const As=Object.create(null),Sr=[Fe.none],Zn=new Yt(Sr),Ai=[],Pr=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Pr[n]=Ni(As,e);class pn{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Pr)}resolve(e){return e?this.table[e]||(this.table[e]=Ni(this.extra,e)):0}}const Yo=new pn(As);function Hn(n,e){Ai.indexOf(n)>-1||(Ai.push(n),console.warn(e))}function Ni(n,e){let t=[];for(let l of e.split(" ")){let c=[];for(let u of l.split(".")){let m=n[u]||fe[u];m?typeof m=="function"?c.length?c=c.map(m):Hn(u,`Modifier ${u} used at start of tag`):c.length?Hn(u,`Tag ${u} used as modifier`):c=Array.isArray(m)?m:[m]:Hn(u,`Unknown highlighting tag ${u}`)}for(let u of c)t.push(u)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=Fe.define({id:Sr.length,name:i,props:[Dr({[i]:t})]});return Sr.push(r),r.id}function On(n){let e=NodeType.define({id:Sr.length,name:"Document",props:[yr.add(()=>n)],top:!0});return Sr.push(e),e}const _s=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=Ms(n.state,t.from);return i.line?so(n):i.block?Hs(n):!1};function Ao(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const so=Ao(el,0),Jo=null,ia=null,oo=Ao(ds,0),Ea=null,na=null,Hs=Ao((n,e)=>ds(n,e,Dl(e)),0);function Ms(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Mo=50;function Qo(n,{open:e,close:t},i,r){let l=n.sliceDoc(i-Mo,i),c=n.sliceDoc(r,r+Mo),u=/\s*$/.exec(l)[0].length,m=/^\s*/.exec(c)[0].length,x=l.length-u;if(l.slice(x-e.length,x)==e&&c.slice(m,m+t.length)==t)return{open:{pos:i-u,margin:u&&1},close:{pos:r+m,margin:m&&1}};let w,T;r-i<=2*Mo?w=T=n.sliceDoc(i,r):(w=n.sliceDoc(i,i+Mo),T=n.sliceDoc(r-Mo,r));let P=/^\s*/.exec(w)[0].length,V=/\s*$/.exec(T)[0].length,Z=T.length-V-t.length;return w.slice(P,P+e.length)==e&&T.slice(Z,Z+t.length)==t?{open:{pos:i+P+e.length,margin:/\s/.test(w.charAt(P+e.length))?1:0},close:{pos:r-V-t.length,margin:/\s/.test(T.charAt(Z-1))?1:0}}:null}function Dl(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to),l=e.length-1;l>=0&&e[l].to>i.from?e[l].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function ds(n,e,t=e.selection.ranges){let i=t.map(l=>Ms(e,l.from).block);if(!i.every(l=>l))return null;let r=t.map((l,c)=>Qo(e,i[c],l.from,l.to));if(n!=2&&!r.every(l=>l))return{changes:e.changes(t.map((l,c)=>r[c]?[]:[{from:l.from,insert:i[c].open+" "},{from:l.to,insert:" "+i[c].close}]))};if(n!=1&&r.some(l=>l)){let l=[];for(let c=0,u;c<r.length;c++)if(u=r[c]){let m=i[c],{open:x,close:w}=u;l.push({from:x.pos-m.open.length,to:x.pos+x.margin},{from:w.pos-w.margin,to:w.pos+m.close.length})}return{changes:l}}return null}function el(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:l,to:c}of t){let u=i.length,m=1e9,x=Ms(e,l).line;if(x){for(let w=l;w<=c;){let T=e.doc.lineAt(w);if(T.from>r&&(l==c||c>T.from)){r=T.from;let P=/^\s*/.exec(T.text)[0].length,V=P==T.length,Z=T.text.slice(P,P+x.length)==x?P:-1;P<T.text.length&&P<m&&(m=P),i.push({line:T,comment:Z,token:x,indent:P,empty:V,single:!1})}w=T.to+1}if(m<1e9)for(let w=u;w<i.length;w++)i[w].indent<i[w].line.text.length&&(i[w].indent=m);i.length==u+1&&(i[u].single=!0)}}if(n!=2&&i.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:u,token:m,indent:x,empty:w,single:T}of i)(T||!w)&&l.push({from:u.from+x,insert:m+" "});let c=e.changes(l);return{changes:c,selection:e.selection.map(c,1)}}else if(n!=1&&i.some(l=>l.comment>=0)){let l=[];for(let{line:c,comment:u,token:m}of i)if(u>=0){let x=c.from+u,w=x+m.length;c.text[w-c.from]==" "&&w++,l.push({from:x,to:w})}return{changes:l}}return null}const tl=k.q6.define(),ra=k.q6.define(),lo=k.r$.define(),Wn=k.r$.define({combine(n){return(0,k.BO)(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}});function gn(n){let e=0;return n.iterChangedRanges((t,i)=>e=i),e}const Ts=k.QQ.define({create(){return zt.empty},update(n,e){let t=e.state.facet(Wn),i=e.annotation(tl);if(i){let m=e.docChanged?k.jT.single(gn(e.changes)):void 0,x=ft.fromTransaction(e,m),w=i.side,T=w==0?n.undone:n.done;return x?T=Zt(T,T.length,t.minDepth,x):T=Yr(T,e.startState.selection),new zt(w==0?i.rest:T,w==0?T:i.rest)}let r=e.annotation(ra);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(k.YW.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let l=ft.fromTransaction(e),c=e.annotation(k.YW.time),u=e.annotation(k.YW.userEvent);return l?n=n.addChanges(l,c,u,t,e):e.selection&&(n=n.addSelection(e.startState.selection,c,u,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new zt(n.done.map(ft.fromJSON),n.undone.map(ft.fromJSON))}});function Mi(n={}){return[Ts,Wn.of(n),Y.tk.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Oo:e.inputType=="historyRedo"?il:null;return i?(e.preventDefault(),i(t)):!1}})]}const To=null;function Lr(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(Ts,!1);if(!r)return!1;let l=r.pop(n,t,e);return l?(i(l),!0):!1}}const Oo=Lr(0,!1),il=Lr(1,!1),nl=Lr(0,!0),X=Lr(1,!0);function ue(n){return function(e){let t=e.field(Ts,!1);if(!t)return 0;let i=n==0?t.done:t.undone;return i.length-(i.length&&!i[0].changes?1:0)}}const oe=null,Xe=null;class ft{constructor(e,t,i,r,l){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=l}setSelAfter(e){return new ft(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new ft(e.changes&&k.as.fromJSON(e.changes),[],e.mapped&&k.n0.fromJSON(e.mapped),e.startSelection&&k.jT.fromJSON(e.startSelection),e.selectionsAfter.map(k.jT.fromJSON))}static fromTransaction(e,t){let i=Cr;for(let r of e.startState.facet(lo)){let l=r(e);l.length&&(i=i.concat(l))}return!i.length&&e.changes.empty?null:new ft(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Cr)}static selection(e){return new ft(void 0,Cr,void 0,void 0,e)}}function Zt(n,e,t,i){let r=e+1>t+20?e-t-1:0,l=n.slice(r,e);return l.push(i),l}function mn(n,e){let t=[],i=!1;return n.iterChangedRanges((r,l)=>t.push(r,l)),e.iterChangedRanges((r,l,c,u)=>{for(let m=0;m<t.length;){let x=t[m++],w=t[m++];u>=x&&c<=w&&(i=!0)}}),i}function ti(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function rl(n,e){return n.length?e.length?n.concat(e):n:e}const Cr=[],kr=200;function Yr(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-kr));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Zt(n,n.length-1,1e9,t.setSelAfter(i)))}else return[ft.selection([e])]}function Ro(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function hr(n,e){if(!n.length)return n;let t=n.length,i=Cr;for(;t;){let r=ao(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let l=n.slice(0,t);return l[t-1]=r,l}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[ft.selection(i)]:Cr}function ao(n,e,t){let i=rl(n.selectionsAfter.length?n.selectionsAfter.map(u=>u.map(e)):Cr,t);if(!n.changes)return ft.selection(i);let r=n.changes.map(e),l=e.mapDesc(n.changes,!0),c=n.mapped?n.mapped.composeDesc(l):l;return new ft(r,k.Py.mapEffects(n.effects,e),c,n.startSelection.map(l),i)}const sl=/^(input\.type|delete)($|\.)/;class zt{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new zt(this.done,this.undone):this}addChanges(e,t,i,r,l){let c=this.done,u=c[c.length-1];return u&&u.changes&&!u.changes.empty&&e.changes&&(!i||sl.test(i))&&(!u.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(l,mn(u.changes,e.changes))||i=="input.type.compose")?c=Zt(c,c.length-1,r.minDepth,new ft(e.changes.compose(u.changes),rl(e.effects,u.effects),u.mapped,u.startSelection,Cr)):c=Zt(c,c.length,r.minDepth,e),new zt(c,Cr,t,i)}addSelection(e,t,i,r){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:Cr;return l.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&ti(l[l.length-1],e)?this:new zt(Yr(this.done,e),this.undone,t,i)}addMapping(e){return new zt(hr(this.done,e),hr(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let l=r[r.length-1];if(i&&l.selectionsAfter.length)return t.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:tl.of({side:e,rest:Ro(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let c=r.length==1?Cr:r.slice(0,r.length-1);return l.mapped&&(c=hr(c,l.mapped)),t.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:tl.of({side:e,rest:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}zt.empty=new zt(Cr,Cr);const Pa=[{key:"Mod-z",run:Oo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:il,preventDefault:!0},{linux:"Ctrl-Shift-z",run:il,preventDefault:!0},{key:"Mod-u",run:nl,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:X,preventDefault:!0}];function zr(n,e){return k.jT.create(n.ranges.map(e),n.mainIndex)}function Fn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function cr({state:n,dispatch:e},t){let i=zr(n.selection,t);return i.eq(n.selection)?!1:(e(Fn(n,i)),!0)}function ps(n,e){return k.jT.cursor(e?n.to:n.from)}function Do(n,e){return cr(n,t=>t.empty?n.moveByChar(t,e):ps(t,e))}function vn(n){return n.textDirectionAt(n.state.selection.main.head)==Y.Nm.LTR}const gs=n=>Do(n,!vn(n)),ho=n=>Do(n,vn(n)),La=n=>Do(n,!0),Eo=n=>Do(n,!1);function Os(n,e){return cr(n,t=>t.empty?n.moveByGroup(t,e):ps(t,e))}const Po=n=>Os(n,!vn(n)),Jr=n=>Os(n,vn(n)),sa=n=>Os(n,!0),Lo=n=>Os(n,!1),Qr=typeof Intl!="undefined"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function co(n,e,t){let i=n.state.charCategorizer(e.from),r=CharCategory.Space,l=e.from,c=0,u=!1,m=!1,x=!1,w=P=>{if(u)return!1;l+=t?P.length:-P.length;let V=i(P),Z;if(V==CharCategory.Word&&P.charCodeAt(0)<128&&/[\W_]/.test(P)&&(V=-1),r==CharCategory.Space&&(r=V),r!=V)return!1;if(r==CharCategory.Word)if(P.toLowerCase()==P){if(!t&&m)return!1;x=!0}else if(x){if(t)return!1;u=!0}else{if(m&&t&&i(Z=n.state.sliceDoc(l,l+1))==CharCategory.Word&&Z.toLowerCase()==Z)return!1;m=!0}return c++,!0},T=n.moveByChar(e,t,P=>(w(P),w));if(Qr&&r==CharCategory.Word&&T.from==e.from+c*(t?1:-1)){let P=Math.min(e.head,T.head),V=Math.max(e.head,T.head),Z=n.state.sliceDoc(P,V);if(Z.length>1&&/[\u4E00-\uffff]/.test(Z)){let ie=Array.from(Qr.segment(Z));if(ie.length>1)return t?EditorSelection.cursor(e.head+ie[1].index,-1):EditorSelection.cursor(T.head+ie[ie.length-1].index,1)}}return T}function Bo(n,e){return cr(n,t=>t.empty?co(n,t,e):ps(t,e))}const El=n=>Bo(n,!0),oa=n=>Bo(n,!1);function No(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Kr(n,e,t){let i=Ki(n).resolveInner(e.head),r=t?Ze.closedBy:Ze.openedBy;for(let m=e.head;;){let x=t?i.childAfter(m):i.childBefore(m);if(!x)break;No(n,x,r)?i=x:m=t?x.to:x.from}let l=i.type.prop(r),c,u;return l&&(c=t?Lt(n,i.from,1):Lt(n,i.to,-1))&&c.matched?u=t?c.end.to:c.end.from:u=t?i.to:i.from,k.jT.cursor(u,t?-1:1)}const ol=n=>cr(n,e=>Kr(n.state,e,!vn(n))),ll=n=>cr(n,e=>Kr(n.state,e,vn(n)));function Ut(n,e){return cr(n,t=>{if(!t.empty)return ps(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const ii=n=>Ut(n,!1),Un=n=>Ut(n,!0);function ni(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let l of n.state.facet(Y.tk.scrollMargins)){let c=l(n);c!=null&&c.top&&(t=Math.max(c==null?void 0:c.top,t)),c!=null&&c.bottom&&(i=Math.max(c==null?void 0:c.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Ii(n,e){let t=ni(n),{state:i}=n,r=zr(i.selection,c=>c.empty?n.moveVertically(c,e,t.height):ps(c,e));if(r.eq(i.selection))return!1;let l;if(t.selfScroll){let c=n.coordsAtPos(i.selection.main.head),u=n.scrollDOM.getBoundingClientRect(),m=u.top+t.marginTop,x=u.bottom-t.marginBottom;c&&c.top>m&&c.bottom<x&&(l=Y.tk.scrollIntoView(r.main.head,{y:"start",yMargin:c.top-m}))}return n.dispatch(Fn(i,r),{effects:l}),!0}const Ws=n=>Ii(n,!1),ms=n=>Ii(n,!0);function jn(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let l=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;l&&e.head!=i.from+l&&(r=k.jT.cursor(i.from+l))}return r}const al=n=>cr(n,e=>jn(n,e,!0)),Io=n=>cr(n,e=>jn(n,e,!1)),Pl=n=>cr(n,e=>jn(n,e,!vn(n))),Ba=n=>cr(n,e=>jn(n,e,vn(n))),hl=n=>cr(n,e=>k.jT.cursor(n.lineBlockAt(e.head).from,1)),Ll=n=>cr(n,e=>k.jT.cursor(n.lineBlockAt(e.head).to,-1));function fo(n,e,t){let i=!1,r=zr(n.selection,l=>{let c=Lt(n,l.head,-1)||Lt(n,l.head,1)||l.head>0&&Lt(n,l.head-1,1)||l.head<n.doc.length&&Lt(n,l.head+1,-1);if(!c||!c.end)return l;i=!0;let u=c.start.from==l.head?c.end.to:c.end.from;return t?k.jT.range(l.anchor,u):k.jT.cursor(u)});return i?(e(Fn(n,r)),!0):!1}const la=({state:n,dispatch:e})=>fo(n,e,!1),Bl=({state:n,dispatch:e})=>fo(n,e,!0);function Br(n,e){let t=zr(n.state.selection,i=>{let r=e(i);return k.jT.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Fn(n.state,t)),!0)}function aa(n,e){return Br(n,t=>n.moveByChar(t,e))}const Ph=n=>aa(n,!vn(n)),Lh=n=>aa(n,vn(n)),Vf=n=>aa(n,!0),Na=n=>aa(n,!1);function vs(n,e){return Br(n,t=>n.moveByGroup(t,e))}const Ia=n=>vs(n,!vn(n)),B=n=>vs(n,vn(n)),Nl=n=>vs(n,!0),cl=n=>vs(n,!1);function Nr(n,e){return Br(n,t=>co(n,t,e))}const ri=n=>Nr(n,!0),zf=n=>Nr(n,!1),Oc=n=>Br(n,e=>Kr(n.state,e,!vn(n))),_a=n=>Br(n,e=>Kr(n.state,e,vn(n)));function es(n,e){return Br(n,t=>n.moveVertically(t,e))}const ha=n=>es(n,!1),Bh=n=>es(n,!0);function Nh(n,e){return Br(n,t=>n.moveVertically(t,e,ni(n).height))}const Ha=n=>Nh(n,!1),Ih=n=>Nh(n,!0),Fs=n=>Br(n,e=>jn(n,e,!0)),Kf=n=>Br(n,e=>jn(n,e,!1)),$f=n=>Br(n,e=>jn(n,e,!vn(n))),Rc=n=>Br(n,e=>jn(n,e,vn(n))),Zf=n=>Br(n,e=>k.jT.cursor(n.lineBlockAt(e.head).from)),Uf=n=>Br(n,e=>k.jT.cursor(n.lineBlockAt(e.head).to)),ts=({state:n,dispatch:e})=>(e(Fn(n,{anchor:0})),!0),Dc=({state:n,dispatch:e})=>(e(Fn(n,{anchor:n.doc.length})),!0),_h=({state:n,dispatch:e})=>(e(Fn(n,{anchor:n.selection.main.anchor,head:0})),!0),Wa=({state:n,dispatch:e})=>(e(Fn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),ca=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),Hh=({state:n,dispatch:e})=>{let t=_o(n).map(({from:i,to:r})=>k.jT.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:k.jT.create(t),userEvent:"select"})),!0},Vs=({state:n,dispatch:e})=>{let t=zr(n.selection,i=>{var r;let l=Ki(n).resolveStack(i.from,1);for(let c=l;c;c=c.next){let{node:u}=c;if((u.from<i.from&&u.to>=i.to||u.to>i.to&&u.from<=i.from)&&(!((r=u.parent)===null||r===void 0)&&r.parent))return k.jT.range(u.to,u.from)}return i});return e(Fn(n,t)),!0},zs=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=k.jT.create([t.main]):t.main.empty||(i=k.jT.create([k.jT.cursor(t.main.head)])),i?(e(Fn(n,i)),!0):!1};function Ks(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(l=>{let{from:c,to:u}=l;if(c==u){let m=e(l);m<c?(t="delete.backward",m=Ir(n,m,!1)):m>c&&(t="delete.forward",m=Ir(n,m,!0)),c=Math.min(c,m),u=Math.max(u,m)}else c=Ir(n,c,!1),u=Ir(n,u,!0);return c==u?{range:l}:{changes:{from:c,to:u},range:k.jT.cursor(c,c<l.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Y.tk.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ir(n,e,t){if(n instanceof Y.tk)for(let i of n.state.facet(Y.tk.atomicRanges).map(r=>r(n)))i.between(e,e,(r,l)=>{r<e&&l>e&&(e=t?l:r)});return e}const fl=(n,e)=>Ks(n,t=>{let i=t.from,{state:r}=n,l=r.doc.lineAt(i),c,u;if(!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(c=l.text.slice(0,i-l.from))){if(c[c.length-1]=="	")return i-1;let m=(0,k.IS)(c,r.tabSize),x=m%ve(r)||ve(r);for(let w=0;w<x&&c[c.length-1-w]==" ";w++)i--;u=i}else u=(0,k.cp)(l.text,i-l.from,e,e)+l.from,u==i&&l.number!=(e?r.doc.lines:1)&&(u+=e?1:-1);return u}),Fa=n=>fl(n,!1),fa=n=>fl(n,!0),Va=(n,e)=>Ks(n,t=>{let i=t.head,{state:r}=n,l=r.doc.lineAt(i),c=r.charCategorizer(i);for(let u=null;;){if(i==(e?l.to:l.from)){i==t.head&&l.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let m=(0,k.cp)(l.text,i-l.from,e)+l.from,x=l.text.slice(Math.min(i,m)-l.from,Math.max(i,m)-l.from),w=c(x);if(u!=null&&w!=u)break;(x!=" "||i!=t.head)&&(u=w),i=m}return i}),Wh=n=>Va(n,!1),za=n=>Va(n,!0),Ka=n=>Ks(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),jf=n=>Ks(n,e=>{let t=n.lineBlockAt(e.head).from;return e.head>t?t:Math.max(0,e.head-1)}),Fh=n=>Ks(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),ua=n=>Ks(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),da=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=[];for(let i=0,r="",l=n.doc.iter();;){if(l.next(),l.lineBreak||l.done){let c=r.search(/\s+$/);if(c>-1&&t.push({from:i-(r.length-c),to:i}),l.done)break;r=""}else r=l.value;i+=l.value.length}return t.length?(e(n.update({changes:t,userEvent:"delete"})),!0):!1},pa=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:k.xv.of(["",""])},range:k.jT.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},ul=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,l=n.doc.lineAt(r),c=r==l.from?r-1:(0,k.cp)(l.text,r-l.from,!1)+l.from,u=r==l.to?r+1:(0,k.cp)(l.text,r-l.from,!0)+l.from;return{changes:{from:c,to:u,insert:n.doc.slice(r,u).append(n.doc.slice(c,r))},range:k.jT.cursor(u)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function _o(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),l=n.doc.lineAt(i.to);if(!i.empty&&i.to==l.from&&(l=n.doc.lineAt(i.to-1)),t>=r.number){let c=e[e.length-1];c.to=l.to,c.ranges.push(i)}else e.push({from:r.from,to:l.to,ranges:[i]});t=l.number+1}return e}function ga(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let l of _o(n)){if(t?l.to==n.doc.length:l.from==0)continue;let c=n.doc.lineAt(t?l.to+1:l.from-1),u=c.length+1;if(t){i.push({from:l.to,to:c.to},{from:l.from,insert:c.text+n.lineBreak});for(let m of l.ranges)r.push(k.jT.range(Math.min(n.doc.length,m.anchor+u),Math.min(n.doc.length,m.head+u)))}else{i.push({from:c.from,to:l.from},{from:l.to,insert:n.lineBreak+c.text});for(let m of l.ranges)r.push(k.jT.range(m.anchor-u,m.head-u))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:k.jT.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const $s=({state:n,dispatch:e})=>ga(n,e,!1),$a=({state:n,dispatch:e})=>ga(n,e,!0);function Zs(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of _o(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const is=({state:n,dispatch:e})=>Zs(n,e,!1),Ec=({state:n,dispatch:e})=>Zs(n,e,!0),Vh=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(_o(e).map(({from:r,to:l})=>(r>0?r--:l<e.doc.length&&l++,{from:r,to:l}))),i=zr(e.selection,r=>n.moveVertically(r,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0},zh=({state:n,dispatch:e})=>(e(n.update(n.replaceSelection(n.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0);function Il(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ki(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),l;return i&&r&&i.to<=e&&r.from>=e&&(l=i.type.prop(Ze.closedBy))&&l.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const Us=Pc(!1),Kh=Pc(!0);function Pc(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:l,to:c}=r,u=e.doc.lineAt(l),m=!n&&l==c&&Il(e,l);n&&(l=c=(c<=u.to?u:e.doc.lineAt(c)).to);let x=new xi(e,{simulateBreak:l,simulateDoubleBreak:!!m}),w=He(x,l);for(w==null&&(w=(0,k.IS)(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));c<u.to&&/\s/.test(u.text[c-u.from]);)c++;m?{from:l,to:c}=m:l>u.from&&l<u.from+100&&!/\S/.test(u.text.slice(0,l))&&(l=u.from);let T=["",ke(e,w)];return m&&T.push(ke(e,x.lineIndent(u.from,-1))),{changes:{from:l,to:c,insert:k.xv.of(T)},range:k.jT.cursor(l+1+T[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function dl(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let c=i.from;c<=i.to;){let u=n.doc.lineAt(c);u.number>t&&(i.empty||i.to>u.from)&&(e(u,r,i),t=u.number),c=u.to+1}let l=n.changes(r);return{changes:r,range:k.jT.range(l.mapPos(i.anchor,1),l.mapPos(i.head,1))}})}const qf=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new xi(n,{overrideIndentation:l=>{let c=t[l];return c==null?-1:c}}),r=dl(n,(l,c,u)=>{let m=He(i,l.from);if(m==null)return;/\S/.test(l.text)||(m=0);let x=/^\s*/.exec(l.text)[0],w=ke(n,m);(x!=w||u.from<l.from+x.length)&&(t[l.from]=m,c.push({from:l.from,to:l.from+x.length,insert:w}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},Za=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(dl(n,(t,i)=>{i.push({from:t.from,insert:n.facet(ce)})}),{userEvent:"input.indent"})),!0),d=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(dl(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let l=(0,k.IS)(r,n.tabSize),c=0,u=ke(n,Math.max(0,l-ve(n)));for(;c<r.length&&c<u.length&&r.charCodeAt(c)==u.charCodeAt(c);)c++;i.push({from:t.from+c,to:t.from+r.length,insert:u.slice(c)})}),{userEvent:"delete.dedent"})),!0),s=({state:n,dispatch:e})=>n.selection.ranges.some(t=>!t.empty)?Za({state:n,dispatch:e}):(e(n.update(n.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),a=[{key:"Ctrl-b",run:gs,shift:Ph,preventDefault:!0},{key:"Ctrl-f",run:ho,shift:Lh},{key:"Ctrl-p",run:ii,shift:ha},{key:"Ctrl-n",run:Un,shift:Bh},{key:"Ctrl-a",run:hl,shift:Zf},{key:"Ctrl-e",run:Ll,shift:Uf},{key:"Ctrl-d",run:fa},{key:"Ctrl-h",run:Fa},{key:"Ctrl-k",run:Ka},{key:"Ctrl-Alt-h",run:Wh},{key:"Ctrl-o",run:pa},{key:"Ctrl-t",run:ul},{key:"Ctrl-v",run:ms}],f=[{key:"ArrowLeft",run:gs,shift:Ph,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Po,shift:Ia,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Pl,shift:$f,preventDefault:!0},{key:"ArrowRight",run:ho,shift:Lh,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Jr,shift:B,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Ba,shift:Rc,preventDefault:!0},{key:"ArrowUp",run:ii,shift:ha,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ts,shift:_h},{mac:"Ctrl-ArrowUp",run:Ws,shift:Ha},{key:"ArrowDown",run:Un,shift:Bh,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Dc,shift:Wa},{mac:"Ctrl-ArrowDown",run:ms,shift:Ih},{key:"PageUp",run:Ws,shift:Ha},{key:"PageDown",run:ms,shift:Ih},{key:"Home",run:Io,shift:Kf,preventDefault:!0},{key:"Mod-Home",run:ts,shift:_h},{key:"End",run:al,shift:Fs,preventDefault:!0},{key:"Mod-End",run:Dc,shift:Wa},{key:"Enter",run:Us},{key:"Mod-a",run:ca},{key:"Backspace",run:Fa,shift:Fa},{key:"Delete",run:fa},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Wh},{key:"Mod-Delete",mac:"Alt-Delete",run:za},{mac:"Mod-Backspace",run:Fh},{mac:"Mod-Delete",run:ua}].concat(a.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),p=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:ol,shift:Oc},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:ll,shift:_a},{key:"Alt-ArrowUp",run:$s},{key:"Shift-Alt-ArrowUp",run:is},{key:"Alt-ArrowDown",run:$a},{key:"Shift-Alt-ArrowDown",run:Ec},{key:"Escape",run:zs},{key:"Mod-Enter",run:Kh},{key:"Alt-l",mac:"Ctrl-l",run:Hh},{key:"Mod-i",run:Vs,preventDefault:!0},{key:"Mod-[",run:d},{key:"Mod-]",run:Za},{key:"Mod-Alt-\\",run:qf},{key:"Shift-Mod-k",run:Vh},{key:"Shift-Mod-\\",run:la},{key:"Mod-/",run:_s},{key:"Alt-A",run:oo}].concat(f),y={key:"Tab",run:Za,shift:d};function S(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)M(n,arguments[e]);return n}function M(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)M(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const D=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class E{constructor(e,t,i=0,r=e.length,l,c){this.test=c,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=l?u=>l(D(u)):D,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,k.gm)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=(0,k.bg)(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=(0,k.nZ)(e);let r=this.normalize(t);for(let l=0,c=i;;l++){let u=r.charCodeAt(l),m=this.match(u,c);if(l==r.length-1){if(m)return this.value=m,this;break}c==i&&l<t.length&&t.charCodeAt(l)==u&&c++}}}match(e,t){let i=null;for(let r=0;r<this.matches.length;r+=2){let l=this.matches[r],c=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[r+1],to:t+1}:(this.matches[r]++,c=!0)),c||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol!="undefined"&&(E.prototype[Symbol.iterator]=function(){return this});const I={from:-1,to:-1,match:/.*/.exec("")},$="gm"+(/x/.unicode==null?"":"u");class ne{constructor(e,t,i,r=0,l=e.length){if(this.text=e,this.to=l,this.curLine="",this.done=!1,this.value=I,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Te(e,t,i,r,l);this.re=new RegExp(t,$+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let c=e.lineAt(r);this.curLineStart=c.from,this.matchPos=We(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=We(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const le=new WeakMap;class me{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=le.get(e);if(!r||r.from>=i||r.to<=t){let u=new me(t,e.sliceString(t,i));return le.set(e,u),u}if(r.from==t&&r.to==i)return r;let{text:l,from:c}=r;return c>t&&(l=e.sliceString(t,c)+l,c=t),r.to<i&&(l+=e.sliceString(r.to,i)),le.set(e,new me(c,l)),new me(t,l.slice(t-c,i-c))}}class Te{constructor(e,t,i,r,l){this.text=e,this.to=l,this.done=!1,this.value=I,this.matchPos=We(e,r),this.re=new RegExp(t,$+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=me.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=We(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=me.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(ne.prototype[Symbol.iterator]=Te.prototype[Symbol.iterator]=function(){return this});function Ae(n){try{return new RegExp(n,$),!0}catch(e){return!1}}function We(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function Wt(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=S("input",{class:"cm-textfield",name:"line",value:e}),i=S("form",{class:"cm-gotoLine",onkeydown:l=>{l.keyCode==27?(l.preventDefault(),n.dispatch({effects:Kt.of(!1)}),n.focus()):l.keyCode==13&&(l.preventDefault(),r())},onsubmit:l=>{l.preventDefault(),r()}},S("label",n.state.phrase("Go to line"),": ",t)," ",S("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let l=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!l)return;let{state:c}=n,u=c.doc.lineAt(c.selection.main.head),[,m,x,w,T]=l,P=w?+w.slice(1):0,V=x?+x:u.number;if(x&&T){let se=V/100;m&&(se=se*(m=="-"?-1:1)+u.number/c.doc.lines),V=Math.round(c.doc.lines*se)}else x&&m&&(V=V*(m=="-"?-1:1)+u.number);let Z=c.doc.line(Math.max(1,Math.min(c.doc.lines,V))),ie=k.jT.cursor(Z.from+Math.max(0,Math.min(P,Z.length)));n.dispatch({effects:[Kt.of(!1),Y.tk.scrollIntoView(ie.from,{y:"center"})],selection:ie}),n.focus()}return{dom:i}}const Kt=k.Py.define(),Qt=k.QQ.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Kt)&&(n=t.value);return n},provide:n=>Y.mH.from(n,e=>e?Wt:null)}),Ei=n=>{let e=(0,Y.Sd)(n,Wt);if(!e){let t=[Kt.of(!0)];n.state.field(Qt,!1)==null&&t.push(k.Py.appendConfig.of([Qt,Fi])),n.dispatch({effects:t}),e=(0,Y.Sd)(n,Wt)}return e&&e.dom.querySelector("input").select(),!0},Fi=Y.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),er={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},js=k.r$.define({combine(n){return(0,k.BO)(n,er,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function uo(n){let e=[Gs,qs];return n&&e.push(js.of(n)),e}const ma=Y.p.mark({class:"cm-selectionMatch"}),Ua=Y.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Ho(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=k.D0.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=k.D0.Word)}function va(n,e,t,i){return n(e.sliceDoc(t,t+1))==k.D0.Word&&n(e.sliceDoc(i-1,i))==k.D0.Word}const qs=Y.lg.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(js),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Y.p.none;let r=i.main,l,c=null;if(r.empty){if(!e.highlightWordAroundCursor)return Y.p.none;let m=t.wordAt(r.head);if(!m)return Y.p.none;c=t.charCategorizer(r.head),l=t.sliceDoc(m.from,m.to)}else{let m=r.to-r.from;if(m<e.minSelectionLength||m>200)return Y.p.none;if(e.wholeWords){if(l=t.sliceDoc(r.from,r.to),c=t.charCategorizer(r.head),!(Ho(c,t,r.from,r.to)&&va(c,t,r.from,r.to)))return Y.p.none}else if(l=t.sliceDoc(r.from,r.to).trim(),!l)return Y.p.none}let u=[];for(let m of n.visibleRanges){let x=new E(t.doc,l,m.from,m.to);for(;!x.next().done;){let{from:w,to:T}=x.value;if((!c||Ho(c,t,w,T))&&(r.empty&&w<=r.from&&T>=r.to?u.push(Ua.range(w,T)):(w>=r.to||T<=r.from)&&u.push(ma.range(w,T)),u.length>e.maxMatches))return Y.p.none}}return Y.p.set(u)}},{decorations:n=>n.decorations}),Gs=Y.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Wo=({state:n,dispatch:e})=>{let{selection:t}=n,i=k.jT.create(t.ranges.map(r=>n.wordAt(r.head)||k.jT.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function po(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),l=r&&r.from==t.from&&r.to==t.to;for(let c=!1,u=new E(n.doc,e,i[i.length-1].to);;)if(u.next(),u.done){if(c)return null;u=new E(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),c=!0}else{if(c&&i.some(m=>m.from==u.value.from))continue;if(l){let m=n.wordAt(u.value.from);if(!m||m.from!=u.value.from||m.to!=u.value.to)continue}return u.value}}const go=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(l=>l.from===l.to))return Wo({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(l=>n.sliceDoc(l.from,l.to)!=i))return!1;let r=po(n,i);return r?(e(n.update({selection:n.selection.addRange(k.jT.range(r.from,r.to),!1),effects:Y.tk.scrollIntoView(r.to)})),!0):!1},_r=k.r$.define({combine(n){return(0,k.BO)(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new ep(e),scrollToMatch:e=>Y.tk.scrollIntoView(e)})}});function mo(n){return n?[_r.of(n),Wc]:Wc}class Lc{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Ae(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new si(this):new Bc(this)}getCursor(e,t=0,i){let r=e.doc?e:k.yy.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Hl(this,r,t,i):_l(this,r,t,i)}}class Gf{constructor(e){this.spec=e}}function _l(n,e,t,i){return new E(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?Yd(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Yd(n,e){return(t,i,r,l)=>((l>t||l+r.length<i)&&(l=Math.max(0,t-2),r=n.sliceString(l,Math.min(n.length,i+2))),(e(ya(r,t-l))!=k.D0.Word||e($h(r,t-l))!=k.D0.Word)&&(e($h(r,i-l))!=k.D0.Word||e(ya(r,i-l))!=k.D0.Word))}class Bc extends Gf{constructor(e){super(e)}nextMatch(e,t,i){let r=_l(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=_l(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let l=Math.max(t,r-1e4-this.spec.unquoted.length),c=_l(this.spec,e,l,r),u=null;for(;!c.nextOverlapping().done;)u=c.value;if(u)return u;if(l==t)return null;r-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=_l(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let l=_l(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!l.next().done;)r(l.value.from,l.value.to)}}function Hl(n,e,t,i){return new ne(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Nc(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function ya(n,e){return n.slice((0,k.cp)(n,e,!1),e)}function $h(n,e){return n.slice(e,(0,k.cp)(n,e))}function Nc(n){return(e,t,i)=>!i[0].length||(n(ya(i.input,i.index))!=k.D0.Word||n($h(i.input,i.index))!=k.D0.Word)&&(n($h(i.input,i.index+i[0].length))!=k.D0.Word||n(ya(i.input,i.index+i[0].length))!=k.D0.Word)}class si extends Gf{nextMatch(e,t,i){let r=Hl(this.spec,e,i,e.doc.length).next();return r.done&&(r=Hl(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let l=Math.max(t,i-r*1e4),c=Hl(this.spec,e,l,i),u=null;for(;!c.next().done;)u=c.value;if(u&&(l==t||u.from>l+10))return u;if(l==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=Hl(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let l=Hl(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!l.next().done;)r(l.value.from,l.value.to)}}const ja=k.Py.define(),Ic=k.Py.define(),ns=k.QQ.define({create(n){return new _c(Xa(n).create(),null)},update(n,e){for(let t of e.effects)t.is(ja)?n=new _c(t.value.create(),n.panel):t.is(Ic)&&(n=new _c(n.query,t.value?xa:null));return n},provide:n=>Y.mH.from(n,e=>e.panel)});function Jd(n){let e=n.field(ns,!1);return e?e.query.spec:Xa(n)}function Xg(n){var e;return((e=n.field(ns,!1))===null||e===void 0?void 0:e.panel)!=null}class _c{constructor(e,t){this.query=e,this.panel=t}}const Rs=Y.p.mark({class:"cm-searchMatch"}),Qd=Y.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Zh=Y.lg.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(ns))}update(n){let e=n.state.field(ns);(e!=n.startState.field(ns)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Y.p.none;let{view:t}=this,i=new k.f_;for(let r=0,l=t.visibleRanges,c=l.length;r<c;r++){let{from:u,to:m}=l[r];for(;r<c-1&&m>l[r+1].from-2*250;)m=l[++r].to;n.highlight(t.state,u,m,(x,w)=>{let T=t.state.selection.ranges.some(P=>P.from==x&&P.to==w);i.add(x,w,T?Qd:Rs)})}return i.finish()}},{decorations:n=>n.decorations});function Wl(n){return e=>{let t=e.state.field(ns,!1);return t&&t.query.spec.valid?n(e,t):qh(e)}}const qa=Wl((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=k.jT.single(i.from,i.to),l=n.state.facet(_r);return n.dispatch({selection:r,effects:[Qa(n,i),l.scrollToMatch(r.main,n)],userEvent:"select.search"}),Hc(n),!0}),Ga=Wl((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let l=k.jT.single(r.from,r.to),c=n.state.facet(_r);return n.dispatch({selection:l,effects:[Qa(n,r),c.scrollToMatch(l.main,n)],userEvent:"select.search"}),Hc(n),!0}),ys=Wl((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:k.jT.create(t.map(i=>k.jT.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),pl=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,l=[],c=0;for(let u=new E(n.doc,n.sliceDoc(i,r));!u.next().done;){if(l.length>1e3)return!1;u.value.from==i&&(c=l.length),l.push(k.jT.range(u.value.from,u.value.to))}return e(n.update({selection:k.jT.create(l,c),userEvent:"select.search.matches"})),!0},Uh=Wl((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let l=e.nextMatch(t,i,i);if(!l)return!1;let c=[],u,m,x=[];if(l.from==i&&l.to==r&&(m=t.toText(e.getReplacement(l)),c.push({from:l.from,to:l.to,insert:m}),l=e.nextMatch(t,l.from,l.to),x.push(Y.tk.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),l){let w=c.length==0||c[0].from>=l.to?0:l.to-l.from-m.length;u=k.jT.single(l.from-w,l.to-w),x.push(Qa(n,l)),x.push(t.facet(_r).scrollToMatch(u.main,n))}return n.dispatch({changes:c,selection:u,effects:x,userEvent:"input.replace"}),!0}),Xf=Wl((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:l,to:c}=r;return{from:l,to:c,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Y.tk.announce.of(i),userEvent:"input.replace.all"}),!0});function xa(n){return n.state.facet(_r).createPanel(n)}function Xa(n,e){var t,i,r,l,c;let u=n.selection.main,m=u.empty||u.to>u.from+100?"":n.sliceDoc(u.from,u.to);if(e&&!m)return e;let x=n.facet(_r);return new Lc({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:x.literal)?m:m.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:x.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:x.literal,regexp:(l=e==null?void 0:e.regexp)!==null&&l!==void 0?l:x.regexp,wholeWord:(c=e==null?void 0:e.wholeWord)!==null&&c!==void 0?c:x.wholeWord})}function jh(n){let e=(0,Y.Sd)(n,xa);return e&&e.dom.querySelector("[main-field]")}function Hc(n){let e=jh(n);e&&e==n.root.activeElement&&e.select()}const qh=n=>{let e=n.state.field(ns,!1);if(e&&e.panel){let t=jh(n);if(t&&t!=n.root.activeElement){let i=Xa(n.state,e.query.spec);i.valid&&n.dispatch({effects:ja.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[Ic.of(!0),e?ja.of(Xa(n.state,e.query.spec)):k.Py.appendConfig.of(Wc)]});return!0},Gh=n=>{let e=n.state.field(ns,!1);if(!e||!e.panel)return!1;let t=(0,Y.Sd)(n,xa);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Ic.of(!1)}),!0},gl=[{key:"Mod-f",run:qh,scope:"editor search-panel"},{key:"F3",run:qa,shift:Ga,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:qa,shift:Ga,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Gh,scope:"editor search-panel"},{key:"Mod-Shift-l",run:pl},{key:"Alt-g",run:Ei},{key:"Mod-d",run:go,preventDefault:!0}];class ep{constructor(e){this.view=e;let t=this.query=e.state.field(ns).query.spec;this.commit=this.commit.bind(this),this.searchField=S("input",{value:t.search,placeholder:qn(e,"Find"),"aria-label":qn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=S("input",{value:t.replace,placeholder:qn(e,"Replace"),"aria-label":qn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=S("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=S("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=S("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,l,c){return S("button",{class:"cm-button",name:r,onclick:l,type:"button"},c)}this.dom=S("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>qa(e),[qn(e,"next")]),i("prev",()=>Ga(e),[qn(e,"previous")]),i("select",()=>ys(e),[qn(e,"all")]),S("label",null,[this.caseField,qn(e,"match case")]),S("label",null,[this.reField,qn(e,"regexp")]),S("label",null,[this.wordField,qn(e,"by word")]),...e.state.readOnly?[]:[S("br"),this.replaceField,i("replace",()=>Uh(e),[qn(e,"replace")]),i("replaceAll",()=>Xf(e),[qn(e,"replace all")])],S("button",{name:"close",onclick:()=>Gh(e),"aria-label":qn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Lc({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ja.of(e)}))}keydown(e){(0,Y.$1)(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ga:qa)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Uh(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(ja)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(_r).top}}function qn(n,e){return n.state.phrase(e)}const Ya=30,Ja=/[\s\.,:;?!]/;function Qa(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,l=Math.max(i.from,e-Ya),c=Math.min(r,t+Ya),u=n.state.sliceDoc(l,c);if(l!=i.from){for(let m=0;m<Ya;m++)if(!Ja.test(u[m+1])&&Ja.test(u[m])){u=u.slice(m);break}}if(c!=r){for(let m=u.length-1;m>u.length-Ya;m--)if(!Ja.test(u[m-1])&&Ja.test(u[m])){u=u.slice(0,m);break}}return Y.tk.announce.of(`${n.state.phrase("current match")}. ${u} ${n.state.phrase("on line")} ${i.number}.`)}const tp=Y.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Wc=[ns,k.Wl.low(Zh),tp];var Fc=Le(81754);function eh(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Xh(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function ip(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function th(n,e){if(!e.anchorNode)return!1;try{return Xh(n,e.anchorNode)}catch(t){return!1}}function Fl(n){return n.nodeType==3?$l(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Ar(n,e,t,i){return t?Yf(n,e,t,i,-1)||Yf(n,e,t,i,1):!1}function rs(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Yf(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:Fo(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=rs(n)+(r<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?Fo(n):0}else return!1}}function Fo(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Vl(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function ba(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Jf(n,e,t,i,r,l,c,u){let m=n.ownerDocument,x=m.defaultView||window;for(let w=n,T=!1;w&&!T;)if(w.nodeType==1){let P,V=w==m.body,Z=1,ie=1;if(V)P=ba(x);else{if(/^(fixed|sticky)$/.test(getComputedStyle(w).position)&&(T=!0),w.scrollHeight<=w.clientHeight&&w.scrollWidth<=w.clientWidth){w=w.assignedSlot||w.parentNode;continue}let Re=w.getBoundingClientRect();Z=Re.width/w.offsetWidth,ie=Re.height/w.offsetHeight,P={left:Re.left,right:Re.left+w.clientWidth*Z,top:Re.top,bottom:Re.top+w.clientHeight*ie}}let se=0,he=0;if(r=="nearest")e.top<P.top?(he=-(P.top-e.top+c),t>0&&e.bottom>P.bottom+he&&(he=e.bottom-P.bottom+he+c)):e.bottom>P.bottom&&(he=e.bottom-P.bottom+c,t<0&&e.top-he<P.top&&(he=-(P.top+he-e.top+c)));else{let Re=e.bottom-e.top,Ge=P.bottom-P.top;he=(r=="center"&&Re<=Ge?e.top+Re/2-Ge/2:r=="start"||r=="center"&&t<0?e.top-c:e.bottom-Ge+c)-P.top}if(i=="nearest"?e.left<P.left?(se=-(P.left-e.left+l),t>0&&e.right>P.right+se&&(se=e.right-P.right+se+l)):e.right>P.right&&(se=e.right-P.right+l,t<0&&e.left<P.left+se&&(se=-(P.left+se-e.left+l))):se=(i=="center"?e.left+(e.right-e.left)/2-(P.right-P.left)/2:i=="start"==u?e.left-l:e.right-(P.right-P.left)+l)-P.left,se||he)if(V)x.scrollBy(se,he);else{let Re=0,Ge=0;if(he){let Oe=w.scrollTop;w.scrollTop+=he/ie,Ge=(w.scrollTop-Oe)*ie}if(se){let Oe=w.scrollLeft;w.scrollLeft+=se/Z,Re=(w.scrollLeft-Oe)*Z}e={left:e.left-Re,top:e.top-Ge,right:e.right-Re,bottom:e.bottom-Ge},Re&&Math.abs(Re-se)<1&&(i="nearest"),Ge&&Math.abs(Ge-he)<1&&(r="nearest")}if(V)break;w=w.assignedSlot||w.parentNode}else if(w.nodeType==11)w=w.host;else break}function Qf(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class np{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Fo(t):0),i,Math.min(e.focusOffset,i?Fo(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let zl=null;function Kl(n){if(n.setActive)return n.setActive();if(zl)return n.focus(zl);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(zl==null?{get preventScroll(){return zl={preventScroll:!0},!0}}:void 0),!zl){zl=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],l=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=l&&(i.scrollLeft=l)}}}let wa;function $l(n,e,t=e){let i=wa||(wa=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Zl(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,n.dispatchEvent(r);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,n.dispatchEvent(l),r.defaultPrevented||l.defaultPrevented}function eu(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function ih(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function tu(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Fo(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=Fo(t))}else{if(t==n)return!0;i=rs(t),t=t.parentNode}}function nh(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}class fr{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new fr(e.parentNode,rs(e),t)}static after(e,t){return new fr(e.parentNode,rs(e)+1,t)}}const Sa=[];class yn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,l;for(let c of this.children){if(c.flags&7){if(!c.dom&&(l=r?r.nextSibling:i.firstChild)){let u=yn.get(l);(!u||!u.parent&&u.canReuseDOM(c))&&c.reuseDOM(l)}c.sync(e,t),c.flags&=-8}if(l=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&l!=c.dom&&(t.written=!0),c.dom.parentNode==i)for(;l&&l!=c.dom;)l=Vc(l);else i.insertBefore(c.dom,l);r=c.dom}for(l=r?r.nextSibling:i.firstChild,l&&t&&t.node==i&&(t.written=!0);l;)l=Vc(l)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=Fo(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;r==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?r=-1:r=1),e=l}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!yn.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,l=0;;r++){let c=this.children[r];if(c.dom==i)return l;l+=c.length+c.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,l=-1,c=-1,u=-1;for(let m=0,x=i,w=i;m<this.children.length;m++){let T=this.children[m],P=x+T.length;if(x<e&&P>t)return T.domBoundsAround(e,t,x);if(P>=e&&r==-1&&(r=m,l=x),x>t&&T.dom.parentNode==this.dom){c=m,u=w;break}w=P,x=P+T.breakAfter}return{from:l,to:u<0?i+this.length:u,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:c<this.children.length&&c>=0?this.children[c].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Sa){this.markDirty();for(let r=e;r<t;r++){let l=this.children[r];l.parent==this&&l.destroy()}this.children.splice(e,t-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new rh(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,l,c){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}yn.prototype.breakAfter=0;function Vc(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class rh{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function zc(n,e,t,i,r,l,c,u,m){let{children:x}=n,w=x.length?x[e]:null,T=l.length?l[l.length-1]:null,P=T?T.breakAfter:c;if(!(e==i&&w&&!c&&!P&&l.length<2&&w.merge(t,r,l.length?T:null,t==0,u,m))){if(i<x.length){let V=x[i];V&&(r<V.length||V.breakAfter&&(T!=null&&T.breakAfter))?(e==i&&(V=V.split(r),r=0),!P&&T&&V.merge(0,r,T,!0,0,m)?l[l.length-1]=V:((r||V.children.length&&!V.children[0].length)&&V.merge(0,r,null,!1,0,m),l.push(V))):V!=null&&V.breakAfter&&(T?T.breakAfter=1:c=1),i++}for(w&&(w.breakAfter=c,t>0&&(!c&&l.length&&w.merge(t,w.length,l[0],!1,u,0)?w.breakAfter=l.shift().breakAfter:(t<w.length||w.children.length&&w.children[w.children.length-1].length==0)&&w.merge(t,w.length,null,!1,u,0),e++));e<i&&l.length;)if(x[i-1].become(l[l.length-1]))i--,l.pop(),m=l.length?0:u;else if(x[e].become(l[0]))e++,l.shift(),u=l.length?0:m;else break;!l.length&&e&&i<x.length&&!x[e-1].breakAfter&&x[i].merge(0,0,x[e-1],!1,u,m)&&e--,(e<i||l.length)&&n.replaceChildren(e,i,l)}}function Yh(n,e,t,i,r,l){let c=n.childCursor(),{i:u,off:m}=c.findPos(t,1),{i:x,off:w}=c.findPos(e,-1),T=e-t;for(let P of i)T+=P.length;n.length+=T,zc(n,x,w,u,m,i,0,r,l)}let xs=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Jh=typeof document!="undefined"?document:{documentElement:{style:{}}};const Xs=/Edge\/(\d+)/.exec(xs.userAgent),Kc=/MSIE \d/.test(xs.userAgent),Qh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xs.userAgent),ec=!!(Kc||Qh||Xs),$c=!ec&&/gecko\/(\d+)/i.test(xs.userAgent),Zc=!ec&&/Chrome\/(\d+)/.exec(xs.userAgent),iu="webkitFontSmoothing"in Jh.documentElement.style,vo=!ec&&/Apple Computer/.test(xs.vendor),tc=vo&&(/Mobile\/\w+/.test(xs.userAgent)||xs.maxTouchPoints>2);var dt={mac:tc||/Mac/.test(xs.platform),windows:/Win/.test(xs.platform),linux:/Linux|X11/.test(xs.platform),ie:ec,ie_version:Kc?Jh.documentMode||6:Qh?+Qh[1]:Xs?+Xs[1]:0,gecko:$c,gecko_version:$c?+(/Firefox\/(\d+)/.exec(xs.userAgent)||[0,0])[1]:0,chrome:!!Zc,chrome_version:Zc?+Zc[1]:0,ios:tc,android:/Android\b/.test(xs.userAgent),webkit:iu,safari:vo,webkit_version:iu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Jh.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Uc=256;class Ds extends yn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Ds)||this.length-(t-e)+i.length>Uc||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ds(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new fr(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Mt(this.dom,e,t)}}class ss extends yn{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(ih(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,l,c){return i&&(!(i instanceof ss&&i.mark.eq(this.mark))||e&&l<=0||t<this.length&&c<=0)?!1:(Yh(this,e,t,i?i.children:[],l-1,c-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,l=0;for(let u of this.children){let m=i+u.length;m>e&&t.push(i<e?u.split(e-i):u),r<0&&i>=e&&(r=l),i=m,l++}let c=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new ss(this.mark,t,c)}domAtPos(e){return vl(this,e)}coordsAt(e,t){return ic(this,e,t)}}function Mt(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,l=e,c=0;e==0&&t<0||e==i&&t>=0?dt.chrome||dt.gecko||(e?(r--,c=1):l<i&&(l++,c=-1)):t<0?r--:l<i&&l++;let u=$l(n,r,l).getClientRects();if(!u.length)return null;let m=u[(c?c<0:t>=0)?0:u.length-1];return dt.safari&&!c&&m.width==0&&(m=Array.prototype.find.call(u,x=>x.width)||m),c?Vl(m,c<0):m||null}class Ys extends yn{static create(e,t,i){return new Ys(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Ys.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,r,l,c){return i&&(!(i instanceof Ys)||!this.widget.compare(i.widget)||e>0&&l<=0||t<this.length&&c<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Ys&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return k.xv.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):k.xv.empty}domAtPos(e){return(this.length?e==0:this.side>0)?fr.before(this.dom):fr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),l=null;if(!r.length)return null;let c=this.side?this.side<0:e>0;for(let u=c?r.length-1:0;l=r[u],!(e>0?u==0:u==r.length-1||l.top<l.bottom);u+=c?-1:1);return Vl(l,!c)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ml extends yn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ml&&e.side==this.side}split(){return new ml(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?fr.before(this.dom):fr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return k.xv.empty}get isHidden(){return!0}}Ds.prototype.children=Ys.prototype.children=ml.prototype.children=Sa;function vl(n,e){let t=n.dom,{children:i}=n,r=0;for(let l=0;r<i.length;r++){let c=i[r],u=l+c.length;if(!(u==l&&c.getSide()<=0)){if(e>l&&e<u&&c.dom.parentNode==t)return c.domAtPos(e-l);if(e<=l)break;l=u}}for(let l=r;l>0;l--){let c=i[l-1];if(c.dom.parentNode==t)return c.domAtPos(c.length)}for(let l=r;l<i.length;l++){let c=i[l];if(c.dom.parentNode==t)return c.domAtPos(0)}return new fr(t,0)}function nu(n,e,t){let i,{children:r}=n;t>0&&e instanceof ss&&r.length&&(i=r[r.length-1])instanceof ss&&i.mark.eq(e.mark)?nu(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function ic(n,e,t){let i=null,r=-1,l=null,c=-1;function u(x,w){for(let T=0,P=0;T<x.children.length&&P<=w;T++){let V=x.children[T],Z=P+V.length;Z>=w&&(V.children.length?u(V,w-P):(!l||l.isHidden&&t>0)&&(Z>w||P==Z&&V.getSide()>0)?(l=V,c=w-P):(P<w||P==Z&&V.getSide()<0&&!V.isHidden)&&(i=V,r=w-P)),P=Z}}u(n,e);let m=(t<0?i:l)||i||l;return m?m.coordsAt(Math.max(0,m==i?r:c),t):ru(n)}function ru(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Fl(e);return t[t.length-1]||null}function ur(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const su=Object.create(null);function jc(n,e,t){if(n==e)return!0;n||(n=su),e||(e=su);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let l of i)if(l!=t&&(r.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function nc(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function rp(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class Gn extends yn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,l,c){if(i){if(!(i instanceof Gn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Yh(this,e,t,i?i.children:[],l,c),!0}split(e){let t=new Gn;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let l=i;l<this.children.length;l++)t.append(this.children[l],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){jc(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){nu(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=ur(t,this.attrs||{})),i&&(this.attrs=ur({class:i},this.attrs||{}))}domAtPos(e){return vl(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(ih(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(nc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&yn.get(r)instanceof ss;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=yn.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!dt.ios||!this.children.some(l=>l instanceof Ds))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Ds)||/[^ -~]/.test(i.text))return null;let r=Fl(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=ic(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,l=i.bottom-i.top;if(Math.abs(l-r.lineHeight)<2&&r.textHeight<l){let c=(l-r.textHeight)/2;return{top:i.top+c,bottom:i.bottom-c,left:i.left,right:i.left}}}return i}become(e){return!1}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let l=e.children[i],c=r+l.length;if(c>=t){if(l instanceof Gn)return l;if(c>t)break}r=c+l.breakAfter}return null}}class yl extends yn{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,l,c){return i&&(!(i instanceof yl)||!this.widget.compare(i.widget)||e>0&&l<=0||t<this.length&&c<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?fr.before(this.dom):fr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new yl(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Sa}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):k.xv.empty}domBoundsAround(){return null}become(e){return e instanceof yl&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class rc{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}destroy(e){}}var $r=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}($r||($r={}));class Pi extends k.uU{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new tr(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new xl(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:l,end:c}=sc(e,t);i=(l?t?-3e8:-1:5e8)-1,r=(c?t?2e8:1:-6e8)+1}return new xl(e,i,r,t,e.widget||null,!0)}static line(e){return new Ul(e)}static set(e,t=!1){return k.Xs.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Pi.none=k.Xs.empty;class tr extends Pi{constructor(e){let{start:t,end:i}=sc(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof tr&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&jc(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}tr.prototype.point=!1;class Ul extends Pi{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ul&&this.spec.class==e.spec.class&&jc(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ul.prototype.mapMode=k.gc.TrackBefore,Ul.prototype.point=!0;class xl extends Pi{constructor(e,t,i,r,l,c){super(t,i,l,e),this.block=r,this.isReplace=c,this.mapMode=r?t<=0?k.gc.TrackBefore:k.gc.TrackAfter:k.gc.TrackDel}get type(){return this.startSide!=this.endSide?$r.WidgetRange:this.startSide<=0?$r.WidgetBefore:$r.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof xl&&sp(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}xl.prototype.point=!0;function sc(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function sp(n,e){return n==e||!!(n&&e&&n.compare(e))}function qc(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class Vo{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof yl&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Gn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(sh(new ml(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof yl)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:c,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(sh(new Ds(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,l,c){if(this.disallowBlockEffectsFor[c]&&i instanceof xl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=t-e;if(i instanceof xl)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new yl(i.widget||new Gc("div"),u,i));else{let m=Ys.create(i.widget||new Gc("span"),u,u?0:i.startSide),x=this.atCursorPos&&!m.isEditable&&l<=r.length&&(e<t||i.startSide>0),w=!m.isEditable&&(e<t||l>r.length||i.startSide<=0),T=this.getLine();this.pendingBuffer==2&&!x&&!m.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),x&&(T.append(sh(new ml(1),r),l),l=r.length+Math.max(0,l-r.length)),T.append(sh(m,r),l),this.atCursorPos=w,this.pendingBuffer=w?e<t||l>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=l)}static build(e,t,i,r,l){let c=new Vo(e,t,i,l);return c.openEnd=k.Xs.spans(r,t,i,c),c.openStart<0&&(c.openStart=c.openEnd),c.finish(c.openEnd),c}}function sh(n,e){for(let t of e)n=new ss(t,[n],n.length);return n}class Gc extends rc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const ou=k.r$.define(),lu=k.r$.define(),au=k.r$.define(),hu=k.r$.define(),oc=k.r$.define(),Xc=k.r$.define(),cu=k.r$.define(),lc=k.r$.define({combine:n=>n.some(e=>e)}),Yc=k.r$.define({combine:n=>n.some(e=>e)});class bl{constructor(e,t="nearest",i="nearest",r=5,l=5){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=l}map(e){return e.empty?this:new bl(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const ac=k.Py.define({map:(n,e)=>n.map(e)});function Js(n,e,t){let i=n.facet(hu);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const oh=k.r$.define({combine:n=>n.length?n[0]:!0});let hc=0;const Ca=k.r$.define();class un{constructor(e,t,i,r,l){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.extension=l(this)}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:l,decorations:c}=t||{};return new un(hc++,e,i,r,u=>{let m=[Ca.of(u)];return c&&m.push(ah.of(x=>{let w=x.plugin(u);return w?c(w):Pi.none})),l&&m.push(l(u)),m})}static fromClass(e,t){return un.define(i=>new e(i),t)}}class zo{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Js(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(r){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Js(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Js(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const fu=k.r$.define(),lh=k.r$.define(),ah=k.r$.define(),Jc=k.r$.define(),uu=k.r$.define();function du(n,e,t){let i=n.state.facet(uu);if(!i.length)return i;let r=i.map(c=>c instanceof Function?c(n):c),l=[];return k.Xs.spans(r,e,t,{point(){},span(c,u,m,x){let w=l;for(let T=m.length-1;T>=0;T--,x--){let P=m[T].spec.bidiIsolate,V;if(P!=null)if(x>0&&w.length&&(V=w[w.length-1]).to==c&&V.direction==P)V.to=u,w=V.inner;else{let Z={from:c,to:u,direction:P,inner:[]};w.push(Z),w=Z.inner}}}}),l}const pu=k.r$.define();function gu(n){let e=0,t=0,i=0,r=0;for(let l of n.state.facet(pu)){let c=l(n);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(t=Math.max(t,c.right)),c.top!=null&&(i=Math.max(i,c.top)),c.bottom!=null&&(r=Math.max(r,c.bottom)))}return{left:e,right:t,top:i,bottom:r}}const hh=k.r$.define();class bs{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new bs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,l=0,c=0,u=0;;r++){let m=r==e.length?null:e[r],x=c-u,w=m?m.fromB:1e9;for(;l<t.length&&t[l]<w;){let T=t[l],P=t[l+1],V=Math.max(u,T),Z=Math.min(w,P);if(V<=Z&&new bs(V+x,Z+x,V,Z).addToSet(i),P>w)break;l+=2}if(!m)return i;new bs(m.fromA,m.toA,m.fromB,m.toB).addToSet(i),c=m.toA,u=m.toB}}}class cc{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=k.as.empty(this.startState.doc.length);for(let l of i)this.changes=this.changes.compose(l.changes);let r=[];this.changes.iterChangedRanges((l,c,u,m)=>r.push(new bs(l,c,u,m))),this.changedRanges=r}static create(e,t,i){return new cc(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Bn=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Bn||(Bn={}));const ch=Bn.LTR,Qc=Bn.RTL;function ef(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const mu=ef("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),op=ef("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),tf=Object.create(null),yo=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);tf[e]=t,tf[t]=-e}function vu(n){return n<=247?mu[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?op[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const lp=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class wl{get dir(){return this.level%2?Qc:ch}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,r){let l=-1;for(let c=0;c<e.length;c++){let u=e[c];if(u.from<=t&&u.to>=t){if(u.level==i)return c;(l<0||(r!=0?r<0?u.from<t:u.to>t:e[l].level>u.level))&&(l=c)}}if(l<0)throw new RangeError("Index out of range");return l}}function yu(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!yu(i.inner,r.inner))return!1}return!0}const rn=[];function ap(n,e,t,i,r){for(let l=0;l<=i.length;l++){let c=l?i[l-1].to:e,u=l<i.length?i[l].from:t,m=l?256:r;for(let x=c,w=m,T=m;x<u;x++){let P=vu(n.charCodeAt(x));P==512?P=w:P==8&&T==4&&(P=16),rn[x]=P==4?2:P,P&7&&(T=P),w=P}for(let x=c,w=m,T=m;x<u;x++){let P=rn[x];if(P==128)x<u-1&&w==rn[x+1]&&w&24?P=rn[x]=w:rn[x]=256;else if(P==64){let V=x+1;for(;V<u&&rn[V]==64;)V++;let Z=x&&w==8||V<t&&rn[V]==8?T==1?1:8:256;for(let ie=x;ie<V;ie++)rn[ie]=Z;x=V-1}else P==8&&T==1&&(rn[x]=1);w=P,P&7&&(T=P)}}}function hp(n,e,t,i,r){let l=r==1?2:1;for(let c=0,u=0,m=0;c<=i.length;c++){let x=c?i[c-1].to:e,w=c<i.length?i[c].from:t;for(let T=x,P,V,Z;T<w;T++)if(V=tf[P=n.charCodeAt(T)])if(V<0){for(let ie=u-3;ie>=0;ie-=3)if(yo[ie+1]==-V){let se=yo[ie+2],he=se&2?r:se&4?se&1?l:r:0;he&&(rn[T]=rn[yo[ie]]=he),u=ie;break}}else{if(yo.length==189)break;yo[u++]=T,yo[u++]=P,yo[u++]=m}else if((Z=rn[T])==2||Z==1){let ie=Z==r;m=ie?0:1;for(let se=u-3;se>=0;se-=3){let he=yo[se+2];if(he&2)break;if(ie)yo[se+2]|=2;else{if(he&4)break;yo[se+2]|=4}}}}}function Es(n,e,t,i){for(let r=0,l=i;r<=t.length;r++){let c=r?t[r-1].to:n,u=r<t.length?t[r].from:e;for(let m=c;m<u;){let x=rn[m];if(x==256){let w=m+1;for(;;)if(w==u){if(r==t.length)break;w=t[r++].to,u=r<t.length?t[r].from:e}else if(rn[w]==256)w++;else break;let T=l==1,P=(w<e?rn[w]:i)==1,V=T==P?T?1:2:i;for(let Z=w,ie=r,se=ie?t[ie-1].to:n;Z>m;)Z==se&&(Z=t[--ie].from,se=ie?t[ie-1].to:n),rn[--Z]=V;m=w}else l=x,m++}}}function nf(n,e,t,i,r,l,c){let u=i%2?2:1;if(i%2==r%2)for(let m=e,x=0;m<t;){let w=!0,T=!1;if(x==l.length||m<l[x].from){let ie=rn[m];ie!=u&&(w=!1,T=ie==16)}let P=!w&&u==1?[]:null,V=w?i:i+1,Z=m;e:for(;;)if(x<l.length&&Z==l[x].from){if(T)break e;let ie=l[x];if(!w)for(let se=ie.to,he=x+1;;){if(se==t)break e;if(he<l.length&&l[he].from==se)se=l[he++].to;else{if(rn[se]==u)break e;break}}if(x++,P)P.push(ie);else{ie.from>m&&c.push(new wl(m,ie.from,V));let se=ie.direction==ch!=!(V%2);rf(n,se?i+1:i,r,ie.inner,ie.from,ie.to,c),m=ie.to}Z=ie.to}else{if(Z==t||(w?rn[Z]!=u:rn[Z]==u))break;Z++}P?nf(n,m,Z,i+1,r,P,c):m<Z&&c.push(new wl(m,Z,V)),m=Z}else for(let m=t,x=l.length;m>e;){let w=!0,T=!1;if(!x||m>l[x-1].to){let ie=rn[m-1];ie!=u&&(w=!1,T=ie==16)}let P=!w&&u==1?[]:null,V=w?i:i+1,Z=m;e:for(;;)if(x&&Z==l[x-1].to){if(T)break e;let ie=l[--x];if(!w)for(let se=ie.from,he=x;;){if(se==e)break e;if(he&&l[he-1].to==se)se=l[--he].from;else{if(rn[se-1]==u)break e;break}}if(P)P.push(ie);else{ie.to<m&&c.push(new wl(ie.to,m,V));let se=ie.direction==ch!=!(V%2);rf(n,se?i+1:i,r,ie.inner,ie.from,ie.to,c),m=ie.from}Z=ie.from}else{if(Z==e||(w?rn[Z-1]!=u:rn[Z-1]==u))break;Z--}P?nf(n,Z,m,i+1,r,P,c):Z<m&&c.push(new wl(Z,m,V)),m=Z}}function rf(n,e,t,i,r,l,c){let u=e%2?2:1;ap(n,r,l,i,u),hp(n,r,l,i,u),Es(r,l,i,u),nf(n,r,l,e,t,i,c)}function xu(n,e,t){if(!n)return[new wl(0,0,e==Qc?1:0)];if(e==ch&&!t.length&&!lp.test(n))return sf(n.length);if(t.length)for(;n.length>rn.length;)rn[rn.length]=256;let i=[],r=e==ch?0:1;return rf(n,r,r,t,0,n.length,i),i}function sf(n){return[new wl(0,n,0)]}let bu="";function wu(n,e,t,i,r){var l;let c=i.head-n.from,u=-1;if(c==0){if(!r||!n.length)return null;e[0].level!=t&&(c=e[0].side(!1,t),u=0)}else if(c==n.length){if(r)return null;let P=e[e.length-1];P.level!=t&&(c=P.side(!0,t),u=e.length-1)}u<0&&(u=wl.find(e,c,(l=i.bidiLevel)!==null&&l!==void 0?l:-1,i.assoc));let m=e[u];c==m.side(r,t)&&(m=e[u+=r?1:-1],c=m.side(!r,t));let x=r==(m.dir==t),w=(0,k.cp)(n.text,c,x);if(bu=n.text.slice(Math.min(c,w),Math.max(c,w)),w!=m.side(r,t))return k.jT.cursor(w+n.from,x?-1:1,m.level);let T=u==(r?e.length-1:0)?null:e[u+(r?1:-1)];return!T&&m.level!=t?k.jT.cursor(r?n.to:n.from,r?-1:1,t):T&&T.level<m.level?k.jT.cursor(T.side(!r,t)+n.from,r?1:-1,T.level):k.jT.cursor(w+n.from,r?-1:1,m.level)}class Su extends yn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Gn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new bs(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:x,toA:w})=>w<this.minWidthFrom||x>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!mp(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let l=r>-1?fp(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:x,to:w}=this.hasComposition;i=new bs(x,w,e.changes.mapPos(x,-1),e.changes.mapPos(w,1)).addToSet(i.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(dt.ie||dt.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,u=this.updateDeco(),m=pp(c,u,e.changes);return i=bs.extendWithRanges(i,m),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let c=dt.chrome||dt.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,c),this.flags&=-8,c&&(c.written||r.selectionRange.focusNode!=c.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(c=>c.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let c of this.children)c instanceof yl&&c.widget instanceof fc&&l.push(c.dom);r.updateGaps(l)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,l=this.childCursor(t);for(let c=r.length-1;;c--){let u=c>=0?r[c]:null;if(!u)break;let{fromA:m,toA:x,fromB:w,toB:T}=u,P,V,Z,ie;if(i&&i.range.fromB<T&&i.range.toB>w){let Oe=Vo.build(this.view.state.doc,w,i.range.fromB,this.decorations,this.dynamicDecorationMap),De=Vo.build(this.view.state.doc,i.range.toB,T,this.decorations,this.dynamicDecorationMap);V=Oe.breakAtStart,Z=Oe.openStart,ie=De.openEnd;let Ne=this.compositionView(i);De.breakAtStart?Ne.breakAfter=1:De.content.length&&Ne.merge(Ne.length,Ne.length,De.content[0],!1,De.openStart,0)&&(Ne.breakAfter=De.content[0].breakAfter,De.content.shift()),Oe.content.length&&Ne.merge(0,0,Oe.content[Oe.content.length-1],!0,0,Oe.openEnd)&&Oe.content.pop(),P=Oe.content.concat(Ne).concat(De.content)}else({content:P,breakAtStart:V,openStart:Z,openEnd:ie}=Vo.build(this.view.state.doc,w,T,this.decorations,this.dynamicDecorationMap));let{i:se,off:he}=l.findPos(x,1),{i:Re,off:Ge}=l.findPos(m,-1);zc(this,Re,Ge,se,he,P,V,Z,ie)}i&&this.fixCompositionDOM(i)}compositionView(e){let t=new Ds(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new ss(r,[t],t.length);let i=new Gn;return i.append(t,0),i}fixCompositionDOM(e){let t=(l,c)=>{c.flags|=8|(c.children.some(m=>m.flags&7)?1:0),this.markedForComposition.add(c);let u=yn.get(l);u&&u!=c&&(u.dom=null),c.setDOM(l)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let l=e.marks.length-1;l>=-1;l--)i=r.childPos(i.off,1),r=r.children[i.i],t(l>=0?e.marks[l].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,l=!r&&th(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||l))return;let c=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,m=this.moveToLine(this.domAtPos(u.anchor)),x=u.empty?m:this.moveToLine(this.domAtPos(u.head));if(dt.gecko&&u.empty&&!this.hasComposition&&cp(m)){let T=document.createTextNode("");this.view.observer.ignore(()=>m.node.insertBefore(T,m.node.childNodes[m.offset]||null)),m=x=new fr(T,0),c=!0}let w=this.view.observer.selectionRange;(c||!w.focusNode||!Ar(m.node,m.offset,w.anchorNode,w.anchorOffset)||!Ar(x.node,x.offset,w.focusNode,w.focusOffset))&&(this.view.observer.ignore(()=>{dt.android&&dt.chrome&&this.dom.contains(w.focusNode)&&gp(w.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let T=eh(this.view.root);if(T)if(u.empty){if(dt.gecko){let P=up(m.node,m.offset);if(P&&P!=3){let V=ku(m.node,m.offset,P==1?1:-1);V&&(m=new fr(V.node,V.offset))}}T.collapse(m.node,m.offset),u.bidiLevel!=null&&T.caretBidiLevel!==void 0&&(T.caretBidiLevel=u.bidiLevel)}else if(T.extend){T.collapse(m.node,m.offset);try{T.extend(x.node,x.offset)}catch(P){}}else{let P=document.createRange();u.anchor>u.head&&([m,x]=[x,m]),P.setEnd(x.node,x.offset),P.setStart(m.node,m.offset),T.removeAllRanges(),T.addRange(P)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(m,x)),this.impreciseAnchor=m.precise?null:new fr(w.anchorNode,w.anchorOffset),this.impreciseHead=x.precise?null:new fr(w.focusNode,w.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=eh(e.root),{anchorNode:r,anchorOffset:l}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let c=Gn.find(this,t.head);if(!c)return;let u=c.posAtStart;if(t.head==u||t.head==u+c.length)return;let m=this.coordsAt(t.head,-1),x=this.coordsAt(t.head,1);if(!m||!x||m.bottom>x.top)return;let w=this.domAtPos(t.head+t.assoc);i.collapse(w.node,w.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let T=e.observer.selectionRange;e.docView.posFromDOM(T.anchorNode,T.anchorOffset)!=t.from&&i.collapse(r,l)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let l=yn.get(t.childNodes[r]);l instanceof Gn&&(i=l.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let l=yn.get(t.childNodes[r]);l instanceof Gn&&(i=l.domAtPos(l.length))}return i?new fr(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=yn.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof Gn)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let l=this.length,c=this.children.length-1;c>=0;c--){let u=this.children[c],m=l-u.breakAfter,x=m-u.length;if(m<e)break;x<=e&&(x<e||u.covers(-1))&&(m>e||u.covers(1))&&(!i||u instanceof Gn&&!(i instanceof Gn&&t>=0))&&(i=u,r=x),l=x}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof Gn))return null;for(;r.children.length;){let{i:u,off:m}=r.childPos(i,1);for(;;u++){if(u==r.children.length)return null;if((r=r.children[u]).length)break}i=m}if(!(r instanceof Ds))return null;let l=(0,k.cp)(r.text,i);if(l==i)return null;let c=$l(r.dom,i,l).getClientRects();for(let u=0;u<c.length;u++){let m=c[u];if(u==c.length-1||m.top<m.bottom&&m.left<m.right)return m}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,l=this.view.contentDOM.clientWidth,c=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,m=this.view.textDirection==Bn.LTR;for(let x=0,w=0;w<this.children.length;w++){let T=this.children[w],P=x+T.length;if(P>r)break;if(x>=i){let V=T.dom.getBoundingClientRect();if(t.push(V.height),c){let Z=T.dom.lastChild,ie=Z?Fl(Z):[];if(ie.length){let se=ie[ie.length-1],he=m?se.right-V.left:V.right-se.left;he>u&&(u=he,this.minWidth=l,this.minWidthFrom=x,this.minWidthTo=P)}}}x=P+T.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Bn.RTL:Bn.LTR}measureTextSize(){for(let l of this.children)if(l instanceof Gn){let c=l.measureTextSize();if(c)return c}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=Fl(e.firstChild)[0];t=e.getBoundingClientRect().height,i=l?l.width/27:7,r=l?l.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new rh(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let l=r==t.viewports.length?null:t.viewports[r],c=l?l.from-1:this.length;if(c>i){let u=(t.lineBlockAt(c).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Pi.replace({widget:new fc(u),block:!0,inclusive:!0,isBlockGap:!0}).range(i,c))}if(!l)break;i=l.to+1}return Pi.set(e)}updateDeco(){let e=this.view.state.facet(ah).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let l=gu(this.view),c={left:i.left-l.left,top:i.top-l.top,right:i.right+l.right,bottom:i.bottom+l.bottom};Jf(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Bn.LTR)}}function cp(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class fc extends rc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Cu(n,e){let t=n.observer.selectionRange,i=t.focusNode&&ku(t.focusNode,t.focusOffset,0);if(!i)return null;let r=e-i.offset;return{from:r,to:r+i.node.nodeValue.length,node:i.node}}function fp(n,e,t){let i=Cu(n,t);if(!i)return null;let{node:r,from:l,to:c}=i,u=r.nodeValue;if(/[\n\r]/.test(u)||n.state.doc.sliceString(i.from,i.to)!=u)return null;let m=e.invertedDesc,x=new bs(m.mapPos(l),m.mapPos(c),l,c),w=[];for(let T=r.parentNode;;T=T.parentNode){let P=yn.get(T);if(P instanceof ss)w.push({node:T,deco:P.mark});else{if(P instanceof Gn||T.nodeName=="DIV"&&T.parentNode==n.contentDOM)return{range:x,text:r,marks:w,line:T};if(T!=n.contentDOM)w.push({node:T,deco:new tr({inclusive:!0,attributes:rp(T),tagName:T.tagName.toLowerCase()})});else return null}}}function ku(n,e,t){if(t<=0)for(let i=n,r=e;;){if(i.nodeType==3)return{node:i,offset:r};if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=Fo(i);else break}if(t>=0)for(let i=n,r=e;;){if(i.nodeType==3)return{node:i,offset:r};if(i.nodeType==1&&r<i.childNodes.length&&t>=0)i=i.childNodes[r],r=0;else break}return null}function up(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let dp=class{constructor(){this.changes=[]}compareRange(e,t){qc(e,t,this.changes)}comparePoint(e,t){qc(e,t,this.changes)}};function pp(n,e,t){let i=new dp;return k.Xs.compare(n,e,t,i),i.changes}function gp(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function mp(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function vp(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),l=e-r.from;if(r.length==0)return k.jT.cursor(e);l==0?t=1:l==r.length&&(t=-1);let c=l,u=l;t<0?c=(0,k.cp)(r.text,l,!1):u=(0,k.cp)(r.text,l);let m=i(r.text.slice(c,u));for(;c>0;){let x=(0,k.cp)(r.text,c,!1);if(i(r.text.slice(x,c))!=m)break;c=x}for(;u<r.length;){let x=(0,k.cp)(r.text,u);if(i(r.text.slice(u,x))!=m)break;u=x}return k.jT.range(c+r.from,u+r.from)}function yp(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function xp(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function of(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Au(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function Mu(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function lf(n,e,t){let i,r,l,c,u=!1,m,x,w,T;for(let Z=n.firstChild;Z;Z=Z.nextSibling){let ie=Fl(Z);for(let se=0;se<ie.length;se++){let he=ie[se];r&&of(r,he)&&(he=Au(Mu(he,r.bottom),r.top));let Re=yp(e,he),Ge=xp(t,he);if(Re==0&&Ge==0)return Z.nodeType==3?Tu(Z,e,t):lf(Z,e,t);if(!i||c>Ge||c==Ge&&l>Re){i=Z,r=he,l=Re,c=Ge;let Oe=Ge?t<he.top?-1:1:Re?e<he.left?-1:1:0;u=!Oe||(Oe>0?se<ie.length-1:se>0)}Re==0?t>he.bottom&&(!w||w.bottom<he.bottom)?(m=Z,w=he):t<he.top&&(!T||T.top>he.top)&&(x=Z,T=he):w&&of(w,he)?w=Mu(w,he.bottom):T&&of(T,he)&&(T=Au(T,he.top))}}if(w&&w.bottom>=t?(i=m,r=w):T&&T.top<=t&&(i=x,r=T),!i)return{node:n,offset:0};let P=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Tu(i,P,t);if(u&&i.contentEditable!="false")return lf(i,P,t);let V=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:V}}function Tu(n,e,t){let i=n.nodeValue.length,r=-1,l=1e9,c=0;for(let u=0;u<i;u++){let m=$l(n,u,u+1).getClientRects();for(let x=0;x<m.length;x++){let w=m[x];if(w.top==w.bottom)continue;c||(c=e-w.left);let T=(w.top>t?w.top-t:t-w.bottom)-1;if(w.left-1<=e&&w.right+1>=e&&T<l){let P=e>=(w.left+w.right)/2,V=P;if((dt.chrome||dt.gecko)&&$l(n,u).getBoundingClientRect().left==w.right&&(V=!P),T<=0)return{node:n,offset:u+(V?1:0)};r=u+(V?1:0),l=T}}}return{node:n,offset:r>-1?r:c>0?n.nodeValue.length:0}}function Ou(n,e,t,i=-1){var r,l;let c=n.contentDOM.getBoundingClientRect(),u=c.top+n.viewState.paddingTop,m,{docHeight:x}=n.viewState,{x:w,y:T}=e,P=T-u;if(P<0)return 0;if(P>x)return n.state.doc.length;for(let Oe=n.viewState.heightOracle.textHeight/2,De=!1;m=n.elementAtHeight(P),m.type!=$r.Text;)for(;P=i>0?m.bottom+Oe:m.top-Oe,!(P>=0&&P<=x);){if(De)return t?null:0;De=!0,i=-i}T=u+P;let V=m.from;if(V<n.viewport.from)return n.viewport.from==0?0:t?null:Ru(n,c,m,w,T);if(V>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Ru(n,c,m,w,T);let Z=n.dom.ownerDocument,ie=n.root.elementFromPoint?n.root:Z,se=ie.elementFromPoint(w,T);se&&!n.contentDOM.contains(se)&&(se=null),se||(w=Math.max(c.left+1,Math.min(c.right-1,w)),se=ie.elementFromPoint(w,T),se&&!n.contentDOM.contains(se)&&(se=null));let he,Re=-1;if(se&&((r=n.docView.nearest(se))===null||r===void 0?void 0:r.isEditable)!=!1){if(Z.caretPositionFromPoint){let Oe=Z.caretPositionFromPoint(w,T);Oe&&({offsetNode:he,offset:Re}=Oe)}else if(Z.caretRangeFromPoint){let Oe=Z.caretRangeFromPoint(w,T);Oe&&({startContainer:he,startOffset:Re}=Oe,(!n.contentDOM.contains(he)||dt.safari&&bp(he,Re,w)||dt.chrome&&wp(he,Re,w))&&(he=void 0))}}if(!he||!n.docView.dom.contains(he)){let Oe=Gn.find(n.docView,V);if(!Oe)return P>m.top+m.height/2?m.to:m.from;({node:he,offset:Re}=lf(Oe.dom,w,T))}let Ge=n.docView.nearest(he);if(!Ge)return null;if(Ge.isWidget&&((l=Ge.dom)===null||l===void 0?void 0:l.nodeType)==1){let Oe=Ge.dom.getBoundingClientRect();return e.y<Oe.top||e.y<=Oe.bottom&&e.x<=(Oe.left+Oe.right)/2?Ge.posAtStart:Ge.posAtEnd}else return Ge.localPosFromDOM(he,Re)+Ge.posAtStart}function Ru(n,e,t,i,r){let l=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let u=n.viewState.heightOracle.textHeight,m=Math.floor((r-t.top-(n.defaultLineHeight-u)*.5)/u);l+=m*n.viewState.heightOracle.lineLength}let c=n.state.sliceDoc(t.from,t.to);return t.from+(0,k.Gz)(c,l,n.state.tabSize)}function bp(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return $l(n,i-1,i).getBoundingClientRect().left>t}function wp(n,e,t){if(e!=0)return!1;for(let r=n;;){let l=r.parentNode;if(!l||l.nodeType!=1||l.firstChild!=r)return!1;if(l.classList.contains("cm-line"))break;r=l}let i=n.nodeType==1?n.getBoundingClientRect():$l(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function fh(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==$r.Text))return i}return t}function Du(n,e,t,i){let r=fh(n,e.head),l=!i||r.type!=$r.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(l){let c=n.dom.getBoundingClientRect(),u=n.textDirectionAt(r.from),m=n.posAtCoords({x:t==(u==Bn.LTR)?c.right-1:c.left+1,y:(l.top+l.bottom)/2});if(m!=null)return k.jT.cursor(m,t?-1:1)}return k.jT.cursor(t?r.to:r.from,t?-1:1)}function Eu(n,e,t,i){let r=n.state.doc.lineAt(e.head),l=n.bidiSpans(r),c=n.textDirectionAt(r.from);for(let u=e,m=null;;){let x=wu(r,l,c,u,t),w=bu;if(!x){if(r.number==(t?n.state.doc.lines:1))return u;w=`
`,r=n.state.doc.line(r.number+(t?1:-1)),l=n.bidiSpans(r),x=k.jT.cursor(t?r.from:r.to)}if(m){if(!m(w))return u}else{if(!i)return x;m=i(w)}u=x}}function Sp(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return l=>{let c=i(l);return r==k.D0.Space&&(r=c),r==c}}function Cp(n,e,t,i){let r=e.head,l=t?1:-1;if(r==(t?n.state.doc.length:0))return k.jT.cursor(r,e.assoc);let c=e.goalColumn,u,m=n.contentDOM.getBoundingClientRect(),x=n.coordsAtPos(r,e.assoc||-1),w=n.documentTop;if(x)c==null&&(c=x.left-m.left),u=l<0?x.top:x.bottom;else{let V=n.viewState.lineBlockAt(r);c==null&&(c=Math.min(m.right-m.left,n.defaultCharacterWidth*(r-V.from))),u=(l<0?V.top:V.bottom)+w}let T=m.left+c,P=i!=null?i:n.viewState.heightOracle.textHeight>>1;for(let V=0;;V+=10){let Z=u+(P+V)*l,ie=Ou(n,{x:T,y:Z},!1,l);if(Z<m.top||Z>m.bottom||(l<0?ie<r:ie>r)){let se=n.docView.coordsForChar(ie),he=!se||Z<se.top?-1:1;return k.jT.cursor(ie,he,void 0,c)}}}function uc(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(l,c,u)=>{if(e>l&&e<c){let m=i||t||(e-l<c-e?-1:1);e=m<0?l:c,i=m}});if(!i)return e}}function af(n,e,t){let i=uc(n.state.facet(Jc).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:k.jT.cursor(i,i<t.from?1:-1)}class kp{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,dt.safari&&e.contentDOM.addEventListener("input",()=>null),dt.gecko&&Wp(e.contentDOM.ownerDocument)}handleEvent(e){!Pp(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Ap(e),i=this.handlers,r=this.view.contentDOM;for(let l in t)if(l!="scroll"){let c=!t[l].handlers.length,u=i[l];u&&c!=!u.handlers.length&&(r.removeEventListener(l,this.handleEvent),u=null),u||r.addEventListener(l,this.handleEvent,{passive:c})}for(let l in i)l!="scroll"&&!t[l]&&r.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&uh.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),dt.android&&dt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return dt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=hf.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Mp.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,Zl(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:dt.safari&&!dt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Pu(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){Js(t.state,r)}}}function Ap(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec;if(r&&r.domEventHandlers)for(let l in r.domEventHandlers){let c=r.domEventHandlers[l];c&&t(l).handlers.push(Pu(i.value,c))}if(r&&r.domEventObservers)for(let l in r.domEventObservers){let c=r.domEventObservers[l];c&&t(l).observers.push(Pu(i.value,c))}}for(let i in xo)t(i).handlers.push(xo[i]);for(let i in Qs)t(i).observers.push(Qs[i]);return e}const hf=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Mp="dthko",uh=[16,17,18,20,91,92,224,225],dc=6;function pc(n){return Math.max(0,n)*.7+8}function Tp(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class Op{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=Qf(e.contentDOM),this.atoms=e.state.facet(Jc).map(c=>c(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(k.yy.allowMultipleSelections)&&Rp(e,t),this.dragging=Ep(e,t)&&dh(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Tp(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,l=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},c=gu(this.view);e.clientX-c.left<=l.left+dc?i=-pc(l.left-e.clientX):e.clientX+c.right>=l.right-dc&&(i=pc(e.clientX-l.right)),e.clientY-c.top<=l.top+dc?r=-pc(l.top-e.clientY):e.clientY+c.bottom>=l.bottom-dc&&(r=pc(e.clientY-l.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],l=null;if(r.empty){let c=uc(this.atoms,r.from,0);c!=r.from&&(l=k.jT.cursor(c,-1))}else{let c=uc(this.atoms,r.from,-1),u=uc(this.atoms,r.to,1);(c!=r.from||u!=r.to)&&(l=k.jT.range(r.from==r.anchor?c:u,r.from==r.head?c:u))}l&&(t||(t=e.ranges.slice()),t[i]=l)}return t?k.jT.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection)||i.main.assoc!=t.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Rp(n,e){let t=n.state.facet(ou);return t.length?t[0](e):dt.mac?e.metaKey:e.ctrlKey}function Dp(n,e){let t=n.state.facet(lu);return t.length?t[0](e):dt.mac?!e.altKey:!e.ctrlKey}function Ep(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=eh(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function Pp(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=yn.get(t))&&i.ignoreEvent(e))return!1;return!0}const xo=Object.create(null),Qs=Object.create(null),Lu=dt.ie&&dt.ie_version<15||dt.ios&&dt.webkit_version<604;function Lp(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Bu(n,t.value)},50)}function Bu(n,e){let{state:t}=n,i,r=1,l=t.toText(e),c=l.lines==t.selection.ranges.length;if(ff!=null&&t.selection.ranges.every(m=>m.empty)&&ff==l.toString()){let m=-1;i=t.changeByRange(x=>{let w=t.doc.lineAt(x.from);if(w.from==m)return{range:x};m=w.from;let T=t.toText((c?l.line(r++).text:e)+t.lineBreak);return{changes:{from:w.from,insert:T},range:k.jT.cursor(x.from+T.length)}})}else c?i=t.changeByRange(m=>{let x=l.line(r++);return{changes:{from:m.from,to:m.to,insert:x.text},range:k.jT.cursor(m.from+x.length)}}):i=t.replaceSelection(l);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Qs.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft},xo.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&(n.inputState.lastEscPress=Date.now()),!1),Qs.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")},Qs.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")},xo.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(au))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=Np(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new Op(n,e,t,i)),i&&n.observer.ignore(()=>Kl(n.contentDOM));let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function Nu(n,e,t,i){if(i==1)return k.jT.cursor(e,t);if(i==2)return vp(n.state,e,t);{let r=Gn.find(n.docView,e),l=n.state.doc.lineAt(r?r.posAtEnd:e),c=r?r.posAtStart:l.from,u=r?r.posAtEnd:l.to;return u<n.state.doc.length&&u==l.to&&u++,k.jT.range(c,u)}}let Iu=(n,e)=>n>=e.top&&n<=e.bottom,_u=(n,e,t)=>Iu(e,t)&&n>=t.left&&n<=t.right;function Hu(n,e,t,i){let r=Gn.find(n.docView,e);if(!r)return 1;let l=e-r.posAtStart;if(l==0)return 1;if(l==r.length)return-1;let c=r.coordsAt(l,-1);if(c&&_u(t,i,c))return-1;let u=r.coordsAt(l,1);return u&&_u(t,i,u)?1:c&&Iu(i,c)?-1:1}function cf(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Hu(n,t,e.clientX,e.clientY)}}const Bp=dt.ie&&dt.ie_version<=11;let Wu=null,Fu=0,Vu=0;function dh(n){if(!Bp)return n.detail;let e=Wu,t=Vu;return Wu=n,Vu=Date.now(),Fu=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Fu+1)%3:1}function Np(n,e){let t=cf(n,e),i=dh(e),r=n.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),r=r.map(l.changes))},get(l,c,u){let m=cf(n,l),x,w=Nu(n,m.pos,m.bias,i);if(t.pos!=m.pos&&!c){let T=Nu(n,t.pos,t.bias,i),P=Math.min(T.from,w.from),V=Math.max(T.to,w.to);w=P<w.from?k.jT.range(P,V):k.jT.range(V,P)}return c?r.replaceRange(r.main.extend(w.from,w.to)):u&&i==1&&r.ranges.length>1&&(x=Ip(r,m.pos))?x:u?r.addRange(w):k.jT.create([w])}}}function Ip(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return k.jT.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}xo.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:i}=n.inputState;return i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};function zu(n,e,t,i){if(!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{mouseSelection:l}=n.inputState,c=i&&l&&l.dragging&&Dp(n,e)?{from:l.dragging.from,to:l.dragging.to}:null,u={from:r,insert:t},m=n.state.changes(c?[c,u]:u);n.focus(),n.dispatch({changes:m,selection:{anchor:m.mapPos(r,-1),head:m.mapPos(r,1)},userEvent:c?"move.drop":"input.drop"})}xo.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,l=()=>{++r==t.length&&zu(n,e,i.filter(c=>c!=null).join(n.state.lineBreak),!1)};for(let c=0;c<t.length;c++){let u=new FileReader;u.onerror=l,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(i[c]=u.result),l()},u.readAsText(t[c])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return zu(n,e,i,!0),!0}return!1},xo.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Lu?null:e.clipboardData;return t?(Bu(n,t.getData("text/plain")||t.getData("text/uri-text")),!0):(Lp(n),!1)};function _p(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function Hp(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:l}of n.selection.ranges){let c=n.doc.lineAt(l);c.number>r&&(e.push(c.text),t.push({from:c.from,to:Math.min(n.doc.length,c.to+1)})),r=c.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let ff=null;xo.copy=xo.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=Hp(n.state);if(!t&&!r)return!1;ff=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let l=Lu?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(_p(n,t),!1)};const Ku=k.q6.define();function $u(n,e){let t=[];for(let i of n.facet(cu)){let r=i(n,e);r&&t.push(r)}return t?n.update({effects:t,annotations:Ku.of(!0)}):null}function Zu(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=$u(n.state,e);t?n.dispatch(t):n.update([])}},10)}Qs.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Zu(n)},Qs.blur=n=>{n.observer.clearSelectionRange(),Zu(n)},Qs.compositionstart=Qs.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)},Qs.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,dt.chrome&&dt.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50)},Qs.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()},xo.beforeinput=(n,e)=>{var t;let i;if(dt.chrome&&dt.android&&(i=hf.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return!1};const Uu=new Set;function Wp(n){Uu.has(n)||(Uu.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const ph=["pre-wrap","normal","pre-line","break-spaces"];class ju{constructor(e){this.lineWrapping=e,this.doc=k.xv.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ph.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,l,c){let u=ph.indexOf(e)>-1,m=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=u;if(this.lineWrapping=u,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=l,m){this.heightSamples={};for(let x=0;x<c.length;x++){let w=c[x];w<0?x++:this.heightSamples[Math.floor(w*10)]=!0}}return m}}class uf{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class eo{constructor(e,t,i,r,l){this.from=e,this.length=t,this.top=i,this.height=r,this._content=l}get type(){return typeof this._content=="number"?$r.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof xl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new eo(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ji=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Ji||(Ji={}));const gh=.001;class Mr{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>gh&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Mr.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let l=this,c=i.doc;for(let u=r.length-1;u>=0;u--){let{fromA:m,toA:x,fromB:w,toB:T}=r[u],P=l.lineAt(m,Ji.ByPosNoHeight,i.setDoc(t),0,0),V=P.to>=x?P:l.lineAt(x,Ji.ByPosNoHeight,i,0,0);for(T+=V.to-x,x=V.to;u>0&&P.from<=r[u-1].toA;)m=r[u-1].fromA,w=r[u-1].fromB,u--,m<P.from&&(P=l.lineAt(m,Ji.ByPosNoHeight,i,0,0));w+=P.from-m,m=P.from;let Z=ka.build(i.setDoc(c),e,w,T);l=l.replace(m,x,Z)}return l.updateHeight(i,0)}static empty(){return new os(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,l=0;for(;;)if(t==i)if(r>l*2){let u=e[t-1];u.break?e.splice(--t,1,u.left,null,u.right):e.splice(--t,1,u.left,u.right),i+=1+u.break,r-=u.size}else if(l>r*2){let u=e[i];u.break?e.splice(i,1,u.left,null,u.right):e.splice(i,1,u.left,u.right),i+=2+u.break,l-=u.size}else break;else if(r<l){let u=e[t++];u&&(r+=u.size)}else{let u=e[--i];u&&(l+=u.size)}let c=0;return e[t-1]==null?(c=1,t--):e[t]==null&&(c=1,i++),new Fp(Mr.of(e.slice(0,t)),c,Mr.of(e.slice(i)))}}Mr.prototype.size=1;class df extends Mr{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new eo(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,l){return this.blockAt(0,i,r,l)}forEachLine(e,t,i,r,l,c){e<=l+this.length&&t>=l&&c(this.blockAt(0,i,r,l))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class os extends df{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new eo(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof os||r instanceof Tr&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Tr?r=new os(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Mr.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Tr extends Mr{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,l=r-i+1,c,u=0;if(e.lineWrapping){let m=Math.min(this.height,e.lineHeight*l);c=m/l,this.length>l+1&&(u=(this.height-m)/(this.length-l-1))}else c=this.height/l;return{firstLine:i,lastLine:r,perLine:c,perChar:u}}blockAt(e,t,i,r){let{firstLine:l,lastLine:c,perLine:u,perChar:m}=this.heightMetrics(t,r);if(t.lineWrapping){let x=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),w=t.doc.lineAt(x),T=u+w.length*m,P=Math.max(i,e-T/2);return new eo(w.from,w.length,P,T,0)}else{let x=Math.max(0,Math.min(c-l,Math.floor((e-i)/u))),{from:w,length:T}=t.doc.line(l+x);return new eo(w,T,i+u*x,u,0)}}lineAt(e,t,i,r,l){if(t==Ji.ByHeight)return this.blockAt(e,i,r,l);if(t==Ji.ByPosNoHeight){let{from:V,to:Z}=i.doc.lineAt(e);return new eo(V,Z-V,0,0,0)}let{firstLine:c,perLine:u,perChar:m}=this.heightMetrics(i,l),x=i.doc.lineAt(e),w=u+x.length*m,T=x.number-c,P=r+u*T+m*(x.from-l-T);return new eo(x.from,x.length,Math.max(r,Math.min(P,r+this.height-w)),w,0)}forEachLine(e,t,i,r,l,c){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:u,perLine:m,perChar:x}=this.heightMetrics(i,l);for(let w=e,T=r;w<=t;){let P=i.doc.lineAt(w);if(w==e){let Z=P.number-u;T+=m*Z+x*(e-l-Z)}let V=m+x*P.length;c(new eo(P.from,P.length,T,V,0)),T+=V,w=P.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let l=i[i.length-1];l instanceof Tr?i[i.length-1]=new Tr(l.length+r):i.push(null,new Tr(r-1))}if(e>0){let l=i[0];l instanceof Tr?i[0]=new Tr(e+l.length):i.unshift(new Tr(e-1),null)}return Mr.of(i)}decomposeLeft(e,t){t.push(new Tr(e-1),null)}decomposeRight(e,t){t.push(null,new Tr(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let l=t+this.length;if(r&&r.from<=t+this.length&&r.more){let c=[],u=Math.max(t,r.from),m=-1;for(r.from>t&&c.push(new Tr(r.from-t-1).updateHeight(e,t));u<=l&&r.more;){let w=e.doc.lineAt(u).length;c.length&&c.push(null);let T=r.heights[r.index++];m==-1?m=T:Math.abs(T-m)>=gh&&(m=-2);let P=new os(w,T);P.outdated=!1,c.push(P),u+=w+1}u<=l&&c.push(null,new Tr(l-u).updateHeight(e,u));let x=Mr.of(c);return(m<0||Math.abs(x.height-this.height)>=gh||Math.abs(m-this.heightMetrics(e,t).perLine)>=gh)&&(e.heightChanged=!0),x}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Fp extends Mr{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let l=i+this.left.height;return e<l?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,l,r+this.left.length+this.break)}lineAt(e,t,i,r,l){let c=r+this.left.height,u=l+this.left.length+this.break,m=t==Ji.ByHeight?e<c:e<u,x=m?this.left.lineAt(e,t,i,r,l):this.right.lineAt(e,t,i,c,u);if(this.break||(m?x.to<u:x.from>u))return x;let w=t==Ji.ByPosNoHeight?Ji.ByPosNoHeight:Ji.ByPos;return m?x.join(this.right.lineAt(u,w,i,c,u)):this.left.lineAt(u,w,i,r,l).join(x)}forEachLine(e,t,i,r,l,c){let u=r+this.left.height,m=l+this.left.length+this.break;if(this.break)e<m&&this.left.forEachLine(e,t,i,r,l,c),t>=m&&this.right.forEachLine(e,t,i,u,m,c);else{let x=this.lineAt(m,Ji.ByPos,i,r,l);e<x.from&&this.left.forEachLine(e,x.from-1,i,r,l,c),x.to>=e&&x.from<=t&&c(x),t>x.to&&this.right.forEachLine(x.to+1,t,i,u,m,c)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let l=[];e>0&&this.decomposeLeft(e,l);let c=l.length;for(let u of i)l.push(u);if(e>0&&qu(l,c-1),t<this.length){let u=l.length;this.decomposeRight(t,l),qu(l,u)}return Mr.of(l)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Mr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:l,right:c}=this,u=t+l.length+this.break,m=null;return r&&r.from<=t+l.length&&r.more?m=l=l.updateHeight(e,t,i,r):l.updateHeight(e,t,i),r&&r.from<=u+c.length&&r.more?m=c=c.updateHeight(e,u,i,r):c.updateHeight(e,u,i),m?this.balanced(l,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function qu(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Tr&&(i=n[e+1])instanceof Tr&&n.splice(e-1,3,new Tr(t.length+1+i.length))}const gc=5;class ka{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof os?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new os(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,l=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let c=t-e;i.block?this.addBlock(new df(c,r,i)):(c||l||r>=gc)&&this.addLineDeco(r,l,c)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new os(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Tr(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof os)return e;let t=new os(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof os)&&!this.isCovered?this.nodes.push(new os(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof os&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let l=new ka(i,e);return k.Xs.spans(t,i,r,l,0),l.finish(i)}}function Vp(n,e,t){let i=new zp;return k.Xs.compare(n,e,t,i,0),i.changes}class zp{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&qc(e,t,this.changes,5)}}function pf(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,l=Math.max(0,t.left),c=Math.min(r.innerWidth,t.right),u=Math.max(0,t.top),m=Math.min(r.innerHeight,t.bottom);for(let x=n.parentNode;x&&x!=i.body;)if(x.nodeType==1){let w=x,T=window.getComputedStyle(w);if((w.scrollHeight>w.clientHeight||w.scrollWidth>w.clientWidth)&&T.overflow!="visible"){let P=w.getBoundingClientRect();l=Math.max(l,P.left),c=Math.min(c,P.right),u=Math.max(u,P.top),m=x==n.parentNode?P.bottom:Math.min(m,P.bottom)}x=T.position=="absolute"||T.position=="fixed"?w.offsetParent:w.parentNode}else if(x.nodeType==11)x=x.host;else break;return{left:l-t.left,right:Math.max(l,c)-t.left,top:u-(t.top+e),bottom:Math.max(u,m)-(t.top+e)}}function Gu(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class gf{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],l=t[i];if(r.from!=l.from||r.to!=l.to||r.size!=l.size)return!1}return!0}draw(e,t){return Pi.replace({widget:new Kp(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Kp extends rc{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Xu{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Yu,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Bn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(lh).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new ju(t),this.stateDeco=e.facet(ah).filter(i=>typeof i!="function"),this.heightMap=Mr.empty().applyChanges(this.stateDeco,k.xv.empty,this.heightOracle.setDoc(e.doc),[new bs(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Pi.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:l,to:c})=>r>=l&&r<=c)){let{from:l,to:c}=this.lineBlockAt(r);e.push(new mc(l,c))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?Yu:new Up(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:mh(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(ah).filter(w=>typeof w!="function");let r=e.changedRanges,l=bs.extendWithRanges(r,Vp(i,this.stateDeco,e?e.changes:k.as.empty(this.state.doc.length))),c=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),this.heightMap.height!=c&&(e.flags|=2),u?(this.scrollAnchorPos=e.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let m=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<m.from||t.range.head>m.to)||!this.viewportIsAppropriate(m))&&(m=this.getViewport(0,t));let x=!e.changes.empty||e.flags&2||m.from!=this.viewport.from||m.to!=this.viewport.to;this.viewport=m,this.updateForViewport(),x&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Yc)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,l=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Bn.RTL:Bn.LTR;let c=this.heightOracle.mustRefreshForWrapping(l),u=t.getBoundingClientRect(),m=c||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let x=0,w=0;if(u.width&&u.height){let Oe=u.width/t.offsetWidth,De=u.height/t.offsetHeight;(Oe>.995&&Oe<1.005||!isFinite(Oe)||Math.abs(u.width-t.offsetWidth)<1)&&(Oe=1),(De>.995&&De<1.005||!isFinite(De)||Math.abs(u.height-t.offsetHeight)<1)&&(De=1),(this.scaleX!=Oe||this.scaleY!=De)&&(this.scaleX=Oe,this.scaleY=De,x|=8,c=m=!0)}let T=(parseInt(i.paddingTop)||0)*this.scaleY,P=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=T||this.paddingBottom!=P)&&(this.paddingTop=T,this.paddingBottom=P,x|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(m=!0),this.editorWidth=e.scrollDOM.clientWidth,x|=8);let V=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=V&&(this.scrollAnchorHeight=-1,this.scrollTop=V),this.scrolledToBottom=nh(e.scrollDOM);let Z=(this.printing?Gu:pf)(t,this.paddingTop),ie=Z.top-this.pixelViewport.top,se=Z.bottom-this.pixelViewport.bottom;this.pixelViewport=Z;let he=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(he!=this.inView&&(this.inView=he,he&&(m=!0)),!this.inView&&!this.scrollTarget)return 0;let Re=u.width;if((this.contentDOMWidth!=Re||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,x|=8),m){let Oe=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(Oe)&&(c=!0),c||r.lineWrapping&&Math.abs(Re-this.contentDOMWidth)>r.charWidth){let{lineHeight:De,charWidth:Ne,textHeight:yt}=e.docView.measureTextSize();c=De>0&&r.refresh(l,De,Ne,yt,Re/Ne,Oe),c&&(e.docView.minWidth=0,x|=8)}ie>0&&se>0?w=Math.max(ie,se):ie<0&&se<0&&(w=Math.min(ie,se)),r.heightChanged=!1;for(let De of this.viewports){let Ne=De.from==this.viewport.from?Oe:e.docView.measureVisibleLineHeights(De);this.heightMap=(c?Mr.empty().applyChanges(this.stateDeco,k.xv.empty,this.heightOracle,[new bs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,c,new uf(De.from,Ne))}r.heightChanged&&(x|=2)}let Ge=!this.viewportIsAppropriate(this.viewport,w)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Ge&&(this.viewport=this.getViewport(w,this.scrollTarget)),this.updateForViewport(),(x&2||Ge)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),x|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),x}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,l=this.heightOracle,{visibleTop:c,visibleBottom:u}=this,m=new mc(r.lineAt(c-i*1e3,Ji.ByHeight,l,0,0).from,r.lineAt(u+(1-i)*1e3,Ji.ByHeight,l,0,0).to);if(t){let{head:x}=t.range;if(x<m.from||x>m.to){let w=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),T=r.lineAt(x,Ji.ByPos,l,0,0),P;t.y=="center"?P=(T.top+T.bottom)/2-w/2:t.y=="start"||t.y=="nearest"&&x<m.from?P=T.top:P=T.bottom-w,m=new mc(r.lineAt(P-1e3/2,Ji.ByHeight,l,0,0).from,r.lineAt(P+w+1e3/2,Ji.ByHeight,l,0,0).to)}}return m}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new mc(this.heightMap.lineAt(i,Ji.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Ji.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Ji.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,Ji.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:u}=this;return(e==0||r<=c-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||l>=u+Math.max(10,Math.min(i,250)))&&r>c-2*1e3&&l<u+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new gf(t.mapPos(r.from),t.mapPos(r.to),r.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,l=r>>1,c=r<<1;if(this.defaultTextDirection!=Bn.LTR&&!i)return[];let u=[],m=(x,w,T,P)=>{if(w-x<l)return;let V=this.state.selection.main,Z=[V.from];V.empty||Z.push(V.to);for(let se of Z)if(se>x&&se<w){m(x,se-10,T,P),m(se+10,w,T,P);return}let ie=Zp(e,se=>se.from>=T.from&&se.to<=T.to&&Math.abs(se.from-x)<l&&Math.abs(se.to-w)<l&&!Z.some(he=>se.from<he&&se.to>he));if(!ie){if(w<T.to&&t&&i&&t.visibleRanges.some(se=>se.from<=w&&se.to>=w)){let se=t.moveToLineBoundary(k.jT.cursor(w),!1,!0).head;se>x&&(w=se)}ie=new gf(x,w,this.gapSize(T,x,w,P))}u.push(ie)};for(let x of this.viewportLines){if(x.length<c)continue;let w=$p(x.from,x.to,this.stateDeco);if(w.total<c)continue;let T=this.scrollTarget?this.scrollTarget.range.head:null,P,V;if(i){let Z=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,ie,se;if(T!=null){let he=yc(w,T),Re=((this.visibleBottom-this.visibleTop)/2+Z)/x.height;ie=he-Re,se=he+Re}else ie=(this.visibleTop-x.top-Z)/x.height,se=(this.visibleBottom-x.top+Z)/x.height;P=vc(w,ie),V=vc(w,se)}else{let Z=w.total*this.heightOracle.charWidth,ie=r*this.heightOracle.charWidth,se,he;if(T!=null){let Re=yc(w,T),Ge=((this.pixelViewport.right-this.pixelViewport.left)/2+ie)/Z;se=Re-Ge,he=Re+Ge}else se=(this.pixelViewport.left-ie)/Z,he=(this.pixelViewport.right+ie)/Z;P=vc(w,se),V=vc(w,he)}P>x.from&&m(x.from,P,x,w),V<x.to&&m(V,x.to,x,w)}return u}gapSize(e,t,i,r){let l=yc(r,i)-yc(r,t);return this.heightOracle.lineWrapping?e.height*l:r.total*this.heightOracle.charWidth*l}updateLineGaps(e){gf.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Pi.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];k.Xs.spans(e,this.viewport.from,this.viewport.to,{span(r,l){t.push({from:r,to:l})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,l)=>r.from!=t[l].from||r.to!=t[l].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||mh(this.heightMap.lineAt(e,Ji.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return mh(this.heightMap.lineAt(this.scaler.fromDOM(e),Ji.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return mh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class mc{constructor(e,t){this.from=e,this.to=t}}function $p(n,e,t){let i=[],r=n,l=0;return k.Xs.spans(t,n,e,{span(){},point(c,u){c>r&&(i.push({from:r,to:c}),l+=c-r),r=u}},20),r<e&&(i.push({from:r,to:e}),l+=e-r),{total:l,ranges:i}}function vc({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:l,to:c}=e[r],u=c-l;if(i<=u)return l+i;i-=u}}function yc(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function Zp(n,e){for(let t of n)if(e(t))return t}const Yu={toDOM(n){return n},fromDOM(n){return n},scale:1};class Up{constructor(e,t,i){let r=0,l=0,c=0;this.viewports=i.map(({from:u,to:m})=>{let x=t.lineAt(u,Ji.ByPos,e,0,0).top,w=t.lineAt(m,Ji.ByPos,e,0,0).bottom;return r+=w-x,{from:u,to:m,top:x,bottom:w,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let u of this.viewports)u.domTop=c+(u.top-l)*this.scale,c=u.domBottom=u.domTop+(u.bottom-u.top),l=u.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return r+(e-i)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);i=l.bottom,r=l.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return i+(e-r)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);i=l.bottom,r=l.domBottom}}}function mh(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new eo(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>mh(r,e)):n._content)}const xc=k.r$.define({combine:n=>n.join(" ")}),ws=k.r$.define({combine:n=>n.indexOf(!0)>-1}),mf=lr.V.newName(),Ju=lr.V.newName(),Sl=lr.V.newName(),Ft={"&light":"."+Ju,"&dark":"."+Sl};function vf(n,e,t){return new lr.V(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const ls=vf("."+mf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ft),xn="\uFFFF";class jp{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(k.yy.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=xn}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let l=this.text.length;this.readNode(r);let c=r.nextSibling;if(c==t)break;let u=yn.get(r),m=yn.get(c);(u&&m?u.breakAfter:(u?u.breakAfter:Qu(r))||Qu(c)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>l)&&this.lineBreak(),r=c}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,c=1,u;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,i),c=this.lineSeparator.length):(u=r.exec(t))&&(l=u.index,c=u[0].length),this.append(t.slice(i,l<0?t.length:l)),l<0)break;if(this.lineBreak(),c>1)for(let m of this.points)m.node==e&&m.pos>this.text.length&&(m.pos-=c-1);i=l+c}}readNode(e){if(e.cmIgnore)return;let t=yn.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Cl(e,i.node,i.offset)?t:0))}}function Cl(n,e,t){for(;;){if(!e||t<Fo(e))return!1;if(e==n)return!0;t=rs(e)+1,e=e.parentNode}}function Qu(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class ed{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class qp{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:l,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let u=l||c?[]:Xp(e),m=new jp(u,e.state);m.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=m.text,this.newSel=Ko(u,this.bounds.from)}else{let u=e.observer.selectionRange,m=l&&l.node==u.focusNode&&l.offset==u.focusOffset||!Xh(e.contentDOM,u.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(u.focusNode,u.focusOffset),x=c&&c.node==u.anchorNode&&c.offset==u.anchorOffset||!Xh(e.contentDOM,u.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(u.anchorNode,u.anchorOffset);this.newSel=k.jT.single(x,m)}}}function td(n,e){let t,{newSel:i}=e,r=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:u}=e.bounds,m=r.from,x=null;(l===8||dt.android&&e.text.length<u-c)&&(m=r.to,x="end");let w=yf(n.state.doc.sliceString(c,u,xn),e.text,m-c,x);w&&(dt.chrome&&l==13&&w.toB==w.from+2&&e.text.slice(w.from,w.toB)==xn+xn&&w.toB--,t={from:c+w.from,to:c+w.toA,insert:k.xv.of(e.text.slice(w.from,w.toB).split(xn))})}else i&&(!n.hasFocus&&n.state.facet(oh)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:(dt.mac||dt.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=k.jT.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:k.xv.of([" "])}):dt.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=k.jT.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:k.xv.of([" "])}),t){if(dt.ios&&n.inputState.flushIOSKey()||dt.android&&(t.from==r.from&&t.to==r.to&&t.insert.length==1&&t.insert.lines==2&&Zl(n.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&t.insert.length==0||l==8&&t.insert.length<t.to-t.from&&t.to>r.head)&&Zl(n.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&Zl(n.contentDOM,"Delete",46)))return!0;let c=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let u,m=()=>u||(u=Gp(n,t,i));return n.state.facet(Xc).some(x=>x(n,t.from,t.to,c,m))||n.dispatch(m()),!0}else if(i&&!i.main.eq(r)){let c=!1,u="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(c=!0),u=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:c,userEvent:u}),!0}else return!1}function Gp(n,e,t){let i,r=n.state,l=r.selection.main;if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let u=l.from<e.from?r.sliceDoc(l.from,e.from):"",m=l.to>e.to?r.sliceDoc(e.to,l.to):"";i=r.replaceSelection(n.state.toText(u+e.insert.sliceString(0,void 0,n.state.lineBreak)+m))}else{let u=r.changes(e),m=t&&t.main.to<=u.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=l.to&&e.to>=l.to-10){let x=n.state.sliceDoc(e.from,e.to),w,T=t&&Cu(n,t.main.head);if(T){let Z=e.insert.length-(e.to-e.from);w={from:T.from,to:T.to-Z}}else w=n.state.doc.lineAt(l.head);let P=l.to-e.to,V=l.to-l.from;i=r.changeByRange(Z=>{if(Z.from==l.from&&Z.to==l.to)return{changes:u,range:m||Z.map(u)};let ie=Z.to-P,se=ie-x.length;if(Z.to-Z.from!=V||n.state.sliceDoc(se,ie)!=x||Z.to>=w.from&&Z.from<=w.to)return{range:Z};let he=r.changes({from:se,to:ie,insert:e.insert}),Re=Z.to-l.to;return{changes:he,range:m?k.jT.range(Math.max(0,m.anchor+Re),Math.max(0,m.head+Re)):Z.map(he)}})}else i={changes:u,selection:m&&r.selection.replaceRange(m)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:c,scrollIntoView:!0})}function yf(n,e,t,i){let r=Math.min(n.length,e.length),l=0;for(;l<r&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==r&&n.length==e.length)return null;let c=n.length,u=e.length;for(;c>0&&u>0&&n.charCodeAt(c-1)==e.charCodeAt(u-1);)c--,u--;if(i=="end"){let m=Math.max(0,l-Math.min(c,u));t-=c+m-l}if(c<l&&n.length<e.length){let m=t<=l&&t>=c?l-t:0;l-=m,u=l+(u-c),c=l}else if(u<l){let m=t<=l&&t>=u?l-t:0;l-=m,c=l+(c-u),u=l}return{from:l,toA:c,toB:u}}function Xp(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:l}=n.observer.selectionRange;return t&&(e.push(new ed(t,i)),(r!=t||l!=i)&&e.push(new ed(r,l))),e}function Ko(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?k.jT.single(t+e,i+e):null}const id={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Aa=dt.ie&&dt.ie_version<=11;class Rn{constructor(e){this.view=e,this.active=!1,this.selectionRange=new np,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(dt.ie&&dt.ie_version<=11||dt.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Aa&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(oh)?i.root.activeElement!=this.dom:!th(i.dom,r))return;let l=r.anchorNode&&i.docView.nearest(r.anchorNode);if(l&&l.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(dt.ie&&dt.ie_version<=11||dt.android&&dt.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Ar(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=dt.safari&&e.root.nodeType==11&&ip(this.dom.ownerDocument)==this.dom&&nd(this.view)||eh(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=th(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&tu(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,id),Aa&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Aa&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&Zl(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let l of e){let c=this.readMutation(l);c&&(c.typeOver&&(r=!0),t==-1?{from:t,to:i}=c:(t=Math.min(c.from,t),i=Math.max(c.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&th(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new qp(this.view,e,t,i);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=td(this.view,t);return this.view.state==i&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Dn(t,e.previousSibling||e.target.previousSibling,-1),r=Dn(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Dn(n,e,t){for(;e;){let i=yn.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function nd(n){let e=null;function t(m){m.preventDefault(),m.stopImmediatePropagation(),e=m.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,r=e.startOffset,l=e.endContainer,c=e.endOffset,u=n.docView.domAtPos(n.state.selection.main.anchor);return Ar(u.node,u.offset,l,c)&&([i,r,l,c]=[l,c,i,r]),{anchorNode:i,anchorOffset:r,focusNode:l,focusOffset:c}}class Si{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(i=>i.forEach(r=>t(r,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||eu(e.parent)||document,this.viewState=new Xu(e.state||k.yy.create(e)),this.plugins=this.state.facet(Ca).map(i=>new zo(i));for(let i of this.plugins)i.update(this);this.observer=new Rn(this),this.inputState=new kp(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Su(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(...e){let t=e.length==1&&e[0]instanceof k.YW?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,l=this.state;for(let P of e){if(P.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=P.state}if(this.destroyed){this.viewState.state=l;return}let c=this.hasFocus,u=0,m=null;e.some(P=>P.annotation(Ku))?(this.inputState.notifiedFocused=c,u=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,m=$u(l,c),m||(u=1));let x=this.observer.delayedAndroidKey,w=null;if(x?(this.observer.clearDelayedAndroidKey(),w=this.observer.readChange(),(w&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(w=null)):this.observer.clear(),l.facet(k.yy.phrases)!=this.state.facet(k.yy.phrases))return this.setState(l);r=cc.create(this,l,e),r.flags|=u;let T=this.viewState.scrollTarget;try{this.updateState=2;for(let P of e){if(T&&(T=T.map(P.changes)),P.scrollIntoView){let{main:V}=P.state.selection;T=new bl(V.empty?V:k.jT.cursor(V.head,V.head>V.anchor?-1:1))}for(let V of P.effects)V.is(ac)&&(T=V.value)}this.viewState.update(r,T),this.bidiCache=bc.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(hh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(P=>P.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(xc)!=r.state.facet(xc)&&(this.viewState.mustMeasureContent=!0),(t||i||T||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let P of this.state.facet(oc))P(r);(m||w)&&Promise.resolve().then(()=>{m&&this.state==m.startState&&this.dispatch(m),w&&!td(this,w)&&x.force&&Zl(this.contentDOM,x.key,x.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Xu(e),this.plugins=e.facet(Ca).map(i=>new zo(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Su(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ca),i=e.state.facet(Ca);if(t!=i){let r=[];for(let l of i){let c=t.indexOf(l);if(c<0)r.push(new zo(l));else{let u=this.plugins[c];u.mustUpdate=e,r.push(u)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:c}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(c=-1),this.viewState.scrollAnchorHeight=-1;try{for(let u=0;;u++){if(c<0)if(nh(i))l=-1,c=this.viewState.heightMap.height;else{let V=this.viewState.scrollAnchorAt(r);l=V.from,c=V.top}this.updateState=1;let m=this.viewState.measure(this);if(!m&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let x=[];m&4||([this.measureRequests,x]=[x,this.measureRequests]);let w=x.map(V=>{try{return V.read(this)}catch(Z){return Js(this.state,Z),rd}}),T=cc.create(this,this.state,[]),P=!1;T.flags|=m,t?t.flags|=m:t=T,this.updateState=2,T.empty||(this.updatePlugins(T),this.inputState.update(T),this.updateAttrs(),P=this.docView.update(T));for(let V=0;V<x.length;V++)if(w[V]!=rd)try{let Z=x[V];Z.write&&Z.write(w[V],this)}catch(Z){Js(this.state,Z)}if(P&&this.docView.updateSelection(!0),!T.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let Z=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-c;if(Z>1||Z<-1){r=r+Z,i.scrollTop=r/this.scaleY,c=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let u of this.state.facet(oc))u(t)}get themeClasses(){return mf+" "+(this.state.facet(ws)?Sl:Ju)+" "+this.state.facet(xc)}updateAttrs(){let e=sd(this,fu,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(oh)?"true":"false",class:"cm-content",style:`${dt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),sd(this,lh,t);let i=this.observer.ignore(()=>{let r=nc(this.contentDOM,this.contentAttrs,t),l=nc(this.dom,this.editorAttrs,e);return r||l});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(Si.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(hh);let e=this.state.facet(Si.cspNonce);lr.V.mount(this.root,this.styleModules.concat(ls).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return af(this,e,Eu(this,e,t,i))}moveByGroup(e,t){return af(this,e,Eu(this,e,t,i=>Sp(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return Du(this,e,t,i)}moveVertically(e,t,i){return af(this,e,Cp(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Ou(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),l=this.bidiSpans(r),c=l[wl.find(l,e-r.from,-1,t)];return Vl(i,c.dir==Bn.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(lc)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Yp)return sf(e.length);let t=this.textDirectionAt(e.from),i;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||yu(l.isolates,i=du(this,e.from,e.to))))return l.order;i||(i=du(this,e.from,e.to));let r=xu(e.text,t,i);return this.bidiCache.push(new bc(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||dt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Kl(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return ac.of(new bl(typeof e=="number"?k.jT.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return un.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return un.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=lr.V.newName(),r=[xc.of(i),hh.of(vf(`.${i}`,e))];return t&&t.dark&&r.push(ws.of(!0)),r}static baseTheme(e){return k.Wl.lowest(hh.of(vf("."+mf,e,Ft)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&yn.get(i)||yn.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}}Si.styleModule=hh,Si.inputHandler=Xc,Si.focusChangeEffect=cu,Si.perLineTextDirection=lc,Si.exceptionSink=hu,Si.updateListener=oc,Si.editable=oh,Si.mouseSelectionStyle=au,Si.dragMovesSelection=lu,Si.clickAddsSelectionRange=ou,Si.decorations=ah,Si.atomicRanges=Jc,Si.bidiIsolatedRanges=uu,Si.scrollMargins=pu,Si.darkTheme=ws,Si.cspNonce=k.r$.define({combine:n=>n.length?n[0]:""}),Si.contentAttributes=lh,Si.editorAttributes=fu,Si.lineWrapping=Si.contentAttributes.of({class:"cm-lineWrapping"}),Si.announce=k.Py.define();const Yp=4096,rd={};class bc{constructor(e,t,i,r,l,c){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=l,this.order=c}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Bn.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let c=e[l];c.dir==r&&!t.touchesRange(c.from,c.to)&&i.push(new bc(t.mapPos(c.from,1),t.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return i}}function sd(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let l=i[r],c=typeof l=="function"?l(n):l;c&&ur(c,t)}return t}const Jp=dt.mac?"mac":dt.windows?"win":dt.linux?"linux":"key";function od(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,l,c,u;for(let m=0;m<t.length-1;++m){const x=t[m];if(/^(cmd|meta|m)$/i.test(x))u=!0;else if(/^a(lt)?$/i.test(x))r=!0;else if(/^(c|ctrl|control)$/i.test(x))l=!0;else if(/^s(hift)?$/i.test(x))c=!0;else if(/^mod$/i.test(x))e=="mac"?u=!0:l=!0;else throw new Error("Unrecognized modifier name: "+x)}return r&&(i="Alt-"+i),l&&(i="Ctrl-"+i),u&&(i="Meta-"+i),c&&(i="Shift-"+i),i}function kl(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const xf=k.Wl.default(Si.domEventHandlers({keydown(n,e){return ld(vh(e.state),n,e,"editor")}})),bf=k.r$.define({enables:xf}),wf=new WeakMap;function vh(n){let e=n.facet(bf),t=wf.get(e);return t||wf.set(e,t=eg(e.reduce((i,r)=>i.concat(r),[]))),t}function Ps(n,e,t){return ld(vh(n.state),e,n,t)}let Ss=null;const Qp=4e3;function eg(n,e=Jp){let t=Object.create(null),i=Object.create(null),r=(c,u)=>{let m=i[c];if(m==null)i[c]=u;else if(m!=u)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},l=(c,u,m,x,w)=>{var T,P;let V=t[c]||(t[c]=Object.create(null)),Z=u.split(/ (?!$)/).map(he=>od(he,e));for(let he=1;he<Z.length;he++){let Re=Z.slice(0,he).join(" ");r(Re,!0),V[Re]||(V[Re]={preventDefault:!0,stopPropagation:!1,run:[Ge=>{let Oe=Ss={view:Ge,prefix:Re,scope:c};return setTimeout(()=>{Ss==Oe&&(Ss=null)},Qp),!0}]})}let ie=Z.join(" ");r(ie,!1);let se=V[ie]||(V[ie]={preventDefault:!1,stopPropagation:!1,run:((P=(T=V._any)===null||T===void 0?void 0:T.run)===null||P===void 0?void 0:P.slice())||[]});m&&se.run.push(m),x&&(se.preventDefault=!0),w&&(se.stopPropagation=!0)};for(let c of n){let u=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let x of u){let w=t[x]||(t[x]=Object.create(null));w._any||(w._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let T in w)w[T].run.push(c.any)}let m=c[e]||c.key;if(m)for(let x of u)l(x,m,c.run,c.preventDefault,c.stopPropagation),c.shift&&l(x,"Shift-"+m,c.shift,c.preventDefault,c.stopPropagation)}return t}function ld(n,e,t,i){let r=(0,Fc.YG)(e),l=(0,k.gm)(r,0),c=(0,k.nZ)(l)==r.length&&r!=" ",u="",m=!1,x=!1,w=!1;Ss&&Ss.view==t&&Ss.scope==i&&(u=Ss.prefix+" ",uh.indexOf(e.keyCode)<0&&(x=!0,Ss=null));let T=new Set,P=se=>{if(se){for(let he of se.run)if(!T.has(he)&&(T.add(he),he(t,e)))return se.stopPropagation&&(w=!0),!0;se.preventDefault&&(se.stopPropagation&&(w=!0),x=!0)}return!1},V=n[i],Z,ie;return V&&(P(V[u+kl(r,e,!c)])?m=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(dt.windows&&e.ctrlKey&&e.altKey)&&(Z=Fc.ue[e.keyCode])&&Z!=r?(P(V[u+kl(Z,e,!0)])||e.shiftKey&&(ie=Fc.uY[e.keyCode])!=r&&ie!=Z&&P(V[u+kl(ie,e,!1)]))&&(m=!0):c&&e.shiftKey&&P(V[u+kl(r,e,!0)])&&(m=!0),!m&&P(V._any)&&(m=!0)),x&&(m=!0),m&&w&&e.stopPropagation(),m}class yh{constructor(e,t,i,r,l){this.className=e,this.left=t,this.top=i,this.width=r,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let l=ad(e);return[new yh(t,r.left-l.left,r.top-l.top,null,r.bottom-r.top)]}else return $o(e,t,i)}}function ad(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Bn.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function Sf(n,e,t){let i=k.jT.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:$r.Text}}function $o(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),l=n.textDirection==Bn.LTR,c=n.contentDOM,u=c.getBoundingClientRect(),m=ad(n),x=c.querySelector(".cm-line"),w=x&&window.getComputedStyle(x),T=u.left+(w?parseInt(w.paddingLeft)+Math.min(0,parseInt(w.textIndent)):0),P=u.right-(w?parseInt(w.paddingRight):0),V=fh(n,i),Z=fh(n,r),ie=V.type==$r.Text?V:null,se=Z.type==$r.Text?Z:null;if(ie&&(n.lineWrapping||V.widgetLineBreaks)&&(ie=Sf(n,i,ie)),se&&(n.lineWrapping||Z.widgetLineBreaks)&&(se=Sf(n,r,se)),ie&&se&&ie.from==se.from)return Re(Ge(t.from,t.to,ie));{let De=ie?Ge(t.from,null,ie):Oe(V,!1),Ne=se?Ge(null,t.to,se):Oe(Z,!0),yt=[];return(ie||V).to<(se||Z).from-(ie&&se?1:0)||V.widgetLineBreaks>1&&De.bottom+n.defaultLineHeight/2<Ne.top?yt.push(he(T,De.bottom,P,Ne.top)):De.bottom<Ne.top&&n.elementAtHeight((De.bottom+Ne.top)/2).type==$r.Text&&(De.bottom=Ne.top=(De.bottom+Ne.top)/2),Re(De).concat(yt).concat(Re(Ne))}function he(De,Ne,yt,ci){return new yh(e,De-m.left,Ne-m.top-.01,yt-De,ci-Ne+.01)}function Re({top:De,bottom:Ne,horizontal:yt}){let ci=[];for(let St=0;St<yt.length;St+=2)ci.push(he(yt[St],De,yt[St+1],Ne));return ci}function Ge(De,Ne,yt){let ci=1e9,St=-1e9,It=[];function Vi(jr,nr,qi,Xn,pr){let kn=n.coordsAtPos(jr,jr==yt.to?-2:2),rr=n.coordsAtPos(qi,qi==yt.from?2:-2);!kn||!rr||(ci=Math.min(kn.top,rr.top,ci),St=Math.max(kn.bottom,rr.bottom,St),pr==Bn.LTR?It.push(l&&nr?T:kn.left,l&&Xn?P:rr.right):It.push(!l&&Xn?T:rr.left,!l&&nr?P:kn.right))}let Cn=De!=null?De:yt.from,dr=Ne!=null?Ne:yt.to;for(let jr of n.visibleRanges)if(jr.to>Cn&&jr.from<dr)for(let nr=Math.max(jr.from,Cn),qi=Math.min(jr.to,dr);;){let Xn=n.state.doc.lineAt(nr);for(let pr of n.bidiSpans(Xn)){let kn=pr.from+Xn.from,rr=pr.to+Xn.from;if(kn>=qi)break;rr>nr&&Vi(Math.max(kn,nr),De==null&&kn<=Cn,Math.min(rr,qi),Ne==null&&rr>=dr,pr.dir)}if(nr=Xn.to+1,nr>=qi)break}return It.length==0&&Vi(Cn,De==null,dr,Ne==null,n.textDirection),{top:ci,bottom:St,horizontal:It}}function Oe(De,Ne){let yt=u.top+(Ne?De.top:De.bottom);return{top:yt,bottom:yt,horizontal:[]}}}function Xt(n,e){return n.constructor==e.constructor&&n.eq(e)}class hd{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Zr)!=e.state.facet(Zr)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let t=0,i=e.facet(Zr);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!Xt(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Zr=k.r$.define();function Cf(n){return[un.define(e=>new hd(e,n)),Zr.of(n)]}const cd=!dt.ios,Ci=k.r$.define({combine(n){return(0,k.BO)(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Yg(n={}){return[Ci.of(n),ig,ng,sg,Yc.of(!0)]}function tg(n){return n.facet(Ci)}function xh(n){return n.startState.facet(Ci)!=n.state.facet(Ci)}const ig=Cf({above:!0,markers(n){let{state:e}=n,t=e.facet(Ci),i=[];for(let r of e.selection.ranges){let l=r==e.selection.main;if(r.empty?!l||cd:t.drawRangeCursor){let c=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=r.empty?r:k.jT.cursor(r.head,r.head>r.anchor?-1:1);for(let m of yh.forRange(n,c,u))i.push(m)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=xh(n);return t&&fd(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){fd(e.state,n)},class:"cm-cursorLayer"});function fd(n,e){e.style.animationDuration=n.facet(Ci).cursorBlinkRate+"ms"}const ng=Cf({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:yh.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||xh(n)},class:"cm-selectionLayer"}),rg={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};cd&&(rg[".cm-line"].caretColor="transparent !important");const sg=null,ud=k.Py.define({map(n,e){return n==null?null:e.mapPos(n)}}),bh=k.QQ.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(ud)?i.value:t,n)}}),og=un.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(bh);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(bh)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(bh),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(bh)!=n&&this.view.dispatch({effects:ud.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Jg(){return[bh,og]}function dd(n,e,t,i,r){e.lastIndex=0;for(let l=n.iterRange(t,i),c=t,u;!l.next().done;c+=l.value.length)if(!l.lineBreak)for(;u=e.exec(l.value);)r(c+u.index,u)}function lg(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:l}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),l=Math.min(n.state.doc.lineAt(l).to,l+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=l:i.push({from:r,to:l});return i}class kf{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:l,maxLength:c=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(u,m,x,w)=>r(w,x,x+u[0].length,u,m);else if(typeof i=="function")this.addMatch=(u,m,x,w)=>{let T=i(u,m,x);T&&w(x,x+u[0].length,T)};else if(i)this.addMatch=(u,m,x,w)=>w(x,x+u[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=l,this.maxLength=c}createDeco(e){let t=new k.f_,i=t.add.bind(t);for(let{from:r,to:l}of lg(e,this.maxLength))dd(e.state.doc,this.regexp,r,l,(c,u)=>this.addMatch(u,e,c,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((l,c,u,m)=>{m>e.view.viewport.from&&u<e.view.viewport.to&&(i=Math.min(u,i),r=Math.max(m,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let l of e.visibleRanges){let c=Math.max(l.from,i),u=Math.min(l.to,r);if(u>c){let m=e.state.doc.lineAt(c),x=m.to<u?e.state.doc.lineAt(u):m,w=Math.max(l.from,m.from),T=Math.min(l.to,x.to);if(this.boundary){for(;c>m.from;c--)if(this.boundary.test(m.text[c-1-m.from])){w=c;break}for(;u<x.to;u++)if(this.boundary.test(x.text[u-x.from])){T=u;break}}let P=[],V,Z=(ie,se,he)=>P.push(he.range(ie,se));if(m==x)for(this.regexp.lastIndex=w-m.from;(V=this.regexp.exec(m.text))&&V.index<T-m.from;)this.addMatch(V,e,V.index+m.from,Z);else dd(e.state.doc,this.regexp,w,T,(ie,se)=>this.addMatch(se,e,ie,Z));t=t.update({filterFrom:w,filterTo:T,filter:(ie,se)=>ie<w||se>T,add:P})}}return t}}const Af=/x/.unicode!=null?"gu":"g",Mf=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Af),ag={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let wh=null;function hg(){var n;if(wh==null&&typeof document!="undefined"&&document.body){let e=document.body.style;wh=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return wh||!1}const wc=k.r$.define({combine(n){let e=(0,k.BO)(n,{render:null,specialChars:Mf,addSpecialChars:null});return(e.replaceTabs=!hg())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Af)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Af)),e}});function Qg(n={}){return[wc.of(n),as()]}let ir=null;function as(){return ir||(ir=un.fromClass(class{constructor(n){this.view=n,this.decorations=Pi.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(wc)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new kf({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,l=codePointAt(e[0],0);if(l==9){let c=r.lineAt(i),u=t.state.tabSize,m=countColumn(c.text,u,i-c.from);return Pi.replace({widget:new pd((u-m%u)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[l]||(this.decorationCache[l]=Pi.replace({widget:new ug(n,l)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(wc);n.startState.facet(wc)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const cg="\u2022";function fg(n){return n>=32?cg:n==10?"\u2424":String.fromCharCode(9216+n)}class ug extends null{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=fg(this.code),i=e.state.phrase("Control character")+" "+(ag[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let l=document.createElement("span");return l.textContent=t,l.title=i,l.setAttribute("aria-label",i),l.className="cm-specialChar",l}ignoreEvent(){return!1}}class pd extends null{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const gd=null;function em(){return[gd,lh.of(n=>{var e;return((e=n.plugin(gd))===null||e===void 0?void 0:e.attrs)||null})]}function tm(){return dg}const md=Pi.line({class:"cm-activeLine"}),dg=un.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(md.range(r.from)),e=r.from)}return Pi.set(t)}},{decorations:n=>n.decorations});class pg extends null{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?Fl(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),r=Vl(t[0],i.direction!="rtl"),l=parseInt(i.lineHeight);return r.bottom-r.top>l*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+l}:r}ignoreEvent(){return!1}}function im(n){return un.fromClass(class{constructor(e){this.view=e,this.placeholder=n?Pi.set([Pi.widget({widget:new pg(n),side:1}).range(0)]):Pi.none}get decorations(){return this.view.state.doc.length?Pi.none:this.placeholder}},{decorations:e=>e.decorations})}const Sc=2e3;function vd(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),l=[];if(e.off>Sc||t.off>Sc||e.col<0||t.col<0){let c=Math.min(e.off,t.off),u=Math.max(e.off,t.off);for(let m=i;m<=r;m++){let x=n.doc.line(m);x.length<=u&&l.push(EditorSelection.range(x.from+c,x.to+u))}}else{let c=Math.min(e.col,t.col),u=Math.max(e.col,t.col);for(let m=i;m<=r;m++){let x=n.doc.line(m),w=findColumn(x.text,c,n.tabSize,!0);if(w<0)l.push(EditorSelection.cursor(x.to));else{let T=findColumn(x.text,u,n.tabSize);l.push(EditorSelection.range(x.from+w,x.from+T))}}}return l}function gg(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function yd(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,l=r>Sc?-1:r==i.length?gg(n,e.clientX):countColumn(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:l,off:r}}function mg(n,e){let t=yd(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let l=r.changes.mapPos(r.startState.doc.line(t.line).from),c=r.state.doc.lineAt(l);t={line:c.number,col:t.col,off:Math.min(t.off,c.length)},i=i.map(r.changes)}},get(r,l,c){let u=yd(n,r);if(!u)return i;let m=vd(n.state,t,u);return m.length?c?EditorSelection.create(m.concat(i.ranges)):EditorSelection.create(m):i}}:null}function nm(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return Si.mouseSelectionStyle.of((t,i)=>e(i)?mg(t,i):null)}const Ma={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},vg={style:"cursor: crosshair"};function rm(n={}){let[e,t]=Ma[n.key||"Alt"],i=un.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,Si.contentAttributes.of(r=>{var l;return!((l=r.plugin(i))===null||l===void 0)&&l.isDown?vg:null})]}const Sh="-10000px";class xd{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e,t){var i;let r=e.state.facet(this.facet),l=r.filter(m=>m);if(r===this.input){for(let m of this.tooltipViews)m.update&&m.update(e);return!1}let c=[],u=t?[]:null;for(let m=0;m<l.length;m++){let x=l[m],w=-1;if(x){for(let T=0;T<this.tooltips.length;T++){let P=this.tooltips[T];P&&P.create==x.create&&(w=T)}if(w<0)c[m]=this.createTooltipView(x),u&&(u[m]=!!x.above);else{let T=c[m]=this.tooltipViews[w];u&&(u[m]=t[w]),T.update&&T.update(e)}}}for(let m of this.tooltipViews)c.indexOf(m)<0&&(m.dom.remove(),(i=m.destroy)===null||i===void 0||i.call(m));return t&&(u.forEach((m,x)=>t[x]=m),t.length=u.length),this.input=r,this.tooltips=l,this.tooltipViews=c,!0}}function sm(n={}){return Ch.of(n)}function bd(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Ch=k.r$.define({combine:n=>{var e,t,i;return{position:dt.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||bd}}}),wd=new WeakMap,Tf=un.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Ch);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new xd(n,Of,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(Ch);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=Sh,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(dt.gecko)i=r.offsetParent!=this.container.ownerDocument.body;else if(this.view.scaleX!=1||this.view.scaleY!=1)i=!0;else if(r.style.top==Sh&&r.style.left=="0px"){let l=r.getBoundingClientRect();i=Math.abs(l.top+1e4)>1||Math.abs(l.left)>1}}if(i||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,t=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((r,l)=>{let c=this.manager.tooltipViews[l];return c.getCoords?c.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(Ch).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let u of this.manager.tooltipViews)u.dom.style.position="absolute"}let{editor:t,space:i,scaleX:r,scaleY:l}=n,c=[];for(let u=0;u<this.manager.tooltips.length;u++){let m=this.manager.tooltips[u],x=this.manager.tooltipViews[u],{dom:w}=x,T=n.pos[u],P=n.size[u];if(!T||T.bottom<=Math.max(t.top,i.top)||T.top>=Math.min(t.bottom,i.bottom)||T.right<Math.max(t.left,i.left)-.1||T.left>Math.min(t.right,i.right)+.1){w.style.top=Sh;continue}let V=m.arrow?x.dom.querySelector(".cm-tooltip-arrow"):null,Z=V?7:0,ie=P.right-P.left,se=(e=wd.get(x))!==null&&e!==void 0?e:P.bottom-P.top,he=x.offset||xg,Re=this.view.textDirection==Bn.LTR,Ge=P.width>i.right-i.left?Re?i.left:i.right-P.width:Re?Math.min(T.left-(V?14:0)+he.x,i.right-ie):Math.max(i.left,T.left-ie+(V?14:0)-he.x),Oe=this.above[u];!m.strictSide&&(Oe?T.top-(P.bottom-P.top)-he.y<i.top:T.bottom+(P.bottom-P.top)+he.y>i.bottom)&&Oe==i.bottom-T.bottom>T.top-i.top&&(Oe=this.above[u]=!Oe);let De=(Oe?T.top-i.top:i.bottom-T.bottom)-Z;if(De<se&&x.resize!==!1){if(De<this.view.defaultLineHeight){w.style.top=Sh;continue}wd.set(x,se),w.style.height=(se=De)/l+"px"}else w.style.height&&(w.style.height="");let Ne=Oe?T.top-se-Z-he.y:T.bottom+Z+he.y,yt=Ge+ie;if(x.overlap!==!0)for(let ci of c)ci.left<yt&&ci.right>Ge&&ci.top<Ne+se&&ci.bottom>Ne&&(Ne=Oe?ci.top-se-2-Z:ci.bottom+Z+2);if(this.position=="absolute"?(w.style.top=(Ne-n.parent.top)/l+"px",w.style.left=(Ge-n.parent.left)/r+"px"):(w.style.top=Ne/l+"px",w.style.left=Ge/r+"px"),V){let ci=T.left+(Re?he.x:-he.x)-(Ge+14-7);V.style.left=ci/r+"px"}x.overlap!==!0&&c.push({left:Ge,top:Ne,right:yt,bottom:Ne+se}),w.classList.toggle("cm-tooltip-above",Oe),w.classList.toggle("cm-tooltip-below",!Oe),x.positioned&&x.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Sh}},{eventObservers:{scroll(){this.maybeMeasure()}}}),yg=Si.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),xg={x:0,y:0},Of=k.r$.define({enables:[Tf,yg]}),kh=k.r$.define();class Rf{static create(e){return new Rf(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new xd(e,kh,t=>this.createHostedView(t))}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const bg=Of.compute([kh],n=>{let e=n.facet(kh).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:Rf.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class wg{constructor(e,t,i,r,l){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=l,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,l=1;if(i instanceof Ys)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let u=e.coordsAtPos(r);if(!u||t.y<u.top||t.y>u.bottom||t.x<u.left-e.defaultCharacterWidth||t.x>u.right+e.defaultCharacterWidth)return;let m=e.bidiSpans(e.state.doc.lineAt(r)).find(w=>w.from<=r&&w.to>=r),x=m&&m.dir==Bn.RTL?-1:1;l=t.x<u.left?-x:x}let c=this.source(e,r,l);if(c!=null&&c.then){let u=this.pending={pos:r};c.then(m=>{this.pending==u&&(this.pending=null,m&&e.dispatch({effects:this.setHover.of(m)}))},m=>Js(e.state,m,"hover tooltip"))}else c&&e.dispatch({effects:this.setHover.of(c)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!Sd(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,l=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:r;(r==l?this.view.posAtCoords(this.lastMove)!=r:!Sg(this.view,r,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Sd(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Sd(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function Sg(n,e,t,i,r,l){let c=n.scrollDOM.getBoundingClientRect(),u=n.documentTop+n.documentPadding.top+n.contentHeight;if(c.left>i||c.right<i||c.top>r||Math.min(c.bottom,u)<r)return!1;let m=n.posAtCoords({x:i,y:r},!1);return m>=e&&m<=t}function om(n,e={}){let t=StateEffect.define(),i=StateField.define({create(){return null},update(r,l){if(r&&(e.hideOnChange&&(l.docChanged||l.selection)||e.hideOn&&e.hideOn(l,r)))return null;if(r&&l.docChanged){let c=l.changes.mapPos(r.pos,-1,MapMode.TrackDel);if(c==null)return null;let u=Object.assign(Object.create(null),r);u.pos=c,r.end!=null&&(u.end=l.changes.mapPos(r.end)),r=u}for(let c of l.effects)c.is(t)&&(r=c.value),c.is(Cg)&&(r=null);return r},provide:r=>kh.from(r)});return[i,un.define(r=>new wg(r,n,i,t,e.hoverTime||300)),bg]}function Cd(n,e){let t=n.plugin(Tf);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}function lm(n){return n.facet(kh).some(e=>e)}const Cg=null,am=null;function hm(n){let e=n.plugin(Tf);e&&e.maybeMeasure()}const Df=k.r$.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function cm(n){return n?[Df.of(n)]:[]}function fm(n,e){let t=n.plugin(kd),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const kd=un.fromClass(class{constructor(n){this.input=n.state.facet(Md),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(Df);this.top=new Cc(n,!0,e.topContainer),this.bottom=new Cc(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(Df);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Cc(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Cc(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Md);if(t!=this.input){let i=t.filter(m=>m),r=[],l=[],c=[],u=[];for(let m of i){let x=this.specs.indexOf(m),w;x<0?(w=m(n.view),u.push(w)):(w=this.panels[x],w.update&&w.update(n)),r.push(w),(w.top?l:c).push(w)}this.specs=i,this.panels=r,this.top.sync(l),this.bottom.sync(c);for(let m of u)m.dom.classList.add("cm-panel"),m.mount&&m.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Si.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Cc{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Ad(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Ad(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Ad(n){let e=n.nextSibling;return n.remove(),e}const Md=k.r$.define({enables:kd});class Al extends k.uU{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Al.prototype.elementClass="",Al.prototype.toDOM=void 0,Al.prototype.mapMode=k.gc.TrackBefore,Al.prototype.startSide=Al.prototype.endSide=-1,Al.prototype.point=!0;const Ah=k.r$.define(),Td={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>k.Xs.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ta=k.r$.define();function um(n){return[Od(),Ta.of(Object.assign(Object.assign({},Td),n))]}const Ef=k.r$.define({combine:n=>n.some(e=>e)});function Od(n){let e=[Pf];return n&&n.fixed===!1&&e.push(Ef.of(!0)),e}const Pf=un.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Ta).map(e=>new Ur(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Ef),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Ef)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=k.Xs.iter(this.view.state.facet(Ah),this.view.viewport.from),i=[],r=this.gutters.map(l=>new kg(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(l.type)){let c=!0;for(let u of l.type)if(u.type==$r.Text&&c){Lf(t,i,u.from);for(let m of r)m.line(this.view,u,i);c=!1}else if(u.widget)for(let m of r)m.widget(this.view,u)}else if(l.type==$r.Text){Lf(t,i,l.from);for(let c of r)c.line(this.view,l,i)}else if(l.widget)for(let c of r)c.widget(this.view,l);for(let l of r)l.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Ta),t=n.state.facet(Ta),i=n.docChanged||n.heightChanged||n.viewportChanged||!k.Xs.eq(n.startState.facet(Ah),n.state.facet(Ah),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let l of t){let c=e.indexOf(l);c<0?r.push(new Ur(this.view,l)):(this.gutters[c].update(n),r.push(this.gutters[c]))}for(let l of this.gutters)l.dom.remove(),r.indexOf(l)<0&&l.destroy();for(let l of r)this.dom.appendChild(l.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Si.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Bn.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function Rd(n){return Array.isArray(n)?n:[n]}function Lf(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class kg{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=k.Xs.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,l=(t.top-this.height)/e.scaleY,c=t.height/e.scaleY;if(this.i==r.elements.length){let u=new kc(e,c,l,i);r.elements.push(u),r.dom.appendChild(u.dom)}else r.elements[this.i].update(e,c,l,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];Lf(this.cursor,r,t.from),i.length&&(r=r.concat(i));let l=this.gutter.config.lineMarker(e,t,r);l&&r.unshift(l);let c=this.gutter;r.length==0&&!c.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t);i&&this.addElement(e,t,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Ur{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let l=r.target,c;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let m=l.getBoundingClientRect();c=(m.top+m.bottom)/2}else c=r.clientY;let u=e.lineBlockAtHeight(c-e.documentTop);t.domEventHandlers[i](e,u,r)&&r.preventDefault()});this.markers=Rd(t.markers(e)),t.initialSpacer&&(this.spacer=new kc(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Rd(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!k.Xs.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class kc{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Ag(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let l=0,c=0;;){let u=c,m=l<t.length?t[l++]:null,x=!1;if(m){let w=m.elementClass;w&&(i+=" "+w);for(let T=c;T<this.markers.length;T++)if(this.markers[T].compare(m)){u=T,x=!0;break}}else u=this.markers.length;for(;c<u;){let w=this.markers[c++];if(w.toDOM){w.destroy(r);let T=r.nextSibling;r.remove(),r=T}}if(!m)break;m.toDOM&&(x?r=r.nextSibling:this.dom.insertBefore(m.toDOM(e),r)),x&&c++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function Ag(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const Mg=k.r$.define(),Oa=k.r$.define({combine(n){return(0,k.BO)(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let l=i[r],c=t[r];i[r]=l?(u,m,x)=>l(u,m,x)||c(u,m,x):c}return i}})}});class Bf extends Al{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Mh(n,e){return n.state.facet(Oa).formatNumber(e,n.state)}const Tg=Ta.compute([Oa],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Mg)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new Bf(Mh(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Oa)!=e.state.facet(Oa),initialSpacer(e){return new Bf(Mh(e,Ed(e.state.doc.lines)))},updateSpacer(e,t){let i=Mh(t.view,Ed(t.view.state.doc.lines));return i==e.number?e:new Bf(i)},domEventHandlers:n.facet(Oa).domEventHandlers}));function Dd(n={}){return[Oa.of(n),Od(),Tg]}function Ed(n){let e=9;for(;e<n;)e=e*10+9;return e}const dm=new class extends Al{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Og=null;function pm(){return Og}const Nf=new Map;function Rg(n){let e=Nf.get(n);return e||Nf.set(n,e=Pi.mark({attributes:n==="	"?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":n.replace(/ /g,"\xB7")}})),e}function Pd(n){return un.define(e=>({decorations:n.createDeco(e),update(t){this.decorations=n.updateDeco(t,this.decorations)}}),{decorations:e=>e.decorations})}const Dg=Pd(new kf({regexp:/\t| +/g,decoration:n=>Rg(n[0]),boundary:/\S/}));function Ld(){return Dg}const If=Pd(new kf({regexp:/\s+$/g,decoration:Pi.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function gm(){return If}const mm={HeightMap:Mr,HeightOracle:ju,MeasuredHeights:uf,QueryType:Ji,ChangedRange:bs,computeOrder:xu,moveVisually:wu};class Bd{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=Ki(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),l=r.search(_d(e,!1));return l<0?null:{from:i+l,to:this.pos,text:r.slice(l)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function Nd(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Eg(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let l=1;l<r.length;l++)t[r[l]]=!0}let i=Nd(e)+Nd(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Pg(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Eg(e);return r=>{let l=r.matchBefore(i);return l||r.explicit?{from:l?l.from:r.pos,options:e,validFor:t}:null}}function vm(n,e){return t=>{for(let i=syntaxTree(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return e(t);if(i.type.isTop)break}return null}}function ym(n,e){return t=>{for(let i=syntaxTree(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class Id{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function Ml(n){return n.selection.main.from}function _d(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",l=i[i.length-1]!="$";return!r&&!l?n:new RegExp(`${r?"^":""}(?:${i})${l?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const Hd=k.q6.define();function Lg(n,e,t,i){let{main:r}=n.selection,l=t-r.from,c=i-r.from;return Object.assign(Object.assign({},n.changeByRange(u=>u!=r&&t!=i&&n.sliceDoc(u.from+l,u.from+c)!=n.sliceDoc(t,i)?{range:u}:{changes:{from:u.from+l,to:i==r.from?u.to:u.from+c,insert:e},range:k.jT.cursor(u.from+l+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const Wd=new WeakMap;function Bg(n){if(!Array.isArray(n))return n;let e=Wd.get(n);return e||Wd.set(n,e=Pg(n)),e}const _f=k.Py.define(),Th=k.Py.define();class Ng{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=(0,k.gm)(e,t),r=(0,k.nZ)(i);this.chars.push(i);let l=e.slice(t,t+r),c=l.toUpperCase();this.folded.push((0,k.gm)(c==l?l.toLowerCase():c,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:t,folded:i,any:r,precise:l,byWord:c}=this;if(t.length==1){let Re=(0,k.gm)(e,0),Ge=(0,k.nZ)(Re),Oe=Ge==e.length?0:-100;if(Re!=t[0])if(Re==i[0])Oe+=-200;else return!1;return this.ret(Oe,[0,Ge])}let u=e.indexOf(this.pattern);if(u==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let m=t.length,x=0;if(u<0){for(let Re=0,Ge=Math.min(e.length,200);Re<Ge&&x<m;){let Oe=(0,k.gm)(e,Re);(Oe==t[x]||Oe==i[x])&&(r[x++]=Re),Re+=(0,k.nZ)(Oe)}if(x<m)return!1}let w=0,T=0,P=!1,V=0,Z=-1,ie=-1,se=/[a-z]/.test(e),he=!0;for(let Re=0,Ge=Math.min(e.length,200),Oe=0;Re<Ge&&T<m;){let De=(0,k.gm)(e,Re);u<0&&(w<m&&De==t[w]&&(l[w++]=Re),V<m&&(De==t[V]||De==i[V]?(V==0&&(Z=Re),ie=Re+1,V++):V=0));let Ne,yt=De<255?De>=48&&De<=57||De>=97&&De<=122?2:De>=65&&De<=90?1:0:(Ne=(0,k.bg)(De))!=Ne.toLowerCase()?1:Ne!=Ne.toUpperCase()?2:0;(!Re||yt==1&&se||Oe==0&&yt!=0)&&(t[T]==De||i[T]==De&&(P=!0)?c[T++]=Re:c.length&&(he=!1)),Oe=yt,Re+=(0,k.nZ)(De)}return T==m&&c[0]==0&&he?this.result(-100+(P?-200:0),c,e):V==m&&Z==0?this.ret(-200-e.length+(ie==e.length?0:-100),[0,ie]):u>-1?this.ret(-700-e.length,[u,u+this.pattern.length]):V==m?this.ret(-200+-700-e.length,[Z,ie]):T==m?this.result(-100+(P?-200:0)+-700+(he?0:-1100),c,e):t.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],l=0;for(let c of t){let u=c+(this.astral?(0,k.nZ)((0,k.gm)(i,c)):1);l&&r[l-1]==c?r[l-1]=u:(r[l++]=c,r[l++]=u)}return this.ret(e-i.length,r)}}const Hr=k.r$.define({combine(n){return(0,k.BO)(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Ig,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Fd(e(i),t(i)),optionClass:(e,t)=>i=>Fd(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function Fd(n,e){return n?e?n+" "+e:n:e}function Ig(n,e,t,i,r,l){let c=n.textDirection==Bn.RTL,u=c,m=!1,x="top",w,T,P=e.left-r.left,V=r.right-e.right,Z=i.right-i.left,ie=i.bottom-i.top;if(u&&P<Math.min(Z,V)?u=!1:!u&&V<Math.min(Z,P)&&(u=!0),Z<=(u?P:V))w=Math.max(r.top,Math.min(t.top,r.bottom-ie))-e.top,T=Math.min(400,u?P:V);else{m=!0,T=Math.min(400,(c?e.right:r.right-e.left)-30);let Re=r.bottom-e.bottom;Re>=ie||Re>e.top?w=t.bottom-e.top:(x="bottom",w=e.bottom-t.top)}let se=(e.bottom-e.top)/l.offsetHeight,he=(e.right-e.left)/l.offsetWidth;return{style:`${x}: ${w/se}px; max-width: ${T/he}px`,class:"cm-completionInfo-"+(m?c?"left-narrow":"right-narrow":u?"left":"right")}}function o(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r){let l=document.createElement("span");l.className="cm-completionLabel";let c=t.displayLabel||t.label,u=0;for(let m=0;m<r.length;){let x=r[m++],w=r[m++];x>u&&l.appendChild(document.createTextNode(c.slice(u,x)));let T=l.appendChild(document.createElement("span"));T.appendChild(document.createTextNode(c.slice(x,w))),T.className="cm-completionMatchedText",u=w}return u<c.length&&l.appendChild(document.createTextNode(c.slice(u))),l},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function h(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class g{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:m=>this.placeInfo(m),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:l,selected:c}=r.open,u=e.state.facet(Hr);this.optionContent=o(u),this.optionClass=u.optionClass,this.tooltipClass=u.tooltipClass,this.range=h(l.length,c,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",m=>{let{options:x}=e.state.field(t).open;for(let w=m.target,T;w&&w!=this.dom;w=w.parentNode)if(w.nodeName=="LI"&&(T=/-(\d+)$/.exec(w.id))&&+T[1]<x.length){this.applyCompletion(e,x[+T[1]]),m.preventDefault();return}}),this.dom.addEventListener("focusout",m=>{let x=e.state.field(this.stateField,!1);x&&x.tooltip&&e.state.facet(Hr).closeOnBlur&&m.relatedTarget!=e.contentDOM&&e.dispatch({effects:Th.of(null)})}),this.showOptions(l,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:l,selected:c,disabled:u}=i.open;(!r.open||r.open.options!=l)&&(this.range=h(l.length,c,e.state.facet(Hr).maxRenderedOptions),this.showOptions(l,i.id)),this.updateSel(),u!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!u)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=h(t.options.length,t.selected,this.view.state.facet(Hr).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let l=typeof r=="string"?document.createTextNode(r):r(i);if(!l)return;"then"in l?l.then(c=>{c&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(c,i)}).catch(c=>Js(this.view.state,c,"completion info")):this.addInfoPane(l,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:l}=e;i.appendChild(r),this.infoDestroy=l||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&R(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),l=this.space;if(!l){let c=this.dom.ownerDocument.defaultView||window;l={left:0,top:0,right:c.innerWidth,bottom:c.innerHeight}}return r.top>Math.min(l.bottom,t.bottom)-10||r.bottom<Math.max(l.top,t.top)+10?null:this.view.state.facet(Hr).positionInfo(this.view,t,r,i,l,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let l=null;for(let c=i.from;c<i.to;c++){let{completion:u,match:m}=e[c],{section:x}=u;if(x){let P=typeof x=="string"?x:x.name;if(P!=l&&(c>i.from||i.from==0))if(l=P,typeof x!="string"&&x.header)r.appendChild(x.header(x));else{let V=r.appendChild(document.createElement("completion-section"));V.textContent=P}}const w=r.appendChild(document.createElement("li"));w.id=t+"-"+c,w.setAttribute("role","option");let T=this.optionClass(u);T&&(w.className=T);for(let P of this.optionContent){let V=P(u,this.view.state,m);V&&w.appendChild(V)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function C(n,e){return t=>new g(t,n,e)}function R(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function _(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function z(n,e){let t=[],i=null,r=m=>{t.push(m);let{section:x}=m.completion;if(x){i||(i=[]);let w=typeof x=="string"?x:x.name;i.some(T=>T.name==w)||i.push(typeof x=="string"?{name:w}:x)}};for(let m of n)if(m.hasResult()){let x=m.result.getMatch;if(m.result.filter===!1)for(let w of m.result.options)r(new Id(w,m.source,x?x(w):[],1e9-t.length));else{let w=new Ng(e.sliceDoc(m.from,m.to));for(let T of m.result.options)if(w.match(T.label)){let P=T.displayLabel?x?x(T,w.matched):[]:w.matched;r(new Id(T,m.source,P,w.score+(T.boost||0)))}}}if(i){let m=Object.create(null),x=0,w=(T,P)=>{var V,Z;return((V=T.rank)!==null&&V!==void 0?V:1e9)-((Z=P.rank)!==null&&Z!==void 0?Z:1e9)||(T.name<P.name?-1:1)};for(let T of i.sort(w))x-=1e5,m[T.name]=x;for(let T of t){let{section:P}=T.completion;P&&(T.score+=m[typeof P=="string"?P:P.name])}}let l=[],c=null,u=e.facet(Hr).compareCompletions;for(let m of t.sort((x,w)=>w.score-x.score||u(x.completion,w.completion))){let x=m.completion;!c||c.label!=x.label||c.detail!=x.detail||c.type!=null&&x.type!=null&&c.type!=x.type||c.apply!=x.apply||c.boost!=x.boost?l.push(m):_(m.completion)>_(c)&&(l[l.length-1]=m),c=m.completion}return l}class U{constructor(e,t,i,r,l,c){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=l,this.disabled=c}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new U(this.options,Me(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,l){let c=z(e,t);if(!c.length)return r&&e.some(m=>m.state==1)?new U(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let u=t.facet(Hr).selectOnOpen?0:-1;if(r&&r.selected!=u&&r.selected!=-1){let m=r.options[r.selected].completion;for(let x=0;x<c.length;x++)if(c[x].completion==m){u=x;break}}return new U(c,Me(i,u),{pos:e.reduce((m,x)=>x.hasResult()?Math.min(m,x.from):m,1e8),create:Cs,above:l.aboveCursor},r?r.timestamp:Date.now(),u,!1)}map(e){return new U(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class te{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new te(Ye,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Hr),l=(i.override||t.languageDataAt("autocomplete",Ml(t)).map(Bg)).map(u=>(this.active.find(x=>x.source==u)||new pt(u,this.active.some(x=>x.state!=0)?1:0)).update(e,i));l.length==this.active.length&&l.every((u,m)=>u==this.active[m])&&(l=this.active);let c=this.open;c&&e.docChanged&&(c=c.map(e.changes)),e.selection||l.some(u=>u.hasResult()&&e.changes.touchesRange(u.from,u.to))||!be(l,this.active)?c=U.build(l,t,this.id,c,i):c&&c.disabled&&!l.some(u=>u.state==1)&&(c=null),!c&&l.every(u=>u.state!=1)&&l.some(u=>u.hasResult())&&(l=l.map(u=>u.hasResult()?new pt(u.source,0):u));for(let u of e.effects)u.is(ui)&&(c=c&&c.setSelected(u.value,this.id));return l==this.active&&c==this.open?this:new te(l,this.id,c)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:we}}function be(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let r=t==n.length,l=i==e.length;if(r||l)return r==l;if(n[t++].result!=e[i++].result)return!1}}const we={"aria-autocomplete":"list"};function Me(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const Ye=[];function mt(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class pt{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=mt(e),r=this;i?r=r.handleUserEvent(e,i,t):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new pt(r.source,0));for(let l of e.effects)if(l.is(_f))r=new pt(r.source,1,l.value?Ml(e.state):-1);else if(l.is(Th))r=new pt(r.source,0);else if(l.is(hi))for(let c of l.value)c.source==r.source&&(r=c);return r}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new pt(this.source,1)}handleChange(e){return e.changes.touchesRange(Ml(e.startState))?new pt(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new pt(this.source,this.state,e.mapPos(this.explicitPos))}}class Nt extends pt{constructor(e,t,i,r,l){super(e,2,t),this.result=i,this.from=r,this.to=l}hasResult(){return!0}handleUserEvent(e,t,i){var r;let l=e.changes.mapPos(this.from),c=e.changes.mapPos(this.to,1),u=Ml(e.state);if((this.explicitPos<0?u<=l:u<this.from)||u>c||t=="delete"&&Ml(e.startState)==this.from)return new pt(this.source,t=="input"&&i.activateOnTyping?1:0);let m=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),x;return Rt(this.result.validFor,e.state,l,c)?new Nt(this.source,m,this.result,l,c):this.result.update&&(x=this.result.update(this.result,l,c,new Bd(e.state,u,m>=0)))?new Nt(this.source,m,x,x.from,(r=x.to)!==null&&r!==void 0?r:Ml(e.state)):new pt(this.source,1,m)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new pt(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Nt(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function Rt(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):_d(n,!0).test(r)}const hi=k.Py.define({map(n,e){return n.map(t=>t.map(e))}}),ui=k.Py.define(),ji=k.QQ.define({create(){return te.start()},update(n,e){return n.update(e)},provide:n=>[Of.from(n,e=>e.tooltip),Si.contentAttributes.from(n,e=>e.attrs)]});function Wr(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(ji).active.find(r=>r.source==e.source);return i instanceof Nt?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},Lg(n.state,t,i.from,i.to)),{annotations:Hd.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const Cs=C(ji,Wr);function Sn(n,e="option"){return t=>{let i=t.state.field(ji,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Hr).interactionDelay)return!1;let r=1,l;e=="page"&&(l=Cd(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(l.dom.offsetHeight/l.dom.querySelector("li").offsetHeight)-1));let{length:c}=i.open.options,u=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:c-1;return u<0?u=e=="page"?0:c-1:u>=c&&(u=e=="page"?c-1:0),t.dispatch({effects:ui.of(u)}),!0}}const to=n=>{let e=n.state.field(ji,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Hr).interactionDelay?!1:Wr(n,e.open.options[e.open.selected])},Zo=n=>n.state.field(ji,!1)?(n.dispatch({effects:_f.of(!0)}),!0):!1,Vd=n=>{let e=n.state.field(ji,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Th.of(null)}),!0)};class s0{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const o0=50,l0=1e3,a0=un.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(ji).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(ji);if(!n.selectionSet&&!n.docChanged&&n.startState.field(ji)==e)return;let t=n.transactions.some(i=>(i.selection||i.docChanged)&&!mt(i));for(let i=0;i<this.running.length;i++){let r=this.running[i];if(t||r.updates.length+n.transactions.length>o0&&Date.now()-r.time>l0){for(let l of r.context.abortListeners)try{l()}catch(c){Js(this.view.state,c)}r.context.abortListeners=null,this.running.splice(i--,1)}else r.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(r=>r.active.source==i.source))?setTimeout(()=>this.startUpdate(),50):-1,this.composing!=0)for(let i of n.transactions)mt(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(ji);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Ml(e),i=new Bd(e,t,n.explicitPos==t),r=new s0(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(l=>{r.context.aborted||(r.done=l||null,this.scheduleAccept())},l=>{this.view.dispatch({effects:Th.of(null)}),Js(this.view.state,l)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Hr).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Hr);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let c=new Nt(r.active.source,r.active.explicitPos,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:Ml(r.updates.length?r.updates[0].startState:this.view.state));for(let u of r.updates)c=c.update(u,t);if(c.hasResult()){e.push(c);continue}}let l=this.view.state.field(ji).active.find(c=>c.source==r.active.source);if(l&&l.state==1)if(r.done==null){let c=new pt(r.active.source,0);for(let u of r.updates)c=c.update(u,t);c.state!=1&&e.push(c)}else this.startQuery(l)}e.length&&this.view.dispatch({effects:hi.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(ji,!1);if(e&&e.tooltip&&this.view.state.facet(Hr).closeOnBlur){let t=e.open&&Cd(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&this.view.dispatch({effects:Th.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:_f.of(!1)}),20),this.composing=0}}}),xm=Si.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class h0{constructor(e,t,i,r){this.field=e,this.line=t,this.from=i,this.to=r}}class _g{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,MapMode.TrackDel),i=e.mapPos(this.to,1,MapMode.TrackDel);return t==null||i==null?null:new _g(this.field,t,i)}}class Hg{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],r=[t],l=e.doc.lineAt(t),c=/^\s*/.exec(l.text)[0];for(let m of this.lines){if(i.length){let x=c,w=/^\t*/.exec(m)[0].length;for(let T=0;T<w;T++)x+=e.facet(indentUnit);r.push(t+x.length-w),m=x+m.slice(w)}i.push(m),t+=m.length+1}let u=this.fieldPositions.map(m=>new _g(m.field,r[m.line]+m.from,r[m.line]+m.to));return{text:i,ranges:u}}static parse(e){let t=[],i=[],r=[],l;for(let c of e.split(/\r\n?|\n/)){for(;l=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(c);){let u=l[1]?+l[1]:null,m=l[2]||l[3]||"",x=-1;for(let w=0;w<t.length;w++)(u!=null?t[w].seq==u:m&&t[w].name==m)&&(x=w);if(x<0){let w=0;for(;w<t.length&&(u==null||t[w].seq!=null&&t[w].seq<u);)w++;t.splice(w,0,{seq:u,name:m}),x=w;for(let T of r)T.field>=x&&T.field++}r.push(new h0(x,i.length,l.index,l.index+m.length)),c=c.slice(0,l.index)+m+c.slice(l.index+l[0].length)}for(let u;u=/\\([{}])/.exec(c);){c=c.slice(0,u.index)+u[1]+c.slice(u.index+u[0].length);for(let m of r)m.line==i.length&&m.from>u.index&&(m.from--,m.to--)}i.push(c)}return new Hg(i,r)}}let c0=Pi.widget({widget:new class extends rc{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),f0=Pi.mark({class:"cm-snippetField"});class Ac{constructor(e,t){this.ranges=e,this.active=t,this.deco=Pi.set(e.map(i=>(i.from==i.to?c0:f0).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let r=i.map(e);if(!r)return null;t.push(r)}return new Ac(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const Hf=k.Py.define({map(n,e){return n&&n.map(e)}}),u0=k.Py.define(),Oh=k.QQ.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Hf))return t.value;if(t.is(u0)&&n)return new Ac(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>Si.decorations.from(n,e=>e?e.deco:Pi.none)});function Wg(n,e){return k.jT.create(n.filter(t=>t.field==e).map(t=>k.jT.range(t.from,t.to)))}function d0(n){let e=Hg.parse(n);return(t,i,r,l)=>{let{text:c,ranges:u}=e.instantiate(t.state,r),m={changes:{from:r,to:l,insert:Text.of(c)},scrollIntoView:!0,annotations:i?Hd.of(i):void 0};if(u.length&&(m.selection=Wg(u,0)),u.length>1){let x=new Ac(u,0),w=m.effects=[Hf.of(x)];t.state.field(Oh,!1)===void 0&&w.push(StateEffect.appendConfig.of([Oh,y0,x0,xm]))}t.dispatch(t.state.update(m))}}function bm(n){return({state:e,dispatch:t})=>{let i=e.field(Oh,!1);if(!i||n<0&&i.active==0)return!1;let r=i.active+n,l=n>0&&!i.ranges.some(c=>c.field==r+n);return t(e.update({selection:Wg(i.ranges,r),effects:Hf.of(l?null:new Ac(i.ranges,r)),scrollIntoView:!0})),!0}}const p0=({state:n,dispatch:e})=>n.field(Oh,!1)?(e(n.update({effects:Hf.of(null)})),!0):!1,g0=bm(1),m0=bm(-1);function iv(n){let e=n.field(Oh,!1);return!!(e&&e.ranges.some(t=>t.field==e.active+1))}function nv(n){let e=n.field(Oh,!1);return!!(e&&e.active>0)}const v0=[{key:"Tab",run:g0,shift:m0},{key:"Escape",run:p0}],wm=k.r$.define({combine(n){return n.length?n[0]:v0}}),y0=k.Wl.highest(bf.compute([wm],n=>n.facet(wm)));function rv(n,e){return Object.assign(Object.assign({},e),{apply:d0(n)})}const x0=Si.domEventHandlers({mousedown(n,e){let t=e.state.field(Oh,!1),i;if(!t||(i=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let r=t.ranges.find(l=>l.from<=i&&l.to>=i);return!r||r.field==t.active?!1:(e.dispatch({selection:Wg(t.ranges,r.field),effects:Hf.of(t.ranges.some(l=>l.field>r.field)?new Ac(t.ranges,r.field):null),scrollIntoView:!0}),!0)}});function b0(n){let e=n.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${e}]+`,"ug")}catch(t){return new RegExp(`[w${e}]`,"g")}}function Sm(n,e){return new RegExp(e(n.source),n.unicode?"u":"")}const Cm=null;function w0(n){return Cm[n]||(Cm[n]=new WeakMap)}function km(n,e,t,i,r){for(let l=n.iterLines(),c=0;!l.next().done;){let{value:u}=l,m;for(e.lastIndex=0;m=e.exec(u);)if(!i[m[0]]&&c+m.index!=r&&(t.push({type:"text",label:m[0]}),i[m[0]]=!0,t.length>=2e3))return;c+=u.length+1}}function Am(n,e,t,i,r){let l=n.length>=1e3,c=l&&e.get(n);if(c)return c;let u=[],m=Object.create(null);if(n.children){let x=0;for(let w of n.children){if(w.length>=1e3)for(let T of Am(w,e,t,i-x,r-x))m[T.label]||(m[T.label]=!0,u.push(T));else km(w,t,u,m,r-x);x+=w.length+1}}else km(n,t,u,m,r);return l&&u.length<2e3&&e.set(n,u),u}const sv=n=>{let e=n.state.languageDataAt("wordChars",n.pos).join(""),t=b0(e),i=n.matchBefore(Sm(t,c=>c+"$"));if(!i&&!n.explicit)return null;let r=i?i.from:n.pos,l=Am(n.state.doc,w0(e),t,5e4,r);return{from:r,options:l,validFor:Sm(t,c=>"^"+c)}},Wf={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Rh=k.Py.define({map(n,e){let t=e.mapPos(n,-1,k.gc.TrackAfter);return t==null?void 0:t}}),Fg=new class extends k.uU{};Fg.startSide=1,Fg.endSide=-1;const Mm=k.QQ.define({create(){return k.Xs.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(n=k.Xs.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(Rh)&&(n=n.update({add:[Fg.range(t.value,t.value+1)]}));return n}});function S0(){return[k0,Mm]}const Vg="()[]{}<>";function Tm(n){for(let e=0;e<Vg.length;e+=2)if(Vg.charCodeAt(e)==n)return Vg.charAt(e+1);return(0,k.bg)(n<128?n:n+1)}function Om(n,e){return n.languageDataAt("closeBrackets",e)[0]||Wf}const C0=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),k0=Si.inputHandler.of((n,e,t,i)=>{if((C0?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&(0,k.nZ)((0,k.gm)(i,0))==1||e!=r.from||t!=r.to)return!1;let l=M0(n.state,i);return l?(n.dispatch(l),!0):!1}),A0=[{key:"Backspace",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Om(n,n.selection.main.head).brackets||Wf.brackets,r=null,l=n.changeByRange(c=>{if(c.empty){let u=T0(n.doc,c.head);for(let m of i)if(m==u&&zd(n.doc,c.head)==Tm((0,k.gm)(m,0)))return{changes:{from:c.head-m.length,to:c.head+m.length},range:k.jT.cursor(c.head-m.length)}}return{range:r=c}});return r||e(n.update(l,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function M0(n,e){let t=Om(n,n.selection.main.head),i=t.brackets||Wf.brackets;for(let r of i){let l=Tm((0,k.gm)(r,0));if(e==r)return l==r?D0(n,r,i.indexOf(r+r+r)>-1,t):O0(n,r,l,t.before||Wf.before);if(e==l&&Rm(n,n.selection.main.from))return R0(n,r,l)}return null}function Rm(n,e){let t=!1;return n.field(Mm).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function zd(n,e){let t=n.sliceString(e,e+2);return t.slice(0,(0,k.nZ)((0,k.gm)(t,0)))}function T0(n,e){let t=n.sliceString(e-2,e);return(0,k.nZ)((0,k.gm)(t,0))==t.length?t:t.slice(1)}function O0(n,e,t,i){let r=null,l=n.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:t,from:c.to}],effects:Rh.of(c.to+e.length),range:k.jT.range(c.anchor+e.length,c.head+e.length)};let u=zd(n.doc,c.head);return!u||/\s/.test(u)||i.indexOf(u)>-1?{changes:{insert:e+t,from:c.head},effects:Rh.of(c.head+e.length),range:k.jT.cursor(c.head+e.length)}:{range:r=c}});return r?null:n.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function R0(n,e,t){let i=null,r=n.changeByRange(l=>l.empty&&zd(n.doc,l.head)==t?{changes:{from:l.head,to:l.head+t.length,insert:t},range:k.jT.cursor(l.head+t.length)}:i={range:l});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function D0(n,e,t,i){let r=i.stringPrefixes||Wf.stringPrefixes,l=null,c=n.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:Rh.of(u.to+e.length),range:k.jT.range(u.anchor+e.length,u.head+e.length)};let m=u.head,x=zd(n.doc,m),w;if(x==e){if(Dm(n,m))return{changes:{insert:e+e,from:m},effects:Rh.of(m+e.length),range:k.jT.cursor(m+e.length)};if(Rm(n,m)){let P=t&&n.sliceDoc(m,m+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:m,to:m+P.length,insert:P},range:k.jT.cursor(m+P.length)}}}else{if(t&&n.sliceDoc(m-2*e.length,m)==e+e&&(w=Em(n,m-2*e.length,r))>-1&&Dm(n,w))return{changes:{insert:e+e+e+e,from:m},effects:Rh.of(m+e.length),range:k.jT.cursor(m+e.length)};if(n.charCategorizer(m)(x)!=k.D0.Word&&Em(n,m,r)>-1&&!E0(n,m,e,r))return{changes:{insert:e+e,from:m},effects:Rh.of(m+e.length),range:k.jT.cursor(m+e.length)}}return{range:l=u}});return l?null:n.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function Dm(n,e){let t=Ki(n).resolveInner(e+1);return t.parent&&t.from==e}function E0(n,e,t,i){let r=Ki(n).resolveInner(e,-1),l=i.reduce((c,u)=>Math.max(c,u.length),0);for(let c=0;c<5;c++){let u=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+l)),m=u.indexOf(t);if(!m||m>-1&&i.indexOf(u.slice(0,m))>-1){let w=r.firstChild;for(;w&&w.from==r.from&&w.to-w.from>t.length+m;){if(n.sliceDoc(w.to-t.length,w.to)==t)return!1;w=w.firstChild}return!0}let x=r.to==e&&r.parent;if(!x)break;r=x}return!1}function Em(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=k.D0.Word)return e;for(let r of t){let l=e-r.length;if(n.sliceDoc(l,e)==r&&i(n.sliceDoc(l-1,l))!=k.D0.Word)return l}return-1}function P0(n={}){return[ji,Hr.of(n),a0,L0,xm]}const Pm=[{key:"Ctrl-Space",run:Zo},{key:"Escape",run:Vd},{key:"ArrowDown",run:Sn(!0)},{key:"ArrowUp",run:Sn(!1)},{key:"PageDown",run:Sn(!0,"page")},{key:"PageUp",run:Sn(!1,"page")},{key:"Enter",run:to}],L0=k.Wl.highest(bf.computeN([Hr],n=>n.facet(Hr).defaultKeymap?[Pm]:[]));function lv(n){let e=n.field(ji,!1);return e&&e.active.some(t=>t.state==1)?"pending":e&&e.active.some(t=>t.state!=0)?"active":null}const Lm=new WeakMap;function av(n){var e;let t=(e=n.field(ji,!1))===null||e===void 0?void 0:e.open;if(!t||t.disabled)return[];let i=Lm.get(t.options);return i||Lm.set(t.options,i=t.options.map(r=>r.completion)),i}function hv(n){var e;let t=(e=n.field(ji,!1))===null||e===void 0?void 0:e.open;return t&&!t.disabled&&t.selected>=0?t.options[t.selected].completion:null}function cv(n){var e;let t=(e=n.field(ji,!1))===null||e===void 0?void 0:e.open;return t&&!t.disabled&&t.selected>=0?t.selected:null}function fv(n){return ui.of(n)}class B0{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Dh{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,l=i.facet(Kg).markerFilter;l&&(r=l(r));let c=Y.p.set(r.map(u=>u.from==u.to||u.from==u.to-1&&i.doc.lineAt(u.from).to==u.from?Y.p.widget({widget:new F0(u),diagnostic:u}).range(u.from):Y.p.mark({attributes:{class:"cm-lintRange cm-lintRange-"+u.severity+(u.markClass?" "+u.markClass:"")},diagnostic:u}).range(u.from,u.to)),!0);return new Dh(c,t,Mc(c))}}function Mc(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,l,{spec:c})=>{if(!(e&&c.diagnostic!=e))return i=new B0(r,l,c.diagnostic),!1}),i}function Bm(n,e){let t=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(i=>i.is(Kd))||n.changes.touchesRange(t.from,t.to))}function Nm(n,e){return n.field(hs,!1)?e:e.concat(k.Py.appendConfig.of(Um))}function uv(n,e){return{effects:Nm(n,[Kd.of(e)])}}const Kd=k.Py.define(),zg=k.Py.define(),Im=k.Py.define(),hs=k.QQ.define({create(){return new Dh(Y.p.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let r=e.changes.mapPos(n.selected.from,1);i=Mc(t,n.selected.diagnostic,r)||Mc(t,null,r)}n=new Dh(t,n.panel,i)}for(let t of e.effects)t.is(Kd)?n=Dh.init(t.value,n.panel,e.state):t.is(zg)?n=new Dh(n.diagnostics,t.value?$d.open:null,n.selected):t.is(Im)&&(n=new Dh(n.diagnostics,n.panel,t.value));return n},provide:n=>[Y.mH.from(n,e=>e.panel),Y.tk.decorations.from(n,e=>e.diagnostics)]});function dv(n){let e=n.field(hs,!1);return e?e.diagnostics.size:0}const N0=Y.p.mark({class:"cm-lintRange cm-lintRange-active"});function I0(n,e,t){let{diagnostics:i}=n.state.field(hs),r=[],l=2e8,c=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(m,x,{spec:w})=>{e>=m&&e<=x&&(m==x||(e>m||t>0)&&(e<x||t<0))&&(r.push(w.diagnostic),l=Math.min(m,l),c=Math.max(x,c))});let u=n.state.facet(Kg).tooltipFilter;return u&&(r=u(r)),r.length?{pos:l,end:c,above:n.state.doc.lineAt(l).to<c,create(){return{dom:_m(n,r)}}}:null}function _m(n,e){return S("ul",{class:"cm-tooltip-lint"},e.map(t=>Vm(n,t,!1)))}const _0=n=>{let e=n.state.field(hs,!1);(!e||!e.panel)&&n.dispatch({effects:Nm(n.state,[zg.of(!0)])});let t=(0,Y.Sd)(n,$d.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Hm=n=>{let e=n.state.field(hs,!1);return!e||!e.panel?!1:(n.dispatch({effects:zg.of(!1)}),!0)},H0=n=>{let e=n.state.field(hs,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},pv=n=>{let{state:e}=n,t=e.field(hs,!1);if(!t)return!1;let i=e.selection.main,r,l,c,u;return t.diagnostics.between(0,e.doc.length,(m,x)=>{x<i.to&&(r==null||r<m)&&(r=m,l=x),(c==null||m>c)&&(c=m,u=x)}),c==null||r==null&&c==i.from?!1:(n.dispatch({selection:{anchor:r!=null?r:c,head:l!=null?l:u},scrollIntoView:!0}),!0)},W0=[{key:"Mod-Shift-m",run:_0,preventDefault:!0},{key:"F8",run:H0}],Wm=null,Kg=k.r$.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},(0,k.BO)(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function gv(n,e={}){return[Kg.of({source:n,config:e}),Wm,Um]}function mv(n){let e=n.plugin(Wm);e&&e.force()}function Fm(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(l=>l.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Vm(n,e,t){var i;let r=t?Fm(e.actions):[];return S("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},S("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((l,c)=>{let u=!1,m=P=>{if(P.preventDefault(),u)return;u=!0;let V=Mc(n.state.field(hs).diagnostics,e);V&&l.apply(n,V.from,V.to)},{name:x}=l,w=r[c]?x.indexOf(r[c]):-1,T=w<0?x:[x.slice(0,w),S("u",x.slice(w,w+1)),x.slice(w+1)];return S("button",{type:"button",class:"cm-diagnosticAction",onclick:m,onmousedown:m,"aria-label":` Action: ${x}${w<0?"":` (access key "${r[c]})"`}.`},T)}),e.source&&S("div",{class:"cm-diagnosticSource"},e.source))}class F0 extends Y.l9{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return S("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class zm{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Vm(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class $d{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)Hm(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:l}=this.items[this.selectedIndex],c=Fm(l.actions);for(let u=0;u<c.length;u++)if(c[u].toUpperCase().charCodeAt(0)==r.keyCode){let m=Mc(this.view.state.field(hs).diagnostics,l);m&&l.actions[u].apply(e,m.from,m.to)}}else return;r.preventDefault()},i=r=>{for(let l=0;l<this.items.length;l++)this.items[l].dom.contains(r.target)&&this.moveSelection(l)};this.list=S("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=S("div",{class:"cm-panel-lint"},this.list,S("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Hm(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(hs).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(hs),i=0,r=!1,l=null;for(e.between(0,this.view.state.doc.length,(c,u,{spec:m})=>{let x=-1,w;for(let T=i;T<this.items.length;T++)if(this.items[T].diagnostic==m.diagnostic){x=T;break}x<0?(w=new zm(this.view,m.diagnostic),this.items.splice(i,0,w),r=!0):(w=this.items[x],x>i&&(this.items.splice(i,x-i),r=!0)),t&&w.diagnostic==t.diagnostic?w.dom.hasAttribute("aria-selected")||(w.dom.setAttribute("aria-selected","true"),l=w):w.dom.hasAttribute("aria-selected")&&w.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new zm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),l?(this.list.setAttribute("aria-activedescendant",l.id),this.view.requestMeasure({key:this,read:()=>({sel:l.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:c,panel:u})=>{let m=u.height/this.list.offsetHeight;c.top<u.top?this.list.scrollTop-=(u.top-c.top)/m:c.bottom>u.bottom&&(this.list.scrollTop+=(c.bottom-u.bottom)/m)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(hs),i=Mc(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Im.of(i)})}static open(e){return new $d(e)}}function Zd(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Ud(n){return Zd(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const V0=Y.tk.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ud("#d11")},".cm-lintRange-warning":{backgroundImage:Ud("orange")},".cm-lintRange-info":{backgroundImage:Ud("#999")},".cm-lintRange-hint":{backgroundImage:Ud("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Km(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}class z0 extends Y.SJ{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,i)=>Km(t)<Km(i.severity)?i.severity:t,"hint")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(jd).tooltipFilter;return r&&(i=r(i)),i.length&&(t.onmouseover=()=>$0(e,t,i)),t}}function K0(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let l=i.target;l;l=l.parentNode)if(l.nodeType==1&&l.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(Zm)&&n.dispatch({effects:$g.of(null)})}};window.addEventListener("mousemove",t)}function $0(n,e,t){function i(){let c=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(c.from)&&n.dispatch({effects:$g.of({pos:c.from,above:!1,create(){return{dom:_m(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,K0(n,e)}let{hoverTime:r}=n.state.facet(jd),l=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(l),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(l),l=setTimeout(i,r)}}function Z0(n,e){let t=Object.create(null);for(let r of e){let l=n.lineAt(r.from);(t[l.from]||(t[l.from]=[])).push(r)}let i=[];for(let r in t)i.push(new z0(t[r]).range(+r));return k.Xs.of(i,!0)}const U0=(0,Y.v5)({class:"cm-gutter-lint",markers:n=>n.state.field($m)}),$m=k.QQ.define({create(){return k.Xs.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(jd).markerFilter;for(let i of e.effects)if(i.is(Kd)){let r=i.value;t&&(r=t(r||[])),n=Z0(e.state.doc,r.slice(0))}return n}}),$g=k.Py.define(),Zm=k.QQ.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=Bm(e,n)?null:Object.assign(Object.assign({},n),{pos:e.changes.mapPos(n.pos)})),e.effects.reduce((t,i)=>i.is($g)?i.value:t,n)},provide:n=>Y.hJ.from(n)}),j0=Y.tk.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Zd('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Zd('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Zd('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Um=[hs,Y.tk.decorations.compute([hs],n=>{let{selected:e,panel:t}=n.field(hs);return!e||!t||e.from==e.to?Y.p.none:Y.p.set([N0.range(e.from,e.to)])}),(0,Y.bF)(I0,{hideOn:Bm}),V0],jd=k.r$.define({combine(n){return(0,k.BO)(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function vv(n={}){return[jd.of(n),$m,U0,j0,Zm]}function yv(n,e){let t=n.field(hs,!1);if(t&&t.diagnostics.size)for(let i=RangeSet.iter([t.diagnostics]);i.value;i.next())e(i.value.spec.diagnostic,i.from,i.to)}var jm=function(e){e===void 0&&(e={});var t=[];e.closeBracketsKeymap!==!1&&(t=t.concat(A0)),e.defaultKeymap!==!1&&(t=t.concat(p)),e.searchKeymap!==!1&&(t=t.concat(gl)),e.historyKeymap!==!1&&(t=t.concat(Pa)),e.foldKeymap!==!1&&(t=t.concat(pe)),e.completionKeymap!==!1&&(t=t.concat(Pm)),e.lintKeymap!==!1&&(t=t.concat(W0));var i=[];return e.lineNumbers!==!1&&i.push((0,Y.Eu)()),e.highlightActiveLineGutter!==!1&&i.push((0,Y.HQ)()),e.highlightSpecialChars!==!1&&i.push((0,Y.AE)()),e.history!==!1&&i.push(Mi()),e.foldGutter!==!1&&i.push(vt()),e.drawSelection!==!1&&i.push((0,Y.Uw)()),e.dropCursor!==!1&&i.push((0,Y.qr)()),e.allowMultipleSelections!==!1&&i.push(k.yy.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(Yl()),e.syntaxHighlighting!==!1&&i.push(xt(Ht,{fallback:!0})),e.bracketMatching!==!1&&i.push($i()),e.closeBrackets!==!1&&i.push(S0()),e.autocompletion!==!1&&i.push(P0()),e.rectangularSelection!==!1&&i.push((0,Y.Zs)()),e.crosshairCursor!==!1&&i.push((0,Y.S2)()),e.highlightActiveLine!==!1&&i.push((0,Y.ZO)()),e.highlightSelectionMatches!==!1&&i.push(uo()),e.tabSize&&typeof e.tabSize=="number"&&i.push(ce.of(" ".repeat(e.tabSize))),i.concat([Y.$f.of(t.flat())]).filter(Boolean)},xv=function(e){e===void 0&&(e={});var t=[];e.defaultKeymap!==!1&&(t=t.concat(defaultKeymap)),e.historyKeymap!==!1&&(t=t.concat(historyKeymap));var i=[];return e.highlightSpecialChars!==!1&&i.push(highlightSpecialChars()),e.history!==!1&&i.push(history()),e.drawSelection!==!1&&i.push(drawSelection()),e.syntaxHighlighting!==!1&&i.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),i.concat([keymap.of(t.flat())]).filter(Boolean)};const qm="#e5c07b",Zg="#e06c75",Gm="#56b6c2",Xm="#ffffff",Ff="#abb2bf",qd="#7d8799",Ym="#61afef",Jm="#98c379",Ug="#d19a66",Qm="#c678dd",e0="#21252b",jg="#2c313a",qg="#282c34",Gd="#353a42",t0="#3E4451",Gg="#528bff",bv={chalky:qm,coral:Zg,cyan:Gm,invalid:Xm,ivory:Ff,stone:qd,malibu:Ym,sage:Jm,whiskey:Ug,violet:Qm,darkBackground:e0,highlightBackground:jg,background:qg,tooltipBackground:Gd,selection:t0,cursor:Gg},q0=Y.tk.theme({"&":{color:Ff,backgroundColor:qg},".cm-content":{caretColor:Gg},".cm-cursor, .cm-dropCursor":{borderLeftColor:Gg},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:t0},".cm-panels":{backgroundColor:e0,color:Ff},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:qg,color:qd,border:"none"},".cm-activeLineGutter":{backgroundColor:jg},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Gd},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Gd,borderBottomColor:Gd},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:jg,color:Ff}}},{dark:!0}),G0=wt.define([{tag:fe.keyword,color:Qm},{tag:[fe.name,fe.deleted,fe.character,fe.propertyName,fe.macroName],color:Zg},{tag:[fe.function(fe.variableName),fe.labelName],color:Ym},{tag:[fe.color,fe.constant(fe.name),fe.standard(fe.name)],color:Ug},{tag:[fe.definition(fe.name),fe.separator],color:Ff},{tag:[fe.typeName,fe.className,fe.number,fe.changed,fe.annotation,fe.modifier,fe.self,fe.namespace],color:qm},{tag:[fe.operator,fe.operatorKeyword,fe.url,fe.escape,fe.regexp,fe.link,fe.special(fe.string)],color:Gm},{tag:[fe.meta,fe.comment],color:qd},{tag:fe.strong,fontWeight:"bold"},{tag:fe.emphasis,fontStyle:"italic"},{tag:fe.strikethrough,textDecoration:"line-through"},{tag:fe.link,color:qd,textDecoration:"underline"},{tag:fe.heading,fontWeight:"bold",color:Zg},{tag:[fe.atom,fe.bool,fe.special(fe.variableName)],color:Ug},{tag:[fe.processingInstruction,fe.string,fe.inserted],color:Jm},{tag:fe.invalid,color:Xm}]),X0=[q0,xt(G0)];var Y0=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),i0=k.q6.define();function J0(n){var{value:e,selection:t,onChange:i,onStatistics:r,onCreateEditor:l,onUpdate:c,extensions:u=[],autoFocus:m,theme:x="light",height:w="",minHeight:T="",maxHeight:P="",placeholder:V="",width:Z="",minWidth:ie="",maxWidth:se="",editable:he=!0,readOnly:Re=!1,indentWithTab:Ge=!0,basicSetup:Oe=!0,root:De,initialState:Ne}=n,[yt,ci]=(0,je.useState)(),[St,It]=(0,je.useState)(),[Vi,Cn]=(0,je.useState)(),dr=Y.tk.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),jr=Y.tk.theme({"&":{height:w,minHeight:T,maxHeight:P,width:Z,minWidth:ie,maxWidth:se}}),nr=Y.tk.updateListener.of(Xn=>{if(Xn.docChanged&&typeof i=="function"&&!Xn.transactions.some(rr=>rr.annotation(i0))){var pr=Xn.state.doc,kn=pr.toString();i(kn,Xn)}r&&r(Y0(Xn))}),qi=[nr,jr];switch(Ge&&qi.unshift(Y.$f.of([y])),Oe&&(typeof Oe=="boolean"?qi.unshift(jm()):qi.unshift(jm(Oe))),V&&qi.unshift((0,Y.W$)(V)),x){case"light":qi.push(dr);break;case"dark":qi.push(X0);break;case"none":break;default:qi.push(x);break}return he===!1&&qi.push(Y.tk.editable.of(!1)),Re&&qi.push(k.yy.readOnly.of(!0)),c&&typeof c=="function"&&qi.push(Y.tk.updateListener.of(c)),qi=qi.concat(u),(0,je.useEffect)(()=>{if(yt&&!Vi){var Xn={doc:e,selection:t,extensions:qi},pr=Ne?k.yy.fromJSON(Ne.json,Xn,Ne.fields):k.yy.create(Xn);if(Cn(pr),!St){var kn=new Y.tk({state:pr,parent:yt,root:De});It(kn),l&&l(kn,pr)}}return()=>{St&&(Cn(void 0),It(void 0))}},[yt,Vi]),(0,je.useEffect)(()=>ci(n.container),[n.container]),(0,je.useEffect)(()=>()=>{St&&(St.destroy(),It(void 0))},[St]),(0,je.useEffect)(()=>{m&&St&&St.focus()},[m,St]),(0,je.useEffect)(()=>{St&&St.dispatch({effects:k.Py.reconfigure.of(qi)})},[x,u,w,T,P,Z,ie,se,V,he,Re,Ge,Oe,i,c]),(0,je.useEffect)(()=>{if(e!==void 0){var Xn=St?St.state.doc.toString():"";St&&e!==Xn&&St.dispatch({changes:{from:0,to:Xn.length,insert:e||""},annotations:[i0.of(!0)]})}},[e,St]),{state:Vi,setState:Cn,view:St,setView:It,container:yt,setContainer:ci}}var Q0=Le(85893),ev=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],n0=(0,je.forwardRef)((n,e)=>{var{className:t,value:i="",selection:r,extensions:l=[],onChange:c,onStatistics:u,onCreateEditor:m,onUpdate:x,autoFocus:w,theme:T="light",height:P,minHeight:V,maxHeight:Z,width:ie,minWidth:se,maxWidth:he,basicSetup:Re,placeholder:Ge,indentWithTab:Oe,editable:De,readOnly:Ne,root:yt,initialState:ci}=n,St=(0,W.Z)(n,ev),It=(0,je.useRef)(null),{state:Vi,view:Cn,container:dr,setContainer:jr}=J0({container:It.current,root:yt,value:i,autoFocus:w,theme:T,height:P,minHeight:V,maxHeight:Z,width:ie,minWidth:se,maxWidth:he,basicSetup:Re,placeholder:Ge,indentWithTab:Oe,editable:De,readOnly:Ne,selection:r,onChange:c,onStatistics:u,onCreateEditor:m,onUpdate:x,extensions:l,initialState:ci});if((0,je.useImperativeHandle)(e,()=>({editor:It.current,state:Vi,view:Cn}),[It,dr,Vi,Cn]),typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var nr=typeof T=="string"?"cm-theme-"+T:"cm-theme";return(0,Q0.jsx)("div",(0,q.Z)({ref:It,className:""+nr+(t?" "+t:"")},St))});n0.displayName="CodeMirror";var tv=n0},96486:function(at,gi,Le){at=Le.nmd(at);var q;(function(){var W,je="4.17.21",k=200,Y="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",oi="Expected a function",Li="Invalid `variable` option passed into `_.template`",Be="__lodash_hash_undefined__",Ze=500,tt="__lodash_placeholder__",fi=1,Fe=2,Yt=4,ct=1,Ti=2,Se=1,nt=2,ei=4,Jt=8,jt=16,Bi=32,_i=64,kt=128,sn=256,An=512,mi=30,et="...",li=800,$e=16,re=1,Ue=2,Dt=3,qe=1/0,Ie=9007199254740991,Je=17976931348623157e292,rt=0/0,Ke=4294967295,_t=Ke-1,ai=Ke>>>1,Oi=[["ary",kt],["bind",Se],["bindKey",nt],["curry",Jt],["curryRight",jt],["flip",An],["partial",Bi],["partialRight",_i],["rearg",sn]],Qi="[object Arguments]",on="[object Array]",ln="[object AsyncFunction]",ki="[object Boolean]",Ve="[object Date]",sr="[object DOMException]",bn="[object Error]",zi="[object Function]",Yn="[object GeneratorFunction]",di="[object Map]",$t="[object Number]",Or="[object Null]",an="[object Object]",vi="[object Promise]",Ri="[object Proxy]",gr="[object RegExp]",hn="[object Set]",Rr="[object String]",Fr="[object Symbol]",Dr="[object Undefined]",Nn="[object WeakMap]",Gi="[object WeakSet]",Mn="[object ArrayBuffer]",qt="[object DataView]",Ct="[object Float32Array]",Hi="[object Float64Array]",mr="[object Int8Array]",Ee="[object Int16Array]",In="[object Int32Array]",Vn="[object Uint8Array]",qr="[object Uint8ClampedArray]",cn="[object Uint16Array]",dn="[object Uint32Array]",_n=/\b__p \+= '';/g,Di=/\b(__p \+=) '' \+/g,En=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tn=/&(?:amp|lt|gt|quot|#39);/g,zn=/[&<>"']/g,Pn=RegExp(Tn.source),yi=RegExp(zn.source),vr=/<%-([\s\S]+?)%>/g,or=/<%([\s\S]+?)%>/g,fe=/<%=([\s\S]+?)%>/g,bo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lr=/^\w*$/,wn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yr=/[\\^$.*+?()[\]{}|]/g,Kn=RegExp(yr.source),cs=/^\s+/,Jn=/\s/,xr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xi=/\{\n\/\* \[wrapped with (.+)\] \*/,Ki=/,? & /,wo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ls=/[()=,{}\[\]\/\s]/,fs=/\\(\\)?/g,io=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,no=/\w*$/,Vr=/^[-+]0x[0-9a-f]+$/i,Ln=/^0b[01]+$/i,F=/^\[object .+?Constructor\]$/,v=/^0o[0-7]+$/i,b=/^(?:0|[1-9]\d*)$/,A=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,O=/($^)/,L=/['\n\r\u2028\u2029\\]/g,N="\\ud800-\\udfff",K="\\u0300-\\u036f",j="\\ufe20-\\ufe2f",ce="\\u20d0-\\u20ff",ve=K+j+ce,ke="\\u2700-\\u27bf",He="a-z\\xdf-\\xf6\\xf8-\\xff",st="\\xac\\xb1\\xd7\\xf7",xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",br="\\u2000-\\u206f",fn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ar="A-Z\\xc0-\\xd6\\xd8-\\xde",Uo="\\ufe0e\\ufe0f",Tl=st+xi+br+fn,jo="['\u2019]",qo="["+N+"]",jl="["+Tl+"]",So="["+ve+"]",ql="\\d+",Bs="["+ke+"]",Gl="["+He+"]",Xl="[^"+N+Tl+ql+ke+He+ar+"]",Go="\\ud83c[\\udffb-\\udfff]",Yl="(?:"+So+"|"+Go+")",Jl="[^"+N+"]",Ol="(?:\\ud83c[\\udde6-\\uddff]){2}",Ql="[\\ud800-\\udbff][\\udc00-\\udfff]",ro="["+ar+"]",ea="\\u200d",ks="(?:"+Gl+"|"+Xl+")",Xo="(?:"+ro+"|"+Xl+")",Ns="(?:"+jo+"(?:d|ll|m|re|s|t|ve))?",us="(?:"+jo+"(?:D|LL|M|RE|S|T|VE))?",Co=Yl+"?",Gr="["+Uo+"]?",Ra="(?:"+ea+"(?:"+[Jl,Ol,Ql].join("|")+")"+Gr+Co+")*",ko="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Da="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Rl=Gr+Co+Ra,ta="(?:"+[Bs,Ol,Ql].join("|")+")"+Rl,H="(?:"+[Jl+So+"?",So,Ol,Ql,qo].join("|")+")",J=RegExp(jo,"g"),Q=RegExp(So,"g"),G=RegExp(Go+"(?="+Go+")|"+H+Rl,"g"),ee=RegExp([ro+"?"+Gl+"+"+Ns+"(?="+[jl,ro,"$"].join("|")+")",Xo+"+"+us+"(?="+[jl,ro+ks,"$"].join("|")+")",ro+"?"+ks+"+"+Ns,ro+"+"+us,Da,ko,ql,ta].join("|"),"g"),ae=RegExp("["+ea+N+ve+Uo+"]"),pe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ye=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ge=-1,de={};de[Ct]=de[Hi]=de[mr]=de[Ee]=de[In]=de[Vn]=de[qr]=de[cn]=de[dn]=!0,de[Qi]=de[on]=de[Mn]=de[ki]=de[qt]=de[Ve]=de[bn]=de[zi]=de[di]=de[$t]=de[an]=de[gr]=de[hn]=de[Rr]=de[Nn]=!1;var xe={};xe[Qi]=xe[on]=xe[Mn]=xe[qt]=xe[ki]=xe[Ve]=xe[Ct]=xe[Hi]=xe[mr]=xe[Ee]=xe[In]=xe[di]=xe[$t]=xe[an]=xe[gr]=xe[hn]=xe[Rr]=xe[Fr]=xe[Vn]=xe[qr]=xe[cn]=xe[dn]=!0,xe[bn]=xe[zi]=xe[Nn]=!1;var Pe={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},_e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ce={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vt=parseFloat,ot=parseInt,wt=typeof Le.g=="object"&&Le.g&&Le.g.Object===Object&&Le.g,gt=typeof self=="object"&&self&&self.Object===Object&&self,it=wt||gt||Function("return this")(),At=gi&&!gi.nodeType&&gi,xt=At&&!0&&at&&!at.nodeType&&at,Tt=xt&&xt.exports===At,pi=Tt&&wt.process,Bt=function(){try{var X=xt&&xt.require&&xt.require("util").types;return X||pi&&pi.binding&&pi.binding("util")}catch(ue){}}(),Ht=Bt&&Bt.isArrayBuffer,bi=Bt&&Bt.isDate,ut=Bt&&Bt.isMap,lt=Bt&&Bt.isRegExp,ze=Bt&&Bt.isSet,bt=Bt&&Bt.isTypedArray;function Ot(X,ue,oe){switch(oe.length){case 0:return X.call(ue);case 1:return X.call(ue,oe[0]);case 2:return X.call(ue,oe[0],oe[1]);case 3:return X.call(ue,oe[0],oe[1],oe[2])}return X.apply(ue,oe)}function Et(X,ue,oe,Xe){for(var ft=-1,Zt=X==null?0:X.length;++ft<Zt;){var mn=X[ft];ue(Xe,mn,oe(mn),X)}return Xe}function ht(X,ue){for(var oe=-1,Xe=X==null?0:X.length;++oe<Xe&&ue(X[oe],oe,X)!==!1;);return X}function Gt(X,ue){for(var oe=X==null?0:X.length;oe--&&ue(X[oe],oe,X)!==!1;);return X}function $i(X,ue){for(var oe=-1,Xe=X==null?0:X.length;++oe<Xe;)if(!ue(X[oe],oe,X))return!1;return!0}function Zi(X,ue){for(var oe=-1,Xe=X==null?0:X.length,ft=0,Zt=[];++oe<Xe;){var mn=X[oe];ue(mn,oe,X)&&(Zt[ft++]=mn)}return Zt}function Wi(X,ue){var oe=X==null?0:X.length;return!!oe&&nn(X,ue,0)>-1}function Qn(X,ue,oe){for(var Xe=-1,ft=X==null?0:X.length;++Xe<ft;)if(oe(ue,X[Xe]))return!0;return!1}function Lt(X,ue){for(var oe=-1,Xe=X==null?0:X.length,ft=Array(Xe);++oe<Xe;)ft[oe]=ue(X[oe],oe,X);return ft}function en(X,ue){for(var oe=-1,Xe=ue.length,ft=X.length;++oe<Xe;)X[ft+oe]=ue[oe];return X}function Pt(X,ue,oe,Xe){var ft=-1,Zt=X==null?0:X.length;for(Xe&&Zt&&(oe=X[++ft]);++ft<Zt;)oe=ue(oe,X[ft],ft,X);return oe}function Vt(X,ue,oe,Xe){var ft=X==null?0:X.length;for(Xe&&ft&&(oe=X[--ft]);ft--;)oe=ue(oe,X[ft],ft,X);return oe}function wi(X,ue){for(var oe=-1,Xe=X==null?0:X.length;++oe<Xe;)if(ue(X[oe],oe,X))return!0;return!1}var Xr=As("length");function tn(X){return X.split("")}function Ui(X){return X.match(wo)||[]}function wr(X,ue,oe){var Xe;return oe(X,function(ft,Zt,mn){if(ue(ft,Zt,mn))return Xe=Zt,!1}),Xe}function Yi(X,ue,oe,Xe){for(var ft=X.length,Zt=oe+(Xe?1:-1);Xe?Zt--:++Zt<ft;)if(ue(X[Zt],Zt,X))return Zt;return-1}function nn(X,ue,oe){return ue===ue?ra(X,ue,oe):Yi(X,Er,oe)}function $n(X,ue,oe,Xe){for(var ft=oe-1,Zt=X.length;++ft<Zt;)if(Xe(X[ft],ue))return ft;return-1}function Er(X){return X!==X}function Is(X,ue){var oe=X==null?0:X.length;return oe?Pr(X,ue)/oe:rt}function As(X){return function(ue){return ue==null?W:ue[X]}}function Sr(X){return function(ue){return X==null?W:X[ue]}}function Zn(X,ue,oe,Xe,ft){return ft(X,function(Zt,mn,ti){oe=Xe?(Xe=!1,Zt):ue(oe,Zt,mn,ti)}),oe}function Ai(X,ue){var oe=X.length;for(X.sort(ue);oe--;)X[oe]=X[oe].value;return X}function Pr(X,ue){for(var oe,Xe=-1,ft=X.length;++Xe<ft;){var Zt=ue(X[Xe]);Zt!==W&&(oe=oe===W?Zt:oe+Zt)}return oe}function pn(X,ue){for(var oe=-1,Xe=Array(X);++oe<X;)Xe[oe]=ue(oe);return Xe}function Yo(X,ue){return Lt(ue,function(oe){return[oe,X[oe]]})}function Hn(X){return X&&X.slice(0,Ts(X)+1).replace(cs,"")}function Ni(X){return function(ue){return X(ue)}}function On(X,ue){return Lt(ue,function(oe){return X[oe]})}function _s(X,ue){return X.has(ue)}function Ao(X,ue){for(var oe=-1,Xe=X.length;++oe<Xe&&nn(ue,X[oe],0)>-1;);return oe}function so(X,ue){for(var oe=X.length;oe--&&nn(ue,X[oe],0)>-1;);return oe}function Jo(X,ue){for(var oe=X.length,Xe=0;oe--;)X[oe]===ue&&++Xe;return Xe}var ia=Sr(Pe),oo=Sr(_e);function Ea(X){return"\\"+Qe[X]}function na(X,ue){return X==null?W:X[ue]}function Hs(X){return ae.test(X)}function Ms(X){return pe.test(X)}function Mo(X){for(var ue,oe=[];!(ue=X.next()).done;)oe.push(ue.value);return oe}function Qo(X){var ue=-1,oe=Array(X.size);return X.forEach(function(Xe,ft){oe[++ue]=[ft,Xe]}),oe}function Dl(X,ue){return function(oe){return X(ue(oe))}}function ds(X,ue){for(var oe=-1,Xe=X.length,ft=0,Zt=[];++oe<Xe;){var mn=X[oe];(mn===ue||mn===tt)&&(X[oe]=tt,Zt[ft++]=oe)}return Zt}function el(X){var ue=-1,oe=Array(X.size);return X.forEach(function(Xe){oe[++ue]=Xe}),oe}function tl(X){var ue=-1,oe=Array(X.size);return X.forEach(function(Xe){oe[++ue]=[Xe,Xe]}),oe}function ra(X,ue,oe){for(var Xe=oe-1,ft=X.length;++Xe<ft;)if(X[Xe]===ue)return Xe;return-1}function lo(X,ue,oe){for(var Xe=oe+1;Xe--;)if(X[Xe]===ue)return Xe;return Xe}function Wn(X){return Hs(X)?To(X):Xr(X)}function gn(X){return Hs(X)?Lr(X):tn(X)}function Ts(X){for(var ue=X.length;ue--&&Jn.test(X.charAt(ue)););return ue}var Mi=Sr(Ce);function To(X){for(var ue=G.lastIndex=0;G.test(X);)++ue;return ue}function Lr(X){return X.match(G)||[]}function Oo(X){return X.match(ee)||[]}var il=function X(ue){ue=ue==null?it:nl.defaults(it.Object(),ue,nl.pick(it,ye));var oe=ue.Array,Xe=ue.Date,ft=ue.Error,Zt=ue.Function,mn=ue.Math,ti=ue.Object,rl=ue.RegExp,Cr=ue.String,kr=ue.TypeError,Yr=oe.prototype,Ro=Zt.prototype,hr=ti.prototype,ao=ue["__core-js_shared__"],sl=Ro.toString,zt=hr.hasOwnProperty,Pa=0,zr=function(){var o=/[^.]+$/.exec(ao&&ao.keys&&ao.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Fn=hr.toString,cr=sl.call(ti),ps=it._,Do=rl("^"+sl.call(zt).replace(yr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vn=Tt?ue.Buffer:W,gs=ue.Symbol,ho=ue.Uint8Array,La=vn?vn.allocUnsafe:W,Eo=Dl(ti.getPrototypeOf,ti),Os=ti.create,Po=hr.propertyIsEnumerable,Jr=Yr.splice,sa=gs?gs.isConcatSpreadable:W,Lo=gs?gs.iterator:W,Qr=gs?gs.toStringTag:W,co=function(){try{var o=vl(ti,"defineProperty");return o({},"",{}),o}catch(h){}}(),Bo=ue.clearTimeout!==it.clearTimeout&&ue.clearTimeout,El=Xe&&Xe.now!==it.Date.now&&Xe.now,oa=ue.setTimeout!==it.setTimeout&&ue.setTimeout,No=mn.ceil,Kr=mn.floor,ol=ti.getOwnPropertySymbols,ll=vn?vn.isBuffer:W,Ut=ue.isFinite,ii=Yr.join,Un=Dl(ti.keys,ti),ni=mn.max,Ii=mn.min,Ws=Xe.now,ms=ue.parseInt,jn=mn.random,al=Yr.reverse,Io=vl(ue,"DataView"),Pl=vl(ue,"Map"),Ba=vl(ue,"Promise"),hl=vl(ue,"Set"),Ll=vl(ue,"WeakMap"),fo=vl(ti,"create"),la=Ll&&new Ll,Bl={},Br=zo(Io),aa=zo(Pl),Ph=zo(Ba),Lh=zo(hl),Vf=zo(Ll),Na=gs?gs.prototype:W,vs=Na?Na.valueOf:W,Ia=Na?Na.toString:W;function B(o){if(Dn(o)&&!Ft(o)&&!(o instanceof ri)){if(o instanceof Nr)return o;if(zt.call(o,"__wrapped__"))return lh(o)}return new Nr(o)}var Nl=function(){function o(){}return function(h){if(!Rn(h))return{};if(Os)return Os(h);o.prototype=h;var g=new o;return o.prototype=W,g}}();function cl(){}function Nr(o,h){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=W}B.templateSettings={escape:vr,evaluate:or,interpolate:fe,variable:"",imports:{_:B}},B.prototype=cl.prototype,B.prototype.constructor=B,Nr.prototype=Nl(cl.prototype),Nr.prototype.constructor=Nr;function ri(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ke,this.__views__=[]}function zf(){var o=new ri(this.__wrapped__);return o.__actions__=Ar(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Ar(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Ar(this.__views__),o}function Oc(){if(this.__filtered__){var o=new ri(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function _a(){var o=this.__wrapped__.value(),h=this.__dir__,g=Ft(o),C=h<0,R=g?o.length:0,_=su(0,R,this.__views__),z=_.start,U=_.end,te=U-z,be=C?U:z-1,we=this.__iteratees__,Me=we.length,Ye=0,mt=Ii(te,this.__takeCount__);if(!g||!C&&R==te&&mt==te)return Xa(o,this.__actions__);var pt=[];e:for(;te--&&Ye<mt;){be+=h;for(var Nt=-1,Rt=o[be];++Nt<Me;){var hi=we[Nt],ui=hi.iteratee,ji=hi.type,Wr=ui(Rt);if(ji==Ue)Rt=Wr;else if(!Wr){if(ji==re)continue e;break e}}pt[Ye++]=Rt}return pt}ri.prototype=Nl(cl.prototype),ri.prototype.constructor=ri;function es(o){var h=-1,g=o==null?0:o.length;for(this.clear();++h<g;){var C=o[h];this.set(C[0],C[1])}}function ha(){this.__data__=fo?fo(null):{},this.size=0}function Bh(o){var h=this.has(o)&&delete this.__data__[o];return this.size-=h?1:0,h}function Nh(o){var h=this.__data__;if(fo){var g=h[o];return g===Be?W:g}return zt.call(h,o)?h[o]:W}function Ha(o){var h=this.__data__;return fo?h[o]!==W:zt.call(h,o)}function Ih(o,h){var g=this.__data__;return this.size+=this.has(o)?0:1,g[o]=fo&&h===W?Be:h,this}es.prototype.clear=ha,es.prototype.delete=Bh,es.prototype.get=Nh,es.prototype.has=Ha,es.prototype.set=Ih;function Fs(o){var h=-1,g=o==null?0:o.length;for(this.clear();++h<g;){var C=o[h];this.set(C[0],C[1])}}function Kf(){this.__data__=[],this.size=0}function $f(o){var h=this.__data__,g=pa(h,o);if(g<0)return!1;var C=h.length-1;return g==C?h.pop():Jr.call(h,g,1),--this.size,!0}function Rc(o){var h=this.__data__,g=pa(h,o);return g<0?W:h[g][1]}function Zf(o){return pa(this.__data__,o)>-1}function Uf(o,h){var g=this.__data__,C=pa(g,o);return C<0?(++this.size,g.push([o,h])):g[C][1]=h,this}Fs.prototype.clear=Kf,Fs.prototype.delete=$f,Fs.prototype.get=Rc,Fs.prototype.has=Zf,Fs.prototype.set=Uf;function ts(o){var h=-1,g=o==null?0:o.length;for(this.clear();++h<g;){var C=o[h];this.set(C[0],C[1])}}function Dc(){this.size=0,this.__data__={hash:new es,map:new(Pl||Fs),string:new es}}function _h(o){var h=Ys(this,o).delete(o);return this.size-=h?1:0,h}function Wa(o){return Ys(this,o).get(o)}function ca(o){return Ys(this,o).has(o)}function Hh(o,h){var g=Ys(this,o),C=g.size;return g.set(o,h),this.size+=g.size==C?0:1,this}ts.prototype.clear=Dc,ts.prototype.delete=_h,ts.prototype.get=Wa,ts.prototype.has=ca,ts.prototype.set=Hh;function Vs(o){var h=-1,g=o==null?0:o.length;for(this.__data__=new ts;++h<g;)this.add(o[h])}function zs(o){return this.__data__.set(o,Be),this}function Ks(o){return this.__data__.has(o)}Vs.prototype.add=Vs.prototype.push=zs,Vs.prototype.has=Ks;function Ir(o){var h=this.__data__=new Fs(o);this.size=h.size}function fl(){this.__data__=new Fs,this.size=0}function Fa(o){var h=this.__data__,g=h.delete(o);return this.size=h.size,g}function fa(o){return this.__data__.get(o)}function Va(o){return this.__data__.has(o)}function Wh(o,h){var g=this.__data__;if(g instanceof Fs){var C=g.__data__;if(!Pl||C.length<k-1)return C.push([o,h]),this.size=++g.size,this;g=this.__data__=new ts(C)}return g.set(o,h),this.size=g.size,this}Ir.prototype.clear=fl,Ir.prototype.delete=Fa,Ir.prototype.get=fa,Ir.prototype.has=Va,Ir.prototype.set=Wh;function za(o,h){var g=Ft(o),C=!g&&Sl(o),R=!g&&!C&&Cl(o),_=!g&&!C&&!R&&Ss(o),z=g||C||R||_,U=z?pn(o.length,Cr):[],te=U.length;for(var be in o)(h||zt.call(o,be))&&!(z&&(be=="length"||R&&(be=="offset"||be=="parent")||_&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||Pi(be,te)))&&U.push(be);return U}function Ka(o){var h=o.length;return h?o[ya(0,h-1)]:W}function jf(o,h){return hc(Ar(o),Zs(h,0,o.length))}function Fh(o){return hc(Ar(o))}function ua(o,h,g){(g!==W&&!ws(o[h],g)||g===W&&!(h in o))&&$s(o,h,g)}function da(o,h,g){var C=o[h];(!(zt.call(o,h)&&ws(C,g))||g===W&&!(h in o))&&$s(o,h,g)}function pa(o,h){for(var g=o.length;g--;)if(ws(o[g][0],h))return g;return-1}function ul(o,h,g,C){return Us(o,function(R,_,z){h(C,R,g(R),z)}),C}function _o(o,h){return o&&rs(h,ir(h),o)}function ga(o,h){return o&&rs(h,as(h),o)}function $s(o,h,g){h=="__proto__"&&co?co(o,h,{configurable:!0,enumerable:!0,value:g,writable:!0}):o[h]=g}function $a(o,h){for(var g=-1,C=h.length,R=oe(C),_=o==null;++g<C;)R[g]=_?W:Mf(o,h[g]);return R}function Zs(o,h,g){return o===o&&(g!==W&&(o=o<=g?o:g),h!==W&&(o=o>=h?o:h)),o}function is(o,h,g,C,R,_){var z,U=h&fi,te=h&Fe,be=h&Yt;if(g&&(z=R?g(o,C,R,_):g(o)),z!==W)return z;if(!Rn(o))return o;var we=Ft(o);if(we){if(z=rp(o),!U)return Ar(o,z)}else{var Me=ur(o),Ye=Me==zi||Me==Yn;if(Cl(o))return Ja(o,U);if(Me==an||Me==Qi||Ye&&!R){if(z=te||Ye?{}:Gn(o),!U)return te?Fo(o,ga(z,o)):Yf(o,_o(z,o))}else{if(!xe[Me])return R?o:{};z=yl(o,Me,U)}}_||(_=new Ir);var mt=_.get(o);if(mt)return mt;_.set(o,z),wf(o)?o.forEach(function(Rt){z.add(is(Rt,h,g,Rt,o,_))}):nd(o)&&o.forEach(function(Rt,hi){z.set(hi,is(Rt,h,g,hi,o,_))});var pt=be?te?dt:tc:te?as:ir,Nt=we?W:pt(o);return ht(Nt||o,function(Rt,hi){Nt&&(hi=Rt,Rt=o[hi]),da(z,hi,is(Rt,h,g,hi,o,_))}),z}function Ec(o){var h=ir(o);return function(g){return Vh(g,o,h)}}function Vh(o,h,g){var C=g.length;if(o==null)return!C;for(o=ti(o);C--;){var R=g[C],_=h[R],z=o[R];if(z===W&&!(R in o)||!_(z))return!1}return!0}function zh(o,h,g){if(typeof o!="function")throw new kr(oi);return bl(function(){o.apply(W,g)},h)}function Il(o,h,g,C){var R=-1,_=Wi,z=!0,U=o.length,te=[],be=h.length;if(!U)return te;g&&(h=Lt(h,Ni(g))),C?(_=Qn,z=!1):h.length>=k&&(_=_s,z=!1,h=new Vs(h));e:for(;++R<U;){var we=o[R],Me=g==null?we:g(we);if(we=C||we!==0?we:0,z&&Me===Me){for(var Ye=be;Ye--;)if(h[Ye]===Me)continue e;te.push(we)}else _(h,Me,C)||te.push(we)}return te}var Us=Jf(f),Kh=Jf(p,!0);function Pc(o,h){var g=!0;return Us(o,function(C,R,_){return g=!!h(C,R,_),g}),g}function dl(o,h,g){for(var C=-1,R=o.length;++C<R;){var _=o[C],z=h(_);if(z!=null&&(U===W?z===z&&!Ps(z):g(z,U)))var U=z,te=_}return te}function qf(o,h,g,C){var R=o.length;for(g=Xt(g),g<0&&(g=-g>R?0:R+g),C=C===W||C>R?R:Xt(C),C<0&&(C+=R),C=g>C?0:hd(C);g<C;)o[g++]=h;return o}function Za(o,h){var g=[];return Us(o,function(C,R,_){h(C,R,_)&&g.push(C)}),g}function d(o,h,g,C,R){var _=-1,z=o.length;for(g||(g=$r),R||(R=[]);++_<z;){var U=o[_];h>0&&g(U)?h>1?d(U,h-1,g,C,R):en(R,U):C||(R[R.length]=U)}return R}var s=Qf(),a=Qf(!0);function f(o,h){return o&&s(o,h,ir)}function p(o,h){return o&&a(o,h,ir)}function y(o,h){return Zi(h,function(g){return Ko(o[g])})}function S(o,h){h=gl(h,o);for(var g=0,C=h.length;o!=null&&g<C;)o=o[un(h[g++])];return g&&g==C?o:W}function M(o,h,g){var C=h(o);return Ft(o)?C:en(C,g(o))}function D(o){return o==null?o===W?Dr:Or:Qr&&Qr in ti(o)?nu(o):hu(o)}function E(o,h){return o>h}function I(o,h){return o!=null&&zt.call(o,h)}function $(o,h){return o!=null&&h in ti(o)}function ne(o,h,g){return o>=Ii(h,g)&&o<ni(h,g)}function le(o,h,g){for(var C=g?Qn:Wi,R=o[0].length,_=o.length,z=_,U=oe(_),te=1/0,be=[];z--;){var we=o[z];z&&h&&(we=Lt(we,Ni(h))),te=Ii(we.length,te),U[z]=!g&&(h||R>=120&&we.length>=120)?new Vs(z&&we):W}we=o[0];var Me=-1,Ye=U[0];e:for(;++Me<R&&be.length<te;){var mt=we[Me],pt=h?h(mt):mt;if(mt=g||mt!==0?mt:0,!(Ye?_s(Ye,pt):C(be,pt,g))){for(z=_;--z;){var Nt=U[z];if(!(Nt?_s(Nt,pt):C(o[z],pt,g)))continue e}Ye&&Ye.push(pt),be.push(mt)}}return be}function me(o,h,g,C){return f(o,function(R,_,z){h(C,g(R),_,z)}),C}function Te(o,h,g){h=gl(h,o),o=Xc(o,h);var C=o==null?o:o[un(Es(h))];return C==null?W:Ot(C,o,g)}function Ae(o){return Dn(o)&&D(o)==Qi}function We(o){return Dn(o)&&D(o)==Mn}function Wt(o){return Dn(o)&&D(o)==Ve}function Kt(o,h,g,C,R){return o===h?!0:o==null||h==null||!Dn(o)&&!Dn(h)?o!==o&&h!==h:Qt(o,h,g,C,Kt,R)}function Qt(o,h,g,C,R,_){var z=Ft(o),U=Ft(h),te=z?on:ur(o),be=U?on:ur(h);te=te==Qi?an:te,be=be==Qi?an:be;var we=te==an,Me=be==an,Ye=te==be;if(Ye&&Cl(o)){if(!Cl(h))return!1;z=!0,we=!1}if(Ye&&!we)return _||(_=new Ir),z||Ss(o)?$c(o,h,g,C,R,_):Zc(o,h,te,g,C,R,_);if(!(g&ct)){var mt=we&&zt.call(o,"__wrapped__"),pt=Me&&zt.call(h,"__wrapped__");if(mt||pt){var Nt=mt?o.value():o,Rt=pt?h.value():h;return _||(_=new Ir),R(Nt,Rt,g,C,_)}}return Ye?(_||(_=new Ir),iu(o,h,g,C,R,_)):!1}function Ei(o){return Dn(o)&&ur(o)==di}function Fi(o,h,g,C){var R=g.length,_=R,z=!C;if(o==null)return!_;for(o=ti(o);R--;){var U=g[R];if(z&&U[2]?U[1]!==o[U[0]]:!(U[0]in o))return!1}for(;++R<_;){U=g[R];var te=U[0],be=o[te],we=U[1];if(z&&U[2]){if(be===W&&!(te in o))return!1}else{var Me=new Ir;if(C)var Ye=C(be,we,te,o,h,Me);if(!(Ye===W?Kt(we,be,ct|Ti,C,Me):Ye))return!1}}return!0}function er(o){if(!Rn(o)||sp(o))return!1;var h=Ko(o)?Do:F;return h.test(zo(o))}function js(o){return Dn(o)&&D(o)==gr}function uo(o){return Dn(o)&&ur(o)==hn}function ma(o){return Dn(o)&&Aa(o.length)&&!!de[D(o)]}function Ua(o){return typeof o=="function"?o:o==null?Ur:typeof o=="object"?Ft(o)?po(o[0],o[1]):Wo(o):Nf(o)}function Ho(o){if(!Vo(o))return Un(o);var h=[];for(var g in ti(o))zt.call(o,g)&&g!="constructor"&&h.push(g);return h}function va(o){if(!Rn(o))return au(o);var h=Vo(o),g=[];for(var C in o)C=="constructor"&&(h||!zt.call(o,C))||g.push(C);return g}function qs(o,h){return o<h}function Gs(o,h){var g=-1,C=ls(o)?oe(o.length):[];return Us(o,function(R,_,z){C[++g]=h(R,_,z)}),C}function Wo(o){var h=ml(o);return h.length==1&&h[0][2]?Gc(h[0][0],h[0][1]):function(g){return g===o||Fi(g,o,h)}}function po(o,h){return Ul(o)&&sh(h)?Gc(un(o),h):function(g){var C=Mf(g,o);return C===W&&C===h?wh(g,o):Kt(h,C,ct|Ti)}}function go(o,h,g,C,R){o!==h&&s(h,function(_,z){if(R||(R=new Ir),Rn(_))_r(o,h,z,g,go,C,R);else{var U=C?C(lc(o,z),_,z+"",o,h,R):W;U===W&&(U=_),ua(o,z,U)}},as)}function _r(o,h,g,C,R,_,z){var U=lc(o,g),te=lc(h,g),be=z.get(te);if(be){ua(o,g,be);return}var we=_?_(U,te,g+"",o,h,z):W,Me=we===W;if(Me){var Ye=Ft(te),mt=!Ye&&Cl(te),pt=!Ye&&!mt&&Ss(te);we=te,Ye||mt||pt?Ft(U)?we=U:xn(U)?we=Ar(U):mt?(Me=!1,we=Ja(te,!0)):pt?(Me=!1,we=eh(te,!0)):we=[]:kl(te)||Sl(te)?(we=U,Sl(U)?we=Cf(U):(!Rn(U)||Ko(U))&&(we=Gn(te))):Me=!1}Me&&(z.set(te,we),R(we,te,C,_,z),z.delete(te)),ua(o,g,we)}function mo(o,h){var g=o.length;if(g)return h+=h<0?g:0,Pi(h,g)?o[h]:W}function Lc(o,h,g){h.length?h=Lt(h,function(_){return Ft(_)?function(z){return S(z,_.length===1?_[0]:_)}:_}):h=[Ur];var C=-1;h=Lt(h,Ni(Mt()));var R=Gs(o,function(_,z,U){var te=Lt(h,function(be){return be(_)});return{criteria:te,index:++C,value:_}});return Ai(R,function(_,z){return ip(_,z,g)})}function Gf(o,h){return _l(o,h,function(g,C){return wh(o,C)})}function _l(o,h,g){for(var C=-1,R=h.length,_={};++C<R;){var z=h[C],U=S(o,z);g(U,z)&&ns(_,gl(z,o),U)}return _}function Yd(o){return function(h){return S(h,o)}}function Bc(o,h,g,C){var R=C?$n:nn,_=-1,z=h.length,U=o;for(o===h&&(h=Ar(h)),g&&(U=Lt(o,Ni(g)));++_<z;)for(var te=0,be=h[_],we=g?g(be):be;(te=R(U,we,te,C))>-1;)U!==o&&Jr.call(U,te,1),Jr.call(o,te,1);return o}function Hl(o,h){for(var g=o?h.length:0,C=g-1;g--;){var R=h[g];if(g==C||R!==_){var _=R;Pi(R)?Jr.call(o,R,1):Uh(o,R)}}return o}function ya(o,h){return o+Kr(jn()*(h-o+1))}function $h(o,h,g,C){for(var R=-1,_=ni(No((h-o)/(g||1)),0),z=oe(_);_--;)z[C?_:++R]=o,o+=g;return z}function Nc(o,h){var g="";if(!o||h<1||h>Ie)return g;do h%2&&(g+=o),h=Kr(h/2),h&&(o+=o);while(h);return g}function si(o,h){return ac(oc(o,h,Ur),o+"")}function ja(o){return Ka(Ma(o))}function Ic(o,h){var g=Ma(o);return hc(g,Zs(h,0,g.length))}function ns(o,h,g,C){if(!Rn(o))return o;h=gl(h,o);for(var R=-1,_=h.length,z=_-1,U=o;U!=null&&++R<_;){var te=un(h[R]),be=g;if(te==="__proto__"||te==="constructor"||te==="prototype")return o;if(R!=z){var we=U[te];be=C?C(we,te,U):W,be===W&&(be=Rn(we)?we:Pi(h[R+1])?[]:{})}da(U,te,be),U=U[te]}return o}var Jd=la?function(o,h){return la.set(o,h),o}:Ur,Xg=co?function(o,h){return co(o,"toString",{configurable:!0,enumerable:!1,value:Pf(h),writable:!0})}:Ur;function _c(o){return hc(Ma(o))}function Rs(o,h,g){var C=-1,R=o.length;h<0&&(h=-h>R?0:R+h),g=g>R?R:g,g<0&&(g+=R),R=h>g?0:g-h>>>0,h>>>=0;for(var _=oe(R);++C<R;)_[C]=o[C+h];return _}function Qd(o,h){var g;return Us(o,function(C,R,_){return g=h(C,R,_),!g}),!!g}function Zh(o,h,g){var C=0,R=o==null?C:o.length;if(typeof h=="number"&&h===h&&R<=ai){for(;C<R;){var _=C+R>>>1,z=o[_];z!==null&&!Ps(z)&&(g?z<=h:z<h)?C=_+1:R=_}return R}return Wl(o,h,Ur,g)}function Wl(o,h,g,C){var R=0,_=o==null?0:o.length;if(_===0)return 0;h=g(h);for(var z=h!==h,U=h===null,te=Ps(h),be=h===W;R<_;){var we=Kr((R+_)/2),Me=g(o[we]),Ye=Me!==W,mt=Me===null,pt=Me===Me,Nt=Ps(Me);if(z)var Rt=C||pt;else be?Rt=pt&&(C||Ye):U?Rt=pt&&Ye&&(C||!mt):te?Rt=pt&&Ye&&!mt&&(C||!Nt):mt||Nt?Rt=!1:Rt=C?Me<=h:Me<h;Rt?R=we+1:_=we}return Ii(_,_t)}function qa(o,h){for(var g=-1,C=o.length,R=0,_=[];++g<C;){var z=o[g],U=h?h(z):z;if(!g||!ws(U,te)){var te=U;_[R++]=z===0?0:z}}return _}function Ga(o){return typeof o=="number"?o:Ps(o)?rt:+o}function ys(o){if(typeof o=="string")return o;if(Ft(o))return Lt(o,ys)+"";if(Ps(o))return Ia?Ia.call(o):"";var h=o+"";return h=="0"&&1/o==-qe?"-0":h}function pl(o,h,g){var C=-1,R=Wi,_=o.length,z=!0,U=[],te=U;if(g)z=!1,R=Qn;else if(_>=k){var be=h?null:xs(o);if(be)return el(be);z=!1,R=_s,te=new Vs}else te=h?[]:U;e:for(;++C<_;){var we=o[C],Me=h?h(we):we;if(we=g||we!==0?we:0,z&&Me===Me){for(var Ye=te.length;Ye--;)if(te[Ye]===Me)continue e;h&&te.push(Me),U.push(we)}else R(te,Me,g)||(te!==U&&te.push(Me),U.push(we))}return U}function Uh(o,h){return h=gl(h,o),o=Xc(o,h),o==null||delete o[un(Es(h))]}function Xf(o,h,g,C){return ns(o,h,g(S(o,h)),C)}function xa(o,h,g,C){for(var R=o.length,_=C?R:-1;(C?_--:++_<R)&&h(o[_],_,o););return g?Rs(o,C?0:_,C?_+1:R):Rs(o,C?_+1:0,C?R:_)}function Xa(o,h){var g=o;return g instanceof ri&&(g=g.value()),Pt(h,function(C,R){return R.func.apply(R.thisArg,en([C],R.args))},g)}function jh(o,h,g){var C=o.length;if(C<2)return C?pl(o[0]):[];for(var R=-1,_=oe(C);++R<C;)for(var z=o[R],U=-1;++U<C;)U!=R&&(_[R]=Il(_[R]||z,o[U],h,g));return pl(d(_,1),h,g)}function Hc(o,h,g){for(var C=-1,R=o.length,_=h.length,z={};++C<R;){var U=C<_?h[C]:W;g(z,o[C],U)}return z}function qh(o){return xn(o)?o:[]}function Gh(o){return typeof o=="function"?o:Ur}function gl(o,h){return Ft(o)?o:Ul(o,h)?[o]:Ca(Ci(o))}var ep=si;function qn(o,h,g){var C=o.length;return g=g===W?C:g,!h&&g>=C?o:Rs(o,h,g)}var Ya=Bo||function(o){return it.clearTimeout(o)};function Ja(o,h){if(h)return o.slice();var g=o.length,C=La?La(g):new o.constructor(g);return o.copy(C),C}function Qa(o){var h=new o.constructor(o.byteLength);return new ho(h).set(new ho(o)),h}function tp(o,h){var g=h?Qa(o.buffer):o.buffer;return new o.constructor(g,o.byteOffset,o.byteLength)}function Wc(o){var h=new o.constructor(o.source,no.exec(o));return h.lastIndex=o.lastIndex,h}function Fc(o){return vs?ti(vs.call(o)):{}}function eh(o,h){var g=h?Qa(o.buffer):o.buffer;return new o.constructor(g,o.byteOffset,o.length)}function Xh(o,h){if(o!==h){var g=o!==W,C=o===null,R=o===o,_=Ps(o),z=h!==W,U=h===null,te=h===h,be=Ps(h);if(!U&&!be&&!_&&o>h||_&&z&&te&&!U&&!be||C&&z&&te||!g&&te||!R)return 1;if(!C&&!_&&!be&&o<h||be&&g&&R&&!C&&!_||U&&g&&R||!z&&R||!te)return-1}return 0}function ip(o,h,g){for(var C=-1,R=o.criteria,_=h.criteria,z=R.length,U=g.length;++C<z;){var te=Xh(R[C],_[C]);if(te){if(C>=U)return te;var be=g[C];return te*(be=="desc"?-1:1)}}return o.index-h.index}function th(o,h,g,C){for(var R=-1,_=o.length,z=g.length,U=-1,te=h.length,be=ni(_-z,0),we=oe(te+be),Me=!C;++U<te;)we[U]=h[U];for(;++R<z;)(Me||R<_)&&(we[g[R]]=o[R]);for(;be--;)we[U++]=o[R++];return we}function Fl(o,h,g,C){for(var R=-1,_=o.length,z=-1,U=g.length,te=-1,be=h.length,we=ni(_-U,0),Me=oe(we+be),Ye=!C;++R<we;)Me[R]=o[R];for(var mt=R;++te<be;)Me[mt+te]=h[te];for(;++z<U;)(Ye||R<_)&&(Me[mt+g[z]]=o[R++]);return Me}function Ar(o,h){var g=-1,C=o.length;for(h||(h=oe(C));++g<C;)h[g]=o[g];return h}function rs(o,h,g,C){var R=!g;g||(g={});for(var _=-1,z=h.length;++_<z;){var U=h[_],te=C?C(g[U],o[U],U,g,o):W;te===W&&(te=o[U]),R?$s(g,U,te):da(g,U,te)}return g}function Yf(o,h){return rs(o,ic(o),h)}function Fo(o,h){return rs(o,ru(o),h)}function Vl(o,h){return function(g,C){var R=Ft(g)?Et:ul,_=h?h():{};return R(g,o,Mt(C,2),_)}}function ba(o){return si(function(h,g){var C=-1,R=g.length,_=R>1?g[R-1]:W,z=R>2?g[2]:W;for(_=o.length>3&&typeof _=="function"?(R--,_):W,z&&tr(g[0],g[1],z)&&(_=R<3?W:_,R=1),h=ti(h);++C<R;){var U=g[C];U&&o(h,U,C,_)}return h})}function Jf(o,h){return function(g,C){if(g==null)return g;if(!ls(g))return o(g,C);for(var R=g.length,_=h?R:-1,z=ti(g);(h?_--:++_<R)&&C(z[_],_,z)!==!1;);return g}}function Qf(o){return function(h,g,C){for(var R=-1,_=ti(h),z=C(h),U=z.length;U--;){var te=z[o?U:++R];if(g(_[te],te,_)===!1)break}return h}}function np(o,h,g){var C=h&Se,R=wa(o);function _(){var z=this&&this!==it&&this instanceof _?R:o;return z.apply(C?g:this,arguments)}return _}function zl(o){return function(h){h=Ci(h);var g=Hs(h)?gn(h):W,C=g?g[0]:h.charAt(0),R=g?qn(g,1).join(""):h.slice(1);return C[o]()+R}}function Kl(o){return function(h){return Pt(Td(Ch(h).replace(J,"")),o,"")}}function wa(o){return function(){var h=arguments;switch(h.length){case 0:return new o;case 1:return new o(h[0]);case 2:return new o(h[0],h[1]);case 3:return new o(h[0],h[1],h[2]);case 4:return new o(h[0],h[1],h[2],h[3]);case 5:return new o(h[0],h[1],h[2],h[3],h[4]);case 6:return new o(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new o(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var g=Nl(o.prototype),C=o.apply(g,h);return Rn(C)?C:g}}function $l(o,h,g){var C=wa(o);function R(){for(var _=arguments.length,z=oe(_),U=_,te=ss(R);U--;)z[U]=arguments[U];var be=_<3&&z[0]!==te&&z[_-1]!==te?[]:ds(z,te);if(_-=be.length,_<g)return zc(o,h,ih,R.placeholder,W,z,be,W,W,g-_);var we=this&&this!==it&&this instanceof R?C:o;return Ot(we,this,z)}return R}function Zl(o){return function(h,g,C){var R=ti(h);if(!ls(h)){var _=Mt(g,3);h=ir(h),g=function(U){return _(R[U],U,R)}}var z=o(h,g,C);return z>-1?R[_?h[z]:z]:W}}function eu(o){return vo(function(h){var g=h.length,C=g,R=Nr.prototype.thru;for(o&&h.reverse();C--;){var _=h[C];if(typeof _!="function")throw new kr(oi);if(R&&!z&&Ds(_)=="wrapper")var z=new Nr([],!0)}for(C=z?C:g;++C<g;){_=h[C];var U=Ds(_),te=U=="wrapper"?Uc(_):W;te&&sc(te[0])&&te[1]==(kt|Jt|Bi|sn)&&!te[4].length&&te[9]==1?z=z[Ds(te[0])].apply(z,te[3]):z=_.length==1&&sc(_)?z[U]():z.thru(_)}return function(){var be=arguments,we=be[0];if(z&&be.length==1&&Ft(we))return z.plant(we).value();for(var Me=0,Ye=g?h[Me].apply(this,be):we;++Me<g;)Ye=h[Me].call(this,Ye);return Ye}})}function ih(o,h,g,C,R,_,z,U,te,be){var we=h&kt,Me=h&Se,Ye=h&nt,mt=h&(Jt|jt),pt=h&An,Nt=Ye?W:wa(o);function Rt(){for(var hi=arguments.length,ui=oe(hi),ji=hi;ji--;)ui[ji]=arguments[ji];if(mt)var Wr=ss(Rt),Cs=Jo(ui,Wr);if(C&&(ui=th(ui,C,R,mt)),_&&(ui=Fl(ui,_,z,mt)),hi-=Cs,mt&&hi<be){var Sn=ds(ui,Wr);return zc(o,h,ih,Rt.placeholder,g,ui,Sn,U,te,be-hi)}var to=Me?g:this,Zo=Ye?to[o]:o;return hi=ui.length,U?ui=cu(ui,U):pt&&hi>1&&ui.reverse(),we&&te<hi&&(ui.length=te),this&&this!==it&&this instanceof Rt&&(Zo=Nt||wa(Zo)),Zo.apply(to,ui)}return Rt}function tu(o,h){return function(g,C){return me(g,o,h(C),{})}}function nh(o,h){return function(g,C){var R;if(g===W&&C===W)return h;if(g!==W&&(R=g),C!==W){if(R===W)return C;typeof g=="string"||typeof C=="string"?(g=ys(g),C=ys(C)):(g=Ga(g),C=Ga(C)),R=o(g,C)}return R}}function fr(o){return vo(function(h){return h=Lt(h,Ni(Mt())),si(function(g){var C=this;return o(h,function(R){return Ot(R,C,g)})})})}function Sa(o,h){h=h===W?" ":ys(h);var g=h.length;if(g<2)return g?Nc(h,o):h;var C=Nc(h,No(o/Wn(h)));return Hs(h)?qn(gn(C),0,o).join(""):C.slice(0,o)}function yn(o,h,g,C){var R=h&Se,_=wa(o);function z(){for(var U=-1,te=arguments.length,be=-1,we=C.length,Me=oe(we+te),Ye=this&&this!==it&&this instanceof z?_:o;++be<we;)Me[be]=C[be];for(;te--;)Me[be++]=arguments[++U];return Ot(Ye,R?g:this,Me)}return z}function Vc(o){return function(h,g,C){return C&&typeof C!="number"&&tr(h,g,C)&&(g=C=W),h=$o(h),g===W?(g=h,h=0):g=$o(g),C=C===W?h<g?1:-1:$o(C),$h(h,g,C,o)}}function rh(o){return function(h,g){return typeof h=="string"&&typeof g=="string"||(h=Zr(h),g=Zr(g)),o(h,g)}}function zc(o,h,g,C,R,_,z,U,te,be){var we=h&Jt,Me=we?z:W,Ye=we?W:z,mt=we?_:W,pt=we?W:_;h|=we?Bi:_i,h&=~(we?_i:Bi),h&ei||(h&=~(Se|nt));var Nt=[o,h,R,mt,Me,pt,Ye,U,te,be],Rt=g.apply(W,Nt);return sc(o)&&Yc(Rt,Nt),Rt.placeholder=C,Js(Rt,o,h)}function Yh(o){var h=mn[o];return function(g,C){if(g=Zr(g),C=C==null?0:Ii(Xt(C),292),C&&Ut(g)){var R=(Ci(g)+"e").split("e"),_=h(R[0]+"e"+(+R[1]+C));return R=(Ci(_)+"e").split("e"),+(R[0]+"e"+(+R[1]-C))}return h(g)}}var xs=hl&&1/el(new hl([,-0]))[1]==qe?function(o){return new hl(o)}:Dd;function Jh(o){return function(h){var g=ur(h);return g==di?Qo(h):g==hn?tl(h):Yo(h,o(h))}}function Xs(o,h,g,C,R,_,z,U){var te=h&nt;if(!te&&typeof o!="function")throw new kr(oi);var be=C?C.length:0;if(be||(h&=~(Bi|_i),C=R=W),z=z===W?z:ni(Xt(z),0),U=U===W?U:Xt(U),be-=R?R.length:0,h&_i){var we=C,Me=R;C=R=W}var Ye=te?W:Uc(o),mt=[o,h,g,C,R,we,Me,_,z,U];if(Ye&&lu(mt,Ye),o=mt[0],h=mt[1],g=mt[2],C=mt[3],R=mt[4],U=mt[9]=mt[9]===W?te?0:o.length:ni(mt[9]-be,0),!U&&h&(Jt|jt)&&(h&=~(Jt|jt)),!h||h==Se)var pt=np(o,h,g);else h==Jt||h==jt?pt=$l(o,h,U):(h==Bi||h==(Se|Bi))&&!R.length?pt=yn(o,h,g,C):pt=ih.apply(W,mt);var Nt=Ye?Jd:Yc;return Js(Nt(pt,mt),o,h)}function Kc(o,h,g,C){return o===W||ws(o,hr[g])&&!zt.call(C,g)?h:o}function Qh(o,h,g,C,R,_){return Rn(o)&&Rn(h)&&(_.set(h,o),go(o,h,W,Qh,_),_.delete(h)),o}function ec(o){return kl(o)?W:o}function $c(o,h,g,C,R,_){var z=g&ct,U=o.length,te=h.length;if(U!=te&&!(z&&te>U))return!1;var be=_.get(o),we=_.get(h);if(be&&we)return be==h&&we==o;var Me=-1,Ye=!0,mt=g&Ti?new Vs:W;for(_.set(o,h),_.set(h,o);++Me<U;){var pt=o[Me],Nt=h[Me];if(C)var Rt=z?C(Nt,pt,Me,h,o,_):C(pt,Nt,Me,o,h,_);if(Rt!==W){if(Rt)continue;Ye=!1;break}if(mt){if(!wi(h,function(hi,ui){if(!_s(mt,ui)&&(pt===hi||R(pt,hi,g,C,_)))return mt.push(ui)})){Ye=!1;break}}else if(!(pt===Nt||R(pt,Nt,g,C,_))){Ye=!1;break}}return _.delete(o),_.delete(h),Ye}function Zc(o,h,g,C,R,_,z){switch(g){case qt:if(o.byteLength!=h.byteLength||o.byteOffset!=h.byteOffset)return!1;o=o.buffer,h=h.buffer;case Mn:return!(o.byteLength!=h.byteLength||!_(new ho(o),new ho(h)));case ki:case Ve:case $t:return ws(+o,+h);case bn:return o.name==h.name&&o.message==h.message;case gr:case Rr:return o==h+"";case di:var U=Qo;case hn:var te=C&ct;if(U||(U=el),o.size!=h.size&&!te)return!1;var be=z.get(o);if(be)return be==h;C|=Ti,z.set(o,h);var we=$c(U(o),U(h),C,R,_,z);return z.delete(o),we;case Fr:if(vs)return vs.call(o)==vs.call(h)}return!1}function iu(o,h,g,C,R,_){var z=g&ct,U=tc(o),te=U.length,be=tc(h),we=be.length;if(te!=we&&!z)return!1;for(var Me=te;Me--;){var Ye=U[Me];if(!(z?Ye in h:zt.call(h,Ye)))return!1}var mt=_.get(o),pt=_.get(h);if(mt&&pt)return mt==h&&pt==o;var Nt=!0;_.set(o,h),_.set(h,o);for(var Rt=z;++Me<te;){Ye=U[Me];var hi=o[Ye],ui=h[Ye];if(C)var ji=z?C(ui,hi,Ye,h,o,_):C(hi,ui,Ye,o,h,_);if(!(ji===W?hi===ui||R(hi,ui,g,C,_):ji)){Nt=!1;break}Rt||(Rt=Ye=="constructor")}if(Nt&&!Rt){var Wr=o.constructor,Cs=h.constructor;Wr!=Cs&&"constructor"in o&&"constructor"in h&&!(typeof Wr=="function"&&Wr instanceof Wr&&typeof Cs=="function"&&Cs instanceof Cs)&&(Nt=!1)}return _.delete(o),_.delete(h),Nt}function vo(o){return ac(oc(o,W,mu),o+"")}function tc(o){return M(o,ir,ic)}function dt(o){return M(o,as,ru)}var Uc=la?function(o){return la.get(o)}:Dd;function Ds(o){for(var h=o.name+"",g=Bl[h],C=zt.call(Bl,h)?g.length:0;C--;){var R=g[C],_=R.func;if(_==null||_==o)return R.name}return h}function ss(o){var h=zt.call(B,"placeholder")?B:o;return h.placeholder}function Mt(){var o=B.iteratee||kc;return o=o===kc?Ua:o,arguments.length?o(arguments[0],arguments[1]):o}function Ys(o,h){var g=o.__data__;return xl(h)?g[typeof h=="string"?"string":"hash"]:g.map}function ml(o){for(var h=ir(o),g=h.length;g--;){var C=h[g],R=o[C];h[g]=[C,R,sh(R)]}return h}function vl(o,h){var g=na(o,h);return er(g)?g:W}function nu(o){var h=zt.call(o,Qr),g=o[Qr];try{o[Qr]=W;var C=!0}catch(_){}var R=Fn.call(o);return C&&(h?o[Qr]=g:delete o[Qr]),R}var ic=ol?function(o){return o==null?[]:(o=ti(o),Zi(ol(o),function(h){return Po.call(o,h)}))}:Ld,ru=ol?function(o){for(var h=[];o;)en(h,ic(o)),o=Eo(o);return h}:Ld,ur=D;(Io&&ur(new Io(new ArrayBuffer(1)))!=qt||Pl&&ur(new Pl)!=di||Ba&&ur(Ba.resolve())!=vi||hl&&ur(new hl)!=hn||Ll&&ur(new Ll)!=Nn)&&(ur=function(o){var h=D(o),g=h==an?o.constructor:W,C=g?zo(g):"";if(C)switch(C){case Br:return qt;case aa:return di;case Ph:return vi;case Lh:return hn;case Vf:return Nn}return h});function su(o,h,g){for(var C=-1,R=g.length;++C<R;){var _=g[C],z=_.size;switch(_.type){case"drop":o+=z;break;case"dropRight":h-=z;break;case"take":h=Ii(h,o+z);break;case"takeRight":o=ni(o,h-z);break}}return{start:o,end:h}}function jc(o){var h=o.match(Xi);return h?h[1].split(Ki):[]}function nc(o,h,g){h=gl(h,o);for(var C=-1,R=h.length,_=!1;++C<R;){var z=un(h[C]);if(!(_=o!=null&&g(o,z)))break;o=o[z]}return _||++C!=R?_:(R=o==null?0:o.length,!!R&&Aa(R)&&Pi(z,R)&&(Ft(o)||Sl(o)))}function rp(o){var h=o.length,g=new o.constructor(h);return h&&typeof o[0]=="string"&&zt.call(o,"index")&&(g.index=o.index,g.input=o.input),g}function Gn(o){return typeof o.constructor=="function"&&!Vo(o)?Nl(Eo(o)):{}}function yl(o,h,g){var C=o.constructor;switch(h){case Mn:return Qa(o);case ki:case Ve:return new C(+o);case qt:return tp(o,g);case Ct:case Hi:case mr:case Ee:case In:case Vn:case qr:case cn:case dn:return eh(o,g);case di:return new C;case $t:case Rr:return new C(o);case gr:return Wc(o);case hn:return new C;case Fr:return Fc(o)}}function rc(o,h){var g=h.length;if(!g)return o;var C=g-1;return h[C]=(g>1?"& ":"")+h[C],h=h.join(g>2?", ":" "),o.replace(xr,`{
/* [wrapped with `+h+`] */
`)}function $r(o){return Ft(o)||Sl(o)||!!(sa&&o&&o[sa])}function Pi(o,h){var g=typeof o;return h=h==null?Ie:h,!!h&&(g=="number"||g!="symbol"&&b.test(o))&&o>-1&&o%1==0&&o<h}function tr(o,h,g){if(!Rn(g))return!1;var C=typeof h;return(C=="number"?ls(g)&&Pi(h,g.length):C=="string"&&h in g)?ws(g[h],o):!1}function Ul(o,h){if(Ft(o))return!1;var g=typeof o;return g=="number"||g=="symbol"||g=="boolean"||o==null||Ps(o)?!0:lr.test(o)||!bo.test(o)||h!=null&&o in ti(h)}function xl(o){var h=typeof o;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?o!=="__proto__":o===null}function sc(o){var h=Ds(o),g=B[h];if(typeof g!="function"||!(h in ri.prototype))return!1;if(o===g)return!0;var C=Uc(g);return!!C&&o===C[0]}function sp(o){return!!zr&&zr in o}var qc=ao?Ko:If;function Vo(o){var h=o&&o.constructor,g=typeof h=="function"&&h.prototype||hr;return o===g}function sh(o){return o===o&&!Rn(o)}function Gc(o,h){return function(g){return g==null?!1:g[o]===h&&(h!==W||o in ti(g))}}function ou(o){var h=gc(o,function(C){return g.size===Ze&&g.clear(),C}),g=h.cache;return h}function lu(o,h){var g=o[1],C=h[1],R=g|C,_=R<(Se|nt|kt),z=C==kt&&g==Jt||C==kt&&g==sn&&o[7].length<=h[8]||C==(kt|sn)&&h[7].length<=h[8]&&g==Jt;if(!(_||z))return o;C&Se&&(o[2]=h[2],R|=g&Se?0:ei);var U=h[3];if(U){var te=o[3];o[3]=te?th(te,U,h[4]):U,o[4]=te?ds(o[3],tt):h[4]}return U=h[5],U&&(te=o[5],o[5]=te?Fl(te,U,h[6]):U,o[6]=te?ds(o[5],tt):h[6]),U=h[7],U&&(o[7]=U),C&kt&&(o[8]=o[8]==null?h[8]:Ii(o[8],h[8])),o[9]==null&&(o[9]=h[9]),o[0]=h[0],o[1]=R,o}function au(o){var h=[];if(o!=null)for(var g in ti(o))h.push(g);return h}function hu(o){return Fn.call(o)}function oc(o,h,g){return h=ni(h===W?o.length-1:h,0),function(){for(var C=arguments,R=-1,_=ni(C.length-h,0),z=oe(_);++R<_;)z[R]=C[h+R];R=-1;for(var U=oe(h+1);++R<h;)U[R]=C[R];return U[h]=g(z),Ot(o,this,U)}}function Xc(o,h){return h.length<2?o:S(o,Rs(h,0,-1))}function cu(o,h){for(var g=o.length,C=Ii(h.length,g),R=Ar(o);C--;){var _=h[C];o[C]=Pi(_,g)?R[_]:W}return o}function lc(o,h){if(!(h==="constructor"&&typeof o[h]=="function")&&h!="__proto__")return o[h]}var Yc=oh(Jd),bl=oa||function(o,h){return it.setTimeout(o,h)},ac=oh(Xg);function Js(o,h,g){var C=h+"";return ac(o,rc(C,fu(jc(C),g)))}function oh(o){var h=0,g=0;return function(){var C=Ws(),R=$e-(C-g);if(g=C,R>0){if(++h>=li)return arguments[0]}else h=0;return o.apply(W,arguments)}}function hc(o,h){var g=-1,C=o.length,R=C-1;for(h=h===W?C:h;++g<h;){var _=ya(g,R),z=o[_];o[_]=o[g],o[g]=z}return o.length=h,o}var Ca=ou(function(o){var h=[];return o.charCodeAt(0)===46&&h.push(""),o.replace(wn,function(g,C,R,_){h.push(R?_.replace(fs,"$1"):C||g)}),h});function un(o){if(typeof o=="string"||Ps(o))return o;var h=o+"";return h=="0"&&1/o==-qe?"-0":h}function zo(o){if(o!=null){try{return sl.call(o)}catch(h){}try{return o+""}catch(h){}}return""}function fu(o,h){return ht(Oi,function(g){var C="_."+g[0];h&g[1]&&!Wi(o,C)&&o.push(C)}),o.sort()}function lh(o){if(o instanceof ri)return o.clone();var h=new Nr(o.__wrapped__,o.__chain__);return h.__actions__=Ar(o.__actions__),h.__index__=o.__index__,h.__values__=o.__values__,h}function ah(o,h,g){(g?tr(o,h,g):h===W)?h=1:h=ni(Xt(h),0);var C=o==null?0:o.length;if(!C||h<1)return[];for(var R=0,_=0,z=oe(No(C/h));R<C;)z[_++]=Rs(o,R,R+=h);return z}function Jc(o){for(var h=-1,g=o==null?0:o.length,C=0,R=[];++h<g;){var _=o[h];_&&(R[C++]=_)}return R}function uu(){var o=arguments.length;if(!o)return[];for(var h=oe(o-1),g=arguments[0],C=o;C--;)h[C-1]=arguments[C];return en(Ft(g)?Ar(g):[g],d(h,1))}var du=si(function(o,h){return xn(o)?Il(o,d(h,1,xn,!0)):[]}),pu=si(function(o,h){var g=Es(h);return xn(g)&&(g=W),xn(o)?Il(o,d(h,1,xn,!0),Mt(g,2)):[]}),gu=si(function(o,h){var g=Es(h);return xn(g)&&(g=W),xn(o)?Il(o,d(h,1,xn,!0),W,g):[]});function hh(o,h,g){var C=o==null?0:o.length;return C?(h=g||h===W?1:Xt(h),Rs(o,h<0?0:h,C)):[]}function bs(o,h,g){var C=o==null?0:o.length;return C?(h=g||h===W?1:Xt(h),h=C-h,Rs(o,0,h<0?0:h)):[]}function cc(o,h){return o&&o.length?xa(o,Mt(h,3),!0,!0):[]}function Bn(o,h){return o&&o.length?xa(o,Mt(h,3),!0):[]}function ch(o,h,g,C){var R=o==null?0:o.length;return R?(g&&typeof g!="number"&&tr(o,h,g)&&(g=0,C=R),qf(o,h,g,C)):[]}function Qc(o,h,g){var C=o==null?0:o.length;if(!C)return-1;var R=g==null?0:Xt(g);return R<0&&(R=ni(C+R,0)),Yi(o,Mt(h,3),R)}function ef(o,h,g){var C=o==null?0:o.length;if(!C)return-1;var R=C-1;return g!==W&&(R=Xt(g),R=g<0?ni(C+R,0):Ii(R,C-1)),Yi(o,Mt(h,3),R,!0)}function mu(o){var h=o==null?0:o.length;return h?d(o,1):[]}function op(o){var h=o==null?0:o.length;return h?d(o,qe):[]}function tf(o,h){var g=o==null?0:o.length;return g?(h=h===W?1:Xt(h),d(o,h)):[]}function yo(o){for(var h=-1,g=o==null?0:o.length,C={};++h<g;){var R=o[h];C[R[0]]=R[1]}return C}function vu(o){return o&&o.length?o[0]:W}function lp(o,h,g){var C=o==null?0:o.length;if(!C)return-1;var R=g==null?0:Xt(g);return R<0&&(R=ni(C+R,0)),nn(o,h,R)}function wl(o){var h=o==null?0:o.length;return h?Rs(o,0,-1):[]}var yu=si(function(o){var h=Lt(o,qh);return h.length&&h[0]===o[0]?le(h):[]}),rn=si(function(o){var h=Es(o),g=Lt(o,qh);return h===Es(g)?h=W:g.pop(),g.length&&g[0]===o[0]?le(g,Mt(h,2)):[]}),ap=si(function(o){var h=Es(o),g=Lt(o,qh);return h=typeof h=="function"?h:W,h&&g.pop(),g.length&&g[0]===o[0]?le(g,W,h):[]});function hp(o,h){return o==null?"":ii.call(o,h)}function Es(o){var h=o==null?0:o.length;return h?o[h-1]:W}function nf(o,h,g){var C=o==null?0:o.length;if(!C)return-1;var R=C;return g!==W&&(R=Xt(g),R=R<0?ni(C+R,0):Ii(R,C-1)),h===h?lo(o,h,R):Yi(o,Er,R,!0)}function rf(o,h){return o&&o.length?mo(o,Xt(h)):W}var xu=si(sf);function sf(o,h){return o&&o.length&&h&&h.length?Bc(o,h):o}function bu(o,h,g){return o&&o.length&&h&&h.length?Bc(o,h,Mt(g,2)):o}function wu(o,h,g){return o&&o.length&&h&&h.length?Bc(o,h,W,g):o}var Su=vo(function(o,h){var g=o==null?0:o.length,C=$a(o,h);return Hl(o,Lt(h,function(R){return Pi(R,g)?+R:R}).sort(Xh)),C});function cp(o,h){var g=[];if(!(o&&o.length))return g;var C=-1,R=[],_=o.length;for(h=Mt(h,3);++C<_;){var z=o[C];h(z,C,o)&&(g.push(z),R.push(C))}return Hl(o,R),g}function fc(o){return o==null?o:al.call(o)}function Cu(o,h,g){var C=o==null?0:o.length;return C?(g&&typeof g!="number"&&tr(o,h,g)?(h=0,g=C):(h=h==null?0:Xt(h),g=g===W?C:Xt(g)),Rs(o,h,g)):[]}function fp(o,h){return Zh(o,h)}function ku(o,h,g){return Wl(o,h,Mt(g,2))}function up(o,h){var g=o==null?0:o.length;if(g){var C=Zh(o,h);if(C<g&&ws(o[C],h))return C}return-1}function dp(o,h){return Zh(o,h,!0)}function pp(o,h,g){return Wl(o,h,Mt(g,2),!0)}function gp(o,h){var g=o==null?0:o.length;if(g){var C=Zh(o,h,!0)-1;if(ws(o[C],h))return C}return-1}function mp(o){return o&&o.length?qa(o):[]}function vp(o,h){return o&&o.length?qa(o,Mt(h,2)):[]}function yp(o){var h=o==null?0:o.length;return h?Rs(o,1,h):[]}function xp(o,h,g){return o&&o.length?(h=g||h===W?1:Xt(h),Rs(o,0,h<0?0:h)):[]}function of(o,h,g){var C=o==null?0:o.length;return C?(h=g||h===W?1:Xt(h),h=C-h,Rs(o,h<0?0:h,C)):[]}function Au(o,h){return o&&o.length?xa(o,Mt(h,3),!1,!0):[]}function Mu(o,h){return o&&o.length?xa(o,Mt(h,3)):[]}var lf=si(function(o){return pl(d(o,1,xn,!0))}),Tu=si(function(o){var h=Es(o);return xn(h)&&(h=W),pl(d(o,1,xn,!0),Mt(h,2))}),Ou=si(function(o){var h=Es(o);return h=typeof h=="function"?h:W,pl(d(o,1,xn,!0),W,h)});function Ru(o){return o&&o.length?pl(o):[]}function bp(o,h){return o&&o.length?pl(o,Mt(h,2)):[]}function wp(o,h){return h=typeof h=="function"?h:W,o&&o.length?pl(o,W,h):[]}function fh(o){if(!(o&&o.length))return[];var h=0;return o=Zi(o,function(g){if(xn(g))return h=ni(g.length,h),!0}),pn(h,function(g){return Lt(o,As(g))})}function Du(o,h){if(!(o&&o.length))return[];var g=fh(o);return h==null?g:Lt(g,function(C){return Ot(h,W,C)})}var Eu=si(function(o,h){return xn(o)?Il(o,h):[]}),Sp=si(function(o){return jh(Zi(o,xn))}),Cp=si(function(o){var h=Es(o);return xn(h)&&(h=W),jh(Zi(o,xn),Mt(h,2))}),uc=si(function(o){var h=Es(o);return h=typeof h=="function"?h:W,jh(Zi(o,xn),W,h)}),af=si(fh);function kp(o,h){return Hc(o||[],h||[],da)}function Pu(o,h){return Hc(o||[],h||[],ns)}var Ap=si(function(o){var h=o.length,g=h>1?o[h-1]:W;return g=typeof g=="function"?(o.pop(),g):W,Du(o,g)});function hf(o){var h=B(o);return h.__chain__=!0,h}function Mp(o,h){return h(o),o}function uh(o,h){return h(o)}var dc=vo(function(o){var h=o.length,g=h?o[0]:0,C=this.__wrapped__,R=function(_){return $a(_,o)};return h>1||this.__actions__.length||!(C instanceof ri)||!Pi(g)?this.thru(R):(C=C.slice(g,+g+(h?1:0)),C.__actions__.push({func:uh,args:[R],thisArg:W}),new Nr(C,this.__chain__).thru(function(_){return h&&!_.length&&_.push(W),_}))});function pc(){return hf(this)}function Tp(){return new Nr(this.value(),this.__chain__)}function Op(){this.__values__===W&&(this.__values__=Sf(this.value()));var o=this.__index__>=this.__values__.length,h=o?W:this.__values__[this.__index__++];return{done:o,value:h}}function Rp(){return this}function Dp(o){for(var h,g=this;g instanceof cl;){var C=lh(g);C.__index__=0,C.__values__=W,h?R.__wrapped__=C:h=C;var R=C;g=g.__wrapped__}return R.__wrapped__=o,h}function Ep(){var o=this.__wrapped__;if(o instanceof ri){var h=o;return this.__actions__.length&&(h=new ri(this)),h=h.reverse(),h.__actions__.push({func:uh,args:[fc],thisArg:W}),new Nr(h,this.__chain__)}return this.thru(fc)}function Pp(){return Xa(this.__wrapped__,this.__actions__)}var xo=Vl(function(o,h,g){zt.call(o,g)?++o[g]:$s(o,g,1)});function Qs(o,h,g){var C=Ft(o)?$i:Pc;return g&&tr(o,h,g)&&(h=W),C(o,Mt(h,3))}function Lu(o,h){var g=Ft(o)?Zi:Za;return g(o,Mt(h,3))}var Lp=Zl(Qc),Bu=Zl(ef);function Nu(o,h){return d(dh(o,h),1)}function Iu(o,h){return d(dh(o,h),qe)}function _u(o,h,g){return g=g===W?1:Xt(g),d(dh(o,h),g)}function Hu(o,h){var g=Ft(o)?ht:Us;return g(o,Mt(h,3))}function cf(o,h){var g=Ft(o)?Gt:Kh;return g(o,Mt(h,3))}var Bp=Vl(function(o,h,g){zt.call(o,g)?o[g].push(h):$s(o,g,[h])});function Wu(o,h,g,C){o=ls(o)?o:Ma(o),g=g&&!C?Xt(g):0;var R=o.length;return g<0&&(g=ni(R+g,0)),vh(o)?g<=R&&o.indexOf(h,g)>-1:!!R&&nn(o,h,g)>-1}var Fu=si(function(o,h,g){var C=-1,R=typeof h=="function",_=ls(o)?oe(o.length):[];return Us(o,function(z){_[++C]=R?Ot(h,z,g):Te(z,h,g)}),_}),Vu=Vl(function(o,h,g){$s(o,g,h)});function dh(o,h){var g=Ft(o)?Lt:Gs;return g(o,Mt(h,3))}function Np(o,h,g,C){return o==null?[]:(Ft(h)||(h=h==null?[]:[h]),g=C?W:g,Ft(g)||(g=g==null?[]:[g]),Lc(o,h,g))}var Ip=Vl(function(o,h,g){o[g?0:1].push(h)},function(){return[[],[]]});function zu(o,h,g){var C=Ft(o)?Pt:Zn,R=arguments.length<3;return C(o,Mt(h,4),g,R,Us)}function _p(o,h,g){var C=Ft(o)?Vt:Zn,R=arguments.length<3;return C(o,Mt(h,4),g,R,Kh)}function Hp(o,h){var g=Ft(o)?Zi:Za;return g(o,ka(Mt(h,3)))}function ff(o){var h=Ft(o)?Ka:ja;return h(o)}function Ku(o,h,g){(g?tr(o,h,g):h===W)?h=1:h=Xt(h);var C=Ft(o)?jf:Ic;return C(o,h)}function $u(o){var h=Ft(o)?Fh:_c;return h(o)}function Zu(o){if(o==null)return 0;if(ls(o))return vh(o)?Wn(o):o.length;var h=ur(o);return h==di||h==hn?o.size:Ho(o).length}function Uu(o,h,g){var C=Ft(o)?wi:Qd;return g&&tr(o,h,g)&&(h=W),C(o,Mt(h,3))}var Wp=si(function(o,h){if(o==null)return[];var g=h.length;return g>1&&tr(o,h[0],h[1])?h=[]:g>2&&tr(h[0],h[1],h[2])&&(h=[h[0]]),Lc(o,d(h,1),[])}),ph=El||function(){return it.Date.now()};function ju(o,h){if(typeof h!="function")throw new kr(oi);return o=Xt(o),function(){if(--o<1)return h.apply(this,arguments)}}function uf(o,h,g){return h=g?W:h,h=o&&h==null?o.length:h,Xs(o,kt,W,W,W,W,h)}function eo(o,h){var g;if(typeof h!="function")throw new kr(oi);return o=Xt(o),function(){return--o>0&&(g=h.apply(this,arguments)),o<=1&&(h=W),g}}var Ji=si(function(o,h,g){var C=Se;if(g.length){var R=ds(g,ss(Ji));C|=Bi}return Xs(o,C,h,g,R)}),gh=si(function(o,h,g){var C=Se|nt;if(g.length){var R=ds(g,ss(gh));C|=Bi}return Xs(h,C,o,g,R)});function Mr(o,h,g){h=g?W:h;var C=Xs(o,Jt,W,W,W,W,W,h);return C.placeholder=Mr.placeholder,C}function df(o,h,g){h=g?W:h;var C=Xs(o,jt,W,W,W,W,W,h);return C.placeholder=df.placeholder,C}function os(o,h,g){var C,R,_,z,U,te,be=0,we=!1,Me=!1,Ye=!0;if(typeof o!="function")throw new kr(oi);h=Zr(h)||0,Rn(g)&&(we=!!g.leading,Me="maxWait"in g,_=Me?ni(Zr(g.maxWait)||0,h):_,Ye="trailing"in g?!!g.trailing:Ye);function mt(Sn){var to=C,Zo=R;return C=R=W,be=Sn,z=o.apply(Zo,to),z}function pt(Sn){return be=Sn,U=bl(hi,h),we?mt(Sn):z}function Nt(Sn){var to=Sn-te,Zo=Sn-be,Vd=h-to;return Me?Ii(Vd,_-Zo):Vd}function Rt(Sn){var to=Sn-te,Zo=Sn-be;return te===W||to>=h||to<0||Me&&Zo>=_}function hi(){var Sn=ph();if(Rt(Sn))return ui(Sn);U=bl(hi,Nt(Sn))}function ui(Sn){return U=W,Ye&&C?mt(Sn):(C=R=W,z)}function ji(){U!==W&&Ya(U),be=0,C=te=R=U=W}function Wr(){return U===W?z:ui(ph())}function Cs(){var Sn=ph(),to=Rt(Sn);if(C=arguments,R=this,te=Sn,to){if(U===W)return pt(te);if(Me)return Ya(U),U=bl(hi,h),mt(te)}return U===W&&(U=bl(hi,h)),z}return Cs.cancel=ji,Cs.flush=Wr,Cs}var Tr=si(function(o,h){return zh(o,1,h)}),Fp=si(function(o,h,g){return zh(o,Zr(h)||0,g)});function qu(o){return Xs(o,An)}function gc(o,h){if(typeof o!="function"||h!=null&&typeof h!="function")throw new kr(oi);var g=function(){var C=arguments,R=h?h.apply(this,C):C[0],_=g.cache;if(_.has(R))return _.get(R);var z=o.apply(this,C);return g.cache=_.set(R,z)||_,z};return g.cache=new(gc.Cache||ts),g}gc.Cache=ts;function ka(o){if(typeof o!="function")throw new kr(oi);return function(){var h=arguments;switch(h.length){case 0:return!o.call(this);case 1:return!o.call(this,h[0]);case 2:return!o.call(this,h[0],h[1]);case 3:return!o.call(this,h[0],h[1],h[2])}return!o.apply(this,h)}}function Vp(o){return eo(2,o)}var zp=ep(function(o,h){h=h.length==1&&Ft(h[0])?Lt(h[0],Ni(Mt())):Lt(d(h,1),Ni(Mt()));var g=h.length;return si(function(C){for(var R=-1,_=Ii(C.length,g);++R<_;)C[R]=h[R].call(this,C[R]);return Ot(o,this,C)})}),pf=si(function(o,h){var g=ds(h,ss(pf));return Xs(o,Bi,W,h,g)}),Gu=si(function(o,h){var g=ds(h,ss(Gu));return Xs(o,_i,W,h,g)}),gf=vo(function(o,h){return Xs(o,sn,W,W,W,h)});function Kp(o,h){if(typeof o!="function")throw new kr(oi);return h=h===W?h:Xt(h),si(o,h)}function Xu(o,h){if(typeof o!="function")throw new kr(oi);return h=h==null?0:ni(Xt(h),0),si(function(g){var C=g[h],R=qn(g,0,h);return C&&en(R,C),Ot(o,this,R)})}function mc(o,h,g){var C=!0,R=!0;if(typeof o!="function")throw new kr(oi);return Rn(g)&&(C="leading"in g?!!g.leading:C,R="trailing"in g?!!g.trailing:R),os(o,h,{leading:C,maxWait:h,trailing:R})}function $p(o){return uf(o,1)}function vc(o,h){return pf(Gh(h),o)}function yc(){if(!arguments.length)return[];var o=arguments[0];return Ft(o)?o:[o]}function Zp(o){return is(o,Yt)}function Yu(o,h){return h=typeof h=="function"?h:W,is(o,Yt,h)}function Up(o){return is(o,fi|Yt)}function mh(o,h){return h=typeof h=="function"?h:W,is(o,fi|Yt,h)}function xc(o,h){return h==null||Vh(o,h,ir(h))}function ws(o,h){return o===h||o!==o&&h!==h}var mf=rh(E),Ju=rh(function(o,h){return o>=h}),Sl=Ae(function(){return arguments}())?Ae:function(o){return Dn(o)&&zt.call(o,"callee")&&!Po.call(o,"callee")},Ft=oe.isArray,vf=Ht?Ni(Ht):We;function ls(o){return o!=null&&Aa(o.length)&&!Ko(o)}function xn(o){return Dn(o)&&ls(o)}function jp(o){return o===!0||o===!1||Dn(o)&&D(o)==ki}var Cl=ll||If,Qu=bi?Ni(bi):Wt;function ed(o){return Dn(o)&&o.nodeType===1&&!kl(o)}function qp(o){if(o==null)return!0;if(ls(o)&&(Ft(o)||typeof o=="string"||typeof o.splice=="function"||Cl(o)||Ss(o)||Sl(o)))return!o.length;var h=ur(o);if(h==di||h==hn)return!o.size;if(Vo(o))return!Ho(o).length;for(var g in o)if(zt.call(o,g))return!1;return!0}function td(o,h){return Kt(o,h)}function Gp(o,h,g){g=typeof g=="function"?g:W;var C=g?g(o,h):W;return C===W?Kt(o,h,W,g):!!C}function yf(o){if(!Dn(o))return!1;var h=D(o);return h==bn||h==sr||typeof o.message=="string"&&typeof o.name=="string"&&!kl(o)}function Xp(o){return typeof o=="number"&&Ut(o)}function Ko(o){if(!Rn(o))return!1;var h=D(o);return h==zi||h==Yn||h==ln||h==Ri}function id(o){return typeof o=="number"&&o==Xt(o)}function Aa(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Ie}function Rn(o){var h=typeof o;return o!=null&&(h=="object"||h=="function")}function Dn(o){return o!=null&&typeof o=="object"}var nd=ut?Ni(ut):Ei;function Si(o,h){return o===h||Fi(o,h,ml(h))}function Yp(o,h,g){return g=typeof g=="function"?g:W,Fi(o,h,ml(h),g)}function rd(o){return od(o)&&o!=+o}function bc(o){if(qc(o))throw new ft(Y);return er(o)}function sd(o){return o===null}function Jp(o){return o==null}function od(o){return typeof o=="number"||Dn(o)&&D(o)==$t}function kl(o){if(!Dn(o)||D(o)!=an)return!1;var h=Eo(o);if(h===null)return!0;var g=zt.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&sl.call(g)==cr}var xf=lt?Ni(lt):js;function bf(o){return id(o)&&o>=-Ie&&o<=Ie}var wf=ze?Ni(ze):uo;function vh(o){return typeof o=="string"||!Ft(o)&&Dn(o)&&D(o)==Rr}function Ps(o){return typeof o=="symbol"||Dn(o)&&D(o)==Fr}var Ss=bt?Ni(bt):ma;function Qp(o){return o===W}function eg(o){return Dn(o)&&ur(o)==Nn}function ld(o){return Dn(o)&&D(o)==Gi}var yh=rh(qs),ad=rh(function(o,h){return o<=h});function Sf(o){if(!o)return[];if(ls(o))return vh(o)?gn(o):Ar(o);if(Lo&&o[Lo])return Mo(o[Lo]());var h=ur(o),g=h==di?Qo:h==hn?el:Ma;return g(o)}function $o(o){if(!o)return o===0?o:0;if(o=Zr(o),o===qe||o===-qe){var h=o<0?-1:1;return h*Je}return o===o?o:0}function Xt(o){var h=$o(o),g=h%1;return h===h?g?h-g:h:0}function hd(o){return o?Zs(Xt(o),0,Ke):0}function Zr(o){if(typeof o=="number")return o;if(Ps(o))return rt;if(Rn(o)){var h=typeof o.valueOf=="function"?o.valueOf():o;o=Rn(h)?h+"":h}if(typeof o!="string")return o===0?o:+o;o=Hn(o);var g=Ln.test(o);return g||v.test(o)?ot(o.slice(2),g?2:8):Vr.test(o)?rt:+o}function Cf(o){return rs(o,as(o))}function cd(o){return o?Zs(Xt(o),-Ie,Ie):o===0?o:0}function Ci(o){return o==null?"":ys(o)}var Yg=ba(function(o,h){if(Vo(h)||ls(h)){rs(h,ir(h),o);return}for(var g in h)zt.call(h,g)&&da(o,g,h[g])}),tg=ba(function(o,h){rs(h,as(h),o)}),xh=ba(function(o,h,g,C){rs(h,as(h),o,C)}),ig=ba(function(o,h,g,C){rs(h,ir(h),o,C)}),fd=vo($a);function ng(o,h){var g=Nl(o);return h==null?g:_o(g,h)}var rg=si(function(o,h){o=ti(o);var g=-1,C=h.length,R=C>2?h[2]:W;for(R&&tr(h[0],h[1],R)&&(C=1);++g<C;)for(var _=h[g],z=as(_),U=-1,te=z.length;++U<te;){var be=z[U],we=o[be];(we===W||ws(we,hr[be])&&!zt.call(o,be))&&(o[be]=_[be])}return o}),sg=si(function(o){return o.push(W,Qh),Ot(pd,W,o)});function ud(o,h){return wr(o,Mt(h,3),f)}function bh(o,h){return wr(o,Mt(h,3),p)}function og(o,h){return o==null?o:s(o,Mt(h,3),as)}function Jg(o,h){return o==null?o:a(o,Mt(h,3),as)}function dd(o,h){return o&&f(o,Mt(h,3))}function lg(o,h){return o&&p(o,Mt(h,3))}function kf(o){return o==null?[]:y(o,ir(o))}function Af(o){return o==null?[]:y(o,as(o))}function Mf(o,h,g){var C=o==null?W:S(o,h);return C===W?g:C}function ag(o,h){return o!=null&&nc(o,h,I)}function wh(o,h){return o!=null&&nc(o,h,$)}var hg=tu(function(o,h,g){h!=null&&typeof h.toString!="function"&&(h=Fn.call(h)),o[h]=g},Pf(Ur)),wc=tu(function(o,h,g){h!=null&&typeof h.toString!="function"&&(h=Fn.call(h)),zt.call(o,h)?o[h].push(g):o[h]=[g]},Mt),Qg=si(Te);function ir(o){return ls(o)?za(o):Ho(o)}function as(o){return ls(o)?za(o,!0):va(o)}function cg(o,h){var g={};return h=Mt(h,3),f(o,function(C,R,_){$s(g,h(C,R,_),C)}),g}function fg(o,h){var g={};return h=Mt(h,3),f(o,function(C,R,_){$s(g,R,h(C,R,_))}),g}var ug=ba(function(o,h,g){go(o,h,g)}),pd=ba(function(o,h,g,C){go(o,h,g,C)}),gd=vo(function(o,h){var g={};if(o==null)return g;var C=!1;h=Lt(h,function(_){return _=gl(_,o),C||(C=_.length>1),_}),rs(o,dt(o),g),C&&(g=is(g,fi|Fe|Yt,ec));for(var R=h.length;R--;)Uh(g,h[R]);return g});function em(o,h){return md(o,ka(Mt(h)))}var tm=vo(function(o,h){return o==null?{}:Gf(o,h)});function md(o,h){if(o==null)return{};var g=Lt(dt(o),function(C){return[C]});return h=Mt(h),_l(o,g,function(C,R){return h(C,R[0])})}function dg(o,h,g){h=gl(h,o);var C=-1,R=h.length;for(R||(R=1,o=W);++C<R;){var _=o==null?W:o[un(h[C])];_===W&&(C=R,_=g),o=Ko(_)?_.call(o):_}return o}function pg(o,h,g){return o==null?o:ns(o,h,g)}function im(o,h,g,C){return C=typeof C=="function"?C:W,o==null?o:ns(o,h,g,C)}var Sc=Jh(ir),vd=Jh(as);function gg(o,h,g){var C=Ft(o),R=C||Cl(o)||Ss(o);if(h=Mt(h,4),g==null){var _=o&&o.constructor;R?g=C?new _:[]:Rn(o)?g=Ko(_)?Nl(Eo(o)):{}:g={}}return(R?ht:f)(o,function(z,U,te){return h(g,z,U,te)}),g}function yd(o,h){return o==null?!0:Uh(o,h)}function mg(o,h,g){return o==null?o:Xf(o,h,Gh(g))}function nm(o,h,g,C){return C=typeof C=="function"?C:W,o==null?o:Xf(o,h,Gh(g),C)}function Ma(o){return o==null?[]:On(o,ir(o))}function vg(o){return o==null?[]:On(o,as(o))}function rm(o,h,g){return g===W&&(g=h,h=W),g!==W&&(g=Zr(g),g=g===g?g:0),h!==W&&(h=Zr(h),h=h===h?h:0),Zs(Zr(o),h,g)}function Sh(o,h,g){return h=$o(h),g===W?(g=h,h=0):g=$o(g),o=Zr(o),ne(o,h,g)}function xd(o,h,g){if(g&&typeof g!="boolean"&&tr(o,h,g)&&(h=g=W),g===W&&(typeof h=="boolean"?(g=h,h=W):typeof o=="boolean"&&(g=o,o=W)),o===W&&h===W?(o=0,h=1):(o=$o(o),h===W?(h=o,o=0):h=$o(h)),o>h){var C=o;o=h,h=C}if(g||o%1||h%1){var R=jn();return Ii(o+R*(h-o+vt("1e-"+((R+"").length-1))),h)}return ya(o,h)}var sm=Kl(function(o,h,g){return h=h.toLowerCase(),o+(g?bd(h):h)});function bd(o){return Ah(Ci(o).toLowerCase())}function Ch(o){return o=Ci(o),o&&o.replace(A,ia).replace(Q,"")}function wd(o,h,g){o=Ci(o),h=ys(h);var C=o.length;g=g===W?C:Zs(Xt(g),0,C);var R=g;return g-=h.length,g>=0&&o.slice(g,R)==h}function Tf(o){return o=Ci(o),o&&yi.test(o)?o.replace(zn,oo):o}function yg(o){return o=Ci(o),o&&Kn.test(o)?o.replace(yr,"\\$&"):o}var xg=Kl(function(o,h,g){return o+(g?"-":"")+h.toLowerCase()}),Of=Kl(function(o,h,g){return o+(g?" ":"")+h.toLowerCase()}),kh=zl("toLowerCase");function Rf(o,h,g){o=Ci(o),h=Xt(h);var C=h?Wn(o):0;if(!h||C>=h)return o;var R=(h-C)/2;return Sa(Kr(R),g)+o+Sa(No(R),g)}function bg(o,h,g){o=Ci(o),h=Xt(h);var C=h?Wn(o):0;return h&&C<h?o+Sa(h-C,g):o}function wg(o,h,g){o=Ci(o),h=Xt(h);var C=h?Wn(o):0;return h&&C<h?Sa(h-C,g)+o:o}function Sd(o,h,g){return g||h==null?h=0:h&&(h=+h),ms(Ci(o).replace(cs,""),h||0)}function Sg(o,h,g){return(g?tr(o,h,g):h===W)?h=1:h=Xt(h),Nc(Ci(o),h)}function om(){var o=arguments,h=Ci(o[0]);return o.length<3?h:h.replace(o[1],o[2])}var Cd=Kl(function(o,h,g){return o+(g?"_":"")+h.toLowerCase()});function lm(o,h,g){return g&&typeof g!="number"&&tr(o,h,g)&&(h=g=W),g=g===W?Ke:g>>>0,g?(o=Ci(o),o&&(typeof h=="string"||h!=null&&!xf(h))&&(h=ys(h),!h&&Hs(o))?qn(gn(o),0,g):o.split(h,g)):[]}var Cg=Kl(function(o,h,g){return o+(g?" ":"")+Ah(h)});function am(o,h,g){return o=Ci(o),g=g==null?0:Zs(Xt(g),0,o.length),h=ys(h),o.slice(g,g+h.length)==h}function hm(o,h,g){var C=B.templateSettings;g&&tr(o,h,g)&&(h=W),o=Ci(o),h=xh({},h,C,Kc);var R=xh({},h.imports,C.imports,Kc),_=ir(R),z=On(R,_),U,te,be=0,we=h.interpolate||O,Me="__p += '",Ye=rl((h.escape||O).source+"|"+we.source+"|"+(we===fe?io:O).source+"|"+(h.evaluate||O).source+"|$","g"),mt="//# sourceURL="+(zt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ge+"]")+`
`;o.replace(Ye,function(Rt,hi,ui,ji,Wr,Cs){return ui||(ui=ji),Me+=o.slice(be,Cs).replace(L,Ea),hi&&(U=!0,Me+=`' +
__e(`+hi+`) +
'`),Wr&&(te=!0,Me+=`';
`+Wr+`;
__p += '`),ui&&(Me+=`' +
((__t = (`+ui+`)) == null ? '' : __t) +
'`),be=Cs+Rt.length,Rt}),Me+=`';
`;var pt=zt.call(h,"variable")&&h.variable;if(!pt)Me=`with (obj) {
`+Me+`
}
`;else if(Ls.test(pt))throw new ft(Li);Me=(te?Me.replace(_n,""):Me).replace(Di,"$1").replace(En,"$1;"),Me="function("+(pt||"obj")+`) {
`+(pt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(U?", __e = _.escape":"")+(te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Me+`return __p
}`;var Nt=Ta(function(){return Zt(_,mt+"return "+Me).apply(W,z)});if(Nt.source=Me,yf(Nt))throw Nt;return Nt}function Df(o){return Ci(o).toLowerCase()}function cm(o){return Ci(o).toUpperCase()}function fm(o,h,g){if(o=Ci(o),o&&(g||h===W))return Hn(o);if(!o||!(h=ys(h)))return o;var C=gn(o),R=gn(h),_=Ao(C,R),z=so(C,R)+1;return qn(C,_,z).join("")}function kd(o,h,g){if(o=Ci(o),o&&(g||h===W))return o.slice(0,Ts(o)+1);if(!o||!(h=ys(h)))return o;var C=gn(o),R=so(C,gn(h))+1;return qn(C,0,R).join("")}function Cc(o,h,g){if(o=Ci(o),o&&(g||h===W))return o.replace(cs,"");if(!o||!(h=ys(h)))return o;var C=gn(o),R=Ao(C,gn(h));return qn(C,R).join("")}function Ad(o,h){var g=mi,C=et;if(Rn(h)){var R="separator"in h?h.separator:R;g="length"in h?Xt(h.length):g,C="omission"in h?ys(h.omission):C}o=Ci(o);var _=o.length;if(Hs(o)){var z=gn(o);_=z.length}if(g>=_)return o;var U=g-Wn(C);if(U<1)return C;var te=z?qn(z,0,U).join(""):o.slice(0,U);if(R===W)return te+C;if(z&&(U+=te.length-U),xf(R)){if(o.slice(U).search(R)){var be,we=te;for(R.global||(R=rl(R.source,Ci(no.exec(R))+"g")),R.lastIndex=0;be=R.exec(we);)var Me=be.index;te=te.slice(0,Me===W?U:Me)}}else if(o.indexOf(ys(R),U)!=U){var Ye=te.lastIndexOf(R);Ye>-1&&(te=te.slice(0,Ye))}return te+C}function Md(o){return o=Ci(o),o&&Pn.test(o)?o.replace(Tn,Mi):o}var Al=Kl(function(o,h,g){return o+(g?" ":"")+h.toUpperCase()}),Ah=zl("toUpperCase");function Td(o,h,g){return o=Ci(o),h=g?W:h,h===W?Ms(o)?Oo(o):Ui(o):o.match(h)||[]}var Ta=si(function(o,h){try{return Ot(o,W,h)}catch(g){return yf(g)?g:new ft(g)}}),um=vo(function(o,h){return ht(h,function(g){g=un(g),$s(o,g,Ji(o[g],o))}),o});function Ef(o){var h=o==null?0:o.length,g=Mt();return o=h?Lt(o,function(C){if(typeof C[1]!="function")throw new kr(oi);return[g(C[0]),C[1]]}):[],si(function(C){for(var R=-1;++R<h;){var _=o[R];if(Ot(_[0],this,C))return Ot(_[1],this,C)}})}function Od(o){return Ec(is(o,fi))}function Pf(o){return function(){return o}}function Rd(o,h){return o==null||o!==o?h:o}var Lf=eu(),kg=eu(!0);function Ur(o){return o}function kc(o){return Ua(typeof o=="function"?o:is(o,fi))}function Ag(o){return Wo(is(o,fi))}function Mg(o,h){return po(o,is(h,fi))}var Oa=si(function(o,h){return function(g){return Te(g,o,h)}}),Bf=si(function(o,h){return function(g){return Te(o,g,h)}});function Mh(o,h,g){var C=ir(h),R=y(h,C);g==null&&!(Rn(h)&&(R.length||!C.length))&&(g=h,h=o,o=this,R=y(h,ir(h)));var _=!(Rn(g)&&"chain"in g)||!!g.chain,z=Ko(o);return ht(R,function(U){var te=h[U];o[U]=te,z&&(o.prototype[U]=function(){var be=this.__chain__;if(_||be){var we=o(this.__wrapped__),Me=we.__actions__=Ar(this.__actions__);return Me.push({func:te,args:arguments,thisArg:o}),we.__chain__=be,we}return te.apply(o,en([this.value()],arguments))})}),o}function Tg(){return it._===this&&(it._=ps),this}function Dd(){}function Ed(o){return o=Xt(o),si(function(h){return mo(h,o)})}var dm=fr(Lt),Og=fr($i),pm=fr(wi);function Nf(o){return Ul(o)?As(un(o)):Yd(o)}function Rg(o){return function(h){return o==null?W:S(o,h)}}var Pd=Vc(),Dg=Vc(!0);function Ld(){return[]}function If(){return!1}function gm(){return{}}function mm(){return""}function Bd(){return!0}function Nd(o,h){if(o=Xt(o),o<1||o>Ie)return[];var g=Ke,C=Ii(o,Ke);h=Mt(h),o-=Ke;for(var R=pn(C,h);++g<o;)h(g);return R}function Eg(o){return Ft(o)?Lt(o,un):Ps(o)?[o]:Ar(Ca(Ci(o)))}function Pg(o){var h=++Pa;return Ci(o)+h}var vm=nh(function(o,h){return o+h},0),ym=Yh("ceil"),Id=nh(function(o,h){return o/h},1),Ml=Yh("floor");function _d(o){return o&&o.length?dl(o,Ur,E):W}function Hd(o,h){return o&&o.length?dl(o,Mt(h,2),E):W}function Lg(o){return Is(o,Ur)}function Wd(o,h){return Is(o,Mt(h,2))}function Bg(o){return o&&o.length?dl(o,Ur,qs):W}function _f(o,h){return o&&o.length?dl(o,Mt(h,2),qs):W}var Th=nh(function(o,h){return o*h},1),Ng=Yh("round"),Hr=nh(function(o,h){return o-h},0);function Fd(o){return o&&o.length?Pr(o,Ur):0}function Ig(o,h){return o&&o.length?Pr(o,Mt(h,2)):0}return B.after=ju,B.ary=uf,B.assign=Yg,B.assignIn=tg,B.assignInWith=xh,B.assignWith=ig,B.at=fd,B.before=eo,B.bind=Ji,B.bindAll=um,B.bindKey=gh,B.castArray=yc,B.chain=hf,B.chunk=ah,B.compact=Jc,B.concat=uu,B.cond=Ef,B.conforms=Od,B.constant=Pf,B.countBy=xo,B.create=ng,B.curry=Mr,B.curryRight=df,B.debounce=os,B.defaults=rg,B.defaultsDeep=sg,B.defer=Tr,B.delay=Fp,B.difference=du,B.differenceBy=pu,B.differenceWith=gu,B.drop=hh,B.dropRight=bs,B.dropRightWhile=cc,B.dropWhile=Bn,B.fill=ch,B.filter=Lu,B.flatMap=Nu,B.flatMapDeep=Iu,B.flatMapDepth=_u,B.flatten=mu,B.flattenDeep=op,B.flattenDepth=tf,B.flip=qu,B.flow=Lf,B.flowRight=kg,B.fromPairs=yo,B.functions=kf,B.functionsIn=Af,B.groupBy=Bp,B.initial=wl,B.intersection=yu,B.intersectionBy=rn,B.intersectionWith=ap,B.invert=hg,B.invertBy=wc,B.invokeMap=Fu,B.iteratee=kc,B.keyBy=Vu,B.keys=ir,B.keysIn=as,B.map=dh,B.mapKeys=cg,B.mapValues=fg,B.matches=Ag,B.matchesProperty=Mg,B.memoize=gc,B.merge=ug,B.mergeWith=pd,B.method=Oa,B.methodOf=Bf,B.mixin=Mh,B.negate=ka,B.nthArg=Ed,B.omit=gd,B.omitBy=em,B.once=Vp,B.orderBy=Np,B.over=dm,B.overArgs=zp,B.overEvery=Og,B.overSome=pm,B.partial=pf,B.partialRight=Gu,B.partition=Ip,B.pick=tm,B.pickBy=md,B.property=Nf,B.propertyOf=Rg,B.pull=xu,B.pullAll=sf,B.pullAllBy=bu,B.pullAllWith=wu,B.pullAt=Su,B.range=Pd,B.rangeRight=Dg,B.rearg=gf,B.reject=Hp,B.remove=cp,B.rest=Kp,B.reverse=fc,B.sampleSize=Ku,B.set=pg,B.setWith=im,B.shuffle=$u,B.slice=Cu,B.sortBy=Wp,B.sortedUniq=mp,B.sortedUniqBy=vp,B.split=lm,B.spread=Xu,B.tail=yp,B.take=xp,B.takeRight=of,B.takeRightWhile=Au,B.takeWhile=Mu,B.tap=Mp,B.throttle=mc,B.thru=uh,B.toArray=Sf,B.toPairs=Sc,B.toPairsIn=vd,B.toPath=Eg,B.toPlainObject=Cf,B.transform=gg,B.unary=$p,B.union=lf,B.unionBy=Tu,B.unionWith=Ou,B.uniq=Ru,B.uniqBy=bp,B.uniqWith=wp,B.unset=yd,B.unzip=fh,B.unzipWith=Du,B.update=mg,B.updateWith=nm,B.values=Ma,B.valuesIn=vg,B.without=Eu,B.words=Td,B.wrap=vc,B.xor=Sp,B.xorBy=Cp,B.xorWith=uc,B.zip=af,B.zipObject=kp,B.zipObjectDeep=Pu,B.zipWith=Ap,B.entries=Sc,B.entriesIn=vd,B.extend=tg,B.extendWith=xh,Mh(B,B),B.add=vm,B.attempt=Ta,B.camelCase=sm,B.capitalize=bd,B.ceil=ym,B.clamp=rm,B.clone=Zp,B.cloneDeep=Up,B.cloneDeepWith=mh,B.cloneWith=Yu,B.conformsTo=xc,B.deburr=Ch,B.defaultTo=Rd,B.divide=Id,B.endsWith=wd,B.eq=ws,B.escape=Tf,B.escapeRegExp=yg,B.every=Qs,B.find=Lp,B.findIndex=Qc,B.findKey=ud,B.findLast=Bu,B.findLastIndex=ef,B.findLastKey=bh,B.floor=Ml,B.forEach=Hu,B.forEachRight=cf,B.forIn=og,B.forInRight=Jg,B.forOwn=dd,B.forOwnRight=lg,B.get=Mf,B.gt=mf,B.gte=Ju,B.has=ag,B.hasIn=wh,B.head=vu,B.identity=Ur,B.includes=Wu,B.indexOf=lp,B.inRange=Sh,B.invoke=Qg,B.isArguments=Sl,B.isArray=Ft,B.isArrayBuffer=vf,B.isArrayLike=ls,B.isArrayLikeObject=xn,B.isBoolean=jp,B.isBuffer=Cl,B.isDate=Qu,B.isElement=ed,B.isEmpty=qp,B.isEqual=td,B.isEqualWith=Gp,B.isError=yf,B.isFinite=Xp,B.isFunction=Ko,B.isInteger=id,B.isLength=Aa,B.isMap=nd,B.isMatch=Si,B.isMatchWith=Yp,B.isNaN=rd,B.isNative=bc,B.isNil=Jp,B.isNull=sd,B.isNumber=od,B.isObject=Rn,B.isObjectLike=Dn,B.isPlainObject=kl,B.isRegExp=xf,B.isSafeInteger=bf,B.isSet=wf,B.isString=vh,B.isSymbol=Ps,B.isTypedArray=Ss,B.isUndefined=Qp,B.isWeakMap=eg,B.isWeakSet=ld,B.join=hp,B.kebabCase=xg,B.last=Es,B.lastIndexOf=nf,B.lowerCase=Of,B.lowerFirst=kh,B.lt=yh,B.lte=ad,B.max=_d,B.maxBy=Hd,B.mean=Lg,B.meanBy=Wd,B.min=Bg,B.minBy=_f,B.stubArray=Ld,B.stubFalse=If,B.stubObject=gm,B.stubString=mm,B.stubTrue=Bd,B.multiply=Th,B.nth=rf,B.noConflict=Tg,B.noop=Dd,B.now=ph,B.pad=Rf,B.padEnd=bg,B.padStart=wg,B.parseInt=Sd,B.random=xd,B.reduce=zu,B.reduceRight=_p,B.repeat=Sg,B.replace=om,B.result=dg,B.round=Ng,B.runInContext=X,B.sample=ff,B.size=Zu,B.snakeCase=Cd,B.some=Uu,B.sortedIndex=fp,B.sortedIndexBy=ku,B.sortedIndexOf=up,B.sortedLastIndex=dp,B.sortedLastIndexBy=pp,B.sortedLastIndexOf=gp,B.startCase=Cg,B.startsWith=am,B.subtract=Hr,B.sum=Fd,B.sumBy=Ig,B.template=hm,B.times=Nd,B.toFinite=$o,B.toInteger=Xt,B.toLength=hd,B.toLower=Df,B.toNumber=Zr,B.toSafeInteger=cd,B.toString=Ci,B.toUpper=cm,B.trim=fm,B.trimEnd=kd,B.trimStart=Cc,B.truncate=Ad,B.unescape=Md,B.uniqueId=Pg,B.upperCase=Al,B.upperFirst=Ah,B.each=Hu,B.eachRight=cf,B.first=vu,Mh(B,function(){var o={};return f(B,function(h,g){zt.call(B.prototype,g)||(o[g]=h)}),o}(),{chain:!1}),B.VERSION=je,ht(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){B[o].placeholder=B}),ht(["drop","take"],function(o,h){ri.prototype[o]=function(g){g=g===W?1:ni(Xt(g),0);var C=this.__filtered__&&!h?new ri(this):this.clone();return C.__filtered__?C.__takeCount__=Ii(g,C.__takeCount__):C.__views__.push({size:Ii(g,Ke),type:o+(C.__dir__<0?"Right":"")}),C},ri.prototype[o+"Right"]=function(g){return this.reverse()[o](g).reverse()}}),ht(["filter","map","takeWhile"],function(o,h){var g=h+1,C=g==re||g==Dt;ri.prototype[o]=function(R){var _=this.clone();return _.__iteratees__.push({iteratee:Mt(R,3),type:g}),_.__filtered__=_.__filtered__||C,_}}),ht(["head","last"],function(o,h){var g="take"+(h?"Right":"");ri.prototype[o]=function(){return this[g](1).value()[0]}}),ht(["initial","tail"],function(o,h){var g="drop"+(h?"":"Right");ri.prototype[o]=function(){return this.__filtered__?new ri(this):this[g](1)}}),ri.prototype.compact=function(){return this.filter(Ur)},ri.prototype.find=function(o){return this.filter(o).head()},ri.prototype.findLast=function(o){return this.reverse().find(o)},ri.prototype.invokeMap=si(function(o,h){return typeof o=="function"?new ri(this):this.map(function(g){return Te(g,o,h)})}),ri.prototype.reject=function(o){return this.filter(ka(Mt(o)))},ri.prototype.slice=function(o,h){o=Xt(o);var g=this;return g.__filtered__&&(o>0||h<0)?new ri(g):(o<0?g=g.takeRight(-o):o&&(g=g.drop(o)),h!==W&&(h=Xt(h),g=h<0?g.dropRight(-h):g.take(h-o)),g)},ri.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},ri.prototype.toArray=function(){return this.take(Ke)},f(ri.prototype,function(o,h){var g=/^(?:filter|find|map|reject)|While$/.test(h),C=/^(?:head|last)$/.test(h),R=B[C?"take"+(h=="last"?"Right":""):h],_=C||/^find/.test(h);R&&(B.prototype[h]=function(){var z=this.__wrapped__,U=C?[1]:arguments,te=z instanceof ri,be=U[0],we=te||Ft(z),Me=function(hi){var ui=R.apply(B,en([hi],U));return C&&Ye?ui[0]:ui};we&&g&&typeof be=="function"&&be.length!=1&&(te=we=!1);var Ye=this.__chain__,mt=!!this.__actions__.length,pt=_&&!Ye,Nt=te&&!mt;if(!_&&we){z=Nt?z:new ri(this);var Rt=o.apply(z,U);return Rt.__actions__.push({func:uh,args:[Me],thisArg:W}),new Nr(Rt,Ye)}return pt&&Nt?o.apply(this,U):(Rt=this.thru(Me),pt?C?Rt.value()[0]:Rt.value():Rt)})}),ht(["pop","push","shift","sort","splice","unshift"],function(o){var h=Yr[o],g=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",C=/^(?:pop|shift)$/.test(o);B.prototype[o]=function(){var R=arguments;if(C&&!this.__chain__){var _=this.value();return h.apply(Ft(_)?_:[],R)}return this[g](function(z){return h.apply(Ft(z)?z:[],R)})}}),f(ri.prototype,function(o,h){var g=B[h];if(g){var C=g.name+"";zt.call(Bl,C)||(Bl[C]=[]),Bl[C].push({name:h,func:g})}}),Bl[ih(W,nt).name]=[{name:"wrapper",func:W}],ri.prototype.clone=zf,ri.prototype.reverse=Oc,ri.prototype.value=_a,B.prototype.at=dc,B.prototype.chain=pc,B.prototype.commit=Tp,B.prototype.next=Op,B.prototype.plant=Dp,B.prototype.reverse=Ep,B.prototype.toJSON=B.prototype.valueOf=B.prototype.value=Pp,B.prototype.first=B.prototype.head,Lo&&(B.prototype[Lo]=Rp),B},nl=il();it._=nl,q=function(){return nl}.call(gi,Le,gi,at),q!==W&&(at.exports=q)}).call(this)},55891:function(at,gi,Le){"use strict";Le.d(gi,{Z:function(){return An}});var q=Le(87462),W=Le(1413),je=Le(15671),k=Le(43144),Y=Le(97326),oi=Le(32531),Li=Le(73568),Be=Le(4942),Ze=Le(94184),tt=Le.n(Ze),fi=Le(64217),Fe=Le(67294),Yt={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},ct=Yt,Ti={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"},Se=function(mi){(0,oi.Z)(li,mi);var et=(0,Li.Z)(li);function li(){var $e;(0,je.Z)(this,li);for(var re=arguments.length,Ue=new Array(re),Dt=0;Dt<re;Dt++)Ue[Dt]=arguments[Dt];return $e=et.call.apply(et,[this].concat(Ue)),(0,Be.Z)((0,Y.Z)($e),"state",{goInputText:""}),(0,Be.Z)((0,Y.Z)($e),"getValidValue",function(){var qe=$e.state.goInputText;return!qe||Number.isNaN(qe)?void 0:Number(qe)}),(0,Be.Z)((0,Y.Z)($e),"buildOptionText",function(qe){return"".concat(qe," ").concat($e.props.locale.items_per_page)}),(0,Be.Z)((0,Y.Z)($e),"changeSize",function(qe){$e.props.changeSize(Number(qe))}),(0,Be.Z)((0,Y.Z)($e),"handleChange",function(qe){$e.setState({goInputText:qe.target.value})}),(0,Be.Z)((0,Y.Z)($e),"handleBlur",function(qe){var Ie=$e.props,Je=Ie.goButton,rt=Ie.quickGo,Ke=Ie.rootPrefixCls,_t=$e.state.goInputText;Je||_t===""||($e.setState({goInputText:""}),!(qe.relatedTarget&&(qe.relatedTarget.className.indexOf("".concat(Ke,"-item-link"))>=0||qe.relatedTarget.className.indexOf("".concat(Ke,"-item"))>=0))&&rt($e.getValidValue()))}),(0,Be.Z)((0,Y.Z)($e),"go",function(qe){var Ie=$e.state.goInputText;Ie!==""&&(qe.keyCode===ct.ENTER||qe.type==="click")&&($e.setState({goInputText:""}),$e.props.quickGo($e.getValidValue()))}),$e}return(0,k.Z)(li,[{key:"getPageSizeOptions",value:function(){var re=this.props,Ue=re.pageSize,Dt=re.pageSizeOptions;return Dt.some(function(qe){return qe.toString()===Ue.toString()})?Dt:Dt.concat([Ue.toString()]).sort(function(qe,Ie){var Je=Number.isNaN(Number(qe))?0:Number(qe),rt=Number.isNaN(Number(Ie))?0:Number(Ie);return Je-rt})}},{key:"render",value:function(){var re=this,Ue=this.props,Dt=Ue.pageSize,qe=Ue.locale,Ie=Ue.rootPrefixCls,Je=Ue.changeSize,rt=Ue.quickGo,Ke=Ue.goButton,_t=Ue.selectComponentClass,ai=Ue.buildOptionText,Oi=Ue.selectPrefixCls,Qi=Ue.disabled,on=this.state.goInputText,ln="".concat(Ie,"-options"),ki=_t,Ve=null,sr=null,bn=null;if(!Je&&!rt)return null;var zi=this.getPageSizeOptions();if(Je&&ki){var Yn=zi.map(function(di,$t){return Fe.createElement(ki.Option,{key:$t,value:di.toString()},(ai||re.buildOptionText)(di))});Ve=Fe.createElement(ki,{disabled:Qi,prefixCls:Oi,showSearch:!1,className:"".concat(ln,"-size-changer"),optionLabelProp:"children",popupMatchSelectWidth:!1,value:(Dt||zi[0]).toString(),onChange:this.changeSize,getPopupContainer:function($t){return $t.parentNode},"aria-label":qe.page_size,defaultOpen:!1},Yn)}return rt&&(Ke&&(bn=typeof Ke=="boolean"?Fe.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:Qi,className:"".concat(ln,"-quick-jumper-button")},qe.jump_to_confirm):Fe.createElement("span",{onClick:this.go,onKeyUp:this.go},Ke)),sr=Fe.createElement("div",{className:"".concat(ln,"-quick-jumper")},qe.jump_to,Fe.createElement("input",{disabled:Qi,type:"text",value:on,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":qe.page}),qe.page,bn)),Fe.createElement("li",{className:"".concat(ln)},Ve,sr)}}]),li}(Fe.Component);(0,Be.Z)(Se,"defaultProps",{pageSizeOptions:["10","20","50","100"]});var nt=Se,ei=function(et){var li,$e=et.rootPrefixCls,re=et.page,Ue=et.active,Dt=et.className,qe=et.showTitle,Ie=et.onClick,Je=et.onKeyPress,rt=et.itemRender,Ke="".concat($e,"-item"),_t=tt()(Ke,"".concat(Ke,"-").concat(re),(li={},(0,Be.Z)(li,"".concat(Ke,"-active"),Ue),(0,Be.Z)(li,"".concat(Ke,"-disabled"),!re),(0,Be.Z)(li,et.className,Dt),li)),ai=function(){Ie(re)},Oi=function(ln){Je(ln,Ie,re)},Qi=rt(re,"page",Fe.createElement("a",{rel:"nofollow"},re));return Qi?Fe.createElement("li",{title:qe?re.toString():null,className:_t,onClick:ai,onKeyPress:Oi,tabIndex:0},Qi):null},Jt=ei;function jt(){}function Bi(mi){var et=Number(mi);return typeof et=="number"&&!Number.isNaN(et)&&isFinite(et)&&Math.floor(et)===et}var _i=function(et,li,$e){return $e};function kt(mi,et,li){var $e=typeof mi=="undefined"?et.pageSize:mi;return Math.floor((li.total-1)/$e)+1}var sn=function(mi){(0,oi.Z)(li,mi);var et=(0,Li.Z)(li);function li($e){var re;(0,je.Z)(this,li),re=et.call(this,$e),(0,Be.Z)((0,Y.Z)(re),"paginationNode",Fe.createRef()),(0,Be.Z)((0,Y.Z)(re),"getJumpPrevPage",function(){return Math.max(1,re.state.current-(re.props.showLessItems?3:5))}),(0,Be.Z)((0,Y.Z)(re),"getJumpNextPage",function(){return Math.min(kt(void 0,re.state,re.props),re.state.current+(re.props.showLessItems?3:5))}),(0,Be.Z)((0,Y.Z)(re),"getItemIcon",function(Je,rt){var Ke=re.props.prefixCls,_t=Je||Fe.createElement("button",{type:"button","aria-label":rt,className:"".concat(Ke,"-item-link")});return typeof Je=="function"&&(_t=Fe.createElement(Je,(0,W.Z)({},re.props))),_t}),(0,Be.Z)((0,Y.Z)(re),"isValid",function(Je){var rt=re.props.total;return Bi(Je)&&Je!==re.state.current&&Bi(rt)&&rt>0}),(0,Be.Z)((0,Y.Z)(re),"shouldDisplayQuickJumper",function(){var Je=re.props,rt=Je.showQuickJumper,Ke=Je.total,_t=re.state.pageSize;return Ke<=_t?!1:rt}),(0,Be.Z)((0,Y.Z)(re),"handleKeyDown",function(Je){(Je.keyCode===ct.ARROW_UP||Je.keyCode===ct.ARROW_DOWN)&&Je.preventDefault()}),(0,Be.Z)((0,Y.Z)(re),"handleKeyUp",function(Je){var rt=re.getValidValue(Je),Ke=re.state.currentInputValue;rt!==Ke&&re.setState({currentInputValue:rt}),Je.keyCode===ct.ENTER?re.handleChange(rt):Je.keyCode===ct.ARROW_UP?re.handleChange(rt-1):Je.keyCode===ct.ARROW_DOWN&&re.handleChange(rt+1)}),(0,Be.Z)((0,Y.Z)(re),"handleBlur",function(Je){var rt=re.getValidValue(Je);re.handleChange(rt)}),(0,Be.Z)((0,Y.Z)(re),"changePageSize",function(Je){var rt=re.state.current,Ke=kt(Je,re.state,re.props);rt=rt>Ke?Ke:rt,Ke===0&&(rt=re.state.current),typeof Je=="number"&&("pageSize"in re.props||re.setState({pageSize:Je}),"current"in re.props||re.setState({current:rt,currentInputValue:rt})),re.props.onShowSizeChange(rt,Je),"onChange"in re.props&&re.props.onChange&&re.props.onChange(rt,Je)}),(0,Be.Z)((0,Y.Z)(re),"handleChange",function(Je){var rt=re.props,Ke=rt.disabled,_t=rt.onChange,ai=re.state,Oi=ai.pageSize,Qi=ai.current,on=ai.currentInputValue;if(re.isValid(Je)&&!Ke){var ln=kt(void 0,re.state,re.props),ki=Je;return Je>ln?ki=ln:Je<1&&(ki=1),"current"in re.props||re.setState({current:ki}),ki!==on&&re.setState({currentInputValue:ki}),_t(ki,Oi),ki}return Qi}),(0,Be.Z)((0,Y.Z)(re),"prev",function(){re.hasPrev()&&re.handleChange(re.state.current-1)}),(0,Be.Z)((0,Y.Z)(re),"next",function(){re.hasNext()&&re.handleChange(re.state.current+1)}),(0,Be.Z)((0,Y.Z)(re),"jumpPrev",function(){re.handleChange(re.getJumpPrevPage())}),(0,Be.Z)((0,Y.Z)(re),"jumpNext",function(){re.handleChange(re.getJumpNextPage())}),(0,Be.Z)((0,Y.Z)(re),"hasPrev",function(){return re.state.current>1}),(0,Be.Z)((0,Y.Z)(re),"hasNext",function(){return re.state.current<kt(void 0,re.state,re.props)}),(0,Be.Z)((0,Y.Z)(re),"runIfEnter",function(Je,rt){if(Je.key==="Enter"||Je.charCode===13){for(var Ke=arguments.length,_t=new Array(Ke>2?Ke-2:0),ai=2;ai<Ke;ai++)_t[ai-2]=arguments[ai];rt.apply(void 0,_t)}}),(0,Be.Z)((0,Y.Z)(re),"runIfEnterPrev",function(Je){re.runIfEnter(Je,re.prev)}),(0,Be.Z)((0,Y.Z)(re),"runIfEnterNext",function(Je){re.runIfEnter(Je,re.next)}),(0,Be.Z)((0,Y.Z)(re),"runIfEnterJumpPrev",function(Je){re.runIfEnter(Je,re.jumpPrev)}),(0,Be.Z)((0,Y.Z)(re),"runIfEnterJumpNext",function(Je){re.runIfEnter(Je,re.jumpNext)}),(0,Be.Z)((0,Y.Z)(re),"handleGoTO",function(Je){(Je.keyCode===ct.ENTER||Je.type==="click")&&re.handleChange(re.state.currentInputValue)}),(0,Be.Z)((0,Y.Z)(re),"renderPrev",function(Je){var rt=re.props,Ke=rt.prevIcon,_t=rt.itemRender,ai=_t(Je,"prev",re.getItemIcon(Ke,"prev page")),Oi=!re.hasPrev();return(0,Fe.isValidElement)(ai)?(0,Fe.cloneElement)(ai,{disabled:Oi}):ai}),(0,Be.Z)((0,Y.Z)(re),"renderNext",function(Je){var rt=re.props,Ke=rt.nextIcon,_t=rt.itemRender,ai=_t(Je,"next",re.getItemIcon(Ke,"next page")),Oi=!re.hasNext();return(0,Fe.isValidElement)(ai)?(0,Fe.cloneElement)(ai,{disabled:Oi}):ai});var Ue=$e.onChange!==jt,Dt="current"in $e;Dt&&!Ue&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var qe=$e.defaultCurrent;"current"in $e&&(qe=$e.current);var Ie=$e.defaultPageSize;return"pageSize"in $e&&(Ie=$e.pageSize),qe=Math.min(qe,kt(Ie,void 0,$e)),re.state={current:qe,currentInputValue:qe,pageSize:Ie},re}return(0,k.Z)(li,[{key:"componentDidUpdate",value:function(re,Ue){var Dt=this.props.prefixCls;if(Ue.current!==this.state.current&&this.paginationNode.current){var qe=this.paginationNode.current.querySelector(".".concat(Dt,"-item-").concat(Ue.current));if(qe&&document.activeElement===qe){var Ie;qe==null||(Ie=qe.blur)===null||Ie===void 0||Ie.call(qe)}}}},{key:"getValidValue",value:function(re){var Ue=re.target.value,Dt=kt(void 0,this.state,this.props),qe=this.state.currentInputValue,Ie;return Ue===""?Ie=Ue:Number.isNaN(Number(Ue))?Ie=qe:Ue>=Dt?Ie=Dt:Ie=Number(Ue),Ie}},{key:"getShowSizeChanger",value:function(){var re=this.props,Ue=re.showSizeChanger,Dt=re.total,qe=re.totalBoundaryShowSizeChanger;return typeof Ue!="undefined"?Ue:Dt>qe}},{key:"render",value:function(){var re=this.props,Ue=re.prefixCls,Dt=re.className,qe=re.style,Ie=re.disabled,Je=re.hideOnSinglePage,rt=re.total,Ke=re.locale,_t=re.showQuickJumper,ai=re.showLessItems,Oi=re.showTitle,Qi=re.showTotal,on=re.simple,ln=re.itemRender,ki=re.showPrevNextJumpers,Ve=re.jumpPrevIcon,sr=re.jumpNextIcon,bn=re.selectComponentClass,zi=re.selectPrefixCls,Yn=re.pageSizeOptions,di=this.state,$t=di.current,Or=di.pageSize,an=di.currentInputValue;if(Je===!0&&rt<=Or)return null;var vi=kt(void 0,this.state,this.props),Ri=[],gr=null,hn=null,Rr=null,Fr=null,Dr=null,Nn=_t&&_t.goButton,Gi=ai?1:2,Mn=$t-1>0?$t-1:0,qt=$t+1<vi?$t+1:vi,Ct=(0,fi.Z)(this.props,{aria:!0,data:!0}),Hi=Qi&&Fe.createElement("li",{className:"".concat(Ue,"-total-text")},Qi(rt,[rt===0?0:($t-1)*Or+1,$t*Or>rt?rt:$t*Or]));if(on){Nn&&(typeof Nn=="boolean"?Dr=Fe.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},Ke.jump_to_confirm):Dr=Fe.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},Nn),Dr=Fe.createElement("li",{title:Oi?"".concat(Ke.jump_to).concat($t,"/").concat(vi):null,className:"".concat(Ue,"-simple-pager")},Dr));var mr=this.renderPrev(Mn);return Fe.createElement("ul",(0,q.Z)({className:tt()(Ue,"".concat(Ue,"-simple"),(0,Be.Z)({},"".concat(Ue,"-disabled"),Ie),Dt),style:qe,ref:this.paginationNode},Ct),Hi,mr?Fe.createElement("li",{title:Oi?Ke.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:tt()("".concat(Ue,"-prev"),(0,Be.Z)({},"".concat(Ue,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},mr):null,Fe.createElement("li",{title:Oi?"".concat($t,"/").concat(vi):null,className:"".concat(Ue,"-simple-pager")},Fe.createElement("input",{type:"text",value:an,disabled:Ie,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:3}),Fe.createElement("span",{className:"".concat(Ue,"-slash")},"/"),vi),Fe.createElement("li",{title:Oi?Ke.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:tt()("".concat(Ue,"-next"),(0,Be.Z)({},"".concat(Ue,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(qt)),Fe.createElement(nt,{disabled:Ie,locale:Ke,rootPrefixCls:Ue,selectComponentClass:bn,selectPrefixCls:zi,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:$t,pageSize:Or,pageSizeOptions:Yn,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:Dr}))}if(vi<=3+Gi*2){var Ee={locale:Ke,rootPrefixCls:Ue,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:Oi,itemRender:ln};vi||Ri.push(Fe.createElement(Jt,(0,q.Z)({},Ee,{key:"noPager",page:1,className:"".concat(Ue,"-item-disabled")})));for(var In=1;In<=vi;In+=1){var Vn=$t===In;Ri.push(Fe.createElement(Jt,(0,q.Z)({},Ee,{key:In,page:In,active:Vn})))}}else{var qr=ai?Ke.prev_3:Ke.prev_5,cn=ai?Ke.next_3:Ke.next_5,dn=ln(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(Ve,"prev page")),_n=ln(this.getJumpNextPage(),"jump-next",this.getItemIcon(sr,"next page"));ki&&(gr=dn?Fe.createElement("li",{title:Oi?qr:null,key:"prev",onClick:this.jumpPrev,tabIndex:0,onKeyPress:this.runIfEnterJumpPrev,className:tt()("".concat(Ue,"-jump-prev"),(0,Be.Z)({},"".concat(Ue,"-jump-prev-custom-icon"),!!Ve))},dn):null,hn=_n?Fe.createElement("li",{title:Oi?cn:null,key:"next",tabIndex:0,onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:tt()("".concat(Ue,"-jump-next"),(0,Be.Z)({},"".concat(Ue,"-jump-next-custom-icon"),!!sr))},_n):null),Fr=Fe.createElement(Jt,{locale:Ke,last:!0,rootPrefixCls:Ue,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:vi,page:vi,active:!1,showTitle:Oi,itemRender:ln}),Rr=Fe.createElement(Jt,{locale:Ke,rootPrefixCls:Ue,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:Oi,itemRender:ln});var Di=Math.max(1,$t-Gi),En=Math.min($t+Gi,vi);$t-1<=Gi&&(En=1+Gi*2),vi-$t<=Gi&&(Di=vi-Gi*2);for(var Tn=Di;Tn<=En;Tn+=1){var zn=$t===Tn;Ri.push(Fe.createElement(Jt,{locale:Ke,rootPrefixCls:Ue,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:Tn,page:Tn,active:zn,showTitle:Oi,itemRender:ln}))}$t-1>=Gi*2&&$t!==1+2&&(Ri[0]=(0,Fe.cloneElement)(Ri[0],{className:"".concat(Ue,"-item-after-jump-prev")}),Ri.unshift(gr)),vi-$t>=Gi*2&&$t!==vi-2&&(Ri[Ri.length-1]=(0,Fe.cloneElement)(Ri[Ri.length-1],{className:"".concat(Ue,"-item-before-jump-next")}),Ri.push(hn)),Di!==1&&Ri.unshift(Rr),En!==vi&&Ri.push(Fr)}var Pn=!this.hasPrev()||!vi,yi=!this.hasNext()||!vi,vr=this.renderPrev(Mn),or=this.renderNext(qt);return Fe.createElement("ul",(0,q.Z)({className:tt()(Ue,Dt,(0,Be.Z)({},"".concat(Ue,"-disabled"),Ie)),style:qe,ref:this.paginationNode},Ct),Hi,vr?Fe.createElement("li",{title:Oi?Ke.prev_page:null,onClick:this.prev,tabIndex:Pn?null:0,onKeyPress:this.runIfEnterPrev,className:tt()("".concat(Ue,"-prev"),(0,Be.Z)({},"".concat(Ue,"-disabled"),Pn)),"aria-disabled":Pn},vr):null,Ri,or?Fe.createElement("li",{title:Oi?Ke.next_page:null,onClick:this.next,tabIndex:yi?null:0,onKeyPress:this.runIfEnterNext,className:tt()("".concat(Ue,"-next"),(0,Be.Z)({},"".concat(Ue,"-disabled"),yi)),"aria-disabled":yi},or):null,Fe.createElement(nt,{disabled:Ie,locale:Ke,rootPrefixCls:Ue,selectComponentClass:bn,selectPrefixCls:zi,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:$t,pageSize:Or,pageSizeOptions:Yn,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:Nn}))}}],[{key:"getDerivedStateFromProps",value:function(re,Ue){var Dt={};if("current"in re&&(Dt.current=re.current,re.current!==Ue.current&&(Dt.currentInputValue=Dt.current)),"pageSize"in re&&re.pageSize!==Ue.pageSize){var qe=Ue.current,Ie=kt(re.pageSize,Ue,re);qe=qe>Ie?Ie:qe,"current"in re||(Dt.current=qe,Dt.currentInputValue=qe),Dt.pageSize=re.pageSize}return Dt}}]),li}(Fe.Component);(0,Be.Z)(sn,"defaultProps",{defaultCurrent:1,total:0,defaultPageSize:10,onChange:jt,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:jt,locale:Ti,style:{},itemRender:_i,totalBoundaryShowSizeChanger:50});var An=sn},80741:function(at,gi,Le){"use strict";Le.d(gi,{ZP:function(){return ta}});var q={},W="rc-table-internal-hook",je=Le(11157),k=Le(67294),Y=(0,je.jM)(),oi=Y.makeImmutable,Li=Y.responseImmutable,Be=Y.useImmutableMark,Ze=(0,je.kr)(),tt=Ze;function fi(H,J){var Q=k.useRef(0);Q.current+=1;var G=k.useRef(H),ee=[];Object.keys(H||{}).map(function(pe){var ye;(H==null?void 0:H[pe])!==((ye=G.current)===null||ye===void 0?void 0:ye[pe])&&ee.push(pe)}),G.current=H;var ae=k.useRef([]);return ee.length&&(ae.current=ee),k.useDebugValue(Q.current),k.useDebugValue(ae.current.join(", ")),J&&console.log("".concat(J,":"),Q.current,ae.current),Q.current}var Fe=null,Yt=k.memo(function(){var H=fi();return k.createElement("h1",null,"Render Times: ",H)});Yt.displayName="RenderBlock";var ct=Le(87462),Ti=Le(71002),Se=Le(1413),nt=Le(4942),ei=Le(97685),Jt=Le(94184),jt=Le.n(Jt),Bi=Le(56982),_i=Le(91881),kt=Le(88306),sn=Le(80334),An=k.createContext({renderWithProps:!1}),mi=An,et="RC_TABLE_KEY";function li(H){return H==null?[]:Array.isArray(H)?H:[H]}function $e(H){var J=[],Q={};return H.forEach(function(G){for(var ee=G||{},ae=ee.key,pe=ee.dataIndex,ye=ae||li(pe).join("-")||et;Q[ye];)ye="".concat(ye,"_next");Q[ye]=!0,J.push(ye)}),J}function re(H){return H!=null}function Ue(H){return H&&(0,Ti.Z)(H)==="object"&&!Array.isArray(H)&&!k.isValidElement(H)}function Dt(H,J,Q,G,ee,ae){var pe=k.useContext(mi),ye=Be(),ge=(0,Bi.Z)(function(){if(re(G))return[G];var de=J==null||J===""?[]:Array.isArray(J)?J:[J],xe=(0,kt.Z)(H,de),Pe=xe,_e=void 0;if(ee){var Ce=ee(xe,H,Q);Ue(Ce)?(Pe=Ce.children,_e=Ce.props,pe.renderWithProps=!0):Pe=Ce}return[Pe,_e]},[ye,H,G,J,ee,Q],function(de,xe){if(ae){var Pe=(0,ei.Z)(de,2),_e=Pe[1],Ce=(0,ei.Z)(xe,2),Qe=Ce[1];return ae(Qe,_e)}return pe.renderWithProps?!0:!(0,_i.Z)(de,xe,!0)});return ge}function qe(H,J,Q,G){var ee=H+J-1;return H<=G&&ee>=Q}function Ie(H,J){return(0,je.qp)(tt,function(Q){var G=qe(H,J||1,Q.hoverStartRow,Q.hoverEndRow);return[G,Q.onHover]})}var Je=function(J){var Q=J.ellipsis,G=J.rowType,ee=J.children,ae,pe=Q===!0?{showTitle:!0}:Q;return pe&&(pe.showTitle||G==="header")&&(typeof ee=="string"||typeof ee=="number"?ae=ee.toString():k.isValidElement(ee)&&typeof ee.props.children=="string"&&(ae=ee.props.children)),ae};function rt(H){var J,Q,G,ee,ae,pe,ye,ge,de=H.component,xe=H.children,Pe=H.ellipsis,_e=H.scope,Ce=H.prefixCls,Qe=H.className,vt=H.align,ot=H.record,wt=H.render,gt=H.dataIndex,it=H.renderIndex,At=H.shouldCellUpdate,xt=H.index,Tt=H.rowType,pi=H.colSpan,Bt=H.rowSpan,Ht=H.fixLeft,bi=H.fixRight,ut=H.firstFixLeft,lt=H.lastFixLeft,ze=H.firstFixRight,bt=H.lastFixRight,Ot=H.appendNode,Et=H.additionalProps,ht=Et===void 0?{}:Et,Gt=H.isSticky,$i="".concat(Ce,"-cell"),Zi=(0,je.qp)(tt,["supportSticky","allColumnsFixedLeft"]),Wi=Zi.supportSticky,Qn=Zi.allColumnsFixedLeft,Lt=Dt(ot,gt,it,xe,wt,At),en=(0,ei.Z)(Lt,2),Pt=en[0],Vt=en[1],wi={},Xr=typeof Ht=="number"&&Wi,tn=typeof bi=="number"&&Wi;Xr&&(wi.position="sticky",wi.left=Ht),tn&&(wi.position="sticky",wi.right=bi);var Ui=(J=(Q=(G=Vt==null?void 0:Vt.colSpan)!==null&&G!==void 0?G:ht.colSpan)!==null&&Q!==void 0?Q:pi)!==null&&J!==void 0?J:1,wr=(ee=(ae=(pe=Vt==null?void 0:Vt.rowSpan)!==null&&pe!==void 0?pe:ht.rowSpan)!==null&&ae!==void 0?ae:Bt)!==null&&ee!==void 0?ee:1,Yi=Ie(xt,wr),nn=(0,ei.Z)(Yi,2),$n=nn[0],Er=nn[1],Is=function(Hn){var Ni;ot&&Er(xt,xt+wr-1),ht==null||(Ni=ht.onMouseEnter)===null||Ni===void 0||Ni.call(ht,Hn)},As=function(Hn){var Ni;ot&&Er(-1,-1),ht==null||(Ni=ht.onMouseLeave)===null||Ni===void 0||Ni.call(ht,Hn)};if(Ui===0||wr===0)return null;var Sr=(ye=ht.title)!==null&&ye!==void 0?ye:Je({rowType:Tt,ellipsis:Pe,children:Pt}),Zn=jt()($i,Qe,(ge={},(0,nt.Z)(ge,"".concat($i,"-fix-left"),Xr&&Wi),(0,nt.Z)(ge,"".concat($i,"-fix-left-first"),ut&&Wi),(0,nt.Z)(ge,"".concat($i,"-fix-left-last"),lt&&Wi),(0,nt.Z)(ge,"".concat($i,"-fix-left-all"),lt&&Qn&&Wi),(0,nt.Z)(ge,"".concat($i,"-fix-right"),tn&&Wi),(0,nt.Z)(ge,"".concat($i,"-fix-right-first"),ze&&Wi),(0,nt.Z)(ge,"".concat($i,"-fix-right-last"),bt&&Wi),(0,nt.Z)(ge,"".concat($i,"-ellipsis"),Pe),(0,nt.Z)(ge,"".concat($i,"-with-append"),Ot),(0,nt.Z)(ge,"".concat($i,"-fix-sticky"),(Xr||tn)&&Gt&&Wi),(0,nt.Z)(ge,"".concat($i,"-row-hover"),!Vt&&$n),ge),ht.className,Vt==null?void 0:Vt.className),Ai={};vt&&(Ai.textAlign=vt);var Pr=(0,Se.Z)((0,Se.Z)((0,Se.Z)((0,Se.Z)({},wi),ht.style),Ai),Vt==null?void 0:Vt.style),pn=Pt;return(0,Ti.Z)(pn)==="object"&&!Array.isArray(pn)&&!k.isValidElement(pn)&&(pn=null),Pe&&(lt||ze)&&(pn=k.createElement("span",{className:"".concat($i,"-content")},pn)),k.createElement(de,(0,ct.Z)({},Vt,ht,{className:Zn,style:Pr,title:Sr,scope:_e,onMouseEnter:Is,onMouseLeave:As,colSpan:Ui!==1?Ui:null,rowSpan:wr!==1?wr:null}),Ot,pn)}var Ke=k.memo(rt);function _t(H,J,Q,G,ee,ae){var pe=Q[H]||{},ye=Q[J]||{},ge,de;pe.fixed==="left"?ge=G.left[ee==="rtl"?J:H]:ye.fixed==="right"&&(de=G.right[ee==="rtl"?H:J]);var xe=!1,Pe=!1,_e=!1,Ce=!1,Qe=Q[J+1],vt=Q[H-1],ot=!(ae!=null&&ae.children);if(ee==="rtl"){if(ge!==void 0){var wt=vt&&vt.fixed==="left";Ce=!wt&&ot}else if(de!==void 0){var gt=Qe&&Qe.fixed==="right";_e=!gt&&ot}}else if(ge!==void 0){var it=Qe&&Qe.fixed==="left";xe=!it&&ot}else if(de!==void 0){var At=vt&&vt.fixed==="right";Pe=!At&&ot}return{fixLeft:ge,fixRight:de,lastFixLeft:xe,firstFixRight:Pe,lastFixRight:_e,firstFixLeft:Ce,isSticky:G.isSticky}}var ai=k.createContext({}),Oi=ai;function Qi(H){var J=H.className,Q=H.index,G=H.children,ee=H.colSpan,ae=ee===void 0?1:ee,pe=H.rowSpan,ye=H.align,ge=(0,je.qp)(tt,["prefixCls","direction"]),de=ge.prefixCls,xe=ge.direction,Pe=k.useContext(Oi),_e=Pe.scrollColumnIndex,Ce=Pe.stickyOffsets,Qe=Pe.flattenColumns,vt=Pe.columns,ot=Q+ae-1,wt=ot+1===_e?ae+1:ae,gt=_t(Q,Q+wt-1,Qe,Ce,xe,vt==null?void 0:vt[Q]);return k.createElement(Ke,(0,ct.Z)({className:J,index:Q,component:"td",prefixCls:de,record:null,dataIndex:null,align:ye,colSpan:wt,rowSpan:pe,render:function(){return G}},gt))}var on=Le(45987),ln=["children"];function ki(H){var J=H.children,Q=(0,on.Z)(H,ln);return k.createElement("tr",Q,J)}function Ve(H){var J=H.children;return J}Ve.Row=ki,Ve.Cell=Qi;var sr=Ve;function bn(H){var J=H.children,Q=H.stickyOffsets,G=H.flattenColumns,ee=H.columns,ae=(0,je.qp)(tt,"prefixCls"),pe=G.length-1,ye=G[pe],ge=k.useMemo(function(){return{stickyOffsets:Q,flattenColumns:G,scrollColumnIndex:ye!=null&&ye.scrollbar?pe:null,columns:ee}},[ye,G,pe,Q,ee]);return k.createElement(Oi.Provider,{value:ge},k.createElement("tfoot",{className:"".concat(ae,"-summary")},J))}var zi=Li(bn),Yn=sr,di=Le(48555),$t=Le(5110),Or=Le(79370),an=Le(74204),vi=Le(66680),Ri=Le(64217);function gr(H,J,Q,G,ee,ae,pe){H.push({record:J,indent:Q,index:pe});var ye=ae(J),ge=ee==null?void 0:ee.has(ye);if(J&&Array.isArray(J[G])&&ge)for(var de=0;de<J[G].length;de+=1)gr(H,J[G][de],Q+1,G,ee,ae,de)}function hn(H,J,Q,G){var ee=k.useMemo(function(){if(Q!=null&&Q.size){for(var ae=[],pe=0;pe<(H==null?void 0:H.length);pe+=1){var ye=H[pe];gr(ae,ye,0,J,Q,G,pe)}return ae}return H==null?void 0:H.map(function(ge,de){return{record:ge,indent:0,index:de}})},[H,J,Q,G]);return ee}var Rr=Le(56790);function Fr(H,J,Q,G){var ee=(0,je.qp)(tt,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex","expandedKeys","childrenColumnName","rowExpandable","onRow"]),ae=ee.flattenColumns,pe=ee.expandableType,ye=ee.expandedKeys,ge=ee.childrenColumnName,de=ee.onTriggerExpand,xe=ee.rowExpandable,Pe=ee.onRow,_e=ee.expandRowByClick,Ce=ee.rowClassName,Qe=pe==="nest",vt=pe==="row"&&(!xe||xe(H)),ot=vt||Qe,wt=ye&&ye.has(J),gt=ge&&H&&H[ge],it=(0,Rr.zX)(de),At=Pe==null?void 0:Pe(H,Q),xt=At==null?void 0:At.onClick,Tt=function(bi){_e&&ot&&de(H,bi);for(var ut=arguments.length,lt=new Array(ut>1?ut-1:0),ze=1;ze<ut;ze++)lt[ze-1]=arguments[ze];xt==null||xt.apply(void 0,[bi].concat(lt))},pi;typeof Ce=="string"?pi=Ce:typeof Ce=="function"&&(pi=Ce(H,Q,G));var Bt=$e(ae);return(0,Se.Z)((0,Se.Z)({},ee),{},{columnsKey:Bt,nestExpandable:Qe,expanded:wt,hasNestChildren:gt,record:H,onTriggerExpand:it,rowSupportExpand:vt,expandable:ot,rowProps:(0,Se.Z)((0,Se.Z)({},At),{},{className:jt()(pi,At==null?void 0:At.className),onClick:Tt})})}function Dr(H){var J=H.prefixCls,Q=H.children,G=H.component,ee=H.cellComponent,ae=H.className,pe=H.expanded,ye=H.colSpan,ge=H.isEmpty,de=(0,je.qp)(tt,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),xe=de.scrollbarSize,Pe=de.fixHeader,_e=de.fixColumn,Ce=de.componentWidth,Qe=de.horizonScroll,vt=Q;return(ge?Qe&&Ce:_e)&&(vt=k.createElement("div",{style:{width:Ce-(Pe?xe:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(J,"-expanded-row-fixed")},vt)),k.createElement(G,{className:ae,style:{display:pe?null:"none"}},k.createElement(Ke,{component:ee,prefixCls:J,colSpan:ye},vt))}var Nn=Dr;function Gi(H,J,Q,G,ee){var ae=H.record,pe=H.prefixCls,ye=H.columnsKey,ge=H.fixedInfoList,de=H.expandIconColumnIndex,xe=H.nestExpandable,Pe=H.indentSize,_e=H.expandIcon,Ce=H.expanded,Qe=H.hasNestChildren,vt=H.onTriggerExpand,ot=ye[Q],wt=ge[Q],gt;Q===(de||0)&&xe&&(gt=k.createElement(k.Fragment,null,k.createElement("span",{style:{paddingLeft:"".concat(Pe*G,"px")},className:"".concat(pe,"-row-indent indent-level-").concat(G)}),_e({prefixCls:pe,expanded:Ce,expandable:Qe,record:ae,onExpand:vt})));var it;return J.onCell&&(it=J.onCell(ae,ee)),{key:ot,fixedInfo:wt,appendCellNode:gt,additionalCellProps:it||{}}}function Mn(H){var J=H.className,Q=H.style,G=H.record,ee=H.index,ae=H.renderIndex,pe=H.rowKey,ye=H.indent,ge=ye===void 0?0:ye,de=H.rowComponent,xe=H.cellComponent,Pe=H.scopeCellComponent,_e=Fr(G,pe,ee,ge),Ce=_e.prefixCls,Qe=_e.flattenColumns,vt=_e.expandedRowClassName,ot=_e.expandedRowRender,wt=_e.rowProps,gt=_e.expanded,it=_e.rowSupportExpand,At=k.useRef(!1);At.current||(At.current=gt);var xt=k.createElement(de,(0,ct.Z)({},wt,{"data-row-key":pe,className:jt()(J,"".concat(Ce,"-row"),"".concat(Ce,"-row-level-").concat(ge),wt==null?void 0:wt.className),style:(0,Se.Z)((0,Se.Z)({},Q),wt==null?void 0:wt.style)}),Qe.map(function(Ht,bi){var ut=Ht.render,lt=Ht.dataIndex,ze=Ht.className,bt=Gi(_e,Ht,bi,ge,ee),Ot=bt.key,Et=bt.fixedInfo,ht=bt.appendCellNode,Gt=bt.additionalCellProps;return k.createElement(Ke,(0,ct.Z)({className:ze,ellipsis:Ht.ellipsis,align:Ht.align,scope:Ht.rowScope,component:Ht.rowScope?Pe:xe,prefixCls:Ce,key:Ot,record:G,index:ee,renderIndex:ae,dataIndex:lt,render:ut,shouldCellUpdate:Ht.shouldCellUpdate},Et,{appendNode:ht,additionalProps:Gt}))})),Tt;if(it&&(At.current||gt)){var pi=ot(G,ee,ge+1,gt),Bt=vt&&vt(G,ee,ge);Tt=k.createElement(Nn,{expanded:gt,className:jt()("".concat(Ce,"-expanded-row"),"".concat(Ce,"-expanded-row-level-").concat(ge+1),Bt),prefixCls:Ce,component:de,cellComponent:xe,colSpan:Qe.length,isEmpty:!1},pi)}return k.createElement(k.Fragment,null,xt,Tt)}Mn.displayName="BodyRow";var qt=Li(Mn);function Ct(H){var J=H.columnKey,Q=H.onColumnResize,G=k.useRef();return k.useEffect(function(){G.current&&Q(J,G.current.offsetWidth)},[]),k.createElement(di.Z,{data:J},k.createElement("td",{ref:G,style:{padding:0,border:0,height:0}},k.createElement("div",{style:{height:0,overflow:"hidden"}},"\xA0")))}function Hi(H){var J=H.prefixCls,Q=H.columnsKey,G=H.onColumnResize;return k.createElement("tr",{"aria-hidden":"true",className:"".concat(J,"-measure-row"),style:{height:0,fontSize:0}},k.createElement(di.Z.Collection,{onBatchResize:function(ae){ae.forEach(function(pe){var ye=pe.data,ge=pe.size;G(ye,ge.offsetWidth)})}},Q.map(function(ee){return k.createElement(Ct,{key:ee,columnKey:ee,onColumnResize:G})})))}function mr(H){var J=H.data,Q=H.measureColumnWidth,G=(0,je.qp)(tt,["prefixCls","getComponent","onColumnResize","flattenColumns","getRowKey","expandedKeys","childrenColumnName","emptyNode"]),ee=G.prefixCls,ae=G.getComponent,pe=G.onColumnResize,ye=G.flattenColumns,ge=G.getRowKey,de=G.expandedKeys,xe=G.childrenColumnName,Pe=G.emptyNode,_e=hn(J,xe,de,ge),Ce=k.useRef({renderWithProps:!1}),Qe=ae(["body","wrapper"],"tbody"),vt=ae(["body","row"],"tr"),ot=ae(["body","cell"],"td"),wt=ae(["body","cell"],"th"),gt;J.length?gt=_e.map(function(At,xt){var Tt=At.record,pi=At.indent,Bt=At.index,Ht=ge(Tt,xt);return k.createElement(qt,{key:Ht,rowKey:Ht,record:Tt,index:xt,renderIndex:Bt,rowComponent:vt,cellComponent:ot,scopeCellComponent:wt,getRowKey:ge,indent:pi})}):gt=k.createElement(Nn,{expanded:!0,className:"".concat(ee,"-placeholder"),prefixCls:ee,component:vt,cellComponent:ot,colSpan:ye.length,isEmpty:!0},Pe);var it=$e(ye);return k.createElement(mi.Provider,{value:Ce.current},k.createElement(Qe,{className:"".concat(ee,"-tbody")},Q&&k.createElement(Hi,{prefixCls:ee,columnsKey:it,onColumnResize:pe}),gt))}mr.displayName="Body";var Ee=Li(mr),In=["expandable"],Vn="RC_TABLE_INTERNAL_COL_DEFINE";function qr(H){var J=H.expandable,Q=(0,on.Z)(H,In),G;return"expandable"in H?G=(0,Se.Z)((0,Se.Z)({},Q),J):G=Q,G.showExpandColumn===!1&&(G.expandIconColumnIndex=-1),G}var cn=["columnType"];function dn(H){for(var J=H.colWidths,Q=H.columns,G=H.columCount,ee=[],ae=G||Q.length,pe=!1,ye=ae-1;ye>=0;ye-=1){var ge=J[ye],de=Q&&Q[ye],xe=de&&de[Vn];if(ge||xe||pe){var Pe=xe||{},_e=Pe.columnType,Ce=(0,on.Z)(Pe,cn);ee.unshift(k.createElement("col",(0,ct.Z)({key:ye,style:{width:ge}},Ce))),pe=!0}}return k.createElement("colgroup",null,ee)}var _n=dn,Di=Le(74902),En=Le(42550),Tn=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];function zn(H,J){return(0,k.useMemo)(function(){for(var Q=[],G=0;G<J;G+=1){var ee=H[G];if(ee!==void 0)Q[G]=ee;else return null}return Q},[H.join("_"),J])}var Pn=k.forwardRef(function(H,J){var Q=H.className,G=H.noData,ee=H.columns,ae=H.flattenColumns,pe=H.colWidths,ye=H.columCount,ge=H.stickyOffsets,de=H.direction,xe=H.fixHeader,Pe=H.stickyTopOffset,_e=H.stickyBottomOffset,Ce=H.stickyClassName,Qe=H.onScroll,vt=H.maxContentScroll,ot=H.children,wt=(0,on.Z)(H,Tn),gt=(0,je.qp)(tt,["prefixCls","scrollbarSize","isSticky"]),it=gt.prefixCls,At=gt.scrollbarSize,xt=gt.isSticky,Tt=xt&&!xe?0:At,pi=k.useRef(null),Bt=k.useCallback(function(Et){(0,En.mH)(J,Et),(0,En.mH)(pi,Et)},[]);k.useEffect(function(){var Et;function ht(Gt){var $i=Gt,Zi=$i.currentTarget,Wi=$i.deltaX;Wi&&(Qe({currentTarget:Zi,scrollLeft:Zi.scrollLeft+Wi}),Gt.preventDefault())}return(Et=pi.current)===null||Et===void 0||Et.addEventListener("wheel",ht),function(){var Gt;(Gt=pi.current)===null||Gt===void 0||Gt.removeEventListener("wheel",ht)}},[]);var Ht=k.useMemo(function(){return ae.every(function(Et){return Et.width})},[ae]),bi=ae[ae.length-1],ut={fixed:bi?bi.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(it,"-cell-scrollbar")}}},lt=(0,k.useMemo)(function(){return Tt?[].concat((0,Di.Z)(ee),[ut]):ee},[Tt,ee]),ze=(0,k.useMemo)(function(){return Tt?[].concat((0,Di.Z)(ae),[ut]):ae},[Tt,ae]),bt=(0,k.useMemo)(function(){var Et=ge.right,ht=ge.left;return(0,Se.Z)((0,Se.Z)({},ge),{},{left:de==="rtl"?[].concat((0,Di.Z)(ht.map(function(Gt){return Gt+Tt})),[0]):ht,right:de==="rtl"?Et:[].concat((0,Di.Z)(Et.map(function(Gt){return Gt+Tt})),[0]),isSticky:xt})},[Tt,ge,xt]),Ot=zn(pe,ye);return k.createElement("div",{style:(0,Se.Z)({overflow:"hidden"},xt?{top:Pe,bottom:_e}:{}),ref:Bt,className:jt()(Q,(0,nt.Z)({},Ce,!!Ce))},k.createElement("table",{style:{tableLayout:"fixed",visibility:G||Ot?null:"hidden"}},(!G||!vt||Ht)&&k.createElement(_n,{colWidths:Ot?[].concat((0,Di.Z)(Ot),[Tt]):[],columCount:ye+1,columns:ze}),ot((0,Se.Z)((0,Se.Z)({},wt),{},{stickyOffsets:bt,columns:lt,flattenColumns:ze}))))});Pn.displayName="FixedHolder";var yi=k.memo(Pn);function vr(H){var J=H.cells,Q=H.stickyOffsets,G=H.flattenColumns,ee=H.rowComponent,ae=H.cellComponent,pe=H.tdCellComponent,ye=H.onHeaderRow,ge=H.index,de=(0,je.qp)(tt,["prefixCls","direction"]),xe=de.prefixCls,Pe=de.direction,_e;ye&&(_e=ye(J.map(function(Qe){return Qe.column}),ge));var Ce=$e(J.map(function(Qe){return Qe.column}));return k.createElement(ee,_e,J.map(function(Qe,vt){var ot=Qe.column,wt=_t(Qe.colStart,Qe.colEnd,G,Q,Pe,ot),gt;return ot&&ot.onHeaderCell&&(gt=Qe.column.onHeaderCell(ot)),k.createElement(Ke,(0,ct.Z)({},Qe,{scope:ot.title?Qe.colSpan>1?"colgroup":"col":null,ellipsis:ot.ellipsis,align:ot.align,component:ot.title?ae:pe,prefixCls:xe,key:Ce[vt]},wt,{additionalProps:gt,rowType:"header"}))}))}vr.displayName="HeaderRow";var or=vr;function fe(H){var J=[];function Q(pe,ye){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;J[ge]=J[ge]||[];var de=ye,xe=pe.filter(Boolean).map(function(Pe){var _e={key:Pe.key,className:Pe.className||"",children:Pe.title,column:Pe,colStart:de},Ce=1,Qe=Pe.children;return Qe&&Qe.length>0&&(Ce=Q(Qe,de,ge+1).reduce(function(vt,ot){return vt+ot},0),_e.hasSubColumns=!0),"colSpan"in Pe&&(Ce=Pe.colSpan),"rowSpan"in Pe&&(_e.rowSpan=Pe.rowSpan),_e.colSpan=Ce,_e.colEnd=_e.colStart+Ce-1,J[ge].push(_e),de+=Ce,Ce});return xe}Q(H,0);for(var G=J.length,ee=function(ye){J[ye].forEach(function(ge){!("rowSpan"in ge)&&!ge.hasSubColumns&&(ge.rowSpan=G-ye)})},ae=0;ae<G;ae+=1)ee(ae);return J}function bo(H){var J=H.stickyOffsets,Q=H.columns,G=H.flattenColumns,ee=H.onHeaderRow,ae=(0,je.qp)(tt,["prefixCls","getComponent"]),pe=ae.prefixCls,ye=ae.getComponent,ge=k.useMemo(function(){return fe(Q)},[Q]),de=ye(["header","wrapper"],"thead"),xe=ye(["header","row"],"tr"),Pe=ye(["header","cell"],"th"),_e=ye(["header","cell"],"td");return k.createElement(de,{className:"".concat(pe,"-thead")},ge.map(function(Ce,Qe){var vt=k.createElement(or,{key:Qe,flattenColumns:G,cells:Ce,stickyOffsets:J,rowComponent:xe,cellComponent:Pe,tdCellComponent:_e,onHeaderRow:ee,index:Qe});return vt}))}var lr=Li(bo),wn=Le(50344);function yr(H){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return typeof J=="number"?J:J.endsWith("%")?H*parseFloat(J)/100:null}function Kn(H,J,Q){return k.useMemo(function(){if(J&&J>0){var G=0,ee=0;H.forEach(function(_e){var Ce=yr(J,_e.width);Ce?G+=Ce:ee+=1});var ae=Math.max(J,Q),pe=Math.max(ae-G,ee),ye=ee,ge=pe/ee,de=0,xe=H.map(function(_e){var Ce=(0,Se.Z)({},_e),Qe=yr(J,Ce.width);if(Qe)Ce.width=Qe;else{var vt=Math.floor(ge);Ce.width=ye===1?pe:vt,pe-=vt,ye-=1}return de+=Ce.width,Ce});if(de<ae){var Pe=ae/de;pe=ae,xe.forEach(function(_e,Ce){var Qe=Math.floor(_e.width*Pe);_e.width=Ce===xe.length-1?pe:Qe,pe-=Qe})}return[xe,Math.max(de,ae)]}return[H,J]},[H,J,Q])}var cs=["children"],Jn=["fixed"];function xr(H){return(0,wn.Z)(H).filter(function(J){return k.isValidElement(J)}).map(function(J){var Q=J.key,G=J.props,ee=G.children,ae=(0,on.Z)(G,cs),pe=(0,Se.Z)({key:Q},ae);return ee&&(pe.children=xr(ee)),pe})}function Xi(H){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key";return H.filter(function(Q){return Q&&(0,Ti.Z)(Q)==="object"}).reduce(function(Q,G,ee){var ae=G.fixed,pe=ae===!0?"left":ae,ye="".concat(J,"-").concat(ee),ge=G.children;return ge&&ge.length>0?[].concat((0,Di.Z)(Q),(0,Di.Z)(Xi(ge,ye).map(function(de){return(0,Se.Z)({fixed:pe},de)}))):[].concat((0,Di.Z)(Q),[(0,Se.Z)((0,Se.Z)({key:ye},G),{},{fixed:pe})])},[])}function Ki(H){for(var J=!0,Q=0;Q<H.length;Q+=1){var G=H[Q];if(J&&G.fixed!=="left")J=!1;else if(!J&&G.fixed==="left"){warning(!1,"Index ".concat(Q-1," of `columns` missing `fixed='left'` prop."));break}}for(var ee=!0,ae=H.length-1;ae>=0;ae-=1){var pe=H[ae];if(ee&&pe.fixed!=="right")ee=!1;else if(!ee&&pe.fixed==="right"){warning(!1,"Index ".concat(ae+1," of `columns` missing `fixed='right'` prop."));break}}}function wo(H){return H.map(function(J){var Q=J.fixed,G=(0,on.Z)(J,Jn),ee=Q;return Q==="left"?ee="right":Q==="right"&&(ee="left"),(0,Se.Z)({fixed:ee},G)})}function Ls(H,J){var Q=H.prefixCls,G=H.columns,ee=H.children,ae=H.expandable,pe=H.expandedKeys,ye=H.columnTitle,ge=H.getRowKey,de=H.onTriggerExpand,xe=H.expandIcon,Pe=H.rowExpandable,_e=H.expandIconColumnIndex,Ce=H.direction,Qe=H.expandRowByClick,vt=H.columnWidth,ot=H.fixed,wt=H.scrollWidth,gt=H.clientWidth,it=k.useMemo(function(){return G||xr(ee)},[G,ee]),At=k.useMemo(function(){if(ae){var ut,lt=it.slice();if(!lt.includes(q)){var ze=_e||0;ze>=0&&lt.splice(ze,0,q)}var bt=lt.indexOf(q);lt=lt.filter(function(Gt,$i){return Gt!==q||$i===bt});var Ot=it[bt],Et;(ot==="left"||ot)&&!_e?Et="left":(ot==="right"||ot)&&_e===it.length?Et="right":Et=Ot?Ot.fixed:null;var ht=(ut={},(0,nt.Z)(ut,Vn,{className:"".concat(Q,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),(0,nt.Z)(ut,"title",ye),(0,nt.Z)(ut,"fixed",Et),(0,nt.Z)(ut,"className","".concat(Q,"-row-expand-icon-cell")),(0,nt.Z)(ut,"width",vt),(0,nt.Z)(ut,"render",function($i,Zi,Wi){var Qn=ge(Zi,Wi),Lt=pe.has(Qn),en=Pe?Pe(Zi):!0,Pt=xe({prefixCls:Q,expanded:Lt,expandable:en,record:Zi,onExpand:de});return Qe?k.createElement("span",{onClick:function(wi){return wi.stopPropagation()}},Pt):Pt}),ut);return lt.map(function(Gt){return Gt===q?ht:Gt})}return it.filter(function(Gt){return Gt!==q})},[ae,it,ge,pe,xe,Ce]),xt=k.useMemo(function(){var ut=At;return J&&(ut=J(ut)),ut.length||(ut=[{render:function(){return null}}]),ut},[J,At,Ce]),Tt=k.useMemo(function(){return Ce==="rtl"?wo(Xi(xt)):Xi(xt)},[xt,Ce,wt]),pi=Kn(Tt,wt,gt),Bt=(0,ei.Z)(pi,2),Ht=Bt[0],bi=Bt[1];return[xt,Ht,bi]}var fs=Ls;function io(H){var J,Q=H.prefixCls,G=H.record,ee=H.onExpand,ae=H.expanded,pe=H.expandable,ye="".concat(Q,"-row-expand-icon");if(!pe)return k.createElement("span",{className:jt()(ye,"".concat(Q,"-row-spaced"))});var ge=function(xe){ee(G,xe),xe.stopPropagation()};return k.createElement("span",{className:jt()(ye,(J={},(0,nt.Z)(J,"".concat(Q,"-row-expanded"),ae),(0,nt.Z)(J,"".concat(Q,"-row-collapsed"),!ae),J)),onClick:ge})}function no(H,J,Q){var G=[];function ee(ae){(ae||[]).forEach(function(pe,ye){G.push(J(pe,ye)),ee(pe[Q])})}return ee(H),G}function Vr(H,J,Q){var G=qr(H),ee=G.expandIcon,ae=G.expandedRowKeys,pe=G.defaultExpandedRowKeys,ye=G.defaultExpandAllRows,ge=G.expandedRowRender,de=G.onExpand,xe=G.onExpandedRowsChange,Pe=G.childrenColumnName,_e=ee||io,Ce=Pe||"children",Qe=k.useMemo(function(){return ge?"row":H.expandable&&H.internalHooks===W&&H.expandable.__PARENT_RENDER_ICON__||J.some(function(xt){return xt&&(0,Ti.Z)(xt)==="object"&&xt[Ce]})?"nest":!1},[!!ge,J]),vt=k.useState(function(){return pe||(ye?no(J,Q,Ce):[])}),ot=(0,ei.Z)(vt,2),wt=ot[0],gt=ot[1],it=k.useMemo(function(){return new Set(ae||wt||[])},[ae,wt]),At=k.useCallback(function(xt){var Tt=Q(xt,J.indexOf(xt)),pi,Bt=it.has(Tt);Bt?(it.delete(Tt),pi=(0,Di.Z)(it)):pi=[].concat((0,Di.Z)(it),[Tt]),gt(pi),de&&de(!Bt,xt),xe&&xe(pi)},[Q,it,J,de,xe]);return[G,Qe,it,_e,Ce,At]}function Ln(H,J,Q,G){var ee=H.map(function(ae,pe){return _t(pe,pe,H,J,Q,G==null?void 0:G[pe])});return(0,Bi.Z)(function(){return ee},[ee],function(ae,pe){return!(0,_i.Z)(ae,pe)})}function F(H){var J=(0,k.useRef)(H),Q=(0,k.useState)({}),G=(0,ei.Z)(Q,2),ee=G[1],ae=(0,k.useRef)(null),pe=(0,k.useRef)([]);function ye(ge){pe.current.push(ge);var de=Promise.resolve();ae.current=de,de.then(function(){if(ae.current===de){var xe=pe.current,Pe=J.current;pe.current=[],xe.forEach(function(_e){J.current=_e(J.current)}),ae.current=null,Pe!==J.current&&ee({})}})}return(0,k.useEffect)(function(){return function(){ae.current=null}},[]),[J.current,ye]}function v(H){var J=(0,k.useRef)(H||null),Q=(0,k.useRef)();function G(){window.clearTimeout(Q.current)}function ee(pe){J.current=pe,G(),Q.current=window.setTimeout(function(){J.current=null,Q.current=void 0},100)}function ae(){return J.current}return(0,k.useEffect)(function(){return G},[]),[ee,ae]}function b(){var H=k.useState(-1),J=(0,ei.Z)(H,2),Q=J[0],G=J[1],ee=k.useState(-1),ae=(0,ei.Z)(ee,2),pe=ae[0],ye=ae[1],ge=k.useCallback(function(de,xe){G(de),ye(xe)},[]);return[Q,pe,ge]}var A=Le(98924),O=(0,A.Z)()?window:null;function L(H,J){var Q=(0,Ti.Z)(H)==="object"?H:{},G=Q.offsetHeader,ee=G===void 0?0:G,ae=Q.offsetSummary,pe=ae===void 0?0:ae,ye=Q.offsetScroll,ge=ye===void 0?0:ye,de=Q.getContainer,xe=de===void 0?function(){return O}:de,Pe=xe()||O;return k.useMemo(function(){var _e=!!H;return{isSticky:_e,stickyClassName:_e?"".concat(J,"-sticky-holder"):"",offsetHeader:ee,offsetSummary:pe,offsetScroll:ge,container:Pe}},[ge,ee,pe,J,Pe])}function N(H,J,Q){var G=(0,k.useMemo)(function(){for(var ee=[],ae=[],pe=0,ye=0,ge=0;ge<J;ge+=1)if(Q==="rtl"){ae[ge]=ye,ye+=H[ge]||0;var de=J-ge-1;ee[de]=pe,pe+=H[de]||0}else{ee[ge]=pe,pe+=H[ge]||0;var xe=J-ge-1;ae[xe]=ye,ye+=H[xe]||0}return{left:ee,right:ae}},[H,J,Q]);return G}var K=N;function j(H){var J=H.className,Q=H.children;return k.createElement("div",{className:J},Q)}var ce=j,ve=Le(64019),ke=Le(27678),He=function(J,Q){var G,ee,ae=J.scrollBodyRef,pe=J.onScroll,ye=J.offsetScroll,ge=J.container,de=(0,je.qp)(tt,"prefixCls"),xe=((G=ae.current)===null||G===void 0?void 0:G.scrollWidth)||0,Pe=((ee=ae.current)===null||ee===void 0?void 0:ee.clientWidth)||0,_e=xe&&Pe*(Pe/xe),Ce=k.useRef(),Qe=F({scrollLeft:0,isHiddenScrollBar:!1}),vt=(0,ei.Z)(Qe,2),ot=vt[0],wt=vt[1],gt=k.useRef({delta:0,x:0}),it=k.useState(!1),At=(0,ei.Z)(it,2),xt=At[0],Tt=At[1],pi=function(){Tt(!1)},Bt=function(ze){ze.persist(),gt.current.delta=ze.pageX-ot.scrollLeft,gt.current.x=0,Tt(!0),ze.preventDefault()},Ht=function(ze){var bt,Ot=ze||((bt=window)===null||bt===void 0?void 0:bt.event),Et=Ot.buttons;if(!xt||Et===0){xt&&Tt(!1);return}var ht=gt.current.x+ze.pageX-gt.current.x-gt.current.delta;ht<=0&&(ht=0),ht+_e>=Pe&&(ht=Pe-_e),pe({scrollLeft:ht/Pe*(xe+2)}),gt.current.x=ze.pageX},bi=function(){if(ae.current){var ze=(0,ke.os)(ae.current).top,bt=ze+ae.current.offsetHeight,Ot=ge===window?document.documentElement.scrollTop+window.innerHeight:(0,ke.os)(ge).top+ge.clientHeight;bt-(0,an.Z)()<=Ot||ze>=Ot-ye?wt(function(Et){return(0,Se.Z)((0,Se.Z)({},Et),{},{isHiddenScrollBar:!0})}):wt(function(Et){return(0,Se.Z)((0,Se.Z)({},Et),{},{isHiddenScrollBar:!1})})}},ut=function(ze){wt(function(bt){return(0,Se.Z)((0,Se.Z)({},bt),{},{scrollLeft:ze/xe*Pe||0})})};return k.useImperativeHandle(Q,function(){return{setScrollLeft:ut}}),k.useEffect(function(){var lt=(0,ve.Z)(document.body,"mouseup",pi,!1),ze=(0,ve.Z)(document.body,"mousemove",Ht,!1);return bi(),function(){lt.remove(),ze.remove()}},[_e,xt]),k.useEffect(function(){var lt=(0,ve.Z)(ge,"scroll",bi,!1),ze=(0,ve.Z)(window,"resize",bi,!1);return function(){lt.remove(),ze.remove()}},[ge]),k.useEffect(function(){ot.isHiddenScrollBar||wt(function(lt){var ze=ae.current;return ze?(0,Se.Z)((0,Se.Z)({},lt),{},{scrollLeft:ze.scrollLeft/ze.scrollWidth*ze.clientWidth}):lt})},[ot.isHiddenScrollBar]),xe<=Pe||!_e||ot.isHiddenScrollBar?null:k.createElement("div",{style:{height:(0,an.Z)(),width:Pe,bottom:ye},className:"".concat(de,"-sticky-scroll")},k.createElement("div",{onMouseDown:Bt,ref:Ce,className:jt()("".concat(de,"-sticky-scroll-bar"),(0,nt.Z)({},"".concat(de,"-sticky-scroll-bar-active"),xt)),style:{width:"".concat(_e,"px"),transform:"translate3d(".concat(ot.scrollLeft,"px, 0, 0)")}}))},st=k.forwardRef(He);function xi(H){return null}var br=xi;function fn(H){return null}var ar=fn,Uo="rc-table",Tl=[],jo={};function qo(){return"No Data"}function jl(H,J){var Q,G=(0,Se.Z)({rowKey:"key",prefixCls:Uo,emptyText:qo},H),ee=G.prefixCls,ae=G.className,pe=G.rowClassName,ye=G.style,ge=G.data,de=G.rowKey,xe=G.scroll,Pe=G.tableLayout,_e=G.direction,Ce=G.title,Qe=G.footer,vt=G.summary,ot=G.caption,wt=G.id,gt=G.showHeader,it=G.components,At=G.emptyText,xt=G.onRow,Tt=G.onHeaderRow,pi=G.internalHooks,Bt=G.transformColumns,Ht=G.internalRefs,bi=G.tailor,ut=G.getContainerWidth,lt=G.sticky,ze=ge||Tl,bt=!!ze.length,Ot=pi===W,Et=k.useCallback(function(Ut,ii){return(0,kt.Z)(it,Ut)||ii},[it]),ht=k.useMemo(function(){return typeof de=="function"?de:function(Ut){var ii=Ut&&Ut[de];return ii}},[de]),Gt=Et(["body"]),$i=b(),Zi=(0,ei.Z)($i,3),Wi=Zi[0],Qn=Zi[1],Lt=Zi[2],en=Vr(G,ze,ht),Pt=(0,ei.Z)(en,6),Vt=Pt[0],wi=Pt[1],Xr=Pt[2],tn=Pt[3],Ui=Pt[4],wr=Pt[5],Yi=xe==null?void 0:xe.x,nn=k.useState(0),$n=(0,ei.Z)(nn,2),Er=$n[0],Is=$n[1],As=fs((0,Se.Z)((0,Se.Z)((0,Se.Z)({},G),Vt),{},{expandable:!!Vt.expandedRowRender,columnTitle:Vt.columnTitle,expandedKeys:Xr,getRowKey:ht,onTriggerExpand:wr,expandIcon:tn,expandIconColumnIndex:Vt.expandIconColumnIndex,direction:_e,scrollWidth:Ot&&bi&&typeof Yi=="number"?Yi:null,clientWidth:Er}),Ot?Bt:null),Sr=(0,ei.Z)(As,3),Zn=Sr[0],Ai=Sr[1],Pr=Sr[2],pn=Pr!=null?Pr:Yi,Yo=k.useMemo(function(){return{columns:Zn,flattenColumns:Ai}},[Zn,Ai]),Hn=k.useRef(),Ni=k.useRef(),On=k.useRef(),_s=k.useRef();k.useImperativeHandle(J,function(){return{nativeElement:Hn.current,scrollTo:function(ii){var Un;if(On.current instanceof HTMLElement){var ni=ii.index,Ii=ii.top,Ws=ii.key;if(Ii){var ms;(ms=On.current)===null||ms===void 0||ms.scrollTo({top:Ii})}else{var jn,al=Ws!=null?Ws:ht(ze[ni]);(jn=On.current.querySelector('[data-row-key="'.concat(al,'"]')))===null||jn===void 0||jn.scrollIntoView()}}else(Un=On.current)!==null&&Un!==void 0&&Un.scrollTo&&On.current.scrollTo(ii)}}});var Ao=k.useRef(),so=k.useState(!1),Jo=(0,ei.Z)(so,2),ia=Jo[0],oo=Jo[1],Ea=k.useState(!1),na=(0,ei.Z)(Ea,2),Hs=na[0],Ms=na[1],Mo=F(new Map),Qo=(0,ei.Z)(Mo,2),Dl=Qo[0],ds=Qo[1],el=$e(Ai),tl=el.map(function(Ut){return Dl.get(Ut)}),ra=k.useMemo(function(){return tl},[tl.join("_")]),lo=K(ra,Ai.length,_e),Wn=xe&&re(xe.y),gn=xe&&re(pn)||!!Vt.fixed,Ts=gn&&Ai.some(function(Ut){var ii=Ut.fixed;return ii}),Mi=k.useRef(),To=L(lt,ee),Lr=To.isSticky,Oo=To.offsetHeader,il=To.offsetSummary,nl=To.offsetScroll,X=To.stickyClassName,ue=To.container,oe=k.useMemo(function(){return vt==null?void 0:vt(ze)},[vt,ze]),Xe=(Wn||Lr)&&k.isValidElement(oe)&&oe.type===sr&&oe.props.fixed,ft,Zt,mn;Wn&&(Zt={overflowY:"scroll",maxHeight:xe.y}),gn&&(ft={overflowX:"auto"},Wn||(Zt={overflowY:"hidden"}),mn={width:pn===!0?"auto":pn,minWidth:"100%"});var ti=k.useCallback(function(Ut,ii){(0,$t.Z)(Hn.current)&&ds(function(Un){if(Un.get(Ut)!==ii){var ni=new Map(Un);return ni.set(Ut,ii),ni}return Un})},[]),rl=v(null),Cr=(0,ei.Z)(rl,2),kr=Cr[0],Yr=Cr[1];function Ro(Ut,ii){ii&&(typeof ii=="function"?ii(Ut):ii.scrollLeft!==Ut&&(ii.scrollLeft=Ut,ii.scrollLeft!==Ut&&setTimeout(function(){ii.scrollLeft=Ut},0)))}var hr=(0,vi.Z)(function(Ut){var ii=Ut.currentTarget,Un=Ut.scrollLeft,ni=_e==="rtl",Ii=typeof Un=="number"?Un:ii.scrollLeft,Ws=ii||jo;if(!Yr()||Yr()===Ws){var ms;kr(Ws),Ro(Ii,Ni.current),Ro(Ii,On.current),Ro(Ii,Ao.current),Ro(Ii,(ms=Mi.current)===null||ms===void 0?void 0:ms.setScrollLeft)}var jn=ii||Ni.current;if(jn){var al=jn.scrollWidth,Io=jn.clientWidth;if(al===Io){oo(!1),Ms(!1);return}ni?(oo(-Ii<al-Io),Ms(-Ii>0)):(oo(Ii>0),Ms(Ii<al-Io))}}),ao=function(){gn&&On.current?hr({currentTarget:On.current}):(oo(!1),Ms(!1))},sl=function(ii){var Un=ii.width,ni=Hn.current?Hn.current.offsetWidth:Un;Ot&&ut&&Hn.current&&(ni=ut(Hn.current,ni)||ni),ni!==Er&&(ao(),Is(ni))},zt=k.useRef(!1);k.useEffect(function(){zt.current&&ao()},[gn,ge,Zn.length]),k.useEffect(function(){zt.current=!0},[]);var Pa=k.useState(0),zr=(0,ei.Z)(Pa,2),Fn=zr[0],cr=zr[1],ps=k.useState(!0),Do=(0,ei.Z)(ps,2),vn=Do[0],gs=Do[1];k.useEffect(function(){(!bi||!Ot)&&(On.current instanceof Element?cr((0,an.o)(On.current).width):cr((0,an.o)(_s.current).width)),gs((0,Or.G)("position","sticky"))},[]),k.useEffect(function(){Ot&&Ht&&(Ht.body.current=On.current)});var ho=k.useCallback(function(Ut){return k.createElement(k.Fragment,null,k.createElement(lr,Ut),Xe==="top"&&k.createElement(zi,Ut,oe))},[Xe,oe]),La=k.useCallback(function(Ut){return k.createElement(zi,Ut,oe)},[oe]),Eo=Et(["table"],"table"),Os=k.useMemo(function(){return Pe||(Ts?pn==="max-content"?"auto":"fixed":Wn||Lr||Ai.some(function(Ut){var ii=Ut.ellipsis;return ii})?"fixed":"auto")},[Wn,Ts,Ai,Pe,Lr]),Po,Jr={colWidths:ra,columCount:Ai.length,stickyOffsets:lo,onHeaderRow:Tt,fixHeader:Wn,scroll:xe},sa=k.useMemo(function(){return bt?null:typeof At=="function"?At():At},[bt,At]),Lo=k.createElement(Ee,{data:ze,measureColumnWidth:Wn||gn||Lr}),Qr=k.createElement(_n,{colWidths:Ai.map(function(Ut){var ii=Ut.width;return ii}),columns:Ai}),co=ot!=null?k.createElement("caption",{className:"".concat(ee,"-caption")},ot):void 0,Bo=(0,Ri.Z)(G,{data:!0}),El=(0,Ri.Z)(G,{aria:!0});if(Wn||Lr){var oa;typeof Gt=="function"?(oa=Gt(ze,{scrollbarSize:Fn,ref:On,onScroll:hr}),Jr.colWidths=Ai.map(function(Ut,ii){var Un=Ut.width,ni=ii===Ai.length-1?Un-Fn:Un;return typeof ni=="number"&&!Number.isNaN(ni)?ni:0})):oa=k.createElement("div",{style:(0,Se.Z)((0,Se.Z)({},ft),Zt),onScroll:hr,ref:On,className:jt()("".concat(ee,"-body"))},k.createElement(Eo,(0,ct.Z)({style:(0,Se.Z)((0,Se.Z)({},mn),{},{tableLayout:Os})},El),co,Qr,Lo,!Xe&&oe&&k.createElement(zi,{stickyOffsets:lo,flattenColumns:Ai,columns:Zn},oe)));var No=(0,Se.Z)((0,Se.Z)((0,Se.Z)({noData:!ze.length,maxContentScroll:gn&&pn==="max-content"},Jr),Yo),{},{direction:_e,stickyClassName:X,onScroll:hr});Po=k.createElement(k.Fragment,null,gt!==!1&&k.createElement(yi,(0,ct.Z)({},No,{stickyTopOffset:Oo,className:"".concat(ee,"-header"),ref:Ni}),ho),oa,Xe&&Xe!=="top"&&k.createElement(yi,(0,ct.Z)({},No,{stickyBottomOffset:il,className:"".concat(ee,"-summary"),ref:Ao}),La),Lr&&On.current&&On.current instanceof Element&&k.createElement(st,{ref:Mi,offsetScroll:nl,scrollBodyRef:On,onScroll:hr,container:ue}))}else Po=k.createElement("div",{style:(0,Se.Z)((0,Se.Z)({},ft),Zt),className:jt()("".concat(ee,"-content")),onScroll:hr,ref:On},k.createElement(Eo,(0,ct.Z)({style:(0,Se.Z)((0,Se.Z)({},mn),{},{tableLayout:Os})},El),co,Qr,gt!==!1&&k.createElement(lr,(0,ct.Z)({},Jr,Yo)),Lo,oe&&k.createElement(zi,{stickyOffsets:lo,flattenColumns:Ai,columns:Zn},oe)));var Kr=k.createElement("div",(0,ct.Z)({className:jt()(ee,ae,(Q={},(0,nt.Z)(Q,"".concat(ee,"-rtl"),_e==="rtl"),(0,nt.Z)(Q,"".concat(ee,"-ping-left"),ia),(0,nt.Z)(Q,"".concat(ee,"-ping-right"),Hs),(0,nt.Z)(Q,"".concat(ee,"-layout-fixed"),Pe==="fixed"),(0,nt.Z)(Q,"".concat(ee,"-fixed-header"),Wn),(0,nt.Z)(Q,"".concat(ee,"-fixed-column"),Ts),(0,nt.Z)(Q,"".concat(ee,"-scroll-horizontal"),gn),(0,nt.Z)(Q,"".concat(ee,"-has-fix-left"),Ai[0]&&Ai[0].fixed),(0,nt.Z)(Q,"".concat(ee,"-has-fix-right"),Ai[Ai.length-1]&&Ai[Ai.length-1].fixed==="right"),Q)),style:ye,id:wt,ref:Hn},Bo),Ce&&k.createElement(ce,{className:"".concat(ee,"-title")},Ce(ze)),k.createElement("div",{ref:_s,className:"".concat(ee,"-container")},Po),Qe&&k.createElement(ce,{className:"".concat(ee,"-footer")},Qe(ze)));gn&&(Kr=k.createElement(di.Z,{onResize:sl},Kr));var ol=Ln(Ai,lo,_e,Zn),ll=k.useMemo(function(){return{scrollX:pn,prefixCls:ee,getComponent:Et,scrollbarSize:Fn,direction:_e,fixedInfoList:ol,isSticky:Lr,supportSticky:vn,componentWidth:Er,fixHeader:Wn,fixColumn:Ts,horizonScroll:gn,tableLayout:Os,rowClassName:pe,expandedRowClassName:Vt.expandedRowClassName,expandIcon:tn,expandableType:wi,expandRowByClick:Vt.expandRowByClick,expandedRowRender:Vt.expandedRowRender,onTriggerExpand:wr,expandIconColumnIndex:Vt.expandIconColumnIndex,indentSize:Vt.indentSize,allColumnsFixedLeft:Ai.every(function(Ut){return Ut.fixed==="left"}),emptyNode:sa,columns:Zn,flattenColumns:Ai,onColumnResize:ti,hoverStartRow:Wi,hoverEndRow:Qn,onHover:Lt,rowExpandable:Vt.rowExpandable,onRow:xt,getRowKey:ht,expandedKeys:Xr,childrenColumnName:Ui}},[pn,ee,Et,Fn,_e,ol,Lr,vn,Er,Wn,Ts,gn,Os,pe,Vt.expandedRowClassName,tn,wi,Vt.expandRowByClick,Vt.expandedRowRender,wr,Vt.expandIconColumnIndex,Vt.indentSize,sa,Zn,Ai,ti,Wi,Qn,Lt,Vt.rowExpandable,xt,ht,Xr,Ui]);return k.createElement(tt.Provider,{value:ll},Kr)}var So=k.forwardRef(jl);function ql(H){return oi(So,H)}var Bs=ql();Bs.EXPAND_COLUMN=q,Bs.INTERNAL_HOOKS=W,Bs.Column=br,Bs.ColumnGroup=ar,Bs.Summary=Yn;var Gl=Bs,Xl=Le(85344),Go=(0,je.kr)(null),Yl=(0,je.kr)(null);function Jl(H,J,Q){var G=J||1;return Q[H+G]-(Q[H]||0)}function Ol(H){var J=H.rowInfo,Q=H.column,G=H.colIndex,ee=H.indent,ae=H.index,pe=H.renderIndex,ye=H.record,ge=H.style,de=H.className,xe=H.inverse,Pe=H.getHeight,_e=Q.render,Ce=Q.dataIndex,Qe=Q.className,vt=Q.width,ot=(0,je.qp)(Yl,["columnsOffset"]),wt=ot.columnsOffset,gt=Gi(J,Q,G,ee,ae),it=gt.key,At=gt.fixedInfo,xt=gt.appendCellNode,Tt=gt.additionalCellProps,pi=Tt.style,Bt=Tt.colSpan,Ht=Bt===void 0?1:Bt,bi=Tt.rowSpan,ut=bi===void 0?1:bi,lt=G-1,ze=Jl(lt,Ht,wt),bt=Ht>1?vt-ze:0,Ot=(0,Se.Z)((0,Se.Z)((0,Se.Z)({},pi),ge),{},{flex:"0 0 ".concat(ze,"px"),width:"".concat(ze,"px"),marginRight:bt,pointerEvents:"auto"}),Et=k.useMemo(function(){return xe?ut<=1:Ht===0||ut===0||ut>1},[ut,Ht,xe]);Et?Ot.visibility="hidden":xe&&(Ot.height=Pe==null?void 0:Pe(ut));var ht=Et?function(){return null}:_e,Gt={};return(ut===0||Ht===0)&&(Gt.rowSpan=1,Gt.colSpan=1),k.createElement(Ke,(0,ct.Z)({className:jt()(Qe,de),ellipsis:Q.ellipsis,align:Q.align,scope:Q.rowScope,component:"div",prefixCls:J.prefixCls,key:it,record:ye,index:ae,renderIndex:pe,dataIndex:Ce,render:ht,shouldCellUpdate:Q.shouldCellUpdate},At,{appendNode:xt,additionalProps:(0,Se.Z)((0,Se.Z)({},Tt),{},{style:Ot},Gt)}))}var Ql=Ol,ro=["data","index","className","rowKey","style","extra","getHeight"],ea=k.forwardRef(function(H,J){var Q=H.data,G=H.index,ee=H.className,ae=H.rowKey,pe=H.style,ye=H.extra,ge=H.getHeight,de=(0,on.Z)(H,ro),xe=Q.record,Pe=Q.indent,_e=Q.index,Ce=(0,je.qp)(tt,["prefixCls","flattenColumns","fixColumn","componentWidth","scrollX"]),Qe=Ce.scrollX,vt=Ce.flattenColumns,ot=Ce.prefixCls,wt=Ce.fixColumn,gt=Ce.componentWidth,it=Fr(xe,ae,G,Pe),At=it.rowSupportExpand,xt=it.expanded,Tt=it.rowProps,pi=it.expandedRowRender,Bt=it.expandedRowClassName,Ht;if(At&&xt){var bi=pi(xe,G,Pe+1,xt),ut=Bt==null?void 0:Bt(xe,G,Pe),lt={};wt&&(lt={style:(0,nt.Z)({},"--virtual-width","".concat(gt,"px"))});var ze="".concat(ot,"-expanded-row-cell");Ht=k.createElement("div",{className:jt()("".concat(ot,"-expanded-row"),"".concat(ot,"-expanded-row-level-").concat(Pe+1),ut)},k.createElement(Ke,{component:"div",prefixCls:ot,className:jt()(ze,(0,nt.Z)({},"".concat(ze,"-fixed"),wt)),additionalProps:lt},bi))}var bt=(0,Se.Z)((0,Se.Z)({},pe),{},{width:Qe});ye&&(bt.position="absolute",bt.pointerEvents="none");var Ot=k.createElement("div",(0,ct.Z)({},Tt,de,{ref:At?null:J,className:jt()(ee,"".concat(ot,"-row"),Tt==null?void 0:Tt.className,(0,nt.Z)({},"".concat(ot,"-row-extra"),ye)),style:(0,Se.Z)((0,Se.Z)({},bt),Tt==null?void 0:Tt.style)}),vt.map(function(Et,ht){return k.createElement(Ql,{key:ht,rowInfo:it,column:Et,colIndex:ht,indent:Pe,index:G,renderIndex:_e,record:xe,inverse:ye,getHeight:ge})}));return At?k.createElement("div",{ref:J},Ot,Ht):Ot}),ks=Li(ea),Xo=ks,Ns=k.forwardRef(function(H,J){var Q=H.data,G=H.onScroll,ee=(0,je.qp)(tt,["flattenColumns","onColumnResize","getRowKey","prefixCls","expandedKeys","childrenColumnName","emptyNode","scrollX"]),ae=ee.flattenColumns,pe=ee.onColumnResize,ye=ee.getRowKey,ge=ee.expandedKeys,de=ee.prefixCls,xe=ee.childrenColumnName,Pe=ee.emptyNode,_e=ee.scrollX,Ce=(0,je.qp)(Go),Qe=Ce.sticky,vt=Ce.scrollY,ot=Ce.listItemHeight,wt=k.useRef(),gt=hn(Q,xe,ge,ye),it=k.useMemo(function(){var ut=0;return ae.map(function(lt){var ze=lt.width,bt=lt.key;return ut+=ze,[bt,ze,ut]})},[ae]),At=k.useMemo(function(){return it.map(function(ut){return ut[2]})},[it]);k.useEffect(function(){it.forEach(function(ut){var lt=(0,ei.Z)(ut,2),ze=lt[0],bt=lt[1];pe(ze,bt)})},[it]),k.useImperativeHandle(J,function(){var ut={scrollTo:function(ze){var bt;(bt=wt.current)===null||bt===void 0||bt.scrollTo(ze)}};return Object.defineProperty(ut,"scrollLeft",{get:function(){var ze;return((ze=wt.current)===null||ze===void 0?void 0:ze.getScrollInfo().x)||0},set:function(ze){var bt;(bt=wt.current)===null||bt===void 0||bt.scrollTo({left:ze})}}),ut});var xt=function(lt,ze){var bt,Ot=(bt=gt[ze])===null||bt===void 0?void 0:bt.record,Et=lt.onCell;if(Et){var ht,Gt=Et(Ot,ze);return(ht=Gt==null?void 0:Gt.rowSpan)!==null&&ht!==void 0?ht:1}return 1},Tt=function(lt){var ze=lt.start,bt=lt.end,Ot=lt.getSize,Et=lt.offsetY;if(bt<0)return null;for(var ht=ae.filter(function(Yi){return xt(Yi,ze)===0}),Gt=ze,$i=function(nn){if(ht=ht.filter(function($n){return xt($n,nn)===0}),!ht.length)return Gt=nn,"break"},Zi=ze;Zi>=0;Zi-=1){var Wi=$i(Zi);if(Wi==="break")break}for(var Qn=ae.filter(function(Yi){return xt(Yi,bt)!==1}),Lt=bt,en=function(nn){if(Qn=Qn.filter(function($n){return xt($n,nn)!==1}),!Qn.length)return Lt=Math.max(nn-1,bt),"break"},Pt=bt;Pt<gt.length;Pt+=1){var Vt=en(Pt);if(Vt==="break")break}for(var wi=[],Xr=function(nn){var $n=gt[nn];if(!$n)return"continue";ae.some(function(Er){return xt(Er,nn)>1})&&wi.push(nn)},tn=Gt;tn<=Lt;tn+=1)var Ui=Xr(tn);var wr=wi.map(function(Yi){var nn=gt[Yi],$n=ye(nn.record,Yi),Er=function(Sr){var Zn=Yi+Sr-1,Ai=ye(gt[Zn].record,Zn),Pr=Ot($n,Ai);return Pr.bottom-Pr.top},Is=Ot($n);return k.createElement(Xo,{key:Yi,data:nn,rowKey:$n,index:Yi,style:{top:-Et+Is.top},extra:!0,getHeight:Er})});return wr},pi=k.useMemo(function(){return{columnsOffset:At}},[At]),Bt="".concat(de,"-tbody"),Ht;if(gt.length){var bi={};Qe&&(bi.position="sticky",bi.bottom=0,(0,Ti.Z)(Qe)==="object"&&Qe.offsetScroll&&(bi.bottom=Qe.offsetScroll)),Ht=k.createElement(Xl.Z,{fullHeight:!1,ref:wt,styles:{horizontalScrollBar:bi},className:jt()(Bt,"".concat(Bt,"-virtual")),height:vt,itemHeight:ot||24,data:gt,itemKey:function(lt){return ye(lt.record)},scrollWidth:_e,onVirtualScroll:function(lt){var ze=lt.x;G({scrollLeft:ze})},extraRender:Tt},function(ut,lt,ze){var bt=ye(ut.record,lt);return k.createElement(Xo,(0,ct.Z)({data:ut,rowKey:bt,index:lt},ze))})}else Ht=k.createElement("div",{className:jt()("".concat(de,"-placeholder"))},k.createElement(Ke,{component:"div",prefixCls:de},Pe));return k.createElement(Yl.Provider,{value:pi},Ht)}),us=Li(Ns),Co=us,Gr=function(J,Q){var G=Q.ref,ee=Q.onScroll;return k.createElement(Co,{ref:G,data:J,onScroll:ee})};function Ra(H,J){var Q=H.columns,G=H.scroll,ee=H.sticky,ae=H.prefixCls,pe=ae===void 0?Uo:ae,ye=H.className,ge=H.listItemHeight,de=G||{},xe=de.x,Pe=de.y;typeof xe!="number"&&(xe=1),typeof Pe!="number"&&(Pe=500);var _e=k.useMemo(function(){return{sticky:ee,scrollY:Pe,listItemHeight:ge}},[ee,Pe,ge]);return k.createElement(Go.Provider,{value:_e},k.createElement(Gl,(0,ct.Z)({},H,{className:jt()(ye,"".concat(pe,"-virtual")),scroll:(0,Se.Z)((0,Se.Z)({},G),{},{x:xe}),components:{body:Gr},columns:Q,internalHooks:W,tailor:!0,ref:J})))}var ko=k.forwardRef(Ra);function Da(H){return oi(ko,H)}var Rl=Da(),ta=Gl},66115:function(at){function gi(Le){if(Le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Le}at.exports=gi,at.exports.__esModule=!0,at.exports.default=at.exports},26389:function(at,gi,Le){var q=Le(73808),W=Le(69617),je=Le(94993);function k(Y){var oi=W();return function(){var Be=q(Y),Ze;if(oi){var tt=q(this).constructor;Ze=Reflect.construct(Be,arguments,tt)}else Ze=Be.apply(this,arguments);return je(this,Ze)}}at.exports=k,at.exports.__esModule=!0,at.exports.default=at.exports},73808:function(at){function gi(Le){return at.exports=gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(W){return W.__proto__||Object.getPrototypeOf(W)},at.exports.__esModule=!0,at.exports.default=at.exports,gi(Le)}at.exports=gi,at.exports.__esModule=!0,at.exports.default=at.exports},61655:function(at,gi,Le){var q=Le(6015);function W(je,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");je.prototype=Object.create(k&&k.prototype,{constructor:{value:je,writable:!0,configurable:!0}}),Object.defineProperty(je,"prototype",{writable:!1}),k&&q(je,k)}at.exports=W,at.exports.__esModule=!0,at.exports.default=at.exports},69617:function(at){function gi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Le){return!1}}at.exports=gi,at.exports.__esModule=!0,at.exports.default=at.exports},70215:function(at,gi,Le){var q=Le(7071);function W(je,k){if(je==null)return{};var Y=q(je,k),oi,Li;if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(je);for(Li=0;Li<Be.length;Li++)oi=Be[Li],!(k.indexOf(oi)>=0)&&Object.prototype.propertyIsEnumerable.call(je,oi)&&(Y[oi]=je[oi])}return Y}at.exports=W,at.exports.__esModule=!0,at.exports.default=at.exports},7071:function(at){function gi(Le,q){if(Le==null)return{};var W={},je=Object.keys(Le),k,Y;for(Y=0;Y<je.length;Y++)k=je[Y],!(q.indexOf(k)>=0)&&(W[k]=Le[k]);return W}at.exports=gi,at.exports.__esModule=!0,at.exports.default=at.exports},94993:function(at,gi,Le){var q=Le(18698).default,W=Le(66115);function je(k,Y){if(Y&&(q(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(k)}at.exports=je,at.exports.__esModule=!0,at.exports.default=at.exports},6015:function(at){function gi(Le,q){return at.exports=gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(je,k){return je.__proto__=k,je},at.exports.__esModule=!0,at.exports.default=at.exports,gi(Le,q)}at.exports=gi,at.exports.__esModule=!0,at.exports.default=at.exports},78120:function(at,gi,Le){"use strict";Le.d(gi,{BO:function(){return vr},D0:function(){return Di},Gz:function(){return Ln},IS:function(){return Vr},Py:function(){return Ct},QQ:function(){return ki},Wl:function(){return bn},Xs:function(){return wn},YW:function(){return Hi},as:function(){return mi},bg:function(){return Bi},cp:function(){return Ti},f_:function(){return Kn},gc:function(){return sn},gm:function(){return jt},jT:function(){return Ie},n0:function(){return An},nZ:function(){return _i},q6:function(){return Gi},r$:function(){return Ke},uU:function(){return or},xv:function(){return q},yy:function(){return yi}});class q{lineAt(v){if(v<0||v>this.length)throw new RangeError(`Invalid position ${v} in document of length ${this.length}`);return this.lineInner(v,!1,1,0)}line(v){if(v<1||v>this.lines)throw new RangeError(`Invalid line number ${v} in ${this.lines}-line document`);return this.lineInner(v,!0,1,0)}replace(v,b,A){let O=[];return this.decompose(0,v,O,2),A.length&&A.decompose(0,A.length,O,3),this.decompose(b,this.length,O,1),je.from(O,this.length-(b-v)+A.length)}append(v){return this.replace(this.length,this.length,v)}slice(v,b=this.length){let A=[];return this.decompose(v,b,A,0),je.from(A,b-v)}eq(v){if(v==this)return!0;if(v.length!=this.length||v.lines!=this.lines)return!1;let b=this.scanIdentical(v,1),A=this.length-this.scanIdentical(v,-1),O=new Li(this),L=new Li(v);for(let N=b,K=b;;){if(O.next(N),L.next(N),N=0,O.lineBreak!=L.lineBreak||O.done!=L.done||O.value!=L.value)return!1;if(K+=O.value.length,O.done||K>=A)return!0}}iter(v=1){return new Li(this,v)}iterRange(v,b=this.length){return new Be(this,v,b)}iterLines(v,b){let A;if(v==null)A=this.iter();else{b==null&&(b=this.lines+1);let O=this.line(v).from;A=this.iterRange(O,Math.max(O,b==this.lines+1?this.length:b<=1?0:this.line(b-1).to))}return new Ze(A)}toString(){return this.sliceString(0)}toJSON(){let v=[];return this.flatten(v),v}constructor(){}static of(v){if(v.length==0)throw new RangeError("A document must have at least one line");return v.length==1&&!v[0]?q.empty:v.length<=32?new W(v):je.from(W.split(v,[]))}}class W extends q{constructor(v,b=k(v)){super(),this.text=v,this.length=b}get lines(){return this.text.length}get children(){return null}lineInner(v,b,A,O){for(let L=0;;L++){let N=this.text[L],K=O+N.length;if((b?A:K)>=v)return new tt(O,K,A,N);O=K+1,A++}}decompose(v,b,A,O){let L=v<=0&&b>=this.length?this:new W(oi(this.text,v,b),Math.min(b,this.length)-Math.max(0,v));if(O&1){let N=A.pop(),K=Y(L.text,N.text.slice(),0,L.length);if(K.length<=32)A.push(new W(K,N.length+L.length));else{let j=K.length>>1;A.push(new W(K.slice(0,j)),new W(K.slice(j)))}}else A.push(L)}replace(v,b,A){if(!(A instanceof W))return super.replace(v,b,A);let O=Y(this.text,Y(A.text,oi(this.text,0,v)),b),L=this.length+A.length-(b-v);return O.length<=32?new W(O,L):je.from(W.split(O,[]),L)}sliceString(v,b=this.length,A=`
`){let O="";for(let L=0,N=0;L<=b&&N<this.text.length;N++){let K=this.text[N],j=L+K.length;L>v&&N&&(O+=A),v<j&&b>L&&(O+=K.slice(Math.max(0,v-L),b-L)),L=j+1}return O}flatten(v){for(let b of this.text)v.push(b)}scanIdentical(){return 0}static split(v,b){let A=[],O=-1;for(let L of v)A.push(L),O+=L.length+1,A.length==32&&(b.push(new W(A,O)),A=[],O=-1);return O>-1&&b.push(new W(A,O)),b}}class je extends q{constructor(v,b){super(),this.children=v,this.length=b,this.lines=0;for(let A of v)this.lines+=A.lines}lineInner(v,b,A,O){for(let L=0;;L++){let N=this.children[L],K=O+N.length,j=A+N.lines-1;if((b?j:K)>=v)return N.lineInner(v,b,A,O);O=K+1,A=j+1}}decompose(v,b,A,O){for(let L=0,N=0;N<=b&&L<this.children.length;L++){let K=this.children[L],j=N+K.length;if(v<=j&&b>=N){let ce=O&((N<=v?1:0)|(j>=b?2:0));N>=v&&j<=b&&!ce?A.push(K):K.decompose(v-N,b-N,A,ce)}N=j+1}}replace(v,b,A){if(A.lines<this.lines)for(let O=0,L=0;O<this.children.length;O++){let N=this.children[O],K=L+N.length;if(v>=L&&b<=K){let j=N.replace(v-L,b-L,A),ce=this.lines-N.lines+j.lines;if(j.lines<ce>>5-1&&j.lines>ce>>5+1){let ve=this.children.slice();return ve[O]=j,new je(ve,this.length-(b-v)+A.length)}return super.replace(L,K,j)}L=K+1}return super.replace(v,b,A)}sliceString(v,b=this.length,A=`
`){let O="";for(let L=0,N=0;L<this.children.length&&N<=b;L++){let K=this.children[L],j=N+K.length;N>v&&L&&(O+=A),v<j&&b>N&&(O+=K.sliceString(v-N,b-N,A)),N=j+1}return O}flatten(v){for(let b of this.children)b.flatten(v)}scanIdentical(v,b){if(!(v instanceof je))return 0;let A=0,[O,L,N,K]=b>0?[0,0,this.children.length,v.children.length]:[this.children.length-1,v.children.length-1,-1,-1];for(;;O+=b,L+=b){if(O==N||L==K)return A;let j=this.children[O],ce=v.children[L];if(j!=ce)return A+j.scanIdentical(ce,b);A+=j.length+1}}static from(v,b=v.reduce((A,O)=>A+O.length+1,-1)){let A=0;for(let st of v)A+=st.lines;if(A<32){let st=[];for(let xi of v)xi.flatten(st);return new W(st,b)}let O=Math.max(32,A>>5),L=O<<1,N=O>>1,K=[],j=0,ce=-1,ve=[];function ke(st){let xi;if(st.lines>L&&st instanceof je)for(let br of st.children)ke(br);else st.lines>N&&(j>N||!j)?(He(),K.push(st)):st instanceof W&&j&&(xi=ve[ve.length-1])instanceof W&&st.lines+xi.lines<=32?(j+=st.lines,ce+=st.length+1,ve[ve.length-1]=new W(xi.text.concat(st.text),xi.length+1+st.length)):(j+st.lines>O&&He(),j+=st.lines,ce+=st.length+1,ve.push(st))}function He(){j!=0&&(K.push(ve.length==1?ve[0]:je.from(ve,ce)),ce=-1,j=ve.length=0)}for(let st of v)ke(st);return He(),K.length==1?K[0]:new je(K,b)}}q.empty=new W([""],0);function k(F){let v=-1;for(let b of F)v+=b.length+1;return v}function Y(F,v,b=0,A=1e9){for(let O=0,L=0,N=!0;L<F.length&&O<=A;L++){let K=F[L],j=O+K.length;j>=b&&(j>A&&(K=K.slice(0,A-O)),O<b&&(K=K.slice(b-O)),N?(v[v.length-1]+=K,N=!1):v.push(K)),O=j+1}return v}function oi(F,v,b){return Y(F,[""],v,b)}class Li{constructor(v,b=1){this.dir=b,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[v],this.offsets=[b>0?1:(v instanceof W?v.text.length:v.children.length)<<1]}nextInner(v,b){for(this.done=this.lineBreak=!1;;){let A=this.nodes.length-1,O=this.nodes[A],L=this.offsets[A],N=L>>1,K=O instanceof W?O.text.length:O.children.length;if(N==(b>0?K:0)){if(A==0)return this.done=!0,this.value="",this;b>0&&this.offsets[A-1]++,this.nodes.pop(),this.offsets.pop()}else if((L&1)==(b>0?0:1)){if(this.offsets[A]+=b,v==0)return this.lineBreak=!0,this.value=`
`,this;v--}else if(O instanceof W){let j=O.text[N+(b<0?-1:0)];if(this.offsets[A]+=b,j.length>Math.max(0,v))return this.value=v==0?j:b>0?j.slice(v):j.slice(0,j.length-v),this;v-=j.length}else{let j=O.children[N+(b<0?-1:0)];v>j.length?(v-=j.length,this.offsets[A]+=b):(b<0&&this.offsets[A]--,this.nodes.push(j),this.offsets.push(b>0?1:(j instanceof W?j.text.length:j.children.length)<<1))}}}next(v=0){return v<0&&(this.nextInner(-v,-this.dir),v=this.value.length),this.nextInner(v,this.dir)}}class Be{constructor(v,b,A){this.value="",this.done=!1,this.cursor=new Li(v,b>A?-1:1),this.pos=b>A?v.length:0,this.from=Math.min(b,A),this.to=Math.max(b,A)}nextInner(v,b){if(b<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;v+=Math.max(0,b<0?this.pos-this.to:this.from-this.pos);let A=b<0?this.pos-this.from:this.to-this.pos;v>A&&(v=A),A-=v;let{value:O}=this.cursor.next(v);return this.pos+=(O.length+v)*b,this.value=O.length<=A?O:b<0?O.slice(O.length-A):O.slice(0,A),this.done=!this.value,this}next(v=0){return v<0?v=Math.max(v,this.from-this.pos):v>0&&(v=Math.min(v,this.to-this.pos)),this.nextInner(v,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Ze{constructor(v){this.inner=v,this.afterBreak=!0,this.value="",this.done=!1}next(v=0){let{done:b,lineBreak:A,value:O}=this.inner.next(v);return b?(this.done=!0,this.value=""):A?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=O,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(q.prototype[Symbol.iterator]=function(){return this.iter()},Li.prototype[Symbol.iterator]=Be.prototype[Symbol.iterator]=Ze.prototype[Symbol.iterator]=function(){return this});class tt{constructor(v,b,A,O){this.from=v,this.to=b,this.number=A,this.text=O}get length(){return this.to-this.from}}let fi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(F=>F?parseInt(F,36):1);for(let F=1;F<fi.length;F++)fi[F]+=fi[F-1];function Fe(F){for(let v=1;v<fi.length;v+=2)if(fi[v]>F)return fi[v-1]<=F;return!1}function Yt(F){return F>=127462&&F<=127487}const ct=8205;function Ti(F,v,b=!0,A=!0){return(b?Se:nt)(F,v,A)}function Se(F,v,b){if(v==F.length)return v;v&&ei(F.charCodeAt(v))&&Jt(F.charCodeAt(v-1))&&v--;let A=jt(F,v);for(v+=_i(A);v<F.length;){let O=jt(F,v);if(A==ct||O==ct||b&&Fe(O))v+=_i(O),A=O;else if(Yt(O)){let L=0,N=v-2;for(;N>=0&&Yt(jt(F,N));)L++,N-=2;if(L%2==0)break;v+=2}else break}return v}function nt(F,v,b){for(;v>0;){let A=Se(F,v-2,b);if(A<v)return A;v--}return 0}function ei(F){return F>=56320&&F<57344}function Jt(F){return F>=55296&&F<56320}function jt(F,v){let b=F.charCodeAt(v);if(!Jt(b)||v+1==F.length)return b;let A=F.charCodeAt(v+1);return ei(A)?(b-55296<<10)+(A-56320)+65536:b}function Bi(F){return F<=65535?String.fromCharCode(F):(F-=65536,String.fromCharCode((F>>10)+55296,(F&1023)+56320))}function _i(F){return F<65536?1:2}const kt=/\r\n?|\n/;var sn=function(F){return F[F.Simple=0]="Simple",F[F.TrackDel=1]="TrackDel",F[F.TrackBefore=2]="TrackBefore",F[F.TrackAfter=3]="TrackAfter",F}(sn||(sn={}));class An{constructor(v){this.sections=v}get length(){let v=0;for(let b=0;b<this.sections.length;b+=2)v+=this.sections[b];return v}get newLength(){let v=0;for(let b=0;b<this.sections.length;b+=2){let A=this.sections[b+1];v+=A<0?this.sections[b]:A}return v}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(v){for(let b=0,A=0,O=0;b<this.sections.length;){let L=this.sections[b++],N=this.sections[b++];N<0?(v(A,O,L),O+=L):O+=N,A+=L}}iterChangedRanges(v,b=!1){$e(this,v,b)}get invertedDesc(){let v=[];for(let b=0;b<this.sections.length;){let A=this.sections[b++],O=this.sections[b++];O<0?v.push(A,O):v.push(O,A)}return new An(v)}composeDesc(v){return this.empty?v:v.empty?this:Ue(this,v)}mapDesc(v,b=!1){return v.empty?this:re(this,v,b)}mapPos(v,b=-1,A=sn.Simple){let O=0,L=0;for(let N=0;N<this.sections.length;){let K=this.sections[N++],j=this.sections[N++],ce=O+K;if(j<0){if(ce>v)return L+(v-O);L+=K}else{if(A!=sn.Simple&&ce>=v&&(A==sn.TrackDel&&O<v&&ce>v||A==sn.TrackBefore&&O<v||A==sn.TrackAfter&&ce>v))return null;if(ce>v||ce==v&&b<0&&!K)return v==O||b<0?L:L+j;L+=j}O=ce}if(v>O)throw new RangeError(`Position ${v} is out of range for changeset of length ${O}`);return L}touchesRange(v,b=v){for(let A=0,O=0;A<this.sections.length&&O<=b;){let L=this.sections[A++],N=this.sections[A++],K=O+L;if(N>=0&&O<=b&&K>=v)return O<v&&K>b?"cover":!0;O=K}return!1}toString(){let v="";for(let b=0;b<this.sections.length;){let A=this.sections[b++],O=this.sections[b++];v+=(v?" ":"")+A+(O>=0?":"+O:"")}return v}toJSON(){return this.sections}static fromJSON(v){if(!Array.isArray(v)||v.length%2||v.some(b=>typeof b!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new An(v)}static create(v){return new An(v)}}class mi extends An{constructor(v,b){super(v),this.inserted=b}apply(v){if(this.length!=v.length)throw new RangeError("Applying change set to a document with the wrong length");return $e(this,(b,A,O,L,N)=>v=v.replace(O,O+(A-b),N),!1),v}mapDesc(v,b=!1){return re(this,v,b,!0)}invert(v){let b=this.sections.slice(),A=[];for(let O=0,L=0;O<b.length;O+=2){let N=b[O],K=b[O+1];if(K>=0){b[O]=K,b[O+1]=N;let j=O>>1;for(;A.length<j;)A.push(q.empty);A.push(N?v.slice(L,L+N):q.empty)}L+=N}return new mi(b,A)}compose(v){return this.empty?v:v.empty?this:Ue(this,v,!0)}map(v,b=!1){return v.empty?this:re(this,v,b,!0)}iterChanges(v,b=!1){$e(this,v,b)}get desc(){return An.create(this.sections)}filter(v){let b=[],A=[],O=[],L=new Dt(this);e:for(let N=0,K=0;;){let j=N==v.length?1e9:v[N++];for(;K<j||K==j&&L.len==0;){if(L.done)break e;let ve=Math.min(L.len,j-K);et(O,ve,-1);let ke=L.ins==-1?-1:L.off==0?L.ins:0;et(b,ve,ke),ke>0&&li(A,b,L.text),L.forward(ve),K+=ve}let ce=v[N++];for(;K<ce;){if(L.done)break e;let ve=Math.min(L.len,ce-K);et(b,ve,-1),et(O,ve,L.ins==-1?-1:L.off==0?L.ins:0),L.forward(ve),K+=ve}}return{changes:new mi(b,A),filtered:An.create(O)}}toJSON(){let v=[];for(let b=0;b<this.sections.length;b+=2){let A=this.sections[b],O=this.sections[b+1];O<0?v.push(A):O==0?v.push([A]):v.push([A].concat(this.inserted[b>>1].toJSON()))}return v}static of(v,b,A){let O=[],L=[],N=0,K=null;function j(ve=!1){if(!ve&&!O.length)return;N<b&&et(O,b-N,-1);let ke=new mi(O,L);K=K?K.compose(ke.map(K)):ke,O=[],L=[],N=0}function ce(ve){if(Array.isArray(ve))for(let ke of ve)ce(ke);else if(ve instanceof mi){if(ve.length!=b)throw new RangeError(`Mismatched change set length (got ${ve.length}, expected ${b})`);j(),K=K?K.compose(ve.map(K)):ve}else{let{from:ke,to:He=ke,insert:st}=ve;if(ke>He||ke<0||He>b)throw new RangeError(`Invalid change range ${ke} to ${He} (in doc of length ${b})`);let xi=st?typeof st=="string"?q.of(st.split(A||kt)):st:q.empty,br=xi.length;if(ke==He&&br==0)return;ke<N&&j(),ke>N&&et(O,ke-N,-1),et(O,He-ke,br),li(L,O,xi),N=He}}return ce(v),j(!K),K}static empty(v){return new mi(v?[v,-1]:[],[])}static fromJSON(v){if(!Array.isArray(v))throw new RangeError("Invalid JSON representation of ChangeSet");let b=[],A=[];for(let O=0;O<v.length;O++){let L=v[O];if(typeof L=="number")b.push(L,-1);else{if(!Array.isArray(L)||typeof L[0]!="number"||L.some((N,K)=>K&&typeof N!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(L.length==1)b.push(L[0],0);else{for(;A.length<O;)A.push(q.empty);A[O]=q.of(L.slice(1)),b.push(L[0],A[O].length)}}}return new mi(b,A)}static createSet(v,b){return new mi(v,b)}}function et(F,v,b,A=!1){if(v==0&&b<=0)return;let O=F.length-2;O>=0&&b<=0&&b==F[O+1]?F[O]+=v:v==0&&F[O]==0?F[O+1]+=b:A?(F[O]+=v,F[O+1]+=b):F.push(v,b)}function li(F,v,b){if(b.length==0)return;let A=v.length-2>>1;if(A<F.length)F[F.length-1]=F[F.length-1].append(b);else{for(;F.length<A;)F.push(q.empty);F.push(b)}}function $e(F,v,b){let A=F.inserted;for(let O=0,L=0,N=0;N<F.sections.length;){let K=F.sections[N++],j=F.sections[N++];if(j<0)O+=K,L+=K;else{let ce=O,ve=L,ke=q.empty;for(;ce+=K,ve+=j,j&&A&&(ke=ke.append(A[N-2>>1])),!(b||N==F.sections.length||F.sections[N+1]<0);)K=F.sections[N++],j=F.sections[N++];v(O,ce,L,ve,ke),O=ce,L=ve}}}function re(F,v,b,A=!1){let O=[],L=A?[]:null,N=new Dt(F),K=new Dt(v);for(let j=-1;;)if(N.ins==-1&&K.ins==-1){let ce=Math.min(N.len,K.len);et(O,ce,-1),N.forward(ce),K.forward(ce)}else if(K.ins>=0&&(N.ins<0||j==N.i||N.off==0&&(K.len<N.len||K.len==N.len&&!b))){let ce=K.len;for(et(O,K.ins,-1);ce;){let ve=Math.min(N.len,ce);N.ins>=0&&j<N.i&&N.len<=ve&&(et(O,0,N.ins),L&&li(L,O,N.text),j=N.i),N.forward(ve),ce-=ve}K.next()}else if(N.ins>=0){let ce=0,ve=N.len;for(;ve;)if(K.ins==-1){let ke=Math.min(ve,K.len);ce+=ke,ve-=ke,K.forward(ke)}else if(K.ins==0&&K.len<ve)ve-=K.len,K.next();else break;et(O,ce,j<N.i?N.ins:0),L&&j<N.i&&li(L,O,N.text),j=N.i,N.forward(N.len-ve)}else{if(N.done&&K.done)return L?mi.createSet(O,L):An.create(O);throw new Error("Mismatched change set lengths")}}function Ue(F,v,b=!1){let A=[],O=b?[]:null,L=new Dt(F),N=new Dt(v);for(let K=!1;;){if(L.done&&N.done)return O?mi.createSet(A,O):An.create(A);if(L.ins==0)et(A,L.len,0,K),L.next();else if(N.len==0&&!N.done)et(A,0,N.ins,K),O&&li(O,A,N.text),N.next();else{if(L.done||N.done)throw new Error("Mismatched change set lengths");{let j=Math.min(L.len2,N.len),ce=A.length;if(L.ins==-1){let ve=N.ins==-1?-1:N.off?0:N.ins;et(A,j,ve,K),O&&ve&&li(O,A,N.text)}else N.ins==-1?(et(A,L.off?0:L.len,j,K),O&&li(O,A,L.textBit(j))):(et(A,L.off?0:L.len,N.off?0:N.ins,K),O&&!N.off&&li(O,A,N.text));K=(L.ins>j||N.ins>=0&&N.len>j)&&(K||A.length>ce),L.forward2(j),N.forward(j)}}}}class Dt{constructor(v){this.set=v,this.i=0,this.next()}next(){let{sections:v}=this.set;this.i<v.length?(this.len=v[this.i++],this.ins=v[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:v}=this.set,b=this.i-2>>1;return b>=v.length?q.empty:v[b]}textBit(v){let{inserted:b}=this.set,A=this.i-2>>1;return A>=b.length&&!v?q.empty:b[A].slice(this.off,v==null?void 0:this.off+v)}forward(v){v==this.len?this.next():(this.len-=v,this.off+=v)}forward2(v){this.ins==-1?this.forward(v):v==this.ins?this.next():(this.ins-=v,this.off+=v)}}class qe{constructor(v,b,A){this.from=v,this.to=b,this.flags=A}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let v=this.flags&7;return v==7?null:v}get goalColumn(){let v=this.flags>>6;return v==16777215?void 0:v}map(v,b=-1){let A,O;return this.empty?A=O=v.mapPos(this.from,b):(A=v.mapPos(this.from,1),O=v.mapPos(this.to,-1)),A==this.from&&O==this.to?this:new qe(A,O,this.flags)}extend(v,b=v){if(v<=this.anchor&&b>=this.anchor)return Ie.range(v,b);let A=Math.abs(v-this.anchor)>Math.abs(b-this.anchor)?v:b;return Ie.range(this.anchor,A)}eq(v){return this.anchor==v.anchor&&this.head==v.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(v){if(!v||typeof v.anchor!="number"||typeof v.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ie.range(v.anchor,v.head)}static create(v,b,A){return new qe(v,b,A)}}class Ie{constructor(v,b){this.ranges=v,this.mainIndex=b}map(v,b=-1){return v.empty?this:Ie.create(this.ranges.map(A=>A.map(v,b)),this.mainIndex)}eq(v){if(this.ranges.length!=v.ranges.length||this.mainIndex!=v.mainIndex)return!1;for(let b=0;b<this.ranges.length;b++)if(!this.ranges[b].eq(v.ranges[b]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ie([this.main],0)}addRange(v,b=!0){return Ie.create([v].concat(this.ranges),b?0:this.mainIndex+1)}replaceRange(v,b=this.mainIndex){let A=this.ranges.slice();return A[b]=v,Ie.create(A,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(v=>v.toJSON()),main:this.mainIndex}}static fromJSON(v){if(!v||!Array.isArray(v.ranges)||typeof v.main!="number"||v.main>=v.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ie(v.ranges.map(b=>qe.fromJSON(b)),v.main)}static single(v,b=v){return new Ie([Ie.range(v,b)],0)}static create(v,b=0){if(v.length==0)throw new RangeError("A selection needs at least one range");for(let A=0,O=0;O<v.length;O++){let L=v[O];if(L.empty?L.from<=A:L.from<A)return Ie.normalized(v.slice(),b);A=L.to}return new Ie(v,b)}static cursor(v,b=0,A,O){return qe.create(v,v,(b==0?0:b<0?8:16)|(A==null?7:Math.min(6,A))|(O!=null?O:16777215)<<6)}static range(v,b,A,O){let L=(A!=null?A:16777215)<<6|(O==null?7:Math.min(6,O));return b<v?qe.create(b,v,48|L):qe.create(v,b,(b>v?8:0)|L)}static normalized(v,b=0){let A=v[b];v.sort((O,L)=>O.from-L.from),b=v.indexOf(A);for(let O=1;O<v.length;O++){let L=v[O],N=v[O-1];if(L.empty?L.from<=N.to:L.from<N.to){let K=N.from,j=Math.max(L.to,N.to);O<=b&&b--,v.splice(--O,2,L.anchor>L.head?Ie.range(j,K):Ie.range(K,j))}}return new Ie(v,b)}}function Je(F,v){for(let b of F.ranges)if(b.to>v)throw new RangeError("Selection points outside of document")}let rt=0;class Ke{constructor(v,b,A,O,L){this.combine=v,this.compareInput=b,this.compare=A,this.isStatic=O,this.id=rt++,this.default=v([]),this.extensions=typeof L=="function"?L(this):L}get reader(){return this}static define(v={}){return new Ke(v.combine||(b=>b),v.compareInput||((b,A)=>b===A),v.compare||(v.combine?(b,A)=>b===A:_t),!!v.static,v.enables)}of(v){return new ai([],this,0,v)}compute(v,b){if(this.isStatic)throw new Error("Can't compute a static facet");return new ai(v,this,1,b)}computeN(v,b){if(this.isStatic)throw new Error("Can't compute a static facet");return new ai(v,this,2,b)}from(v,b){return b||(b=A=>A),this.compute([v],A=>b(A.field(v)))}}function _t(F,v){return F==v||F.length==v.length&&F.every((b,A)=>b===v[A])}class ai{constructor(v,b,A,O){this.dependencies=v,this.facet=b,this.type=A,this.value=O,this.id=rt++}dynamicSlot(v){var b;let A=this.value,O=this.facet.compareInput,L=this.id,N=v[L]>>1,K=this.type==2,j=!1,ce=!1,ve=[];for(let ke of this.dependencies)ke=="doc"?j=!0:ke=="selection"?ce=!0:((b=v[ke.id])!==null&&b!==void 0?b:1)&1||ve.push(v[ke.id]);return{create(ke){return ke.values[N]=A(ke),1},update(ke,He){if(j&&He.docChanged||ce&&(He.docChanged||He.selection)||Qi(ke,ve)){let st=A(ke);if(K?!Oi(st,ke.values[N],O):!O(st,ke.values[N]))return ke.values[N]=st,1}return 0},reconfigure:(ke,He)=>{let st,xi=He.config.address[L];if(xi!=null){let br=vi(He,xi);if(this.dependencies.every(fn=>fn instanceof Ke?He.facet(fn)===ke.facet(fn):fn instanceof ki?He.field(fn,!1)==ke.field(fn,!1):!0)||(K?Oi(st=A(ke),br,O):O(st=A(ke),br)))return ke.values[N]=br,0}else st=A(ke);return ke.values[N]=st,1}}}}function Oi(F,v,b){if(F.length!=v.length)return!1;for(let A=0;A<F.length;A++)if(!b(F[A],v[A]))return!1;return!0}function Qi(F,v){let b=!1;for(let A of v)an(F,A)&1&&(b=!0);return b}function on(F,v,b){let A=b.map(j=>F[j.id]),O=b.map(j=>j.type),L=A.filter(j=>!(j&1)),N=F[v.id]>>1;function K(j){let ce=[];for(let ve=0;ve<A.length;ve++){let ke=vi(j,A[ve]);if(O[ve]==2)for(let He of ke)ce.push(He);else ce.push(ke)}return v.combine(ce)}return{create(j){for(let ce of A)an(j,ce);return j.values[N]=K(j),1},update(j,ce){if(!Qi(j,L))return 0;let ve=K(j);return v.compare(ve,j.values[N])?0:(j.values[N]=ve,1)},reconfigure(j,ce){let ve=Qi(j,A),ke=ce.config.facets[v.id],He=ce.facet(v);if(ke&&!ve&&_t(b,ke))return j.values[N]=He,0;let st=K(j);return v.compare(st,He)?(j.values[N]=He,0):(j.values[N]=st,1)}}}const ln=Ke.define({static:!0});class ki{constructor(v,b,A,O,L){this.id=v,this.createF=b,this.updateF=A,this.compareF=O,this.spec=L,this.provides=void 0}static define(v){let b=new ki(rt++,v.create,v.update,v.compare||((A,O)=>A===O),v);return v.provide&&(b.provides=v.provide(b)),b}create(v){let b=v.facet(ln).find(A=>A.field==this);return((b==null?void 0:b.create)||this.createF)(v)}slot(v){let b=v[this.id]>>1;return{create:A=>(A.values[b]=this.create(A),1),update:(A,O)=>{let L=A.values[b],N=this.updateF(L,O);return this.compareF(L,N)?0:(A.values[b]=N,1)},reconfigure:(A,O)=>O.config.address[this.id]!=null?(A.values[b]=O.field(this),0):(A.values[b]=this.create(A),1)}}init(v){return[this,ln.of({field:this,create:v})]}get extension(){return this}}const Ve={lowest:4,low:3,default:2,high:1,highest:0};function sr(F){return v=>new zi(v,F)}const bn={highest:sr(Ve.highest),high:sr(Ve.high),default:sr(Ve.default),low:sr(Ve.low),lowest:sr(Ve.lowest)};class zi{constructor(v,b){this.inner=v,this.prec=b}}class Yn{of(v){return new di(this,v)}reconfigure(v){return Yn.reconfigure.of({compartment:this,extension:v})}get(v){return v.config.compartments.get(this)}}class di{constructor(v,b){this.compartment=v,this.inner=b}}class $t{constructor(v,b,A,O,L,N){for(this.base=v,this.compartments=b,this.dynamicSlots=A,this.address=O,this.staticValues=L,this.facets=N,this.statusTemplate=[];this.statusTemplate.length<A.length;)this.statusTemplate.push(0)}staticFacet(v){let b=this.address[v.id];return b==null?v.default:this.staticValues[b>>1]}static resolve(v,b,A){let O=[],L=Object.create(null),N=new Map;for(let He of Or(v,b,N))He instanceof ki?O.push(He):(L[He.facet.id]||(L[He.facet.id]=[])).push(He);let K=Object.create(null),j=[],ce=[];for(let He of O)K[He.id]=ce.length<<1,ce.push(st=>He.slot(st));let ve=A==null?void 0:A.config.facets;for(let He in L){let st=L[He],xi=st[0].facet,br=ve&&ve[He]||[];if(st.every(fn=>fn.type==0))if(K[xi.id]=j.length<<1|1,_t(br,st))j.push(A.facet(xi));else{let fn=xi.combine(st.map(ar=>ar.value));j.push(A&&xi.compare(fn,A.facet(xi))?A.facet(xi):fn)}else{for(let fn of st)fn.type==0?(K[fn.id]=j.length<<1|1,j.push(fn.value)):(K[fn.id]=ce.length<<1,ce.push(ar=>fn.dynamicSlot(ar)));K[xi.id]=ce.length<<1,ce.push(fn=>on(fn,xi,st))}}let ke=ce.map(He=>He(K));return new $t(v,N,ke,K,j,L)}}function Or(F,v,b){let A=[[],[],[],[],[]],O=new Map;function L(N,K){let j=O.get(N);if(j!=null){if(j<=K)return;let ce=A[j].indexOf(N);ce>-1&&A[j].splice(ce,1),N instanceof di&&b.delete(N.compartment)}if(O.set(N,K),Array.isArray(N))for(let ce of N)L(ce,K);else if(N instanceof di){if(b.has(N.compartment))throw new RangeError("Duplicate use of compartment in extensions");let ce=v.get(N.compartment)||N.inner;b.set(N.compartment,ce),L(ce,K)}else if(N instanceof zi)L(N.inner,N.prec);else if(N instanceof ki)A[K].push(N),N.provides&&L(N.provides,K);else if(N instanceof ai)A[K].push(N),N.facet.extensions&&L(N.facet.extensions,Ve.default);else{let ce=N.extension;if(!ce)throw new Error(`Unrecognized extension value in extension set (${N}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);L(ce,K)}}return L(F,Ve.default),A.reduce((N,K)=>N.concat(K))}function an(F,v){if(v&1)return 2;let b=v>>1,A=F.status[b];if(A==4)throw new Error("Cyclic dependency between fields and/or facets");if(A&2)return A;F.status[b]=4;let O=F.computeSlot(F,F.config.dynamicSlots[b]);return F.status[b]=2|O}function vi(F,v){return v&1?F.config.staticValues[v>>1]:F.values[v>>1]}const Ri=Ke.define(),gr=Ke.define({combine:F=>F.some(v=>v),static:!0}),hn=Ke.define({combine:F=>F.length?F[0]:void 0,static:!0}),Rr=Ke.define(),Fr=Ke.define(),Dr=Ke.define(),Nn=Ke.define({combine:F=>F.length?F[0]:!1});class Gi{constructor(v,b){this.type=v,this.value=b}static define(){return new Mn}}class Mn{of(v){return new Gi(this,v)}}class qt{constructor(v){this.map=v}of(v){return new Ct(this,v)}}class Ct{constructor(v,b){this.type=v,this.value=b}map(v){let b=this.type.map(this.value,v);return b===void 0?void 0:b==this.value?this:new Ct(this.type,b)}is(v){return this.type==v}static define(v={}){return new qt(v.map||(b=>b))}static mapEffects(v,b){if(!v.length)return v;let A=[];for(let O of v){let L=O.map(b);L&&A.push(L)}return A}}Ct.reconfigure=Ct.define(),Ct.appendConfig=Ct.define();class Hi{constructor(v,b,A,O,L,N){this.startState=v,this.changes=b,this.selection=A,this.effects=O,this.annotations=L,this.scrollIntoView=N,this._doc=null,this._state=null,A&&Je(A,b.newLength),L.some(K=>K.type==Hi.time)||(this.annotations=L.concat(Hi.time.of(Date.now())))}static create(v,b,A,O,L,N){return new Hi(v,b,A,O,L,N)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(v){for(let b of this.annotations)if(b.type==v)return b.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(v){let b=this.annotation(Hi.userEvent);return!!(b&&(b==v||b.length>v.length&&b.slice(0,v.length)==v&&b[v.length]=="."))}}Hi.time=Gi.define(),Hi.userEvent=Gi.define(),Hi.addToHistory=Gi.define(),Hi.remote=Gi.define();function mr(F,v){let b=[];for(let A=0,O=0;;){let L,N;if(A<F.length&&(O==v.length||v[O]>=F[A]))L=F[A++],N=F[A++];else if(O<v.length)L=v[O++],N=v[O++];else return b;!b.length||b[b.length-1]<L?b.push(L,N):b[b.length-1]<N&&(b[b.length-1]=N)}}function Ee(F,v,b){var A;let O,L,N;return b?(O=v.changes,L=mi.empty(v.changes.length),N=F.changes.compose(v.changes)):(O=v.changes.map(F.changes),L=F.changes.mapDesc(v.changes,!0),N=F.changes.compose(O)),{changes:N,selection:v.selection?v.selection.map(L):(A=F.selection)===null||A===void 0?void 0:A.map(O),effects:Ct.mapEffects(F.effects,O).concat(Ct.mapEffects(v.effects,L)),annotations:F.annotations.length?F.annotations.concat(v.annotations):v.annotations,scrollIntoView:F.scrollIntoView||v.scrollIntoView}}function In(F,v,b){let A=v.selection,O=_n(v.annotations);return v.userEvent&&(O=O.concat(Hi.userEvent.of(v.userEvent))),{changes:v.changes instanceof mi?v.changes:mi.of(v.changes||[],b,F.facet(hn)),selection:A&&(A instanceof Ie?A:Ie.single(A.anchor,A.head)),effects:_n(v.effects),annotations:O,scrollIntoView:!!v.scrollIntoView}}function Vn(F,v,b){let A=In(F,v.length?v[0]:{},F.doc.length);v.length&&v[0].filter===!1&&(b=!1);for(let L=1;L<v.length;L++){v[L].filter===!1&&(b=!1);let N=!!v[L].sequential;A=Ee(A,In(F,v[L],N?A.changes.newLength:F.doc.length),N)}let O=Hi.create(F,A.changes,A.selection,A.effects,A.annotations,A.scrollIntoView);return cn(b?qr(O):O)}function qr(F){let v=F.startState,b=!0;for(let O of v.facet(Rr)){let L=O(F);if(L===!1){b=!1;break}Array.isArray(L)&&(b=b===!0?L:mr(b,L))}if(b!==!0){let O,L;if(b===!1)L=F.changes.invertedDesc,O=mi.empty(v.doc.length);else{let N=F.changes.filter(b);O=N.changes,L=N.filtered.mapDesc(N.changes).invertedDesc}F=Hi.create(v,O,F.selection&&F.selection.map(L),Ct.mapEffects(F.effects,L),F.annotations,F.scrollIntoView)}let A=v.facet(Fr);for(let O=A.length-1;O>=0;O--){let L=A[O](F);L instanceof Hi?F=L:Array.isArray(L)&&L.length==1&&L[0]instanceof Hi?F=L[0]:F=Vn(v,_n(L),!1)}return F}function cn(F){let v=F.startState,b=v.facet(Dr),A=F;for(let O=b.length-1;O>=0;O--){let L=b[O](F);L&&Object.keys(L).length&&(A=Ee(A,In(v,L,F.changes.newLength),!0))}return A==F?F:Hi.create(v,F.changes,F.selection,A.effects,A.annotations,A.scrollIntoView)}const dn=[];function _n(F){return F==null?dn:Array.isArray(F)?F:[F]}var Di=function(F){return F[F.Word=0]="Word",F[F.Space=1]="Space",F[F.Other=2]="Other",F}(Di||(Di={}));const En=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Tn;try{Tn=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(F){}function zn(F){if(Tn)return Tn.test(F);for(let v=0;v<F.length;v++){let b=F[v];if(/\w/.test(b)||b>"\x80"&&(b.toUpperCase()!=b.toLowerCase()||En.test(b)))return!0}return!1}function Pn(F){return v=>{if(!/\S/.test(v))return Di.Space;if(zn(v))return Di.Word;for(let b=0;b<F.length;b++)if(v.indexOf(F[b])>-1)return Di.Word;return Di.Other}}class yi{constructor(v,b,A,O,L,N){this.config=v,this.doc=b,this.selection=A,this.values=O,this.status=v.statusTemplate.slice(),this.computeSlot=L,N&&(N._state=this);for(let K=0;K<this.config.dynamicSlots.length;K++)an(this,K<<1);this.computeSlot=null}field(v,b=!0){let A=this.config.address[v.id];if(A==null){if(b)throw new RangeError("Field is not present in this state");return}return an(this,A),vi(this,A)}update(...v){return Vn(this,v,!0)}applyTransaction(v){let b=this.config,{base:A,compartments:O}=b;for(let N of v.effects)N.is(Yn.reconfigure)?(b&&(O=new Map,b.compartments.forEach((K,j)=>O.set(j,K)),b=null),O.set(N.value.compartment,N.value.extension)):N.is(Ct.reconfigure)?(b=null,A=N.value):N.is(Ct.appendConfig)&&(b=null,A=_n(A).concat(N.value));let L;b?L=v.startState.values.slice():(b=$t.resolve(A,O,this),L=new yi(b,this.doc,this.selection,b.dynamicSlots.map(()=>null),(K,j)=>j.reconfigure(K,this),null).values),new yi(b,v.newDoc,v.newSelection,L,(N,K)=>K.update(N,v),v)}replaceSelection(v){return typeof v=="string"&&(v=this.toText(v)),this.changeByRange(b=>({changes:{from:b.from,to:b.to,insert:v},range:Ie.cursor(b.from+v.length)}))}changeByRange(v){let b=this.selection,A=v(b.ranges[0]),O=this.changes(A.changes),L=[A.range],N=_n(A.effects);for(let K=1;K<b.ranges.length;K++){let j=v(b.ranges[K]),ce=this.changes(j.changes),ve=ce.map(O);for(let He=0;He<K;He++)L[He]=L[He].map(ve);let ke=O.mapDesc(ce,!0);L.push(j.range.map(ke)),O=O.compose(ve),N=Ct.mapEffects(N,ve).concat(Ct.mapEffects(_n(j.effects),ke))}return{changes:O,selection:Ie.create(L,b.mainIndex),effects:N}}changes(v=[]){return v instanceof mi?v:mi.of(v,this.doc.length,this.facet(yi.lineSeparator))}toText(v){return q.of(v.split(this.facet(yi.lineSeparator)||kt))}sliceDoc(v=0,b=this.doc.length){return this.doc.sliceString(v,b,this.lineBreak)}facet(v){let b=this.config.address[v.id];return b==null?v.default:(an(this,b),vi(this,b))}toJSON(v){let b={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(v)for(let A in v){let O=v[A];O instanceof ki&&this.config.address[O.id]!=null&&(b[A]=O.spec.toJSON(this.field(v[A]),this))}return b}static fromJSON(v,b={},A){if(!v||typeof v.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let O=[];if(A){for(let L in A)if(Object.prototype.hasOwnProperty.call(v,L)){let N=A[L],K=v[L];O.push(N.init(j=>N.spec.fromJSON(K,j)))}}return yi.create({doc:v.doc,selection:Ie.fromJSON(v.selection),extensions:b.extensions?O.concat([b.extensions]):O})}static create(v={}){let b=$t.resolve(v.extensions||[],new Map),A=v.doc instanceof q?v.doc:q.of((v.doc||"").split(b.staticFacet(yi.lineSeparator)||kt)),O=v.selection?v.selection instanceof Ie?v.selection:Ie.single(v.selection.anchor,v.selection.head):Ie.single(0);return Je(O,A.length),b.staticFacet(gr)||(O=O.asSingle()),new yi(b,A,O,b.dynamicSlots.map(()=>null),(L,N)=>N.create(L),null)}get tabSize(){return this.facet(yi.tabSize)}get lineBreak(){return this.facet(yi.lineSeparator)||`
`}get readOnly(){return this.facet(Nn)}phrase(v,...b){for(let A of this.facet(yi.phrases))if(Object.prototype.hasOwnProperty.call(A,v)){v=A[v];break}return b.length&&(v=v.replace(/\$(\$|\d*)/g,(A,O)=>{if(O=="$")return"$";let L=+(O||1);return!L||L>b.length?A:b[L-1]})),v}languageDataAt(v,b,A=-1){let O=[];for(let L of this.facet(Ri))for(let N of L(this,b,A))Object.prototype.hasOwnProperty.call(N,v)&&O.push(N[v]);return O}charCategorizer(v){return Pn(this.languageDataAt("wordChars",v).join(""))}wordAt(v){let{text:b,from:A,length:O}=this.doc.lineAt(v),L=this.charCategorizer(v),N=v-A,K=v-A;for(;N>0;){let j=Ti(b,N,!1);if(L(b.slice(j,N))!=Di.Word)break;N=j}for(;K<O;){let j=Ti(b,K);if(L(b.slice(K,j))!=Di.Word)break;K=j}return N==K?null:Ie.range(N+A,K+A)}}yi.allowMultipleSelections=gr,yi.tabSize=Ke.define({combine:F=>F.length?F[0]:4}),yi.lineSeparator=hn,yi.readOnly=Nn,yi.phrases=Ke.define({compare(F,v){let b=Object.keys(F),A=Object.keys(v);return b.length==A.length&&b.every(O=>F[O]==v[O])}}),yi.languageData=Ri,yi.changeFilter=Rr,yi.transactionFilter=Fr,yi.transactionExtender=Dr,Yn.reconfigure=Ct.define();function vr(F,v,b={}){let A={};for(let O of F)for(let L of Object.keys(O)){let N=O[L],K=A[L];if(K===void 0)A[L]=N;else if(!(K===N||N===void 0))if(Object.hasOwnProperty.call(b,L))A[L]=b[L](K,N);else throw new Error("Config merge conflict for field "+L)}for(let O in v)A[O]===void 0&&(A[O]=v[O]);return A}class or{eq(v){return this==v}range(v,b=v){return fe.create(v,b,this)}}or.prototype.startSide=or.prototype.endSide=0,or.prototype.point=!1,or.prototype.mapMode=sn.TrackDel;class fe{constructor(v,b,A){this.from=v,this.to=b,this.value=A}static create(v,b,A){return new fe(v,b,A)}}function bo(F,v){return F.from-v.from||F.value.startSide-v.value.startSide}class lr{constructor(v,b,A,O){this.from=v,this.to=b,this.value=A,this.maxPoint=O}get length(){return this.to[this.to.length-1]}findIndex(v,b,A,O=0){let L=A?this.to:this.from;for(let N=O,K=L.length;;){if(N==K)return N;let j=N+K>>1,ce=L[j]-v||(A?this.value[j].endSide:this.value[j].startSide)-b;if(j==N)return ce>=0?N:K;ce>=0?K=j:N=j+1}}between(v,b,A,O){for(let L=this.findIndex(b,-1e9,!0),N=this.findIndex(A,1e9,!1,L);L<N;L++)if(O(this.from[L]+v,this.to[L]+v,this.value[L])===!1)return!1}map(v,b){let A=[],O=[],L=[],N=-1,K=-1;for(let j=0;j<this.value.length;j++){let ce=this.value[j],ve=this.from[j]+v,ke=this.to[j]+v,He,st;if(ve==ke){let xi=b.mapPos(ve,ce.startSide,ce.mapMode);if(xi==null||(He=st=xi,ce.startSide!=ce.endSide&&(st=b.mapPos(ve,ce.endSide),st<He)))continue}else if(He=b.mapPos(ve,ce.startSide),st=b.mapPos(ke,ce.endSide),He>st||He==st&&ce.startSide>0&&ce.endSide<=0)continue;(st-He||ce.endSide-ce.startSide)<0||(N<0&&(N=He),ce.point&&(K=Math.max(K,st-He)),A.push(ce),O.push(He-N),L.push(st-N))}return{mapped:A.length?new lr(O,L,A,K):null,pos:N}}}class wn{constructor(v,b,A,O){this.chunkPos=v,this.chunk=b,this.nextLayer=A,this.maxPoint=O}static create(v,b,A,O){return new wn(v,b,A,O)}get length(){let v=this.chunk.length-1;return v<0?0:Math.max(this.chunkEnd(v),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let v=this.nextLayer.size;for(let b of this.chunk)v+=b.value.length;return v}chunkEnd(v){return this.chunkPos[v]+this.chunk[v].length}update(v){let{add:b=[],sort:A=!1,filterFrom:O=0,filterTo:L=this.length}=v,N=v.filter;if(b.length==0&&!N)return this;if(A&&(b=b.slice().sort(bo)),this.isEmpty)return b.length?wn.of(b):this;let K=new Jn(this,null,-1).goto(0),j=0,ce=[],ve=new Kn;for(;K.value||j<b.length;)if(j<b.length&&(K.from-b[j].from||K.startSide-b[j].value.startSide)>=0){let ke=b[j++];ve.addInner(ke.from,ke.to,ke.value)||ce.push(ke)}else K.rangeIndex==1&&K.chunkIndex<this.chunk.length&&(j==b.length||this.chunkEnd(K.chunkIndex)<b[j].from)&&(!N||O>this.chunkEnd(K.chunkIndex)||L<this.chunkPos[K.chunkIndex])&&ve.addChunk(this.chunkPos[K.chunkIndex],this.chunk[K.chunkIndex])?K.nextChunk():((!N||O>K.to||L<K.from||N(K.from,K.to,K.value))&&(ve.addInner(K.from,K.to,K.value)||ce.push(fe.create(K.from,K.to,K.value))),K.next());return ve.finishInner(this.nextLayer.isEmpty&&!ce.length?wn.empty:this.nextLayer.update({add:ce,filter:N,filterFrom:O,filterTo:L}))}map(v){if(v.empty||this.isEmpty)return this;let b=[],A=[],O=-1;for(let N=0;N<this.chunk.length;N++){let K=this.chunkPos[N],j=this.chunk[N],ce=v.touchesRange(K,K+j.length);if(ce===!1)O=Math.max(O,j.maxPoint),b.push(j),A.push(v.mapPos(K));else if(ce===!0){let{mapped:ve,pos:ke}=j.map(K,v);ve&&(O=Math.max(O,ve.maxPoint),b.push(ve),A.push(ke))}}let L=this.nextLayer.map(v);return b.length==0?L:new wn(A,b,L||wn.empty,O)}between(v,b,A){if(!this.isEmpty){for(let O=0;O<this.chunk.length;O++){let L=this.chunkPos[O],N=this.chunk[O];if(b>=L&&v<=L+N.length&&N.between(L,v-L,b-L,A)===!1)return}this.nextLayer.between(v,b,A)}}iter(v=0){return xr.from([this]).goto(v)}get isEmpty(){return this.nextLayer==this}static iter(v,b=0){return xr.from(v).goto(b)}static compare(v,b,A,O,L=-1){let N=v.filter(ke=>ke.maxPoint>0||!ke.isEmpty&&ke.maxPoint>=L),K=b.filter(ke=>ke.maxPoint>0||!ke.isEmpty&&ke.maxPoint>=L),j=cs(N,K,A),ce=new Ki(N,j,L),ve=new Ki(K,j,L);A.iterGaps((ke,He,st)=>wo(ce,ke,ve,He,st,O)),A.empty&&A.length==0&&wo(ce,0,ve,0,0,O)}static eq(v,b,A=0,O){O==null&&(O=1e9-1);let L=v.filter(ve=>!ve.isEmpty&&b.indexOf(ve)<0),N=b.filter(ve=>!ve.isEmpty&&v.indexOf(ve)<0);if(L.length!=N.length)return!1;if(!L.length)return!0;let K=cs(L,N),j=new Ki(L,K,0).goto(A),ce=new Ki(N,K,0).goto(A);for(;;){if(j.to!=ce.to||!Ls(j.active,ce.active)||j.point&&(!ce.point||!j.point.eq(ce.point)))return!1;if(j.to>O)return!0;j.next(),ce.next()}}static spans(v,b,A,O,L=-1){let N=new Ki(v,null,L).goto(b),K=b,j=N.openStart;for(;;){let ce=Math.min(N.to,A);if(N.point){let ve=N.activeForPoint(N.to),ke=N.pointFrom<b?ve.length+1:Math.min(ve.length,j);O.point(K,ce,N.point,ve,ke,N.pointRank),j=Math.min(N.openEnd(ce),ve.length)}else ce>K&&(O.span(K,ce,N.active,j),j=N.openEnd(ce));if(N.to>A)return j+(N.point&&N.to>A?1:0);K=N.to,N.next()}}static of(v,b=!1){let A=new Kn;for(let O of v instanceof fe?[v]:b?yr(v):v)A.add(O.from,O.to,O.value);return A.finish()}}wn.empty=new wn([],[],null,-1);function yr(F){if(F.length>1)for(let v=F[0],b=1;b<F.length;b++){let A=F[b];if(bo(v,A)>0)return F.slice().sort(bo);v=A}return F}wn.empty.nextLayer=wn.empty;class Kn{finishChunk(v){this.chunks.push(new lr(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,v&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(v,b,A){this.addInner(v,b,A)||(this.nextLayer||(this.nextLayer=new Kn)).add(v,b,A)}addInner(v,b,A){let O=v-this.lastTo||A.startSide-this.last.endSide;if(O<=0&&(v-this.lastFrom||A.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return O<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=v),this.from.push(v-this.chunkStart),this.to.push(b-this.chunkStart),this.last=A,this.lastFrom=v,this.lastTo=b,this.value.push(A),A.point&&(this.maxPoint=Math.max(this.maxPoint,b-v)),!0)}addChunk(v,b){if((v-this.lastTo||b.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,b.maxPoint),this.chunks.push(b),this.chunkPos.push(v);let A=b.value.length-1;return this.last=b.value[A],this.lastFrom=b.from[A]+v,this.lastTo=b.to[A]+v,!0}finish(){return this.finishInner(wn.empty)}finishInner(v){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return v;let b=wn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(v):v,this.setMaxPoint);return this.from=null,b}}function cs(F,v,b){let A=new Map;for(let L of F)for(let N=0;N<L.chunk.length;N++)L.chunk[N].maxPoint<=0&&A.set(L.chunk[N],L.chunkPos[N]);let O=new Set;for(let L of v)for(let N=0;N<L.chunk.length;N++){let K=A.get(L.chunk[N]);K!=null&&(b?b.mapPos(K):K)==L.chunkPos[N]&&!(b!=null&&b.touchesRange(K,K+L.chunk[N].length))&&O.add(L.chunk[N])}return O}class Jn{constructor(v,b,A,O=0){this.layer=v,this.skip=b,this.minPoint=A,this.rank=O}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(v,b=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(v,b,!1),this}gotoInner(v,b,A){for(;this.chunkIndex<this.layer.chunk.length;){let O=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(O)||this.layer.chunkEnd(this.chunkIndex)<v||O.maxPoint<this.minPoint))break;this.chunkIndex++,A=!1}if(this.chunkIndex<this.layer.chunk.length){let O=this.layer.chunk[this.chunkIndex].findIndex(v-this.layer.chunkPos[this.chunkIndex],b,!0);(!A||this.rangeIndex<O)&&this.setRangeIndex(O)}this.next()}forward(v,b){(this.to-v||this.endSide-b)<0&&this.gotoInner(v,b,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let v=this.layer.chunkPos[this.chunkIndex],b=this.layer.chunk[this.chunkIndex],A=v+b.from[this.rangeIndex];if(this.from=A,this.to=v+b.to[this.rangeIndex],this.value=b.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(v){if(v==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=v}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(v){return this.from-v.from||this.startSide-v.startSide||this.rank-v.rank||this.to-v.to||this.endSide-v.endSide}}class xr{constructor(v){this.heap=v}static from(v,b=null,A=-1){let O=[];for(let L=0;L<v.length;L++)for(let N=v[L];!N.isEmpty;N=N.nextLayer)N.maxPoint>=A&&O.push(new Jn(N,b,A,L));return O.length==1?O[0]:new xr(O)}get startSide(){return this.value?this.value.startSide:0}goto(v,b=-1e9){for(let A of this.heap)A.goto(v,b);for(let A=this.heap.length>>1;A>=0;A--)Xi(this.heap,A);return this.next(),this}forward(v,b){for(let A of this.heap)A.forward(v,b);for(let A=this.heap.length>>1;A>=0;A--)Xi(this.heap,A);(this.to-v||this.value.endSide-b)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let v=this.heap[0];this.from=v.from,this.to=v.to,this.value=v.value,this.rank=v.rank,v.value&&v.next(),Xi(this.heap,0)}}}function Xi(F,v){for(let b=F[v];;){let A=(v<<1)+1;if(A>=F.length)break;let O=F[A];if(A+1<F.length&&O.compare(F[A+1])>=0&&(O=F[A+1],A++),b.compare(O)<0)break;F[A]=b,F[v]=O,v=A}}class Ki{constructor(v,b,A){this.minPoint=A,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=xr.from(v,b,A)}goto(v,b=-1e9){return this.cursor.goto(v,b),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=v,this.endSide=b,this.openStart=-1,this.next(),this}forward(v,b){for(;this.minActive>-1&&(this.activeTo[this.minActive]-v||this.active[this.minActive].endSide-b)<0;)this.removeActive(this.minActive);this.cursor.forward(v,b)}removeActive(v){fs(this.active,v),fs(this.activeTo,v),fs(this.activeRank,v),this.minActive=no(this.active,this.activeTo)}addActive(v){let b=0,{value:A,to:O,rank:L}=this.cursor;for(;b<this.activeRank.length&&this.activeRank[b]<=L;)b++;io(this.active,b,A),io(this.activeTo,b,O),io(this.activeRank,b,L),v&&io(v,b,this.cursor.from),this.minActive=no(this.active,this.activeTo)}next(){let v=this.to,b=this.point;this.point=null;let A=this.openStart<0?[]:null;for(;;){let O=this.minActive;if(O>-1&&(this.activeTo[O]-this.cursor.from||this.active[O].endSide-this.cursor.startSide)<0){if(this.activeTo[O]>v){this.to=this.activeTo[O],this.endSide=this.active[O].endSide;break}this.removeActive(O),A&&fs(A,O)}else if(this.cursor.value)if(this.cursor.from>v){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let L=this.cursor.value;if(!L.point)this.addActive(A),this.cursor.next();else if(b&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=L,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=L.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(A){this.openStart=0;for(let O=A.length-1;O>=0&&A[O]<v;O--)this.openStart++}}activeForPoint(v){if(!this.active.length)return this.active;let b=[];for(let A=this.active.length-1;A>=0&&!(this.activeRank[A]<this.pointRank);A--)(this.activeTo[A]>v||this.activeTo[A]==v&&this.active[A].endSide>=this.point.endSide)&&b.push(this.active[A]);return b.reverse()}openEnd(v){let b=0;for(let A=this.activeTo.length-1;A>=0&&this.activeTo[A]>v;A--)b++;return b}}function wo(F,v,b,A,O,L){F.goto(v),b.goto(A);let N=A+O,K=A,j=A-v;for(;;){let ce=F.to+j-b.to||F.endSide-b.endSide,ve=ce<0?F.to+j:b.to,ke=Math.min(ve,N);if(F.point||b.point?F.point&&b.point&&(F.point==b.point||F.point.eq(b.point))&&Ls(F.activeForPoint(F.to),b.activeForPoint(b.to))||L.comparePoint(K,ke,F.point,b.point):ke>K&&!Ls(F.active,b.active)&&L.compareRange(K,ke,F.active,b.active),ve>N)break;K=ve,ce<=0&&F.next(),ce>=0&&b.next()}}function Ls(F,v){if(F.length!=v.length)return!1;for(let b=0;b<F.length;b++)if(F[b]!=v[b]&&!F[b].eq(v[b]))return!1;return!0}function fs(F,v){for(let b=v,A=F.length-1;b<A;b++)F[b]=F[b+1];F.pop()}function io(F,v,b){for(let A=F.length-1;A>=v;A--)F[A+1]=F[A];F[v]=b}function no(F,v){let b=-1,A=1e9;for(let O=0;O<v.length;O++)(v[O]-A||F[O].endSide-F[b].endSide)<0&&(b=O,A=v[O]);return b}function Vr(F,v,b=F.length){let A=0;for(let O=0;O<b;)F.charCodeAt(O)==9?(A+=v-A%v,O++):(A++,O=Ti(F,O));return A}function Ln(F,v,b,A){for(let O=0,L=0;;){if(L>=v)return O;if(O==F.length)break;L+=F.charCodeAt(O)==9?b-L%b:1,O=Ti(F,O)}return A===!0?-1:F.length}},47421:function(at,gi,Le){"use strict";Le.d(gi,{$1:function(){return mn},$f:function(){return Xe},AE:function(){return Ut},Eu:function(){return $a},HQ:function(){return Vh},Nm:function(){return v},OO:function(){return Kn},S2:function(){return Na},SJ:function(){return zs},Sd:function(){return _h},Uw:function(){return Do},W$:function(){return Ll},Y1:function(){return Bo},ZO:function(){return Io},Zs:function(){return Ph},bF:function(){return Fs},hJ:function(){return _a},l9:function(){return Mn},lg:function(){return Xi},mH:function(){return Vs},p:function(){return Ct},qr:function(){return Lo},tk:function(){return Mi},v5:function(){return Fa}});var q=Le(78120),W=Le(28699),je=Le(81754);function k(d){let s;return d.nodeType==11?s=d.getSelection?d:d.ownerDocument:s=d,s.getSelection()}function Y(d,s){return s?d==s||d.contains(s.nodeType!=1?s.parentNode:s):!1}function oi(d){let s=d.activeElement;for(;s&&s.shadowRoot;)s=s.shadowRoot.activeElement;return s}function Li(d,s){if(!s.anchorNode)return!1;try{return Y(d,s.anchorNode)}catch(a){return!1}}function Be(d){return d.nodeType==3?_i(d,0,d.nodeValue.length).getClientRects():d.nodeType==1?d.getClientRects():[]}function Ze(d,s,a,f){return a?fi(d,s,a,f,-1)||fi(d,s,a,f,1):!1}function tt(d){for(var s=0;;s++)if(d=d.previousSibling,!d)return s}function fi(d,s,a,f,p){for(;;){if(d==a&&s==f)return!0;if(s==(p<0?0:Fe(d))){if(d.nodeName=="DIV")return!1;let y=d.parentNode;if(!y||y.nodeType!=1)return!1;s=tt(d)+(p<0?0:1),d=y}else if(d.nodeType==1){if(d=d.childNodes[s+(p<0?-1:0)],d.nodeType==1&&d.contentEditable=="false")return!1;s=p<0?Fe(d):0}else return!1}}function Fe(d){return d.nodeType==3?d.nodeValue.length:d.childNodes.length}const Yt={left:0,right:0,top:0,bottom:0};function ct(d,s){let a=s?d.left:d.right;return{left:a,right:a,top:d.top,bottom:d.bottom}}function Ti(d){return{left:0,right:d.innerWidth,top:0,bottom:d.innerHeight}}function Se(d,s,a,f,p,y,S,M){let D=d.ownerDocument,E=D.defaultView||window;for(let I=d;I;)if(I.nodeType==1){let $,ne=I==D.body;if(ne)$=Ti(E);else{if(I.scrollHeight<=I.clientHeight&&I.scrollWidth<=I.clientWidth){I=I.assignedSlot||I.parentNode;continue}let Te=I.getBoundingClientRect();$={left:Te.left,right:Te.left+I.clientWidth,top:Te.top,bottom:Te.top+I.clientHeight}}let le=0,me=0;if(p=="nearest")s.top<$.top?(me=-($.top-s.top+S),a>0&&s.bottom>$.bottom+me&&(me=s.bottom-$.bottom+me+S)):s.bottom>$.bottom&&(me=s.bottom-$.bottom+S,a<0&&s.top-me<$.top&&(me=-($.top+me-s.top+S)));else{let Te=s.bottom-s.top,Ae=$.bottom-$.top;me=(p=="center"&&Te<=Ae?s.top+Te/2-Ae/2:p=="start"||p=="center"&&a<0?s.top-S:s.bottom-Ae+S)-$.top}if(f=="nearest"?s.left<$.left?(le=-($.left-s.left+y),a>0&&s.right>$.right+le&&(le=s.right-$.right+le+y)):s.right>$.right&&(le=s.right-$.right+y,a<0&&s.left<$.left+le&&(le=-($.left+le-s.left+y))):le=(f=="center"?s.left+(s.right-s.left)/2-($.right-$.left)/2:f=="start"==M?s.left-y:s.right-($.right-$.left)+y)-$.left,le||me)if(ne)E.scrollBy(le,me);else{let Te=0,Ae=0;if(me){let We=I.scrollTop;I.scrollTop+=me,Ae=I.scrollTop-We}if(le){let We=I.scrollLeft;I.scrollLeft+=le,Te=I.scrollLeft-We}s={left:s.left-Te,top:s.top-Ae,right:s.right-Te,bottom:s.bottom-Ae},Te&&Math.abs(Te-le)<1&&(f="nearest"),Ae&&Math.abs(Ae-me)<1&&(p="nearest")}if(ne)break;I=I.assignedSlot||I.parentNode}else if(I.nodeType==11)I=I.host;else break}function nt(d){let s=d.ownerDocument;for(let a=d.parentNode;a&&a!=s.body;)if(a.nodeType==1){if(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth)return a;a=a.assignedSlot||a.parentNode}else if(a.nodeType==11)a=a.host;else break;return null}class ei{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(s){return this.anchorNode==s.anchorNode&&this.anchorOffset==s.anchorOffset&&this.focusNode==s.focusNode&&this.focusOffset==s.focusOffset}setRange(s){this.set(s.anchorNode,s.anchorOffset,s.focusNode,s.focusOffset)}set(s,a,f,p){this.anchorNode=s,this.anchorOffset=a,this.focusNode=f,this.focusOffset=p}}let Jt=null;function jt(d){if(d.setActive)return d.setActive();if(Jt)return d.focus(Jt);let s=[];for(let a=d;a&&(s.push(a,a.scrollTop,a.scrollLeft),a!=a.ownerDocument);a=a.parentNode);if(d.focus(Jt==null?{get preventScroll(){return Jt={preventScroll:!0},!0}}:void 0),!Jt){Jt=!1;for(let a=0;a<s.length;){let f=s[a++],p=s[a++],y=s[a++];f.scrollTop!=p&&(f.scrollTop=p),f.scrollLeft!=y&&(f.scrollLeft=y)}}}let Bi;function _i(d,s,a=s){let f=Bi||(Bi=document.createRange());return f.setEnd(d,a),f.setStart(d,s),f}function kt(d,s,a){let f={key:s,code:s,keyCode:a,which:a,cancelable:!0},p=new KeyboardEvent("keydown",f);p.synthetic=!0,d.dispatchEvent(p);let y=new KeyboardEvent("keyup",f);return y.synthetic=!0,d.dispatchEvent(y),p.defaultPrevented||y.defaultPrevented}function sn(d){for(;d;){if(d&&(d.nodeType==9||d.nodeType==11&&d.host))return d;d=d.assignedSlot||d.parentNode}return null}function An(d){for(;d.attributes.length;)d.removeAttributeNode(d.attributes[0])}function mi(d,s){let a=s.focusNode,f=s.focusOffset;if(!a||s.anchorNode!=a||s.anchorOffset!=f)return!1;for(;;)if(f){if(a.nodeType!=1)return!1;let p=a.childNodes[f-1];p.contentEditable=="false"?f--:(a=p,f=Fe(a))}else{if(a==d)return!0;f=tt(a),a=a.parentNode}}class et{constructor(s,a,f=!0){this.node=s,this.offset=a,this.precise=f}static before(s,a){return new et(s.parentNode,tt(s),a)}static after(s,a){return new et(s.parentNode,tt(s)+1,a)}}const li=[];class $e{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(s){let a=this.posAtStart;for(let f of this.children){if(f==s)return a;a+=f.length+f.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(s){return this.posBefore(s)+s.length}coordsAt(s,a){return null}sync(s,a){if(this.dirty&2){let f=this.dom,p=null,y;for(let S of this.children){if(S.dirty){if(!S.dom&&(y=p?p.nextSibling:f.firstChild)){let M=$e.get(y);(!M||!M.parent&&M.canReuseDOM(S))&&S.reuseDOM(y)}S.sync(s,a),S.dirty=0}if(y=p?p.nextSibling:f.firstChild,a&&!a.written&&a.node==f&&y!=S.dom&&(a.written=!0),S.dom.parentNode==f)for(;y&&y!=S.dom;)y=re(y);else f.insertBefore(S.dom,y);p=S.dom}for(y=p?p.nextSibling:f.firstChild,y&&a&&a.node==f&&(a.written=!0);y;)y=re(y)}else if(this.dirty&1)for(let f of this.children)f.dirty&&(f.sync(s,a),f.dirty=0)}reuseDOM(s){}localPosFromDOM(s,a){let f;if(s==this.dom)f=this.dom.childNodes[a];else{let p=Fe(s)==0?0:a==0?-1:1;for(;;){let y=s.parentNode;if(y==this.dom)break;p==0&&y.firstChild!=y.lastChild&&(s==y.firstChild?p=-1:p=1),s=y}p<0?f=s:f=s.nextSibling}if(f==this.dom.firstChild)return 0;for(;f&&!$e.get(f);)f=f.nextSibling;if(!f)return this.length;for(let p=0,y=0;;p++){let S=this.children[p];if(S.dom==f)return y;y+=S.length+S.breakAfter}}domBoundsAround(s,a,f=0){let p=-1,y=-1,S=-1,M=-1;for(let D=0,E=f,I=f;D<this.children.length;D++){let $=this.children[D],ne=E+$.length;if(E<s&&ne>a)return $.domBoundsAround(s,a,E);if(ne>=s&&p==-1&&(p=D,y=E),E>a&&$.dom.parentNode==this.dom){S=D,M=I;break}I=ne,E=ne+$.breakAfter}return{from:y,to:M<0?f+this.length:M,startDOM:(p?this.children[p-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:S<this.children.length&&S>=0?this.children[S].dom:null}}markDirty(s=!1){this.dirty|=2,this.markParentsDirty(s)}markParentsDirty(s){for(let a=this.parent;a;a=a.parent){if(s&&(a.dirty|=2),a.dirty&1)return;a.dirty|=1,s=!1}}setParent(s){this.parent!=s&&(this.parent=s,this.dirty&&this.markParentsDirty(!0))}setDOM(s){this.dom&&(this.dom.cmView=null),this.dom=s,s.cmView=this}get rootView(){for(let s=this;;){let a=s.parent;if(!a)return s;s=a}}replaceChildren(s,a,f=li){this.markDirty();for(let p=s;p<a;p++){let y=this.children[p];y.parent==this&&y.destroy()}this.children.splice(s,a-s,...f);for(let p=0;p<f.length;p++)f[p].setParent(this)}ignoreMutation(s){return!1}ignoreEvent(s){return!1}childCursor(s=this.length){return new Ue(this.children,s,this.children.length)}childPos(s,a=1){return this.childCursor().findPos(s,a)}toString(){let s=this.constructor.name.replace("View","");return s+(this.children.length?"("+this.children.join()+")":this.length?"["+(s=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(s){return s.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(s,a,f,p,y,S){return!1}become(s){return!1}canReuseDOM(s){return s.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}$e.prototype.breakAfter=0;function re(d){let s=d.nextSibling;return d.parentNode.removeChild(d),s}class Ue{constructor(s,a,f){this.children=s,this.pos=a,this.i=f,this.off=0}findPos(s,a=1){for(;;){if(s>this.pos||s==this.pos&&(a>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=s-this.pos,this;let f=this.children[--this.i];this.pos-=f.length+f.breakAfter}}}function Dt(d,s,a,f,p,y,S,M,D){let{children:E}=d,I=E.length?E[s]:null,$=y.length?y[y.length-1]:null,ne=$?$.breakAfter:S;if(!(s==f&&I&&!S&&!ne&&y.length<2&&I.merge(a,p,y.length?$:null,a==0,M,D))){if(f<E.length){let le=E[f];le&&p<le.length?(s==f&&(le=le.split(p),p=0),!ne&&$&&le.merge(0,p,$,!0,0,D)?y[y.length-1]=le:(p&&le.merge(0,p,null,!1,0,D),y.push(le))):le!=null&&le.breakAfter&&($?$.breakAfter=1:S=1),f++}for(I&&(I.breakAfter=S,a>0&&(!S&&y.length&&I.merge(a,I.length,y[0],!1,M,0)?I.breakAfter=y.shift().breakAfter:(a<I.length||I.children.length&&I.children[I.children.length-1].length==0)&&I.merge(a,I.length,null,!1,M,0),s++));s<f&&y.length;)if(E[f-1].become(y[y.length-1]))f--,y.pop(),D=y.length?0:M;else if(E[s].become(y[0]))s++,y.shift(),M=y.length?0:D;else break;!y.length&&s&&f<E.length&&!E[s-1].breakAfter&&E[f].merge(0,0,E[s-1],!1,M,D)&&s--,(s<f||y.length)&&d.replaceChildren(s,f,y)}}function qe(d,s,a,f,p,y){let S=d.childCursor(),{i:M,off:D}=S.findPos(a,1),{i:E,off:I}=S.findPos(s,-1),$=s-a;for(let ne of f)$+=ne.length;d.length+=$,Dt(d,E,I,M,D,f,0,p,y)}let Ie=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Je=typeof document!="undefined"?document:{documentElement:{style:{}}};const rt=/Edge\/(\d+)/.exec(Ie.userAgent),Ke=/MSIE \d/.test(Ie.userAgent),_t=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ie.userAgent),ai=!!(Ke||_t||rt),Oi=!ai&&/gecko\/(\d+)/i.test(Ie.userAgent),Qi=!ai&&/Chrome\/(\d+)/.exec(Ie.userAgent),on="webkitFontSmoothing"in Je.documentElement.style,ln=!ai&&/Apple Computer/.test(Ie.vendor),ki=ln&&(/Mobile\/\w+/.test(Ie.userAgent)||Ie.maxTouchPoints>2);var Ve={mac:ki||/Mac/.test(Ie.platform),windows:/Win/.test(Ie.platform),linux:/Linux|X11/.test(Ie.platform),ie:ai,ie_version:Ke?Je.documentMode||6:_t?+_t[1]:rt?+rt[1]:0,gecko:Oi,gecko_version:Oi?+(/Firefox\/(\d+)/.exec(Ie.userAgent)||[0,0])[1]:0,chrome:!!Qi,chrome_version:Qi?+Qi[1]:0,ios:ki,android:/Android\b/.test(Ie.userAgent),webkit:on,safari:ln,webkit_version:on?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Je.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const sr=256;class bn extends $e{constructor(s){super(),this.text=s}get length(){return this.text.length}createDOM(s){this.setDOM(s||document.createTextNode(this.text))}sync(s,a){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(a&&a.node==this.dom&&(a.written=!0),this.dom.nodeValue=this.text)}reuseDOM(s){s.nodeType==3&&this.createDOM(s)}merge(s,a,f){return f&&(!(f instanceof bn)||this.length-(a-s)+f.length>sr)?!1:(this.text=this.text.slice(0,s)+(f?f.text:"")+this.text.slice(a),this.markDirty(),!0)}split(s){let a=new bn(this.text.slice(s));return this.text=this.text.slice(0,s),this.markDirty(),a}localPosFromDOM(s,a){return s==this.dom?a:a?this.text.length:0}domAtPos(s){return new et(this.dom,s)}domBoundsAround(s,a,f){return{from:f,to:f+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(s,a){return Yn(this.dom,s,a)}}class zi extends $e{constructor(s,a=[],f=0){super(),this.mark=s,this.children=a,this.length=f;for(let p of a)p.setParent(this)}setAttrs(s){if(An(s),this.mark.class&&(s.className=this.mark.class),this.mark.attrs)for(let a in this.mark.attrs)s.setAttribute(a,this.mark.attrs[a]);return s}reuseDOM(s){s.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(s),this.dirty|=6)}sync(s,a){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(s,a)}merge(s,a,f,p,y,S){return f&&(!(f instanceof zi&&f.mark.eq(this.mark))||s&&y<=0||a<this.length&&S<=0)?!1:(qe(this,s,a,f?f.children:[],y-1,S-1),this.markDirty(),!0)}split(s){let a=[],f=0,p=-1,y=0;for(let M of this.children){let D=f+M.length;D>s&&a.push(f<s?M.split(s-f):M),p<0&&f>=s&&(p=y),f=D,y++}let S=this.length-s;return this.length=s,p>-1&&(this.children.length=p,this.markDirty()),new zi(this.mark,a,S)}domAtPos(s){return gr(this,s)}coordsAt(s,a){return Rr(this,s,a)}}function Yn(d,s,a){let f=d.nodeValue.length;s>f&&(s=f);let p=s,y=s,S=0;s==0&&a<0||s==f&&a>=0?Ve.chrome||Ve.gecko||(s?(p--,S=1):y<f&&(y++,S=-1)):a<0?p--:y<f&&y++;let M=_i(d,p,y).getClientRects();if(!M.length)return Yt;let D=M[(S?S<0:a>=0)?0:M.length-1];return Ve.safari&&!S&&D.width==0&&(D=Array.prototype.find.call(M,E=>E.width)||D),S?ct(D,S<0):D||null}class di extends $e{constructor(s,a,f){super(),this.widget=s,this.length=a,this.side=f,this.prevWidget=null}static create(s,a,f){return new(s.customView||di)(s,a,f)}split(s){let a=di.create(this.widget,this.length-s,this.side);return this.length-=s,a}sync(s){(!this.dom||!this.widget.updateDOM(this.dom,s))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(s)),this.dom.contentEditable="false")}getSide(){return this.side}merge(s,a,f,p,y,S){return f&&(!(f instanceof di)||!this.widget.compare(f.widget)||s>0&&y<=0||a<this.length&&S<=0)?!1:(this.length=s+(f?f.length:0)+(this.length-a),!0)}become(s){return s.length==this.length&&s instanceof di&&s.side==this.side&&this.widget.constructor==s.widget.constructor?(this.widget.eq(s.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=s.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(s){return this.widget.ignoreEvent(s)}get overrideDOMText(){if(this.length==0)return q.xv.empty;let s=this;for(;s.parent;)s=s.parent;let{view:a}=s,f=a&&a.state.doc,p=this.posAtStart;return f?f.slice(p,p+this.length):q.xv.empty}domAtPos(s){return s==0?et.before(this.dom):et.after(this.dom,s==this.length)}domBoundsAround(){return null}coordsAt(s,a){let f=this.dom.getClientRects(),p=null;if(!f.length)return Yt;for(let y=s>0?f.length-1:0;p=f[y],!(s>0?y==0:y==f.length-1||p.top<p.bottom);y+=s>0?-1:1);return this.length?p:ct(p,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class $t extends di{domAtPos(s){let{topView:a,text:f}=this.widget;return a?Or(s,0,a,f,(p,y)=>p.domAtPos(y),p=>new et(f,Math.min(p,f.nodeValue.length))):new et(f,Math.min(s,f.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(s,a){let{topView:f,text:p}=this.widget;return f?an(s,a,f,p):Math.min(a,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(s,a){let{topView:f,text:p}=this.widget;return f?Or(s,a,f,p,(y,S,M)=>y.coordsAt(S,M),(y,S)=>Yn(p,y,S)):Yn(p,s,a)}destroy(){var s;super.destroy(),(s=this.widget.topView)===null||s===void 0||s.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function Or(d,s,a,f,p,y){if(a instanceof zi){for(let S=a.dom.firstChild;S;S=S.nextSibling){let M=$e.get(S);if(!M)return y(d,s);let D=Y(S,f),E=M.length+(D?f.nodeValue.length:0);if(d<E||d==E&&M.getSide()<=0)return D?Or(d,s,M,f,p,y):p(M,d,s);d-=E}return p(a,a.length,-1)}else return a.dom==f?y(d,s):p(a,d,s)}function an(d,s,a,f){if(a instanceof zi)for(let p of a.children){let y=0,S=Y(p.dom,f);if(Y(p.dom,d))return y+(S?an(d,s,p,f):p.localPosFromDOM(d,s));y+=S?f.nodeValue.length:p.length}else if(a.dom==f)return Math.min(s,f.nodeValue.length);return a.localPosFromDOM(d,s)}class vi extends $e{constructor(s){super(),this.side=s}get length(){return 0}merge(){return!1}become(s){return s instanceof vi&&s.side==this.side}split(){return new vi(this.side)}sync(){if(!this.dom){let s=document.createElement("img");s.className="cm-widgetBuffer",s.setAttribute("aria-hidden","true"),this.setDOM(s)}}getSide(){return this.side}domAtPos(s){return et.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(s){let a=this.dom.getBoundingClientRect(),f=Ri(this,this.side>0?-1:1);return f&&f.top<a.bottom&&f.bottom>a.top?{left:a.left,right:a.right,top:f.top,bottom:f.bottom}:a}get overrideDOMText(){return q.xv.empty}}bn.prototype.children=di.prototype.children=vi.prototype.children=li;function Ri(d,s){let a=d.parent,f=a?a.children.indexOf(d):-1;for(;a&&f>=0;)if(s<0?f>0:f<a.children.length){let p=a.children[f+s];if(p instanceof bn){let y=p.coordsAt(s<0?p.length:0,s);if(y)return y}f+=s}else if(a instanceof zi&&a.parent)f=a.parent.children.indexOf(a)+(s<0?0:1),a=a.parent;else{let p=a.dom.lastChild;if(p&&p.nodeName=="BR")return p.getClientRects()[0];break}}function gr(d,s){let a=d.dom,{children:f}=d,p=0;for(let y=0;p<f.length;p++){let S=f[p],M=y+S.length;if(!(M==y&&S.getSide()<=0)){if(s>y&&s<M&&S.dom.parentNode==a)return S.domAtPos(s-y);if(s<=y)break;y=M}}for(let y=p;y>0;y--){let S=f[y-1];if(S.dom.parentNode==a)return S.domAtPos(S.length)}for(let y=p;y<f.length;y++){let S=f[y];if(S.dom.parentNode==a)return S.domAtPos(0)}return new et(a,0)}function hn(d,s,a){let f,{children:p}=d;a>0&&s instanceof zi&&p.length&&(f=p[p.length-1])instanceof zi&&f.mark.eq(s.mark)?hn(f,s.children[0],a-1):(p.push(s),s.setParent(d)),d.length+=s.length}function Rr(d,s,a){let f=null,p=-1,y=null,S=-1;function M(E,I){for(let $=0,ne=0;$<E.children.length&&ne<=I;$++){let le=E.children[$],me=ne+le.length;me>=I&&(le.children.length?M(le,I-ne):!y&&(me>I||ne==me&&le.getSide()>0)?(y=le,S=I-ne):(ne<I||ne==me&&le.getSide()<0)&&(f=le,p=I-ne)),ne=me}}M(d,s);let D=(a<0?f:y)||f||y;return D?D.coordsAt(Math.max(0,D==f?p:S),a):Fr(d)}function Fr(d){let s=d.dom.lastChild;if(!s)return d.dom.getBoundingClientRect();let a=Be(s);return a[a.length-1]||null}function Dr(d,s){for(let a in d)a=="class"&&s.class?s.class+=" "+d.class:a=="style"&&s.style?s.style+=";"+d.style:s[a]=d[a];return s}function Nn(d,s){if(d==s)return!0;if(!d||!s)return!1;let a=Object.keys(d),f=Object.keys(s);if(a.length!=f.length)return!1;for(let p of a)if(f.indexOf(p)==-1||d[p]!==s[p])return!1;return!0}function Gi(d,s,a){let f=null;if(s)for(let p in s)a&&p in a||d.removeAttribute(f=p);if(a)for(let p in a)s&&s[p]==a[p]||d.setAttribute(f=p,a[p]);return!!f}class Mn{eq(s){return!1}updateDOM(s,a){return!1}compare(s){return this==s||this.constructor==s.constructor&&this.eq(s)}get estimatedHeight(){return-1}ignoreEvent(s){return!0}get customView(){return null}destroy(s){}}var qt=function(d){return d[d.Text=0]="Text",d[d.WidgetBefore=1]="WidgetBefore",d[d.WidgetAfter=2]="WidgetAfter",d[d.WidgetRange=3]="WidgetRange",d}(qt||(qt={}));class Ct extends q.uU{constructor(s,a,f,p){super(),this.startSide=s,this.endSide=a,this.widget=f,this.spec=p}get heightRelevant(){return!1}static mark(s){return new Hi(s)}static widget(s){let a=s.side||0,f=!!s.block;return a+=f?a>0?3e8:-4e8:a>0?1e8:-1e8,new Ee(s,a,a,f,s.widget||null,!1)}static replace(s){let a=!!s.block,f,p;if(s.isBlockGap)f=-5e8,p=4e8;else{let{start:y,end:S}=In(s,a);f=(y?a?-3e8:-1:5e8)-1,p=(S?a?2e8:1:-6e8)+1}return new Ee(s,f,p,a,s.widget||null,!0)}static line(s){return new mr(s)}static set(s,a=!1){return q.Xs.of(s,a)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ct.none=q.Xs.empty;class Hi extends Ct{constructor(s){let{start:a,end:f}=In(s);super(a?-1:5e8,f?1:-6e8,null,s),this.tagName=s.tagName||"span",this.class=s.class||"",this.attrs=s.attributes||null}eq(s){return this==s||s instanceof Hi&&this.tagName==s.tagName&&this.class==s.class&&Nn(this.attrs,s.attrs)}range(s,a=s){if(s>=a)throw new RangeError("Mark decorations may not be empty");return super.range(s,a)}}Hi.prototype.point=!1;class mr extends Ct{constructor(s){super(-2e8,-2e8,null,s)}eq(s){return s instanceof mr&&this.spec.class==s.spec.class&&Nn(this.spec.attributes,s.spec.attributes)}range(s,a=s){if(a!=s)throw new RangeError("Line decoration ranges must be zero-length");return super.range(s,a)}}mr.prototype.mapMode=q.gc.TrackBefore,mr.prototype.point=!0;class Ee extends Ct{constructor(s,a,f,p,y,S){super(a,f,y,s),this.block=p,this.isReplace=S,this.mapMode=p?a<=0?q.gc.TrackBefore:q.gc.TrackAfter:q.gc.TrackDel}get type(){return this.startSide<this.endSide?qt.WidgetRange:this.startSide<=0?qt.WidgetBefore:qt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(s){return s instanceof Ee&&Vn(this.widget,s.widget)&&this.block==s.block&&this.startSide==s.startSide&&this.endSide==s.endSide}range(s,a=s){if(this.isReplace&&(s>a||s==a&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&a!=s)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(s,a)}}Ee.prototype.point=!0;function In(d,s=!1){let{inclusiveStart:a,inclusiveEnd:f}=d;return a==null&&(a=d.inclusive),f==null&&(f=d.inclusive),{start:a!=null?a:s,end:f!=null?f:s}}function Vn(d,s){return d==s||!!(d&&s&&d.compare(s))}function qr(d,s,a,f=0){let p=a.length-1;p>=0&&a[p]+f>=d?a[p]=Math.max(a[p],s):a.push(d,s)}class cn extends $e{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(s,a,f,p,y,S){if(f){if(!(f instanceof cn))return!1;this.dom||f.transferDOM(this)}return p&&this.setDeco(f?f.attrs:null),qe(this,s,a,f?f.children:[],y,S),!0}split(s){let a=new cn;if(a.breakAfter=this.breakAfter,this.length==0)return a;let{i:f,off:p}=this.childPos(s);p&&(a.append(this.children[f].split(p),0),this.children[f].merge(p,this.children[f].length,null,!1,0,0),f++);for(let y=f;y<this.children.length;y++)a.append(this.children[y],0);for(;f>0&&this.children[f-1].length==0;)this.children[--f].destroy();return this.children.length=f,this.markDirty(),this.length=s,a}transferDOM(s){this.dom&&(this.markDirty(),s.setDOM(this.dom),s.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(s){Nn(this.attrs,s)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=s)}append(s,a){hn(this,s,a)}addLineDeco(s){let a=s.spec.attributes,f=s.spec.class;a&&(this.attrs=Dr(a,this.attrs||{})),f&&(this.attrs=Dr({class:f},this.attrs||{}))}domAtPos(s){return gr(this,s)}reuseDOM(s){s.nodeName=="DIV"&&(this.setDOM(s),this.dirty|=6)}sync(s,a){var f;this.dom?this.dirty&4&&(An(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Gi(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(s,a);let p=this.dom.lastChild;for(;p&&$e.get(p)instanceof zi;)p=p.lastChild;if(!p||!this.length||p.nodeName!="BR"&&((f=$e.get(p))===null||f===void 0?void 0:f.isEditable)==!1&&(!Ve.ios||!this.children.some(y=>y instanceof bn))){let y=document.createElement("BR");y.cmIgnore=!0,this.dom.appendChild(y)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let s=0;for(let a of this.children){if(!(a instanceof bn)||/[^ -~]/.test(a.text))return null;let f=Be(a.dom);if(f.length!=1)return null;s+=f[0].width}return s?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:s/this.length}:null}coordsAt(s,a){return Rr(this,s,a)}become(s){return!1}get type(){return qt.Text}static find(s,a){for(let f=0,p=0;f<s.children.length;f++){let y=s.children[f],S=p+y.length;if(S>=a){if(y instanceof cn)return y;if(S>a)break}p=S+y.breakAfter}return null}}class dn extends $e{constructor(s,a,f){super(),this.widget=s,this.length=a,this.type=f,this.breakAfter=0,this.prevWidget=null}merge(s,a,f,p,y,S){return f&&(!(f instanceof dn)||!this.widget.compare(f.widget)||s>0&&y<=0||a<this.length&&S<=0)?!1:(this.length=s+(f?f.length:0)+(this.length-a),!0)}domAtPos(s){return s==0?et.before(this.dom):et.after(this.dom,s==this.length)}split(s){let a=this.length-s;this.length=s;let f=new dn(this.widget,a,this.type);return f.breakAfter=this.breakAfter,f}get children(){return li}sync(s){(!this.dom||!this.widget.updateDOM(this.dom,s))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(s)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):q.xv.empty}domBoundsAround(){return null}become(s){return s instanceof dn&&s.type==this.type&&s.widget.constructor==this.widget.constructor?(s.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=s.widget,this.length=s.length,this.breakAfter=s.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(s){return this.widget.ignoreEvent(s)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class _n{constructor(s,a,f,p){this.doc=s,this.pos=a,this.end=f,this.disallowBlockEffectsFor=p,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=s.iter(),this.skip=a}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let s=this.content[this.content.length-1];return!s.breakAfter&&!(s instanceof dn&&s.type==qt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new cn),this.atCursorPos=!0),this.curLine}flushBuffer(s=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Di(new vi(-1),s),s.length),this.pendingBuffer=0)}addBlockWidget(s){this.flushBuffer(),this.curLine=null,this.content.push(s)}finish(s){this.pendingBuffer&&s<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(s,a,f){for(;s>0;){if(this.textOff==this.text.length){let{value:y,lineBreak:S,done:M}=this.cursor.next(this.skip);if(this.skip=0,M)throw new Error("Ran out of text content when drawing inline views");if(S){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,s--;continue}else this.text=y,this.textOff=0}let p=Math.min(this.text.length-this.textOff,s,512);this.flushBuffer(a.slice(a.length-f)),this.getLine().append(Di(new bn(this.text.slice(this.textOff,this.textOff+p)),a),f),this.atCursorPos=!0,this.textOff+=p,s-=p,f=0}}span(s,a,f,p){this.buildText(a-s,f,p),this.pos=a,this.openStart<0&&(this.openStart=p)}point(s,a,f,p,y,S){if(this.disallowBlockEffectsFor[S]&&f instanceof Ee){if(f.block)throw new RangeError("Block decorations may not be specified via plugins");if(a>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let M=a-s;if(f instanceof Ee)if(f.block){let{type:D}=f;D==qt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new dn(f.widget||new En("div"),M,D))}else{let D=di.create(f.widget||new En("span"),M,M?0:f.startSide),E=this.atCursorPos&&!D.isEditable&&y<=p.length&&(s<a||f.startSide>0),I=!D.isEditable&&(s<a||y>p.length||f.startSide<=0),$=this.getLine();this.pendingBuffer==2&&!E&&(this.pendingBuffer=0),this.flushBuffer(p),E&&($.append(Di(new vi(1),p),y),y=p.length+Math.max(0,y-p.length)),$.append(Di(D,p),y),this.atCursorPos=I,this.pendingBuffer=I?s<a||y>p.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=p.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(f);M&&(this.textOff+M<=this.text.length?this.textOff+=M:(this.skip+=M-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=a),this.openStart<0&&(this.openStart=y)}static build(s,a,f,p,y){let S=new _n(s,a,f,y);return S.openEnd=q.Xs.spans(p,a,f,S),S.openStart<0&&(S.openStart=S.openEnd),S.finish(S.openEnd),S}}function Di(d,s){for(let a of s)d=new zi(a,[d],d.length);return d}class En extends Mn{constructor(s){super(),this.tag=s}eq(s){return s.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(s){return s.nodeName.toLowerCase()==this.tag}}const Tn=q.r$.define(),zn=q.r$.define(),Pn=q.r$.define(),yi=q.r$.define(),vr=q.r$.define(),or=q.r$.define(),fe=q.r$.define(),bo=q.r$.define({combine:d=>d.some(s=>s)}),lr=q.r$.define({combine:d=>d.some(s=>s)});class wn{constructor(s,a="nearest",f="nearest",p=5,y=5){this.range=s,this.y=a,this.x=f,this.yMargin=p,this.xMargin=y}map(s){return s.empty?this:new wn(this.range.map(s),this.y,this.x,this.yMargin,this.xMargin)}}const yr=q.Py.define({map:(d,s)=>d.map(s)});function Kn(d,s,a){let f=d.facet(yi);f.length?f[0](s):window.onerror?window.onerror(String(s),a,void 0,void 0,s):a?console.error(a+":",s):console.error(s)}const cs=q.r$.define({combine:d=>d.length?d[0]:!0});let Jn=0;const xr=q.r$.define();class Xi{constructor(s,a,f,p){this.id=s,this.create=a,this.domEventHandlers=f,this.extension=p(this)}static define(s,a){const{eventHandlers:f,provide:p,decorations:y}=a||{};return new Xi(Jn++,s,f,S=>{let M=[xr.of(S)];return y&&M.push(fs.of(D=>{let E=D.plugin(S);return E?y(E):Ct.none})),p&&M.push(p(S)),M})}static fromClass(s,a){return Xi.define(f=>new s(f),a)}}class Ki{constructor(s){this.spec=s,this.mustUpdate=null,this.value=null}update(s){if(this.value){if(this.mustUpdate){let a=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(a)}catch(f){if(Kn(a.state,f,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(p){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(s)}catch(a){Kn(s.state,a,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(s){var a;if(!((a=this.value)===null||a===void 0)&&a.destroy)try{this.value.destroy()}catch(f){Kn(s.state,f,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const wo=q.r$.define(),Ls=q.r$.define(),fs=q.r$.define(),io=q.r$.define(),no=q.r$.define(),Vr=q.r$.define();class Ln{constructor(s,a,f,p){this.fromA=s,this.toA=a,this.fromB=f,this.toB=p}join(s){return new Ln(Math.min(this.fromA,s.fromA),Math.max(this.toA,s.toA),Math.min(this.fromB,s.fromB),Math.max(this.toB,s.toB))}addToSet(s){let a=s.length,f=this;for(;a>0;a--){let p=s[a-1];if(!(p.fromA>f.toA)){if(p.toA<f.fromA)break;f=f.join(p),s.splice(a-1,1)}}return s.splice(a,0,f),s}static extendWithRanges(s,a){if(a.length==0)return s;let f=[];for(let p=0,y=0,S=0,M=0;;p++){let D=p==s.length?null:s[p],E=S-M,I=D?D.fromB:1e9;for(;y<a.length&&a[y]<I;){let $=a[y],ne=a[y+1],le=Math.max(M,$),me=Math.min(I,ne);if(le<=me&&new Ln(le+E,me+E,le,me).addToSet(f),ne>I)break;y+=2}if(!D)return f;new Ln(D.fromA,D.toA,D.fromB,D.toB).addToSet(f),S=D.toA,M=D.toB}}}class F{constructor(s,a,f){this.view=s,this.state=a,this.transactions=f,this.flags=0,this.startState=s.state,this.changes=q.as.empty(this.startState.doc.length);for(let y of f)this.changes=this.changes.compose(y.changes);let p=[];this.changes.iterChangedRanges((y,S,M,D)=>p.push(new Ln(y,S,M,D))),this.changedRanges=p}static create(s,a,f){return new F(s,a,f)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(s=>s.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var v=function(d){return d[d.LTR=0]="LTR",d[d.RTL=1]="RTL",d}(v||(v={}));const b=v.LTR,A=v.RTL;function O(d){let s=[];for(let a=0;a<d.length;a++)s.push(1<<+d[a]);return s}const L=O("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),N=O("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),K=Object.create(null),j=[];for(let d of["()","[]","{}"]){let s=d.charCodeAt(0),a=d.charCodeAt(1);K[s]=a,K[a]=-s}function ce(d){return d<=247?L[d]:1424<=d&&d<=1524?2:1536<=d&&d<=1785?N[d-1536]:1774<=d&&d<=2220?4:8192<=d&&d<=8203?256:64336<=d&&d<=65023?4:d==8204?256:1}const ve=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ke{constructor(s,a,f){this.from=s,this.to=a,this.level=f}get dir(){return this.level%2?A:b}side(s,a){return this.dir==a==s?this.to:this.from}static find(s,a,f,p){let y=-1;for(let S=0;S<s.length;S++){let M=s[S];if(M.from<=a&&M.to>=a){if(M.level==f)return S;(y<0||(p!=0?p<0?M.from<a:M.to>a:s[y].level>M.level))&&(y=S)}}if(y<0)throw new RangeError("Index out of range");return y}}const He=[];function st(d,s){let a=d.length,f=s==b?1:2,p=s==b?2:1;if(!d||f==1&&!ve.test(d))return xi(a);for(let S=0,M=f,D=f;S<a;S++){let E=ce(d.charCodeAt(S));E==512?E=M:E==8&&D==4&&(E=16),He[S]=E==4?2:E,E&7&&(D=E),M=E}for(let S=0,M=f,D=f;S<a;S++){let E=He[S];if(E==128)S<a-1&&M==He[S+1]&&M&24?E=He[S]=M:He[S]=256;else if(E==64){let I=S+1;for(;I<a&&He[I]==64;)I++;let $=S&&M==8||I<a&&He[I]==8?D==1?1:8:256;for(let ne=S;ne<I;ne++)He[ne]=$;S=I-1}else E==8&&D==1&&(He[S]=1);M=E,E&7&&(D=E)}for(let S=0,M=0,D=0,E,I,$;S<a;S++)if(I=K[E=d.charCodeAt(S)])if(I<0){for(let ne=M-3;ne>=0;ne-=3)if(j[ne+1]==-I){let le=j[ne+2],me=le&2?f:le&4?le&1?p:f:0;me&&(He[S]=He[j[ne]]=me),M=ne;break}}else{if(j.length==189)break;j[M++]=S,j[M++]=E,j[M++]=D}else if(($=He[S])==2||$==1){let ne=$==f;D=ne?0:1;for(let le=M-3;le>=0;le-=3){let me=j[le+2];if(me&2)break;if(ne)j[le+2]|=2;else{if(me&4)break;j[le+2]|=4}}}for(let S=0;S<a;S++)if(He[S]==256){let M=S+1;for(;M<a&&He[M]==256;)M++;let D=(S?He[S-1]:f)==1,E=(M<a?He[M]:f)==1,I=D==E?D?1:2:f;for(let $=S;$<M;$++)He[$]=I;S=M-1}let y=[];if(f==1)for(let S=0;S<a;){let M=S,D=He[S++]!=1;for(;S<a&&D==(He[S]!=1);)S++;if(D)for(let E=S;E>M;){let I=E,$=He[--E]!=2;for(;E>M&&$==(He[E-1]!=2);)E--;y.push(new ke(E,I,$?2:1))}else y.push(new ke(M,S,0))}else for(let S=0;S<a;){let M=S,D=He[S++]==2;for(;S<a&&D==(He[S]==2);)S++;y.push(new ke(M,S,D?1:2))}return y}function xi(d){return[new ke(0,d,0)]}let br="";function fn(d,s,a,f,p){var y;let S=f.head-d.from,M=-1;if(S==0){if(!p||!d.length)return null;s[0].level!=a&&(S=s[0].side(!1,a),M=0)}else if(S==d.length){if(p)return null;let ne=s[s.length-1];ne.level!=a&&(S=ne.side(!0,a),M=s.length-1)}M<0&&(M=ke.find(s,S,(y=f.bidiLevel)!==null&&y!==void 0?y:-1,f.assoc));let D=s[M];S==D.side(p,a)&&(D=s[M+=p?1:-1],S=D.side(!p,a));let E=p==(D.dir==a),I=(0,q.cp)(d.text,S,E);if(br=d.text.slice(Math.min(S,I),Math.max(S,I)),I!=D.side(p,a))return q.jT.cursor(I+d.from,E?-1:1,D.level);let $=M==(p?s.length-1:0)?null:s[M+(p?1:-1)];return!$&&D.level!=a?q.jT.cursor(p?d.to:d.from,p?-1:1,a):$&&$.level<D.level?q.jT.cursor($.side(!p,a)+d.from,p?1:-1,$.level):q.jT.cursor(I+d.from,p?-1:1,D.level)}const ar="\uFFFF";class Uo{constructor(s,a){this.points=s,this.text="",this.lineSeparator=a.facet(q.yy.lineSeparator)}append(s){this.text+=s}lineBreak(){this.text+=ar}readRange(s,a){if(!s)return this;let f=s.parentNode;for(let p=s;;){this.findPointBefore(f,p),this.readNode(p);let y=p.nextSibling;if(y==a)break;let S=$e.get(p),M=$e.get(y);(S&&M?S.breakAfter:(S?S.breakAfter:Tl(p))||Tl(y)&&(p.nodeName!="BR"||p.cmIgnore))&&this.lineBreak(),p=y}return this.findPointBefore(f,a),this}readTextNode(s){let a=s.nodeValue;for(let f of this.points)f.node==s&&(f.pos=this.text.length+Math.min(f.offset,a.length));for(let f=0,p=this.lineSeparator?null:/\r\n?|\n/g;;){let y=-1,S=1,M;if(this.lineSeparator?(y=a.indexOf(this.lineSeparator,f),S=this.lineSeparator.length):(M=p.exec(a))&&(y=M.index,S=M[0].length),this.append(a.slice(f,y<0?a.length:y)),y<0)break;if(this.lineBreak(),S>1)for(let D of this.points)D.node==s&&D.pos>this.text.length&&(D.pos-=S-1);f=y+S}}readNode(s){if(s.cmIgnore)return;let a=$e.get(s),f=a&&a.overrideDOMText;if(f!=null){this.findPointInside(s,f.length);for(let p=f.iter();!p.next().done;)p.lineBreak?this.lineBreak():this.append(p.value)}else s.nodeType==3?this.readTextNode(s):s.nodeName=="BR"?s.nextSibling&&this.lineBreak():s.nodeType==1&&this.readRange(s.firstChild,null)}findPointBefore(s,a){for(let f of this.points)f.node==s&&s.childNodes[f.offset]==a&&(f.pos=this.text.length)}findPointInside(s,a){for(let f of this.points)(s.nodeType==3?f.node==s:s.contains(f.node))&&(f.pos=this.text.length+Math.min(a,f.offset))}}function Tl(d){return d.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(d.nodeName)}class jo{constructor(s,a){this.node=s,this.offset=a,this.pos=-1}}class qo extends $e{constructor(s){super(),this.view=s,this.compositionDeco=Ct.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(s.contentDOM),this.children=[new cn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ln(0,0,0,s.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(s){let a=s.changedRanges;this.minWidth>0&&a.length&&(a.every(({fromA:S,toA:M})=>M<this.minWidthFrom||S>this.minWidthTo)?(this.minWidthFrom=s.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=s.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Ct.none:(s.transactions.length||this.dirty)&&(this.compositionDeco=Bs(this.view,s.changes)),(Ve.ie||Ve.chrome)&&!this.compositionDeco.size&&s&&s.state.doc.lines!=s.startState.doc.lines&&(this.forceSelection=!0);let f=this.decorations,p=this.updateDeco(),y=Jl(f,p,s.changes);return a=Ln.extendWithRanges(a,y),this.dirty==0&&a.length==0?!1:(this.updateInner(a,s.startState.doc.length),s.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(s,a){this.view.viewState.mustMeasureContent=!0,this.updateChildren(s,a);let{observer:f}=this.view;f.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let y=Ve.chrome||Ve.ios?{node:f.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,y),this.dirty=0,y&&(y.written||f.selectionRange.focusNode!=y.node)&&(this.forceSelection=!0),this.dom.style.height=""});let p=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let y of this.children)y instanceof dn&&y.widget instanceof So&&p.push(y.dom);f.updateGaps(p)}updateChildren(s,a){let f=this.childCursor(a);for(let p=s.length-1;;p--){let y=p>=0?s[p]:null;if(!y)break;let{fromA:S,toA:M,fromB:D,toB:E}=y,{content:I,breakAtStart:$,openStart:ne,openEnd:le}=_n.build(this.view.state.doc,D,E,this.decorations,this.dynamicDecorationMap),{i:me,off:Te}=f.findPos(M,1),{i:Ae,off:We}=f.findPos(S,-1);Dt(this,Ae,We,me,Te,I,$,ne,le)}}updateSelection(s=!1,a=!1){if((s||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(a||this.mayControlSelection()))return;let f=this.forceSelection;this.forceSelection=!1;let p=this.view.state.selection.main,y=this.domAtPos(p.anchor),S=p.empty?y:this.domAtPos(p.head);if(Ve.gecko&&p.empty&&jl(y)){let D=document.createTextNode("");this.view.observer.ignore(()=>y.node.insertBefore(D,y.node.childNodes[y.offset]||null)),y=S=new et(D,0),f=!0}let M=this.view.observer.selectionRange;(f||!M.focusNode||!Ze(y.node,y.offset,M.anchorNode,M.anchorOffset)||!Ze(S.node,S.offset,M.focusNode,M.focusOffset))&&(this.view.observer.ignore(()=>{Ve.android&&Ve.chrome&&this.dom.contains(M.focusNode)&&Ol(M.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let D=k(this.view.root);if(D)if(p.empty){if(Ve.gecko){let E=Go(y.node,y.offset);if(E&&E!=3){let I=Xl(y.node,y.offset,E==1?1:-1);I&&(y=new et(I,E==1?0:I.nodeValue.length))}}D.collapse(y.node,y.offset),p.bidiLevel!=null&&M.cursorBidiLevel!=null&&(M.cursorBidiLevel=p.bidiLevel)}else if(D.extend){D.collapse(y.node,y.offset);try{D.extend(S.node,S.offset)}catch(E){}}else{let E=document.createRange();p.anchor>p.head&&([y,S]=[S,y]),E.setEnd(S.node,S.offset),E.setStart(y.node,y.offset),D.removeAllRanges(),D.addRange(E)}}),this.view.observer.setSelectionRange(y,S)),this.impreciseAnchor=y.precise?null:new et(M.anchorNode,M.anchorOffset),this.impreciseHead=S.precise?null:new et(M.focusNode,M.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:s}=this,a=s.state.selection.main,f=k(s.root),{anchorNode:p,anchorOffset:y}=s.observer.selectionRange;if(!f||!a.empty||!a.assoc||!f.modify)return;let S=cn.find(this,a.head);if(!S)return;let M=S.posAtStart;if(a.head==M||a.head==M+S.length)return;let D=this.coordsAt(a.head,-1),E=this.coordsAt(a.head,1);if(!D||!E||D.bottom>E.top)return;let I=this.domAtPos(a.head+a.assoc);f.collapse(I.node,I.offset),f.modify("move",a.assoc<0?"forward":"backward","lineboundary"),s.observer.readSelectionRange();let $=s.observer.selectionRange;s.docView.posFromDOM($.anchorNode,$.anchorOffset)!=a.from&&f.collapse(p,y)}mayControlSelection(){let s=this.view.root.activeElement;return s==this.dom||Li(this.dom,this.view.observer.selectionRange)&&!(s&&this.dom.contains(s))}nearest(s){for(let a=s;a;){let f=$e.get(a);if(f&&f.rootView==this)return f;a=a.parentNode}return null}posFromDOM(s,a){let f=this.nearest(s);if(!f)throw new RangeError("Trying to find position for a DOM position outside of the document");return f.localPosFromDOM(s,a)+f.posAtStart}domAtPos(s){let{i:a,off:f}=this.childCursor().findPos(s,-1);for(;a<this.children.length-1;){let p=this.children[a];if(f<p.length||p instanceof cn)break;a++,f=0}return this.children[a].domAtPos(f)}coordsAt(s,a){for(let f=this.length,p=this.children.length-1;;p--){let y=this.children[p],S=f-y.breakAfter-y.length;if(s>S||s==S&&y.type!=qt.WidgetBefore&&y.type!=qt.WidgetAfter&&(!p||a==2||this.children[p-1].breakAfter||this.children[p-1].type==qt.WidgetBefore&&a>-2))return y.coordsAt(s-S,a);f=S}}measureVisibleLineHeights(s){let a=[],{from:f,to:p}=s,y=this.view.contentDOM.clientWidth,S=y>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,M=-1,D=this.view.textDirection==v.LTR;for(let E=0,I=0;I<this.children.length;I++){let $=this.children[I],ne=E+$.length;if(ne>p)break;if(E>=f){let le=$.dom.getBoundingClientRect();if(a.push(le.height),S){let me=$.dom.lastChild,Te=me?Be(me):[];if(Te.length){let Ae=Te[Te.length-1],We=D?Ae.right-le.left:le.right-Ae.left;We>M&&(M=We,this.minWidth=y,this.minWidthFrom=E,this.minWidthTo=ne)}}}E=ne+$.breakAfter}return a}textDirectionAt(s){let{i:a}=this.childPos(s,1);return getComputedStyle(this.children[a].dom).direction=="rtl"?v.RTL:v.LTR}measureTextSize(){for(let p of this.children)if(p instanceof cn){let y=p.measureTextSize();if(y)return y}let s=document.createElement("div"),a,f;return s.className="cm-line",s.style.width="99999px",s.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(s);let p=Be(s.firstChild)[0];a=s.getBoundingClientRect().height,f=p?p.width/27:7,s.remove()}),{lineHeight:a,charWidth:f}}childCursor(s=this.length){let a=this.children.length;return a&&(s-=this.children[--a].length),new Ue(this.children,s,a)}computeBlockGapDeco(){let s=[],a=this.view.viewState;for(let f=0,p=0;;p++){let y=p==a.viewports.length?null:a.viewports[p],S=y?y.from-1:this.length;if(S>f){let M=a.lineBlockAt(S).bottom-a.lineBlockAt(f).top;s.push(Ct.replace({widget:new So(M),block:!0,inclusive:!0,isBlockGap:!0}).range(f,S))}if(!y)break;f=y.to+1}return Ct.set(s)}updateDeco(){let s=this.view.state.facet(fs).map((a,f)=>(this.dynamicDecorationMap[f]=typeof a=="function")?a(this.view):a);for(let a=s.length;a<s.length+3;a++)this.dynamicDecorationMap[a]=!1;return this.decorations=[...s,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(s){let{range:a}=s,f=this.coordsAt(a.head,a.empty?a.assoc:a.head>a.anchor?-1:1),p;if(!f)return;!a.empty&&(p=this.coordsAt(a.anchor,a.anchor>a.head?-1:1))&&(f={left:Math.min(f.left,p.left),top:Math.min(f.top,p.top),right:Math.max(f.right,p.right),bottom:Math.max(f.bottom,p.bottom)});let y=0,S=0,M=0,D=0;for(let I of this.view.state.facet(no).map($=>$(this.view)))if(I){let{left:$,right:ne,top:le,bottom:me}=I;$!=null&&(y=Math.max(y,$)),ne!=null&&(S=Math.max(S,ne)),le!=null&&(M=Math.max(M,le)),me!=null&&(D=Math.max(D,me))}let E={left:f.left-y,top:f.top-M,right:f.right+S,bottom:f.bottom+D};Se(this.view.scrollDOM,E,a.head<a.anchor?-1:1,s.x,s.y,s.xMargin,s.yMargin,this.view.textDirection==v.LTR)}}function jl(d){return d.node.nodeType==1&&d.node.firstChild&&(d.offset==0||d.node.childNodes[d.offset-1].contentEditable=="false")&&(d.offset==d.node.childNodes.length||d.node.childNodes[d.offset].contentEditable=="false")}class So extends Mn{constructor(s){super(),this.height=s}toDOM(){let s=document.createElement("div");return this.updateDOM(s),s}eq(s){return s.height==this.height}updateDOM(s){return s.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function ql(d){let s=d.observer.selectionRange,a=s.focusNode&&Xl(s.focusNode,s.focusOffset,0);if(!a)return null;let f=d.docView.nearest(a);if(!f)return null;if(f instanceof cn){let p=a;for(;p.parentNode!=f.dom;)p=p.parentNode;let y=p.previousSibling;for(;y&&!$e.get(y);)y=y.previousSibling;let S=y?$e.get(y).posAtEnd:f.posAtStart;return{from:S,to:S,node:p,text:a}}else{for(;;){let{parent:y}=f;if(!y)return null;if(y instanceof cn)break;f=y}let p=f.posAtStart;return{from:p,to:p+f.length,node:f.dom,text:a}}}function Bs(d,s){let a=ql(d);if(!a)return Ct.none;let{from:f,to:p,node:y,text:S}=a,M=s.mapPos(f,1),D=Math.max(M,s.mapPos(p,-1)),{state:E}=d,I=y.nodeType==3?y.nodeValue:new Uo([],E).readRange(y.firstChild,null).text;if(D-M<I.length)if(E.doc.sliceString(M,Math.min(E.doc.length,M+I.length),ar)==I)D=M+I.length;else if(E.doc.sliceString(Math.max(0,D-I.length),D,ar)==I)M=D-I.length;else return Ct.none;else if(E.doc.sliceString(M,D,ar)!=I)return Ct.none;let $=$e.get(y);return $ instanceof $t?$=$.widget.topView:$&&($.parent=null),Ct.set(Ct.replace({widget:new Gl(y,S,$),inclusive:!0}).range(M,D))}class Gl extends Mn{constructor(s,a,f){super(),this.top=s,this.text=a,this.topView=f}eq(s){return this.top==s.top&&this.text==s.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return $t}}function Xl(d,s,a){for(;;){if(d.nodeType==3)return d;if(d.nodeType==1&&s>0&&a<=0)d=d.childNodes[s-1],s=Fe(d);else if(d.nodeType==1&&s<d.childNodes.length&&a>=0)d=d.childNodes[s],s=0;else return null}}function Go(d,s){return d.nodeType!=1?0:(s&&d.childNodes[s-1].contentEditable=="false"?1:0)|(s<d.childNodes.length&&d.childNodes[s].contentEditable=="false"?2:0)}class Yl{constructor(){this.changes=[]}compareRange(s,a){qr(s,a,this.changes)}comparePoint(s,a){qr(s,a,this.changes)}}function Jl(d,s,a){let f=new Yl;return q.Xs.compare(d,s,a,f),f.changes}function Ol(d,s){for(let a=d;a&&a!=s;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return!0;return!1}function Ql(d,s,a=1){let f=d.charCategorizer(s),p=d.doc.lineAt(s),y=s-p.from;if(p.length==0)return q.jT.cursor(s);y==0?a=1:y==p.length&&(a=-1);let S=y,M=y;a<0?S=(0,q.cp)(p.text,y,!1):M=(0,q.cp)(p.text,y);let D=f(p.text.slice(S,M));for(;S>0;){let E=(0,q.cp)(p.text,S,!1);if(f(p.text.slice(E,S))!=D)break;S=E}for(;M<p.length;){let E=(0,q.cp)(p.text,M);if(f(p.text.slice(M,E))!=D)break;M=E}return q.jT.range(S+p.from,M+p.from)}function ro(d,s){return s.left>d?s.left-d:Math.max(0,d-s.right)}function ea(d,s){return s.top>d?s.top-d:Math.max(0,d-s.bottom)}function ks(d,s){return d.top<s.bottom-1&&d.bottom>s.top+1}function Xo(d,s){return s<d.top?{top:s,left:d.left,right:d.right,bottom:d.bottom}:d}function Ns(d,s){return s>d.bottom?{top:d.top,left:d.left,right:d.right,bottom:s}:d}function us(d,s,a){let f,p,y,S,M=!1,D,E,I,$;for(let me=d.firstChild;me;me=me.nextSibling){let Te=Be(me);for(let Ae=0;Ae<Te.length;Ae++){let We=Te[Ae];p&&ks(p,We)&&(We=Xo(Ns(We,p.bottom),p.top));let Wt=ro(s,We),Kt=ea(a,We);if(Wt==0&&Kt==0)return me.nodeType==3?Co(me,s,a):us(me,s,a);if(!f||S>Kt||S==Kt&&y>Wt){f=me,p=We,y=Wt,S=Kt;let Qt=Kt?a<We.top?-1:1:Wt?s<We.left?-1:1:0;M=!Qt||(Qt>0?Ae<Te.length-1:Ae>0)}Wt==0?a>We.bottom&&(!I||I.bottom<We.bottom)?(D=me,I=We):a<We.top&&(!$||$.top>We.top)&&(E=me,$=We):I&&ks(I,We)?I=Ns(I,We.bottom):$&&ks($,We)&&($=Xo($,We.top))}}if(I&&I.bottom>=a?(f=D,p=I):$&&$.top<=a&&(f=E,p=$),!f)return{node:d,offset:0};let ne=Math.max(p.left,Math.min(p.right,s));if(f.nodeType==3)return Co(f,ne,a);if(M&&f.contentEditable!="false")return us(f,ne,a);let le=Array.prototype.indexOf.call(d.childNodes,f)+(s>=(p.left+p.right)/2?1:0);return{node:d,offset:le}}function Co(d,s,a){let f=d.nodeValue.length,p=-1,y=1e9,S=0;for(let M=0;M<f;M++){let D=_i(d,M,M+1).getClientRects();for(let E=0;E<D.length;E++){let I=D[E];if(I.top==I.bottom)continue;S||(S=s-I.left);let $=(I.top>a?I.top-a:a-I.bottom)-1;if(I.left-1<=s&&I.right+1>=s&&$<y){let ne=s>=(I.left+I.right)/2,le=ne;if((Ve.chrome||Ve.gecko)&&_i(d,M).getBoundingClientRect().left==I.right&&(le=!ne),$<=0)return{node:d,offset:M+(le?1:0)};p=M+(le?1:0),y=$}}}return{node:d,offset:p>-1?p:S>0?d.nodeValue.length:0}}function Gr(d,s,a,f=-1){var p,y;let S=d.contentDOM.getBoundingClientRect(),M=S.top+d.viewState.paddingTop,D,{docHeight:E}=d.viewState,{x:I,y:$}=s,ne=$-M;if(ne<0)return 0;if(ne>E)return d.state.doc.length;for(let Qt=d.defaultLineHeight/2,Ei=!1;D=d.elementAtHeight(ne),D.type!=qt.Text;)for(;ne=f>0?D.bottom+Qt:D.top-Qt,!(ne>=0&&ne<=E);){if(Ei)return a?null:0;Ei=!0,f=-f}$=M+ne;let le=D.from;if(le<d.viewport.from)return d.viewport.from==0?0:a?null:Ra(d,S,D,I,$);if(le>d.viewport.to)return d.viewport.to==d.state.doc.length?d.state.doc.length:a?null:Ra(d,S,D,I,$);let me=d.dom.ownerDocument,Te=d.root.elementFromPoint?d.root:me,Ae=Te.elementFromPoint(I,$);Ae&&!d.contentDOM.contains(Ae)&&(Ae=null),Ae||(I=Math.max(S.left+1,Math.min(S.right-1,I)),Ae=Te.elementFromPoint(I,$),Ae&&!d.contentDOM.contains(Ae)&&(Ae=null));let We,Wt=-1;if(Ae&&((p=d.docView.nearest(Ae))===null||p===void 0?void 0:p.isEditable)!=!1){if(me.caretPositionFromPoint){let Qt=me.caretPositionFromPoint(I,$);Qt&&({offsetNode:We,offset:Wt}=Qt)}else if(me.caretRangeFromPoint){let Qt=me.caretRangeFromPoint(I,$);Qt&&({startContainer:We,startOffset:Wt}=Qt,(!d.contentDOM.contains(We)||Ve.safari&&ko(We,Wt,I)||Ve.chrome&&Da(We,Wt,I))&&(We=void 0))}}if(!We||!d.docView.dom.contains(We)){let Qt=cn.find(d.docView,le);if(!Qt)return ne>D.top+D.height/2?D.to:D.from;({node:We,offset:Wt}=us(Qt.dom,I,$))}let Kt=d.docView.nearest(We);if(!Kt)return null;if(Kt.isWidget&&((y=Kt.dom)===null||y===void 0?void 0:y.nodeType)==1){let Qt=Kt.dom.getBoundingClientRect();return s.y<Qt.top||s.y<=Qt.bottom&&s.x<=(Qt.left+Qt.right)/2?Kt.posAtStart:Kt.posAtEnd}else return Kt.localPosFromDOM(We,Wt)+Kt.posAtStart}function Ra(d,s,a,f,p){let y=Math.round((f-s.left)*d.defaultCharacterWidth);if(d.lineWrapping&&a.height>d.defaultLineHeight*1.5){let M=Math.floor((p-a.top)/d.defaultLineHeight);y+=M*d.viewState.heightOracle.lineLength}let S=d.state.sliceDoc(a.from,a.to);return a.from+(0,q.Gz)(S,y,d.state.tabSize)}function ko(d,s,a){let f;if(d.nodeType!=3||s!=(f=d.nodeValue.length))return!1;for(let p=d.nextSibling;p;p=p.nextSibling)if(p.nodeType!=1||p.nodeName!="BR")return!1;return _i(d,f-1,f).getBoundingClientRect().left>a}function Da(d,s,a){if(s!=0)return!1;for(let p=d;;){let y=p.parentNode;if(!y||y.nodeType!=1||y.firstChild!=p)return!1;if(y.classList.contains("cm-line"))break;p=y}let f=d.nodeType==1?d.getBoundingClientRect():_i(d,0,Math.max(d.nodeValue.length,1)).getBoundingClientRect();return a-f.left>5}function Rl(d,s,a,f){let p=d.state.doc.lineAt(s.head),y=!f||!d.lineWrapping?null:d.coordsAtPos(s.assoc<0&&s.head>p.from?s.head-1:s.head);if(y){let D=d.dom.getBoundingClientRect(),E=d.textDirectionAt(p.from),I=d.posAtCoords({x:a==(E==v.LTR)?D.right-1:D.left+1,y:(y.top+y.bottom)/2});if(I!=null)return q.jT.cursor(I,a?-1:1)}let S=cn.find(d.docView,s.head),M=S?a?S.posAtEnd:S.posAtStart:a?p.to:p.from;return q.jT.cursor(M,a?-1:1)}function ta(d,s,a,f){let p=d.state.doc.lineAt(s.head),y=d.bidiSpans(p),S=d.textDirectionAt(p.from);for(let M=s,D=null;;){let E=fn(p,y,S,M,a),I=br;if(!E){if(p.number==(a?d.state.doc.lines:1))return M;I=`
`,p=d.state.doc.line(p.number+(a?1:-1)),y=d.bidiSpans(p),E=q.jT.cursor(a?p.from:p.to)}if(D){if(!D(I))return M}else{if(!f)return E;D=f(I)}M=E}}function H(d,s,a){let f=d.state.charCategorizer(s),p=f(a);return y=>{let S=f(y);return p==q.D0.Space&&(p=S),p==S}}function J(d,s,a,f){let p=s.head,y=a?1:-1;if(p==(a?d.state.doc.length:0))return q.jT.cursor(p,s.assoc);let S=s.goalColumn,M,D=d.contentDOM.getBoundingClientRect(),E=d.coordsAtPos(p),I=d.documentTop;if(E)S==null&&(S=E.left-D.left),M=y<0?E.top:E.bottom;else{let le=d.viewState.lineBlockAt(p);S==null&&(S=Math.min(D.right-D.left,d.defaultCharacterWidth*(p-le.from))),M=(y<0?le.top:le.bottom)+I}let $=D.left+S,ne=f!=null?f:d.defaultLineHeight>>1;for(let le=0;;le+=10){let me=M+(ne+le)*y,Te=Gr(d,{x:$,y:me},!1,y);if(me<D.top||me>D.bottom||(y<0?Te<p:Te>p))return q.jT.cursor(Te,s.assoc,void 0,S)}}function Q(d,s,a){let f=d.state.facet(io).map(p=>p(d));for(;;){let p=!1;for(let y of f)y.between(a.from-1,a.from+1,(S,M,D)=>{a.from>S&&a.from<M&&(a=s.head>a.from?q.jT.cursor(S,1):q.jT.cursor(M,-1),p=!0)});if(!p)return a}}class G{constructor(s){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let a=(f,p)=>{this.ignoreDuringComposition(p)||p.type=="keydown"&&this.keydown(s,p)||(this.mustFlushObserver(p)&&s.observer.forceFlush(),this.runCustomHandlers(p.type,s,p)?p.preventDefault():f(s,p))};for(let f in Ce){let p=Ce[f];s.contentDOM.addEventListener(f,y=>{_e(s,y)&&a(p,y)},Qe[f]),this.registeredEvents.push(f)}s.scrollDOM.addEventListener("mousedown",f=>{f.target==s.scrollDOM&&f.clientY>s.contentDOM.getBoundingClientRect().bottom&&a(Ce.mousedown,f)}),Ve.chrome&&Ve.chrome_version==102&&s.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?s.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,s.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=s.hasFocus,Ve.safari&&s.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(s){this.lastSelectionOrigin=s,this.lastSelectionTime=Date.now()}ensureHandlers(s,a){var f;let p;this.customHandlers=[];for(let y of a)if(p=(f=y.update(s).spec)===null||f===void 0?void 0:f.domEventHandlers){this.customHandlers.push({plugin:y.value,handlers:p});for(let S in p)this.registeredEvents.indexOf(S)<0&&S!="scroll"&&(this.registeredEvents.push(S),s.contentDOM.addEventListener(S,M=>{_e(s,M)&&this.runCustomHandlers(S,s,M)&&M.preventDefault()}))}}runCustomHandlers(s,a,f){for(let p of this.customHandlers){let y=p.handlers[s];if(y)try{if(y.call(p.plugin,f,a)||f.defaultPrevented)return!0}catch(S){Kn(a.state,S)}}return!1}runScrollHandlers(s,a){this.lastScrollTop=s.scrollDOM.scrollTop,this.lastScrollLeft=s.scrollDOM.scrollLeft;for(let f of this.customHandlers){let p=f.handlers.scroll;if(p)try{p.call(f.plugin,a,s)}catch(y){Kn(s.state,y)}}}keydown(s,a){if(this.lastKeyCode=a.keyCode,this.lastKeyTime=Date.now(),a.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Ve.android&&Ve.chrome&&!a.synthetic&&(a.keyCode==13||a.keyCode==8))return s.observer.delayAndroidKey(a.key,a.keyCode),!0;let f;return Ve.ios&&!a.synthetic&&!a.altKey&&!a.metaKey&&((f=ee.find(p=>p.keyCode==a.keyCode))&&!a.ctrlKey||ae.indexOf(a.key)>-1&&a.ctrlKey&&!a.shiftKey)?(this.pendingIOSKey=f||a,setTimeout(()=>this.flushIOSKey(s),250),!0):!1}flushIOSKey(s){let a=this.pendingIOSKey;return a?(this.pendingIOSKey=void 0,kt(s.contentDOM,a.key,a.keyCode)):!1}ignoreDuringComposition(s){return/^key/.test(s.type)?this.composing>0?!0:Ve.safari&&!Ve.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(s){return s.type=="keydown"&&s.keyCode!=229}startMouseSelection(s){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=s}update(s){this.mouseSelection&&this.mouseSelection.update(s),s.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const ee=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ae="dthko",pe=[16,17,18,20,91,92,224,225];function ye(d){return d*.7+8}class ge{constructor(s,a,f,p){this.view=s,this.style=f,this.mustSelect=p,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=a,this.scrollParent=nt(s.contentDOM);let y=s.contentDOM.ownerDocument;y.addEventListener("mousemove",this.move=this.move.bind(this)),y.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=a.shiftKey,this.multiple=s.state.facet(q.yy.allowMultipleSelections)&&de(s,a),this.dragMove=xe(s,a),this.dragging=Pe(s,a)&&ut(a)==1?null:!1}start(s){this.dragging===!1&&(s.preventDefault(),this.select(s))}move(s){var a;if(s.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=s);let f=0,p=0,y=((a=this.scrollParent)===null||a===void 0?void 0:a.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};s.clientX<=y.left?f=-ye(y.left-s.clientX):s.clientX>=y.right&&(f=ye(s.clientX-y.right)),s.clientY<=y.top?p=-ye(y.top-s.clientY):s.clientY>=y.bottom&&(p=ye(s.clientY-y.bottom)),this.setScrollSpeed(f,p)}up(s){this.dragging==null&&this.select(this.lastEvent),this.dragging||s.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let s=this.view.contentDOM.ownerDocument;s.removeEventListener("mousemove",this.move),s.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(s,a){this.scrollSpeed={x:s,y:a},s||a?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(s){let a=this.style.get(s,this.extend,this.multiple);(this.mustSelect||!a.eq(this.view.state.selection)||a.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:a,userEvent:"select.pointer"}),this.mustSelect=!1}update(s){s.docChanged&&this.dragging&&(this.dragging=this.dragging.map(s.changes)),this.style.update(s)&&setTimeout(()=>this.select(this.lastEvent),20)}}function de(d,s){let a=d.state.facet(Tn);return a.length?a[0](s):Ve.mac?s.metaKey:s.ctrlKey}function xe(d,s){let a=d.state.facet(zn);return a.length?a[0](s):Ve.mac?!s.altKey:!s.ctrlKey}function Pe(d,s){let{main:a}=d.state.selection;if(a.empty)return!1;let f=k(d.root);if(!f||f.rangeCount==0)return!0;let p=f.getRangeAt(0).getClientRects();for(let y=0;y<p.length;y++){let S=p[y];if(S.left<=s.clientX&&S.right>=s.clientX&&S.top<=s.clientY&&S.bottom>=s.clientY)return!0}return!1}function _e(d,s){if(!s.bubbles)return!0;if(s.defaultPrevented)return!1;for(let a=s.target,f;a!=d.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(f=$e.get(a))&&f.ignoreEvent(s))return!1;return!0}const Ce=Object.create(null),Qe=Object.create(null),vt=Ve.ie&&Ve.ie_version<15||Ve.ios&&Ve.webkit_version<604;function ot(d){let s=d.dom.parentNode;if(!s)return;let a=s.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout(()=>{d.focus(),a.remove(),wt(d,a.value)},50)}function wt(d,s){let{state:a}=d,f,p=1,y=a.toText(s),S=y.lines==a.selection.ranges.length;if(ht!=null&&a.selection.ranges.every(D=>D.empty)&&ht==y.toString()){let D=-1;f=a.changeByRange(E=>{let I=a.doc.lineAt(E.from);if(I.from==D)return{range:E};D=I.from;let $=a.toText((S?y.line(p++).text:s)+a.lineBreak);return{changes:{from:I.from,insert:$},range:q.jT.cursor(E.from+$.length)}})}else S?f=a.changeByRange(D=>{let E=y.line(p++);return{changes:{from:D.from,to:D.to,insert:E.text},range:q.jT.cursor(D.from+E.length)}}):f=a.replaceSelection(y);d.dispatch(f,{userEvent:"input.paste",scrollIntoView:!0})}Ce.keydown=(d,s)=>{d.inputState.setSelectionOrigin("select"),s.keyCode==27?d.inputState.lastEscPress=Date.now():pe.indexOf(s.keyCode)<0&&(d.inputState.lastEscPress=0)},Ce.touchstart=(d,s)=>{d.inputState.lastTouchTime=Date.now(),d.inputState.setSelectionOrigin("select.pointer")},Ce.touchmove=d=>{d.inputState.setSelectionOrigin("select.pointer")},Qe.touchstart=Qe.touchmove={passive:!0},Ce.mousedown=(d,s)=>{if(d.observer.flush(),d.inputState.lastTouchTime>Date.now()-2e3)return;let a=null;for(let f of d.state.facet(Pn))if(a=f(d,s),a)break;if(!a&&s.button==0&&(a=lt(d,s)),a){let f=d.root.activeElement!=d.contentDOM;d.inputState.startMouseSelection(new ge(d,s,a,f)),f&&d.observer.ignore(()=>jt(d.contentDOM)),d.inputState.mouseSelection&&d.inputState.mouseSelection.start(s)}};function gt(d,s,a,f){if(f==1)return q.jT.cursor(s,a);if(f==2)return Ql(d.state,s,a);{let p=cn.find(d.docView,s),y=d.state.doc.lineAt(p?p.posAtEnd:s),S=p?p.posAtStart:y.from,M=p?p.posAtEnd:y.to;return M<d.state.doc.length&&M==y.to&&M++,q.jT.range(S,M)}}let it=(d,s)=>d>=s.top&&d<=s.bottom,At=(d,s,a)=>it(s,a)&&d>=a.left&&d<=a.right;function xt(d,s,a,f){let p=cn.find(d.docView,s);if(!p)return 1;let y=s-p.posAtStart;if(y==0)return 1;if(y==p.length)return-1;let S=p.coordsAt(y,-1);if(S&&At(a,f,S))return-1;let M=p.coordsAt(y,1);return M&&At(a,f,M)?1:S&&it(f,S)?-1:1}function Tt(d,s){let a=d.posAtCoords({x:s.clientX,y:s.clientY},!1);return{pos:a,bias:xt(d,a,s.clientX,s.clientY)}}const pi=Ve.ie&&Ve.ie_version<=11;let Bt=null,Ht=0,bi=0;function ut(d){if(!pi)return d.detail;let s=Bt,a=bi;return Bt=d,bi=Date.now(),Ht=!s||a>Date.now()-400&&Math.abs(s.clientX-d.clientX)<2&&Math.abs(s.clientY-d.clientY)<2?(Ht+1)%3:1}function lt(d,s){let a=Tt(d,s),f=ut(s),p=d.state.selection;return{update(y){y.docChanged&&(a.pos=y.changes.mapPos(a.pos),p=p.map(y.changes))},get(y,S,M){let D=Tt(d,y),E=gt(d,D.pos,D.bias,f);if(a.pos!=D.pos&&!S){let I=gt(d,a.pos,a.bias,f),$=Math.min(I.from,E.from),ne=Math.max(I.to,E.to);E=$<E.from?q.jT.range($,ne):q.jT.range(ne,$)}return S?p.replaceRange(p.main.extend(E.from,E.to)):M&&p.ranges.length>1&&p.ranges.some(I=>I.eq(E))?ze(p,E):M?p.addRange(E):q.jT.create([E])}}}function ze(d,s){for(let a=0;;a++)if(d.ranges[a].eq(s))return q.jT.create(d.ranges.slice(0,a).concat(d.ranges.slice(a+1)),d.mainIndex==a?0:d.mainIndex-(d.mainIndex>a?1:0))}Ce.dragstart=(d,s)=>{let{selection:{main:a}}=d.state,{mouseSelection:f}=d.inputState;f&&(f.dragging=a),s.dataTransfer&&(s.dataTransfer.setData("Text",d.state.sliceDoc(a.from,a.to)),s.dataTransfer.effectAllowed="copyMove")};function bt(d,s,a,f){if(!a)return;let p=d.posAtCoords({x:s.clientX,y:s.clientY},!1);s.preventDefault();let{mouseSelection:y}=d.inputState,S=f&&y&&y.dragging&&y.dragMove?{from:y.dragging.from,to:y.dragging.to}:null,M={from:p,insert:a},D=d.state.changes(S?[S,M]:M);d.focus(),d.dispatch({changes:D,selection:{anchor:D.mapPos(p,-1),head:D.mapPos(p,1)},userEvent:S?"move.drop":"input.drop"})}Ce.drop=(d,s)=>{if(!s.dataTransfer)return;if(d.state.readOnly)return s.preventDefault();let a=s.dataTransfer.files;if(a&&a.length){s.preventDefault();let f=Array(a.length),p=0,y=()=>{++p==a.length&&bt(d,s,f.filter(S=>S!=null).join(d.state.lineBreak),!1)};for(let S=0;S<a.length;S++){let M=new FileReader;M.onerror=y,M.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(M.result)||(f[S]=M.result),y()},M.readAsText(a[S])}}else bt(d,s,s.dataTransfer.getData("Text"),!0)},Ce.paste=(d,s)=>{if(d.state.readOnly)return s.preventDefault();d.observer.flush();let a=vt?null:s.clipboardData;a?(wt(d,a.getData("text/plain")||a.getData("text/uri-text")),s.preventDefault()):ot(d)};function Ot(d,s){let a=d.dom.parentNode;if(!a)return;let f=a.appendChild(document.createElement("textarea"));f.style.cssText="position: fixed; left: -10000px; top: 10px",f.value=s,f.focus(),f.selectionEnd=s.length,f.selectionStart=0,setTimeout(()=>{f.remove(),d.focus()},50)}function Et(d){let s=[],a=[],f=!1;for(let p of d.selection.ranges)p.empty||(s.push(d.sliceDoc(p.from,p.to)),a.push(p));if(!s.length){let p=-1;for(let{from:y}of d.selection.ranges){let S=d.doc.lineAt(y);S.number>p&&(s.push(S.text),a.push({from:S.from,to:Math.min(d.doc.length,S.to+1)})),p=S.number}f=!0}return{text:s.join(d.lineBreak),ranges:a,linewise:f}}let ht=null;Ce.copy=Ce.cut=(d,s)=>{let{text:a,ranges:f,linewise:p}=Et(d.state);if(!a&&!p)return;ht=p?a:null;let y=vt?null:s.clipboardData;y?(s.preventDefault(),y.clearData(),y.setData("text/plain",a)):Ot(d,a),s.type=="cut"&&!d.state.readOnly&&d.dispatch({changes:f,scrollIntoView:!0,userEvent:"delete.cut"})};const Gt=q.q6.define();function $i(d,s){let a=[];for(let f of d.facet(fe)){let p=f(d,s);p&&a.push(p)}return a?d.update({effects:a,annotations:Gt.of(!0)}):null}function Zi(d){setTimeout(()=>{let s=d.hasFocus;if(s!=d.inputState.notifiedFocused){let a=$i(d.state,s);a?d.dispatch(a):d.update([])}},10)}Ce.focus=d=>{d.inputState.lastFocusTime=Date.now(),!d.scrollDOM.scrollTop&&(d.inputState.lastScrollTop||d.inputState.lastScrollLeft)&&(d.scrollDOM.scrollTop=d.inputState.lastScrollTop,d.scrollDOM.scrollLeft=d.inputState.lastScrollLeft),Zi(d)},Ce.blur=d=>{d.observer.clearSelectionRange(),Zi(d)},Ce.compositionstart=Ce.compositionupdate=d=>{d.inputState.compositionFirstChange==null&&(d.inputState.compositionFirstChange=!0),d.inputState.composing<0&&(d.inputState.composing=0)},Ce.compositionend=d=>{d.inputState.composing=-1,d.inputState.compositionEndedAt=Date.now(),d.inputState.compositionFirstChange=null,Ve.chrome&&Ve.android&&d.observer.flushSoon(),setTimeout(()=>{d.inputState.composing<0&&d.docView.compositionDeco.size&&d.update([])},50)},Ce.contextmenu=d=>{d.inputState.lastContextMenu=Date.now()},Ce.beforeinput=(d,s)=>{var a;let f;if(Ve.chrome&&Ve.android&&(f=ee.find(p=>p.inputType==s.inputType))&&(d.observer.delayAndroidKey(f.key,f.keyCode),f.key=="Backspace"||f.key=="Delete")){let p=((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0;setTimeout(()=>{var y;(((y=window.visualViewport)===null||y===void 0?void 0:y.height)||0)>p+10&&d.hasFocus&&(d.contentDOM.blur(),d.focus())},100)}};const Wi=["pre-wrap","normal","pre-line","break-spaces"];class Qn{constructor(s){this.lineWrapping=s,this.doc=q.xv.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(s,a){let f=this.doc.lineAt(a).number-this.doc.lineAt(s).number+1;return this.lineWrapping&&(f+=Math.max(0,Math.ceil((a-s-f*this.lineLength*.5)/this.lineLength))),this.lineHeight*f}heightForLine(s){return this.lineWrapping?(1+Math.max(0,Math.ceil((s-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(s){return this.doc=s,this}mustRefreshForWrapping(s){return Wi.indexOf(s)>-1!=this.lineWrapping}mustRefreshForHeights(s){let a=!1;for(let f=0;f<s.length;f++){let p=s[f];p<0?f++:this.heightSamples[Math.floor(p*10)]||(a=!0,this.heightSamples[Math.floor(p*10)]=!0)}return a}refresh(s,a,f,p,y){let S=Wi.indexOf(s)>-1,M=Math.round(a)!=Math.round(this.lineHeight)||this.lineWrapping!=S;if(this.lineWrapping=S,this.lineHeight=a,this.charWidth=f,this.lineLength=p,M){this.heightSamples={};for(let D=0;D<y.length;D++){let E=y[D];E<0?D++:this.heightSamples[Math.floor(E*10)]=!0}}return M}}class Lt{constructor(s,a){this.from=s,this.heights=a,this.index=0}get more(){return this.index<this.heights.length}}class en{constructor(s,a,f,p,y){this.from=s,this.length=a,this.top=f,this.height=p,this.type=y}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(s){let a=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(s.type)?s.type:[s]);return new en(this.from,this.length+s.length,this.top,this.height+s.height,a)}}var Pt=function(d){return d[d.ByPos=0]="ByPos",d[d.ByHeight=1]="ByHeight",d[d.ByPosNoHeight=2]="ByPosNoHeight",d}(Pt||(Pt={}));const Vt=.001;class wi{constructor(s,a,f=2){this.length=s,this.height=a,this.flags=f}get outdated(){return(this.flags&2)>0}set outdated(s){this.flags=(s?2:0)|this.flags&-3}setHeight(s,a){this.height!=a&&(Math.abs(this.height-a)>Vt&&(s.heightChanged=!0),this.height=a)}replace(s,a,f){return wi.of(f)}decomposeLeft(s,a){a.push(this)}decomposeRight(s,a){a.push(this)}applyChanges(s,a,f,p){let y=this,S=f.doc;for(let M=p.length-1;M>=0;M--){let{fromA:D,toA:E,fromB:I,toB:$}=p[M],ne=y.lineAt(D,Pt.ByPosNoHeight,f.setDoc(a),0,0),le=ne.to>=E?ne:y.lineAt(E,Pt.ByPosNoHeight,f,0,0);for($+=le.to-E,E=le.to;M>0&&ne.from<=p[M-1].toA;)D=p[M-1].fromA,I=p[M-1].fromB,M--,D<ne.from&&(ne=y.lineAt(D,Pt.ByPosNoHeight,f,0,0));I+=ne.from-D,D=ne.from;let me=$n.build(f.setDoc(S),s,I,$);y=y.replace(D,E,me)}return y.updateHeight(f,0)}static empty(){return new tn(0,0)}static of(s){if(s.length==1)return s[0];let a=0,f=s.length,p=0,y=0;for(;;)if(a==f)if(p>y*2){let M=s[a-1];M.break?s.splice(--a,1,M.left,null,M.right):s.splice(--a,1,M.left,M.right),f+=1+M.break,p-=M.size}else if(y>p*2){let M=s[f];M.break?s.splice(f,1,M.left,null,M.right):s.splice(f,1,M.left,M.right),f+=2+M.break,y-=M.size}else break;else if(p<y){let M=s[a++];M&&(p+=M.size)}else{let M=s[--f];M&&(y+=M.size)}let S=0;return s[a-1]==null?(S=1,a--):s[a]==null&&(S=1,f++),new wr(wi.of(s.slice(0,a)),S,wi.of(s.slice(f)))}}wi.prototype.size=1;class Xr extends wi{constructor(s,a,f){super(s,a),this.type=f}blockAt(s,a,f,p){return new en(p,this.length,f,this.height,this.type)}lineAt(s,a,f,p,y){return this.blockAt(0,f,p,y)}forEachLine(s,a,f,p,y,S){s<=y+this.length&&a>=y&&S(this.blockAt(0,f,p,y))}updateHeight(s,a=0,f=!1,p){return p&&p.from<=a&&p.more&&this.setHeight(s,p.heights[p.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class tn extends Xr{constructor(s,a){super(s,a,qt.Text),this.collapsed=0,this.widgetHeight=0}replace(s,a,f){let p=f[0];return f.length==1&&(p instanceof tn||p instanceof Ui&&p.flags&4)&&Math.abs(this.length-p.length)<10?(p instanceof Ui?p=new tn(p.length,this.height):p.height=this.height,this.outdated||(p.outdated=!1),p):wi.of(f)}updateHeight(s,a=0,f=!1,p){return p&&p.from<=a&&p.more?this.setHeight(s,p.heights[p.index++]):(f||this.outdated)&&this.setHeight(s,Math.max(this.widgetHeight,s.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ui extends wi{constructor(s){super(s,0)}heightMetrics(s,a){let f=s.doc.lineAt(a).number,p=s.doc.lineAt(a+this.length).number,y=p-f+1,S,M=0;if(s.lineWrapping){let D=Math.min(this.height,s.lineHeight*y);S=D/y,M=(this.height-D)/(this.length-y-1)}else S=this.height/y;return{firstLine:f,lastLine:p,perLine:S,perChar:M}}blockAt(s,a,f,p){let{firstLine:y,lastLine:S,perLine:M,perChar:D}=this.heightMetrics(a,p);if(a.lineWrapping){let E=p+Math.round(Math.max(0,Math.min(1,(s-f)/this.height))*this.length),I=a.doc.lineAt(E),$=M+I.length*D,ne=Math.max(f,s-$/2);return new en(I.from,I.length,ne,$,qt.Text)}else{let E=Math.max(0,Math.min(S-y,Math.floor((s-f)/M))),{from:I,length:$}=a.doc.line(y+E);return new en(I,$,f+M*E,M,qt.Text)}}lineAt(s,a,f,p,y){if(a==Pt.ByHeight)return this.blockAt(s,f,p,y);if(a==Pt.ByPosNoHeight){let{from:le,to:me}=f.doc.lineAt(s);return new en(le,me-le,0,0,qt.Text)}let{firstLine:S,perLine:M,perChar:D}=this.heightMetrics(f,y),E=f.doc.lineAt(s),I=M+E.length*D,$=E.number-S,ne=p+M*$+D*(E.from-y-$);return new en(E.from,E.length,Math.max(p,Math.min(ne,p+this.height-I)),I,qt.Text)}forEachLine(s,a,f,p,y,S){s=Math.max(s,y),a=Math.min(a,y+this.length);let{firstLine:M,perLine:D,perChar:E}=this.heightMetrics(f,y);for(let I=s,$=p;I<=a;){let ne=f.doc.lineAt(I);if(I==s){let me=ne.number-M;$+=D*me+E*(s-y-me)}let le=D+E*ne.length;S(new en(ne.from,ne.length,$,le,qt.Text)),$+=le,I=ne.to+1}}replace(s,a,f){let p=this.length-a;if(p>0){let y=f[f.length-1];y instanceof Ui?f[f.length-1]=new Ui(y.length+p):f.push(null,new Ui(p-1))}if(s>0){let y=f[0];y instanceof Ui?f[0]=new Ui(s+y.length):f.unshift(new Ui(s-1),null)}return wi.of(f)}decomposeLeft(s,a){a.push(new Ui(s-1),null)}decomposeRight(s,a){a.push(null,new Ui(this.length-s-1))}updateHeight(s,a=0,f=!1,p){let y=a+this.length;if(p&&p.from<=a+this.length&&p.more){let S=[],M=Math.max(a,p.from),D=-1;for(p.from>a&&S.push(new Ui(p.from-a-1).updateHeight(s,a));M<=y&&p.more;){let I=s.doc.lineAt(M).length;S.length&&S.push(null);let $=p.heights[p.index++];D==-1?D=$:Math.abs($-D)>=Vt&&(D=-2);let ne=new tn(I,$);ne.outdated=!1,S.push(ne),M+=I+1}M<=y&&S.push(null,new Ui(y-M).updateHeight(s,M));let E=wi.of(S);return(D<0||Math.abs(E.height-this.height)>=Vt||Math.abs(D-this.heightMetrics(s,a).perLine)>=Vt)&&(s.heightChanged=!0),E}else(f||this.outdated)&&(this.setHeight(s,s.heightForGap(a,a+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class wr extends wi{constructor(s,a,f){super(s.length+a+f.length,s.height+f.height,a|(s.outdated||f.outdated?2:0)),this.left=s,this.right=f,this.size=s.size+f.size}get break(){return this.flags&1}blockAt(s,a,f,p){let y=f+this.left.height;return s<y?this.left.blockAt(s,a,f,p):this.right.blockAt(s,a,y,p+this.left.length+this.break)}lineAt(s,a,f,p,y){let S=p+this.left.height,M=y+this.left.length+this.break,D=a==Pt.ByHeight?s<S:s<M,E=D?this.left.lineAt(s,a,f,p,y):this.right.lineAt(s,a,f,S,M);if(this.break||(D?E.to<M:E.from>M))return E;let I=a==Pt.ByPosNoHeight?Pt.ByPosNoHeight:Pt.ByPos;return D?E.join(this.right.lineAt(M,I,f,S,M)):this.left.lineAt(M,I,f,p,y).join(E)}forEachLine(s,a,f,p,y,S){let M=p+this.left.height,D=y+this.left.length+this.break;if(this.break)s<D&&this.left.forEachLine(s,a,f,p,y,S),a>=D&&this.right.forEachLine(s,a,f,M,D,S);else{let E=this.lineAt(D,Pt.ByPos,f,p,y);s<E.from&&this.left.forEachLine(s,E.from-1,f,p,y,S),E.to>=s&&E.from<=a&&S(E),a>E.to&&this.right.forEachLine(E.to+1,a,f,M,D,S)}}replace(s,a,f){let p=this.left.length+this.break;if(a<p)return this.balanced(this.left.replace(s,a,f),this.right);if(s>this.left.length)return this.balanced(this.left,this.right.replace(s-p,a-p,f));let y=[];s>0&&this.decomposeLeft(s,y);let S=y.length;for(let M of f)y.push(M);if(s>0&&Yi(y,S-1),a<this.length){let M=y.length;this.decomposeRight(a,y),Yi(y,M)}return wi.of(y)}decomposeLeft(s,a){let f=this.left.length;if(s<=f)return this.left.decomposeLeft(s,a);a.push(this.left),this.break&&(f++,s>=f&&a.push(null)),s>f&&this.right.decomposeLeft(s-f,a)}decomposeRight(s,a){let f=this.left.length,p=f+this.break;if(s>=p)return this.right.decomposeRight(s-p,a);s<f&&this.left.decomposeRight(s,a),this.break&&s<p&&a.push(null),a.push(this.right)}balanced(s,a){return s.size>2*a.size||a.size>2*s.size?wi.of(this.break?[s,null,a]:[s,a]):(this.left=s,this.right=a,this.height=s.height+a.height,this.outdated=s.outdated||a.outdated,this.size=s.size+a.size,this.length=s.length+this.break+a.length,this)}updateHeight(s,a=0,f=!1,p){let{left:y,right:S}=this,M=a+y.length+this.break,D=null;return p&&p.from<=a+y.length&&p.more?D=y=y.updateHeight(s,a,f,p):y.updateHeight(s,a,f),p&&p.from<=M+S.length&&p.more?D=S=S.updateHeight(s,M,f,p):S.updateHeight(s,M,f),D?this.balanced(y,S):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Yi(d,s){let a,f;d[s]==null&&(a=d[s-1])instanceof Ui&&(f=d[s+1])instanceof Ui&&d.splice(s-1,3,new Ui(a.length+1+f.length))}const nn=5;class $n{constructor(s,a){this.pos=s,this.oracle=a,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=s}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(s,a){if(this.lineStart>-1){let f=Math.min(a,this.lineEnd),p=this.nodes[this.nodes.length-1];p instanceof tn?p.length+=f-this.pos:(f>this.pos||!this.isCovered)&&this.nodes.push(new tn(f-this.pos,-1)),this.writtenTo=f,a>f&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}point(s,a,f){if(s<a||f.heightRelevant){let p=f.widget?f.widget.estimatedHeight:0;p<0&&(p=this.oracle.lineHeight);let y=a-s;f.block?this.addBlock(new Xr(y,p,f.type)):(y||p>=nn)&&this.addLineDeco(p,y)}else a>s&&this.span(s,a);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:s,to:a}=this.oracle.doc.lineAt(this.pos);this.lineStart=s,this.lineEnd=a,this.writtenTo<s&&((this.writtenTo<s-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,s-1)),this.nodes.push(null)),this.pos>s&&this.nodes.push(new tn(this.pos-s,-1)),this.writtenTo=this.pos}blankContent(s,a){let f=new Ui(a-s);return this.oracle.doc.lineAt(s).to==a&&(f.flags|=4),f}ensureLine(){this.enterLine();let s=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(s instanceof tn)return s;let a=new tn(0,-1);return this.nodes.push(a),a}addBlock(s){this.enterLine(),s.type==qt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(s),this.writtenTo=this.pos=this.pos+s.length,s.type!=qt.WidgetBefore&&(this.covering=s)}addLineDeco(s,a){let f=this.ensureLine();f.length+=a,f.collapsed+=a,f.widgetHeight=Math.max(f.widgetHeight,s),this.writtenTo=this.pos=this.pos+a}finish(s){let a=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(a instanceof tn)&&!this.isCovered?this.nodes.push(new tn(0,-1)):(this.writtenTo<this.pos||a==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let f=s;for(let p of this.nodes)p instanceof tn&&p.updateHeight(this.oracle,f),f+=p?p.length:1;return this.nodes}static build(s,a,f,p){let y=new $n(f,s);return q.Xs.spans(a,f,p,y,0),y.finish(f)}}function Er(d,s,a){let f=new Is;return q.Xs.compare(d,s,a,f,0),f.changes}class Is{constructor(){this.changes=[]}compareRange(){}comparePoint(s,a,f,p){(s<a||f&&f.heightRelevant||p&&p.heightRelevant)&&qr(s,a,this.changes,5)}}function As(d,s){let a=d.getBoundingClientRect(),f=d.ownerDocument,p=f.defaultView||window,y=Math.max(0,a.left),S=Math.min(p.innerWidth,a.right),M=Math.max(0,a.top),D=Math.min(p.innerHeight,a.bottom);for(let E=d.parentNode;E&&E!=f.body;)if(E.nodeType==1){let I=E,$=window.getComputedStyle(I);if((I.scrollHeight>I.clientHeight||I.scrollWidth>I.clientWidth)&&$.overflow!="visible"){let ne=I.getBoundingClientRect();y=Math.max(y,ne.left),S=Math.min(S,ne.right),M=Math.max(M,ne.top),D=E==d.parentNode?ne.bottom:Math.min(D,ne.bottom)}E=$.position=="absolute"||$.position=="fixed"?I.offsetParent:I.parentNode}else if(E.nodeType==11)E=E.host;else break;return{left:y-a.left,right:Math.max(y,S)-a.left,top:M-(a.top+s),bottom:Math.max(M,D)-(a.top+s)}}function Sr(d,s){let a=d.getBoundingClientRect();return{left:0,right:a.right-a.left,top:s,bottom:a.bottom-(a.top+s)}}class Zn{constructor(s,a,f){this.from=s,this.to=a,this.size=f}static same(s,a){if(s.length!=a.length)return!1;for(let f=0;f<s.length;f++){let p=s[f],y=a[f];if(p.from!=y.from||p.to!=y.to||p.size!=y.size)return!1}return!0}draw(s){return Ct.replace({widget:new Ai(this.size,s)}).range(this.from,this.to)}}class Ai extends Mn{constructor(s,a){super(),this.size=s,this.vertical=a}eq(s){return s.size==this.size&&s.vertical==this.vertical}toDOM(){let s=document.createElement("div");return this.vertical?s.style.height=this.size+"px":(s.style.width=this.size+"px",s.style.height="2px",s.style.display="inline-block"),s}get estimatedHeight(){return this.vertical?this.size:-1}}class Pr{constructor(s){this.state=s,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=_s,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=v.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let a=s.facet(Ls).some(f=>typeof f!="function"&&f.class=="cm-lineWrapping");this.heightOracle=new Qn(a),this.stateDeco=s.facet(fs).filter(f=>typeof f!="function"),this.heightMap=wi.empty().applyChanges(this.stateDeco,q.xv.empty,this.heightOracle.setDoc(s.doc),[new Ln(0,0,0,s.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ct.set(this.lineGaps.map(f=>f.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let s=[this.viewport],{main:a}=this.state.selection;for(let f=0;f<=1;f++){let p=f?a.head:a.anchor;if(!s.some(({from:y,to:S})=>p>=y&&p<=S)){let{from:y,to:S}=this.lineBlockAt(p);s.push(new pn(y,S))}}this.viewports=s.sort((f,p)=>f.from-p.from),this.scaler=this.heightMap.height<=7e6?_s:new Ao(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,s=>{this.viewportLines.push(this.scaler.scale==1?s:so(s,this.scaler))})}update(s,a=null){this.state=s.state;let f=this.stateDeco;this.stateDeco=this.state.facet(fs).filter(E=>typeof E!="function");let p=s.changedRanges,y=Ln.extendWithRanges(p,Er(f,this.stateDeco,s?s.changes:q.as.empty(this.state.doc.length))),S=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,s.startState.doc,this.heightOracle.setDoc(this.state.doc),y),this.heightMap.height!=S&&(s.flags|=2);let M=y.length?this.mapViewport(this.viewport,s.changes):this.viewport;(a&&(a.range.head<M.from||a.range.head>M.to)||!this.viewportIsAppropriate(M))&&(M=this.getViewport(0,a));let D=!s.changes.empty||s.flags&2||M.from!=this.viewport.from||M.to!=this.viewport.to;this.viewport=M,this.updateForViewport(),D&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,s.changes))),s.flags|=this.computeVisibleRanges(),a&&(this.scrollTarget=a),!this.mustEnforceCursorAssoc&&s.selectionSet&&s.view.lineWrapping&&s.state.selection.main.empty&&s.state.selection.main.assoc&&!s.state.facet(lr)&&(this.mustEnforceCursorAssoc=!0)}measure(s){let a=s.contentDOM,f=window.getComputedStyle(a),p=this.heightOracle,y=f.whiteSpace;this.defaultTextDirection=f.direction=="rtl"?v.RTL:v.LTR;let S=this.heightOracle.mustRefreshForWrapping(y),M=a.getBoundingClientRect(),D=S||this.mustMeasureContent||this.contentDOMHeight!=M.height;this.contentDOMHeight=M.height,this.mustMeasureContent=!1;let E=0,I=0,$=parseInt(f.paddingTop)||0,ne=parseInt(f.paddingBottom)||0;(this.paddingTop!=$||this.paddingBottom!=ne)&&(this.paddingTop=$,this.paddingBottom=ne,E|=10),this.editorWidth!=s.scrollDOM.clientWidth&&(p.lineWrapping&&(D=!0),this.editorWidth=s.scrollDOM.clientWidth,E|=8);let le=(this.printing?Sr:As)(a,this.paddingTop),me=le.top-this.pixelViewport.top,Te=le.bottom-this.pixelViewport.bottom;this.pixelViewport=le;let Ae=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(Ae!=this.inView&&(this.inView=Ae,Ae&&(D=!0)),!this.inView&&!this.scrollTarget)return 0;let We=M.width;if((this.contentDOMWidth!=We||this.editorHeight!=s.scrollDOM.clientHeight)&&(this.contentDOMWidth=M.width,this.editorHeight=s.scrollDOM.clientHeight,E|=8),D){let Kt=s.docView.measureVisibleLineHeights(this.viewport);if(p.mustRefreshForHeights(Kt)&&(S=!0),S||p.lineWrapping&&Math.abs(We-this.contentDOMWidth)>p.charWidth){let{lineHeight:Qt,charWidth:Ei}=s.docView.measureTextSize();S=Qt>0&&p.refresh(y,Qt,Ei,We/Ei,Kt),S&&(s.docView.minWidth=0,E|=8)}me>0&&Te>0?I=Math.max(me,Te):me<0&&Te<0&&(I=Math.min(me,Te)),p.heightChanged=!1;for(let Qt of this.viewports){let Ei=Qt.from==this.viewport.from?Kt:s.docView.measureVisibleLineHeights(Qt);this.heightMap=(S?wi.empty().applyChanges(this.stateDeco,q.xv.empty,this.heightOracle,[new Ln(0,0,0,s.state.doc.length)]):this.heightMap).updateHeight(p,0,S,new Lt(Qt.from,Ei))}p.heightChanged&&(E|=2)}let Wt=!this.viewportIsAppropriate(this.viewport,I)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Wt&&(this.viewport=this.getViewport(I,this.scrollTarget)),this.updateForViewport(),(E&2||Wt)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(S?[]:this.lineGaps,s)),E|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,s.docView.enforceCursorAssoc()),E}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(s,a){let f=.5-Math.max(-.5,Math.min(.5,s/1e3/2)),p=this.heightMap,y=this.heightOracle,{visibleTop:S,visibleBottom:M}=this,D=new pn(p.lineAt(S-f*1e3,Pt.ByHeight,y,0,0).from,p.lineAt(M+(1-f)*1e3,Pt.ByHeight,y,0,0).to);if(a){let{head:E}=a.range;if(E<D.from||E>D.to){let I=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),$=p.lineAt(E,Pt.ByPos,y,0,0),ne;a.y=="center"?ne=($.top+$.bottom)/2-I/2:a.y=="start"||a.y=="nearest"&&E<D.from?ne=$.top:ne=$.bottom-I,D=new pn(p.lineAt(ne-1e3/2,Pt.ByHeight,y,0,0).from,p.lineAt(ne+I+1e3/2,Pt.ByHeight,y,0,0).to)}}return D}mapViewport(s,a){let f=a.mapPos(s.from,-1),p=a.mapPos(s.to,1);return new pn(this.heightMap.lineAt(f,Pt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(p,Pt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:s,to:a},f=0){if(!this.inView)return!0;let{top:p}=this.heightMap.lineAt(s,Pt.ByPos,this.heightOracle,0,0),{bottom:y}=this.heightMap.lineAt(a,Pt.ByPos,this.heightOracle,0,0),{visibleTop:S,visibleBottom:M}=this;return(s==0||p<=S-Math.max(10,Math.min(-f,250)))&&(a==this.state.doc.length||y>=M+Math.max(10,Math.min(f,250)))&&p>S-2*1e3&&y<M+2*1e3}mapLineGaps(s,a){if(!s.length||a.empty)return s;let f=[];for(let p of s)a.touchesRange(p.from,p.to)||f.push(new Zn(a.mapPos(p.from),a.mapPos(p.to),p.size));return f}ensureLineGaps(s,a){let f=this.heightOracle.lineWrapping,p=f?1e4:2e3,y=p>>1,S=p<<1;if(this.defaultTextDirection!=v.LTR&&!f)return[];let M=[],D=(E,I,$,ne)=>{if(I-E<y)return;let le=this.state.selection.main,me=[le.from];le.empty||me.push(le.to);for(let Ae of me)if(Ae>E&&Ae<I){D(E,Ae-10,$,ne),D(Ae+10,I,$,ne);return}let Te=On(s,Ae=>Ae.from>=$.from&&Ae.to<=$.to&&Math.abs(Ae.from-E)<y&&Math.abs(Ae.to-I)<y&&!me.some(We=>Ae.from<We&&Ae.to>We));if(!Te){if(I<$.to&&a&&f&&a.visibleRanges.some(Ae=>Ae.from<=I&&Ae.to>=I)){let Ae=a.moveToLineBoundary(q.jT.cursor(I),!1,!0).head;Ae>E&&(I=Ae)}Te=new Zn(E,I,this.gapSize($,E,I,ne))}M.push(Te)};for(let E of this.viewportLines){if(E.length<S)continue;let I=Yo(E.from,E.to,this.stateDeco);if(I.total<S)continue;let $=this.scrollTarget?this.scrollTarget.range.head:null,ne,le;if(f){let me=p/this.heightOracle.lineLength*this.heightOracle.lineHeight,Te,Ae;if($!=null){let We=Ni(I,$),Wt=((this.visibleBottom-this.visibleTop)/2+me)/E.height;Te=We-Wt,Ae=We+Wt}else Te=(this.visibleTop-E.top-me)/E.height,Ae=(this.visibleBottom-E.top+me)/E.height;ne=Hn(I,Te),le=Hn(I,Ae)}else{let me=I.total*this.heightOracle.charWidth,Te=p*this.heightOracle.charWidth,Ae,We;if($!=null){let Wt=Ni(I,$),Kt=((this.pixelViewport.right-this.pixelViewport.left)/2+Te)/me;Ae=Wt-Kt,We=Wt+Kt}else Ae=(this.pixelViewport.left-Te)/me,We=(this.pixelViewport.right+Te)/me;ne=Hn(I,Ae),le=Hn(I,We)}ne>E.from&&D(E.from,ne,E,I),le<E.to&&D(le,E.to,E,I)}return M}gapSize(s,a,f,p){let y=Ni(p,f)-Ni(p,a);return this.heightOracle.lineWrapping?s.height*y:p.total*this.heightOracle.charWidth*y}updateLineGaps(s){Zn.same(s,this.lineGaps)||(this.lineGaps=s,this.lineGapDeco=Ct.set(s.map(a=>a.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let s=this.stateDeco;this.lineGaps.length&&(s=s.concat(this.lineGapDeco));let a=[];q.Xs.spans(s,this.viewport.from,this.viewport.to,{span(p,y){a.push({from:p,to:y})},point(){}},20);let f=a.length!=this.visibleRanges.length||this.visibleRanges.some((p,y)=>p.from!=a[y].from||p.to!=a[y].to);return this.visibleRanges=a,f?4:0}lineBlockAt(s){return s>=this.viewport.from&&s<=this.viewport.to&&this.viewportLines.find(a=>a.from<=s&&a.to>=s)||so(this.heightMap.lineAt(s,Pt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(s){return so(this.heightMap.lineAt(this.scaler.fromDOM(s),Pt.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(s){return so(this.heightMap.blockAt(this.scaler.fromDOM(s),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class pn{constructor(s,a){this.from=s,this.to=a}}function Yo(d,s,a){let f=[],p=d,y=0;return q.Xs.spans(a,d,s,{span(){},point(S,M){S>p&&(f.push({from:p,to:S}),y+=S-p),p=M}},20),p<s&&(f.push({from:p,to:s}),y+=s-p),{total:y,ranges:f}}function Hn({total:d,ranges:s},a){if(a<=0)return s[0].from;if(a>=1)return s[s.length-1].to;let f=Math.floor(d*a);for(let p=0;;p++){let{from:y,to:S}=s[p],M=S-y;if(f<=M)return y+f;f-=M}}function Ni(d,s){let a=0;for(let{from:f,to:p}of d.ranges){if(s<=p){a+=s-f;break}a+=p-f}return a/d.total}function On(d,s){for(let a of d)if(s(a))return a}const _s={toDOM(d){return d},fromDOM(d){return d},scale:1};class Ao{constructor(s,a,f){let p=0,y=0,S=0;this.viewports=f.map(({from:M,to:D})=>{let E=a.lineAt(M,Pt.ByPos,s,0,0).top,I=a.lineAt(D,Pt.ByPos,s,0,0).bottom;return p+=I-E,{from:M,to:D,top:E,bottom:I,domTop:0,domBottom:0}}),this.scale=(7e6-p)/(a.height-p);for(let M of this.viewports)M.domTop=S+(M.top-y)*this.scale,S=M.domBottom=M.domTop+(M.bottom-M.top),y=M.bottom}toDOM(s){for(let a=0,f=0,p=0;;a++){let y=a<this.viewports.length?this.viewports[a]:null;if(!y||s<y.top)return p+(s-f)*this.scale;if(s<=y.bottom)return y.domTop+(s-y.top);f=y.bottom,p=y.domBottom}}fromDOM(s){for(let a=0,f=0,p=0;;a++){let y=a<this.viewports.length?this.viewports[a]:null;if(!y||s<y.domTop)return f+(s-p)/this.scale;if(s<=y.domBottom)return y.top+(s-y.domTop);f=y.bottom,p=y.domBottom}}}function so(d,s){if(s.scale==1)return d;let a=s.toDOM(d.top),f=s.toDOM(d.bottom);return new en(d.from,d.length,a,f-a,Array.isArray(d.type)?d.type.map(p=>so(p,s)):d.type)}const Jo=q.r$.define({combine:d=>d.join(" ")}),ia=q.r$.define({combine:d=>d.indexOf(!0)>-1}),oo=W.V.newName(),Ea=W.V.newName(),na=W.V.newName(),Hs={"&light":"."+Ea,"&dark":"."+na};function Ms(d,s,a){return new W.V(s,{finish(f){return/&/.test(f)?f.replace(/&\w*/,p=>{if(p=="&")return d;if(!a||!a[p])throw new RangeError(`Unsupported selector: ${p}`);return a[p]}):d+" "+f}})}const Mo=Ms("."+oo,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Hs);class Qo{constructor(s,a,f,p){this.typeOver=p,this.bounds=null,this.text="";let{impreciseHead:y,impreciseAnchor:S}=s.docView;if(s.state.readOnly&&a>-1)this.newSel=null;else if(a>-1&&(this.bounds=s.docView.domBoundsAround(a,f,0))){let M=y||S?[]:el(s),D=new Uo(M,s.state);D.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=D.text,this.newSel=tl(M,this.bounds.from)}else{let M=s.observer.selectionRange,D=y&&y.node==M.focusNode&&y.offset==M.focusOffset||!Y(s.contentDOM,M.focusNode)?s.state.selection.main.head:s.docView.posFromDOM(M.focusNode,M.focusOffset),E=S&&S.node==M.anchorNode&&S.offset==M.anchorOffset||!Y(s.contentDOM,M.anchorNode)?s.state.selection.main.anchor:s.docView.posFromDOM(M.anchorNode,M.anchorOffset);this.newSel=q.jT.single(E,D)}}}function Dl(d,s){let a,{newSel:f}=s,p=d.state.selection.main;if(s.bounds){let{from:y,to:S}=s.bounds,M=p.from,D=null;(d.inputState.lastKeyCode===8&&d.inputState.lastKeyTime>Date.now()-100||Ve.android&&s.text.length<S-y)&&(M=p.to,D="end");let E=ds(d.state.doc.sliceString(y,S,ar),s.text,M-y,D);E&&(Ve.chrome&&d.inputState.lastKeyCode==13&&E.toB==E.from+2&&s.text.slice(E.from,E.toB)==ar+ar&&E.toB--,a={from:y+E.from,to:y+E.toA,insert:q.xv.of(s.text.slice(E.from,E.toB).split(ar))})}else f&&(!d.hasFocus&&d.state.facet(cs)||f.main.eq(p))&&(f=null);if(!a&&!f)return!1;if(!a&&s.typeOver&&!p.empty&&f&&f.main.empty?a={from:p.from,to:p.to,insert:d.state.doc.slice(p.from,p.to)}:a&&a.from>=p.from&&a.to<=p.to&&(a.from!=p.from||a.to!=p.to)&&p.to-p.from-(a.to-a.from)<=4?a={from:p.from,to:p.to,insert:d.state.doc.slice(p.from,a.from).append(a.insert).append(d.state.doc.slice(a.to,p.to))}:(Ve.mac||Ve.android)&&a&&a.from==a.to&&a.from==p.head-1&&/^\. ?$/.test(a.insert.toString())&&d.contentDOM.getAttribute("autocorrect")=="off"?(f&&a.insert.length==2&&(f=q.jT.single(f.main.anchor-1,f.main.head-1)),a={from:p.from,to:p.to,insert:q.xv.of([" "])}):Ve.chrome&&a&&a.from==a.to&&a.from==p.head&&a.insert.toString()==`
 `&&d.lineWrapping&&(f&&(f=q.jT.single(f.main.anchor-1,f.main.head-1)),a={from:p.from,to:p.to,insert:q.xv.of([" "])}),a){let y=d.state;if(Ve.ios&&d.inputState.flushIOSKey(d)||Ve.android&&(a.from==p.from&&a.to==p.to&&a.insert.length==1&&a.insert.lines==2&&kt(d.contentDOM,"Enter",13)||a.from==p.from-1&&a.to==p.to&&a.insert.length==0&&kt(d.contentDOM,"Backspace",8)||a.from==p.from&&a.to==p.to+1&&a.insert.length==0&&kt(d.contentDOM,"Delete",46)))return!0;let S=a.insert.toString();if(d.state.facet(or).some(E=>E(d,a.from,a.to,S)))return!0;d.inputState.composing>=0&&d.inputState.composing++;let M;if(a.from>=p.from&&a.to<=p.to&&a.to-a.from>=(p.to-p.from)/3&&(!f||f.main.empty&&f.main.from==a.from+a.insert.length)&&d.inputState.composing<0){let E=p.from<a.from?y.sliceDoc(p.from,a.from):"",I=p.to>a.to?y.sliceDoc(a.to,p.to):"";M=y.replaceSelection(d.state.toText(E+a.insert.sliceString(0,void 0,d.state.lineBreak)+I))}else{let E=y.changes(a),I=f&&!y.selection.main.eq(f.main)&&f.main.to<=E.newLength?f.main:void 0;if(y.selection.ranges.length>1&&d.inputState.composing>=0&&a.to<=p.to&&a.to>=p.to-10){let $=d.state.sliceDoc(a.from,a.to),ne=ql(d)||d.state.doc.lineAt(p.head),le=p.to-a.to,me=p.to-p.from;M=y.changeByRange(Te=>{if(Te.from==p.from&&Te.to==p.to)return{changes:E,range:I||Te.map(E)};let Ae=Te.to-le,We=Ae-$.length;if(Te.to-Te.from!=me||d.state.sliceDoc(We,Ae)!=$||ne&&Te.to>=ne.from&&Te.from<=ne.to)return{range:Te};let Wt=y.changes({from:We,to:Ae,insert:a.insert}),Kt=Te.to-p.to;return{changes:Wt,range:I?q.jT.range(Math.max(0,I.anchor+Kt),Math.max(0,I.head+Kt)):Te.map(Wt)}})}else M={changes:E,selection:I&&y.selection.replaceRange(I)}}let D="input.type";return d.composing&&(D+=".compose",d.inputState.compositionFirstChange&&(D+=".start",d.inputState.compositionFirstChange=!1)),d.dispatch(M,{scrollIntoView:!0,userEvent:D}),!0}else if(f&&!f.main.eq(p)){let y=!1,S="select";return d.inputState.lastSelectionTime>Date.now()-50&&(d.inputState.lastSelectionOrigin=="select"&&(y=!0),S=d.inputState.lastSelectionOrigin),d.dispatch({selection:f,scrollIntoView:y,userEvent:S}),!0}else return!1}function ds(d,s,a,f){let p=Math.min(d.length,s.length),y=0;for(;y<p&&d.charCodeAt(y)==s.charCodeAt(y);)y++;if(y==p&&d.length==s.length)return null;let S=d.length,M=s.length;for(;S>0&&M>0&&d.charCodeAt(S-1)==s.charCodeAt(M-1);)S--,M--;if(f=="end"){let D=Math.max(0,y-Math.min(S,M));a-=S+D-y}if(S<y&&d.length<s.length){let D=a<=y&&a>=S?y-a:0;y-=D,M=y+(M-S),S=y}else if(M<y){let D=a<=y&&a>=M?y-a:0;y-=D,S=y+(S-M),M=y}return{from:y,toA:S,toB:M}}function el(d){let s=[];if(d.root.activeElement!=d.contentDOM)return s;let{anchorNode:a,anchorOffset:f,focusNode:p,focusOffset:y}=d.observer.selectionRange;return a&&(s.push(new jo(a,f)),(p!=a||y!=f)&&s.push(new jo(p,y))),s}function tl(d,s){if(d.length==0)return null;let a=d[0].pos,f=d.length==2?d[1].pos:a;return a>-1&&f>-1?q.jT.single(a+s,f+s):null}const ra={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},lo=Ve.ie&&Ve.ie_version<=11;class Wn{constructor(s){this.view=s,this.active=!1,this.selectionRange=new ei,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=s.contentDOM,this.observer=new MutationObserver(a=>{for(let f of a)this.queue.push(f);(Ve.ie&&Ve.ie_version<=11||Ve.ios&&s.composing)&&a.some(f=>f.type=="childList"&&f.removedNodes.length||f.type=="characterData"&&f.oldValue.length>f.target.nodeValue.length)?this.flushSoon():this.flush()}),lo&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var a;((a=this.view.docView)===null||a===void 0?void 0:a.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(s.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(s.contentDOM)),this.addWindowListeners(this.win=s.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(a=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),a.length>0&&a[a.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(a=>{a.length>0&&a[a.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(s){this.view.inputState.runScrollHandlers(this.view,s),this.intersecting&&this.view.measure()}onScroll(s){this.intersecting&&this.flush(!1),this.onScrollChanged(s)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(s){if(this.gapIntersection&&(s.length!=this.gaps.length||this.gaps.some((a,f)=>a!=s[f]))){this.gapIntersection.disconnect();for(let a of s)this.gapIntersection.observe(a);this.gaps=s}}onSelectionChange(s){let a=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:f}=this,p=this.selectionRange;if(f.state.facet(cs)?f.root.activeElement!=this.dom:!Li(f.dom,p))return;let y=p.anchorNode&&f.docView.nearest(p.anchorNode);if(y&&y.ignoreEvent(s)){a||(this.selectionChanged=!1);return}(Ve.ie&&Ve.ie_version<=11||Ve.android&&Ve.chrome)&&!f.state.selection.main.empty&&p.focusNode&&Ze(p.focusNode,p.focusOffset,p.anchorNode,p.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:s}=this,a=Ve.safari&&s.root.nodeType==11&&oi(this.dom.ownerDocument)==this.dom&&Ts(this.view)||k(s.root);if(!a||this.selectionRange.eq(a))return!1;let f=Li(this.dom,a);return f&&!this.selectionChanged&&s.inputState.lastFocusTime>Date.now()-200&&s.inputState.lastTouchTime<Date.now()-300&&mi(this.dom,a)?(this.view.inputState.lastFocusTime=0,s.docView.updateSelection(),!1):(this.selectionRange.setRange(a),f&&(this.selectionChanged=!0),!0)}setSelectionRange(s,a){this.selectionRange.set(s.node,s.offset,a.node,a.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let s=0,a=null;for(let f=this.dom;f;)if(f.nodeType==1)!a&&s<this.scrollTargets.length&&this.scrollTargets[s]==f?s++:a||(a=this.scrollTargets.slice(0,s)),a&&a.push(f),f=f.assignedSlot||f.parentNode;else if(f.nodeType==11)f=f.host;else break;if(s<this.scrollTargets.length&&!a&&(a=this.scrollTargets.slice(0,s)),a){for(let f of this.scrollTargets)f.removeEventListener("scroll",this.onScroll);for(let f of this.scrollTargets=a)f.addEventListener("scroll",this.onScroll)}}ignore(s){if(!this.active)return s();try{return this.stop(),s()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ra),lo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),lo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(s,a){var f;if(!this.delayedAndroidKey){let p=()=>{let y=this.delayedAndroidKey;y&&(this.clearDelayedAndroidKey(),!this.flush()&&y.force&&kt(this.dom,y.key,y.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(p)}(!this.delayedAndroidKey||s=="Enter")&&(this.delayedAndroidKey={key:s,keyCode:a,force:this.lastChange<Date.now()-50||!!(!((f=this.delayedAndroidKey)===null||f===void 0)&&f.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let s=this.queue;for(let y of this.observer.takeRecords())s.push(y);s.length&&(this.queue=[]);let a=-1,f=-1,p=!1;for(let y of s){let S=this.readMutation(y);S&&(S.typeOver&&(p=!0),a==-1?{from:a,to:f}=S:(a=Math.min(S.from,a),f=Math.max(S.to,f)))}return{from:a,to:f,typeOver:p}}readChange(){let{from:s,to:a,typeOver:f}=this.processRecords(),p=this.selectionChanged&&Li(this.dom,this.selectionRange);return s<0&&!p?null:(s>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Qo(this.view,s,a,f))}flush(s=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;s&&this.readSelectionRange();let a=this.readChange();if(!a)return!1;let f=this.view.state,p=Dl(this.view,a);return this.view.state==f&&this.view.update([]),p}readMutation(s){let a=this.view.docView.nearest(s.target);if(!a||a.ignoreMutation(s))return null;if(a.markDirty(s.type=="attributes"),s.type=="attributes"&&(a.dirty|=4),s.type=="childList"){let f=gn(a,s.previousSibling||s.target.previousSibling,-1),p=gn(a,s.nextSibling||s.target.nextSibling,1);return{from:f?a.posAfter(f):a.posAtStart,to:p?a.posBefore(p):a.posAtEnd,typeOver:!1}}else return s.type=="characterData"?{from:a.posAtStart,to:a.posAtEnd,typeOver:s.target.nodeValue==s.oldValue}:null}setWindow(s){s!=this.win&&(this.removeWindowListeners(this.win),this.win=s,this.addWindowListeners(this.win))}addWindowListeners(s){s.addEventListener("resize",this.onResize),s.addEventListener("beforeprint",this.onPrint),s.addEventListener("scroll",this.onScroll),s.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(s){s.removeEventListener("scroll",this.onScroll),s.removeEventListener("resize",this.onResize),s.removeEventListener("beforeprint",this.onPrint),s.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var s,a,f,p;this.stop(),(s=this.intersection)===null||s===void 0||s.disconnect(),(a=this.gapIntersection)===null||a===void 0||a.disconnect(),(f=this.resizeScroll)===null||f===void 0||f.disconnect(),(p=this.resizeContent)===null||p===void 0||p.disconnect();for(let y of this.scrollTargets)y.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function gn(d,s,a){for(;s;){let f=$e.get(s);if(f&&f.parent==d)return f;let p=s.parentNode;s=p!=d.dom?p:a>0?s.nextSibling:s.previousSibling}return null}function Ts(d){let s=null;function a(D){D.preventDefault(),D.stopImmediatePropagation(),s=D.getTargetRanges()[0]}if(d.contentDOM.addEventListener("beforeinput",a,!0),d.dom.ownerDocument.execCommand("indent"),d.contentDOM.removeEventListener("beforeinput",a,!0),!s)return null;let f=s.startContainer,p=s.startOffset,y=s.endContainer,S=s.endOffset,M=d.docView.domAtPos(d.state.selection.main.anchor);return Ze(M.node,M.offset,y,S)&&([f,p,y,S]=[y,S,f,p]),{anchorNode:f,anchorOffset:p,focusNode:y,focusOffset:S}}class Mi{constructor(s={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=s.dispatch||(a=>this.update([a])),this.dispatch=this.dispatch.bind(this),this._root=s.root||sn(s.parent)||document,this.viewState=new Pr(s.state||q.yy.create(s)),this.plugins=this.state.facet(xr).map(a=>new Ki(a));for(let a of this.plugins)a.update(this);this.observer=new Wn(this),this.inputState=new G(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new qo(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),s.parent&&s.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...s){this._dispatch(s.length==1&&s[0]instanceof q.YW?s[0]:this.state.update(...s))}update(s){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let a=!1,f=!1,p,y=this.state;for(let ne of s){if(ne.startState!=y)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");y=ne.state}if(this.destroyed){this.viewState.state=y;return}let S=this.hasFocus,M=0,D=null;s.some(ne=>ne.annotation(Gt))?(this.inputState.notifiedFocused=S,M=1):S!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=S,D=$i(y,S),D||(M=1));let E=this.observer.delayedAndroidKey,I=null;if(E?(this.observer.clearDelayedAndroidKey(),I=this.observer.readChange(),(I&&!this.state.doc.eq(y.doc)||!this.state.selection.eq(y.selection))&&(I=null)):this.observer.clear(),y.facet(q.yy.phrases)!=this.state.facet(q.yy.phrases))return this.setState(y);p=F.create(this,y,s),p.flags|=M;let $=this.viewState.scrollTarget;try{this.updateState=2;for(let ne of s){if($&&($=$.map(ne.changes)),ne.scrollIntoView){let{main:le}=ne.state.selection;$=new wn(le.empty?le:q.jT.cursor(le.head,le.head>le.anchor?-1:1))}for(let le of ne.effects)le.is(yr)&&($=le.value)}this.viewState.update(p,$),this.bidiCache=Oo.update(this.bidiCache,p.changes),p.empty||(this.updatePlugins(p),this.inputState.update(p)),a=this.docView.update(p),this.state.facet(Vr)!=this.styleModules&&this.mountStyles(),f=this.updateAttrs(),this.showAnnouncements(s),this.docView.updateSelection(a,s.some(ne=>ne.isUserEvent("select.pointer")))}finally{this.updateState=0}if(p.startState.facet(Jo)!=p.state.facet(Jo)&&(this.viewState.mustMeasureContent=!0),(a||f||$||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!p.empty)for(let ne of this.state.facet(vr))ne(p);(D||I)&&Promise.resolve().then(()=>{D&&this.state==D.startState&&this.dispatch(D),I&&!Dl(this,I)&&E.force&&kt(this.contentDOM,E.key,E.keyCode)})}setState(s){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=s;return}this.updateState=2;let a=this.hasFocus;try{for(let f of this.plugins)f.destroy(this);this.viewState=new Pr(s),this.plugins=s.facet(xr).map(f=>new Ki(f)),this.pluginMap.clear();for(let f of this.plugins)f.update(this);this.docView=new qo(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}a&&this.focus(),this.requestMeasure()}updatePlugins(s){let a=s.startState.facet(xr),f=s.state.facet(xr);if(a!=f){let p=[];for(let y of f){let S=a.indexOf(y);if(S<0)p.push(new Ki(y));else{let M=this.plugins[S];M.mustUpdate=s,p.push(M)}}for(let y of this.plugins)y.mustUpdate!=s&&y.destroy(this);this.plugins=p,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let p of this.plugins)p.mustUpdate=s;for(let p=0;p<this.plugins.length;p++)this.plugins[p].update(this)}measure(s=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,s&&this.observer.forceFlush();let a=null,{scrollHeight:f,scrollTop:p,clientHeight:y}=this.scrollDOM,S=p>f-y-4?f:p;try{for(let M=0;;M++){this.updateState=1;let D=this.viewport,E=this.viewState.lineBlockAtHeight(S),I=this.viewState.measure(this);if(!I&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(M>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let $=[];I&4||([this.measureRequests,$]=[$,this.measureRequests]);let ne=$.map(Ae=>{try{return Ae.read(this)}catch(We){return Kn(this.state,We),Lr}}),le=F.create(this,this.state,[]),me=!1,Te=!1;le.flags|=I,a?a.flags|=I:a=le,this.updateState=2,le.empty||(this.updatePlugins(le),this.inputState.update(le),this.updateAttrs(),me=this.docView.update(le));for(let Ae=0;Ae<$.length;Ae++)if(ne[Ae]!=Lr)try{let We=$[Ae];We.write&&We.write(ne[Ae],this)}catch(We){Kn(this.state,We)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,Te=!0;else{let Ae=this.viewState.lineBlockAt(E.from).top-E.top;(Ae>1||Ae<-1)&&(this.scrollDOM.scrollTop+=Ae,Te=!0)}if(me&&this.docView.updateSelection(!0),this.viewport.from==D.from&&this.viewport.to==D.to&&!Te&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(a&&!a.empty)for(let M of this.state.facet(vr))M(a)}get themeClasses(){return oo+" "+(this.state.facet(ia)?na:Ea)+" "+this.state.facet(Jo)}updateAttrs(){let s=il(this,wo,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),a={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(cs)?"true":"false",class:"cm-content",style:`${Ve.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(a["aria-readonly"]="true"),il(this,Ls,a);let f=this.observer.ignore(()=>{let p=Gi(this.contentDOM,this.contentAttrs,a),y=Gi(this.dom,this.editorAttrs,s);return p||y});return this.editorAttrs=s,this.contentAttrs=a,f}showAnnouncements(s){let a=!0;for(let f of s)for(let p of f.effects)if(p.is(Mi.announce)){a&&(this.announceDOM.textContent=""),a=!1;let y=this.announceDOM.appendChild(document.createElement("div"));y.textContent=p.value}}mountStyles(){this.styleModules=this.state.facet(Vr),W.V.mount(this.root,this.styleModules.concat(Mo).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(s){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),s){if(this.measureRequests.indexOf(s)>-1)return;if(s.key!=null){for(let a=0;a<this.measureRequests.length;a++)if(this.measureRequests[a].key===s.key){this.measureRequests[a]=s;return}}this.measureRequests.push(s)}}plugin(s){let a=this.pluginMap.get(s);return(a===void 0||a&&a.spec!=s)&&this.pluginMap.set(s,a=this.plugins.find(f=>f.spec==s)||null),a&&a.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(s){return this.readMeasured(),this.viewState.elementAtHeight(s)}lineBlockAtHeight(s){return this.readMeasured(),this.viewState.lineBlockAtHeight(s)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(s){return this.viewState.lineBlockAt(s)}get contentHeight(){return this.viewState.contentHeight}moveByChar(s,a,f){return Q(this,s,ta(this,s,a,f))}moveByGroup(s,a){return Q(this,s,ta(this,s,a,f=>H(this,s.head,f)))}moveToLineBoundary(s,a,f=!0){return Rl(this,s,a,f)}moveVertically(s,a,f){return Q(this,s,J(this,s,a,f))}domAtPos(s){return this.docView.domAtPos(s)}posAtDOM(s,a=0){return this.docView.posFromDOM(s,a)}posAtCoords(s,a=!0){return this.readMeasured(),Gr(this,s,a)}coordsAtPos(s,a=1){this.readMeasured();let f=this.docView.coordsAt(s,a);if(!f||f.left==f.right)return f;let p=this.state.doc.lineAt(s),y=this.bidiSpans(p),S=y[ke.find(y,s-p.from,-1,a)];return ct(f,S.dir==v.LTR==a>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(s){return!this.state.facet(bo)||s<this.viewport.from||s>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(s))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(s){if(s.length>To)return xi(s.length);let a=this.textDirectionAt(s.from);for(let p of this.bidiCache)if(p.from==s.from&&p.dir==a)return p.order;let f=st(s.text,a);return this.bidiCache.push(new Oo(s.from,s.to,a,f)),f}get hasFocus(){var s;return(this.dom.ownerDocument.hasFocus()||Ve.safari&&((s=this.inputState)===null||s===void 0?void 0:s.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{jt(this.contentDOM),this.docView.updateSelection()})}setRoot(s){this._root!=s&&(this._root=s,this.observer.setWindow((s.nodeType==9?s:s.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let s of this.plugins)s.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(s,a={}){return yr.of(new wn(typeof s=="number"?q.jT.cursor(s):s,a.y,a.x,a.yMargin,a.xMargin))}static domEventHandlers(s){return Xi.define(()=>({}),{eventHandlers:s})}static theme(s,a){let f=W.V.newName(),p=[Jo.of(f),Vr.of(Ms(`.${f}`,s))];return a&&a.dark&&p.push(ia.of(!0)),p}static baseTheme(s){return q.Wl.lowest(Vr.of(Ms("."+oo,s,Hs)))}static findFromDOM(s){var a;let f=s.querySelector(".cm-content"),p=f&&$e.get(f)||$e.get(s);return((a=p==null?void 0:p.rootView)===null||a===void 0?void 0:a.view)||null}}Mi.styleModule=Vr,Mi.inputHandler=or,Mi.focusChangeEffect=fe,Mi.perLineTextDirection=bo,Mi.exceptionSink=yi,Mi.updateListener=vr,Mi.editable=cs,Mi.mouseSelectionStyle=Pn,Mi.dragMovesSelection=zn,Mi.clickAddsSelectionRange=Tn,Mi.decorations=fs,Mi.atomicRanges=io,Mi.scrollMargins=no,Mi.darkTheme=ia,Mi.contentAttributes=Ls,Mi.editorAttributes=wo,Mi.lineWrapping=Mi.contentAttributes.of({class:"cm-lineWrapping"}),Mi.announce=q.Py.define();const To=4096,Lr={};class Oo{constructor(s,a,f,p){this.from=s,this.to=a,this.dir=f,this.order=p}static update(s,a){if(a.empty)return s;let f=[],p=s.length?s[s.length-1].dir:v.LTR;for(let y=Math.max(0,s.length-10);y<s.length;y++){let S=s[y];S.dir==p&&!a.touchesRange(S.from,S.to)&&f.push(new Oo(a.mapPos(S.from,1),a.mapPos(S.to,-1),S.dir,S.order))}return f}}function il(d,s,a){for(let f=d.state.facet(s),p=f.length-1;p>=0;p--){let y=f[p],S=typeof y=="function"?y(d):y;S&&Dr(S,a)}return a}const nl=Ve.mac?"mac":Ve.windows?"win":Ve.linux?"linux":"key";function X(d,s){const a=d.split(/-(?!$)/);let f=a[a.length-1];f=="Space"&&(f=" ");let p,y,S,M;for(let D=0;D<a.length-1;++D){const E=a[D];if(/^(cmd|meta|m)$/i.test(E))M=!0;else if(/^a(lt)?$/i.test(E))p=!0;else if(/^(c|ctrl|control)$/i.test(E))y=!0;else if(/^s(hift)?$/i.test(E))S=!0;else if(/^mod$/i.test(E))s=="mac"?M=!0:y=!0;else throw new Error("Unrecognized modifier name: "+E)}return p&&(f="Alt-"+f),y&&(f="Ctrl-"+f),M&&(f="Meta-"+f),S&&(f="Shift-"+f),f}function ue(d,s,a){return s.altKey&&(d="Alt-"+d),s.ctrlKey&&(d="Ctrl-"+d),s.metaKey&&(d="Meta-"+d),a!==!1&&s.shiftKey&&(d="Shift-"+d),d}const oe=q.Wl.default(Mi.domEventHandlers({keydown(d,s){return kr(Zt(s.state),d,s,"editor")}})),Xe=q.r$.define({enables:oe}),ft=new WeakMap;function Zt(d){let s=d.facet(Xe),a=ft.get(s);return a||ft.set(s,a=Cr(s.reduce((f,p)=>f.concat(p),[]))),a}function mn(d,s,a){return kr(Zt(d.state),s,d,a)}let ti=null;const rl=4e3;function Cr(d,s=nl){let a=Object.create(null),f=Object.create(null),p=(S,M)=>{let D=f[S];if(D==null)f[S]=M;else if(D!=M)throw new Error("Key binding "+S+" is used both as a regular binding and as a multi-stroke prefix")},y=(S,M,D,E)=>{var I,$;let ne=a[S]||(a[S]=Object.create(null)),le=M.split(/ (?!$)/).map(Ae=>X(Ae,s));for(let Ae=1;Ae<le.length;Ae++){let We=le.slice(0,Ae).join(" ");p(We,!0),ne[We]||(ne[We]={preventDefault:!0,run:[Wt=>{let Kt=ti={view:Wt,prefix:We,scope:S};return setTimeout(()=>{ti==Kt&&(ti=null)},rl),!0}]})}let me=le.join(" ");p(me,!1);let Te=ne[me]||(ne[me]={preventDefault:!1,run:(($=(I=ne._any)===null||I===void 0?void 0:I.run)===null||$===void 0?void 0:$.slice())||[]});D&&Te.run.push(D),E&&(Te.preventDefault=!0)};for(let S of d){let M=S.scope?S.scope.split(" "):["editor"];if(S.any)for(let E of M){let I=a[E]||(a[E]=Object.create(null));I._any||(I._any={preventDefault:!1,run:[]});for(let $ in I)I[$].run.push(S.any)}let D=S[s]||S.key;if(D)for(let E of M)y(E,D,S.run,S.preventDefault),S.shift&&y(E,"Shift-"+D,S.shift,S.preventDefault)}return a}function kr(d,s,a,f){let p=(0,je.YG)(s),y=(0,q.gm)(p,0),S=(0,q.nZ)(y)==p.length&&p!=" ",M="",D=!1;ti&&ti.view==a&&ti.scope==f&&(M=ti.prefix+" ",(D=pe.indexOf(s.keyCode)<0)&&(ti=null));let E=new Set,I=me=>{if(me){for(let Te of me.run)if(!E.has(Te)&&(E.add(Te),Te(a,s)))return!0;me.preventDefault&&(D=!0)}return!1},$=d[f],ne,le;if($){if(I($[M+ue(p,s,!S)]))return!0;if(S&&(s.altKey||s.metaKey||s.ctrlKey)&&!(Ve.windows&&s.ctrlKey&&s.altKey)&&(ne=je.ue[s.keyCode])&&ne!=p){if(I($[M+ue(ne,s,!0)]))return!0;if(s.shiftKey&&(le=je.uY[s.keyCode])!=p&&le!=ne&&I($[M+ue(le,s,!1)]))return!0}else if(S&&s.shiftKey&&I($[M+ue(p,s,!0)]))return!0;if(I($._any))return!0}return D}class Yr{constructor(s,a,f,p,y){this.className=s,this.left=a,this.top=f,this.width=p,this.height=y}draw(){let s=document.createElement("div");return s.className=this.className,this.adjust(s),s}update(s,a){return a.className!=this.className?!1:(this.adjust(s),!0)}adjust(s){s.style.left=this.left+"px",s.style.top=this.top+"px",this.width!=null&&(s.style.width=this.width+"px"),s.style.height=this.height+"px"}eq(s){return this.left==s.left&&this.top==s.top&&this.width==s.width&&this.height==s.height&&this.className==s.className}static forRange(s,a,f){if(f.empty){let p=s.coordsAtPos(f.head,f.assoc||1);if(!p)return[];let y=Ro(s);return[new Yr(a,p.left-y.left,p.top-y.top,null,p.bottom-p.top)]}else return sl(s,a,f)}}function Ro(d){let s=d.scrollDOM.getBoundingClientRect();return{left:(d.textDirection==v.LTR?s.left:s.right-d.scrollDOM.clientWidth)-d.scrollDOM.scrollLeft,top:s.top-d.scrollDOM.scrollTop}}function hr(d,s,a){let f=q.jT.cursor(s);return{from:Math.max(a.from,d.moveToLineBoundary(f,!1,!0).from),to:Math.min(a.to,d.moveToLineBoundary(f,!0,!0).from),type:qt.Text}}function ao(d,s){let a=d.lineBlockAt(s);if(Array.isArray(a.type)){for(let f of a.type)if(f.to>s||f.to==s&&(f.to==a.to||f.type==qt.Text))return f}return a}function sl(d,s,a){if(a.to<=d.viewport.from||a.from>=d.viewport.to)return[];let f=Math.max(a.from,d.viewport.from),p=Math.min(a.to,d.viewport.to),y=d.textDirection==v.LTR,S=d.contentDOM,M=S.getBoundingClientRect(),D=Ro(d),E=S.querySelector(".cm-line"),I=E&&window.getComputedStyle(E),$=M.left+(I?parseInt(I.paddingLeft)+Math.min(0,parseInt(I.textIndent)):0),ne=M.right-(I?parseInt(I.paddingRight):0),le=ao(d,f),me=ao(d,p),Te=le.type==qt.Text?le:null,Ae=me.type==qt.Text?me:null;if(d.lineWrapping&&(Te&&(Te=hr(d,f,Te)),Ae&&(Ae=hr(d,p,Ae))),Te&&Ae&&Te.from==Ae.from)return Wt(Kt(a.from,a.to,Te));{let Ei=Te?Kt(a.from,null,Te):Qt(le,!1),Fi=Ae?Kt(null,a.to,Ae):Qt(me,!0),er=[];return(Te||le).to<(Ae||me).from-1?er.push(We($,Ei.bottom,ne,Fi.top)):Ei.bottom<Fi.top&&d.elementAtHeight((Ei.bottom+Fi.top)/2).type==qt.Text&&(Ei.bottom=Fi.top=(Ei.bottom+Fi.top)/2),Wt(Ei).concat(er).concat(Wt(Fi))}function We(Ei,Fi,er,js){return new Yr(s,Ei-D.left,Fi-D.top-.01,er-Ei,js-Fi+.01)}function Wt({top:Ei,bottom:Fi,horizontal:er}){let js=[];for(let uo=0;uo<er.length;uo+=2)js.push(We(er[uo],Ei,er[uo+1],Fi));return js}function Kt(Ei,Fi,er){let js=1e9,uo=-1e9,ma=[];function Ua(qs,Gs,Wo,po,go){let _r=d.coordsAtPos(qs,qs==er.to?-2:2),mo=d.coordsAtPos(Wo,Wo==er.from?2:-2);js=Math.min(_r.top,mo.top,js),uo=Math.max(_r.bottom,mo.bottom,uo),go==v.LTR?ma.push(y&&Gs?$:_r.left,y&&po?ne:mo.right):ma.push(!y&&po?$:mo.left,!y&&Gs?ne:_r.right)}let Ho=Ei!=null?Ei:er.from,va=Fi!=null?Fi:er.to;for(let qs of d.visibleRanges)if(qs.to>Ho&&qs.from<va)for(let Gs=Math.max(qs.from,Ho),Wo=Math.min(qs.to,va);;){let po=d.state.doc.lineAt(Gs);for(let go of d.bidiSpans(po)){let _r=go.from+po.from,mo=go.to+po.from;if(_r>=Wo)break;mo>Gs&&Ua(Math.max(_r,Gs),Ei==null&&_r<=Ho,Math.min(mo,Wo),Fi==null&&mo>=va,go.dir)}if(Gs=po.to+1,Gs>=Wo)break}return ma.length==0&&Ua(Ho,Ei==null,va,Fi==null,d.textDirection),{top:js,bottom:uo,horizontal:ma}}function Qt(Ei,Fi){let er=M.top+(Fi?Ei.top:Ei.bottom);return{top:er,bottom:er,horizontal:[]}}}function zt(d,s){return d.constructor==s.constructor&&d.eq(s)}class Pa{constructor(s,a){this.view=s,this.layer=a,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=s.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),a.above&&this.dom.classList.add("cm-layer-above"),a.class&&this.dom.classList.add(a.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(s.state),s.requestMeasure(this.measureReq),a.mount&&a.mount(this.dom,s)}update(s){s.startState.facet(zr)!=s.state.facet(zr)&&this.setOrder(s.state),(this.layer.update(s,this.dom)||s.geometryChanged)&&s.view.requestMeasure(this.measureReq)}setOrder(s){let a=0,f=s.facet(zr);for(;a<f.length&&f[a]!=this.layer;)a++;this.dom.style.zIndex=String((this.layer.above?150:-1)-a)}measure(){return this.layer.markers(this.view)}draw(s){if(s.length!=this.drawn.length||s.some((a,f)=>!zt(a,this.drawn[f]))){let a=this.dom.firstChild,f=0;for(let p of s)p.update&&a&&p.constructor&&this.drawn[f].constructor&&p.update(a,this.drawn[f])?(a=a.nextSibling,f++):this.dom.insertBefore(p.draw(),a);for(;a;){let p=a.nextSibling;a.remove(),a=p}this.drawn=s}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const zr=q.r$.define();function Fn(d){return[Xi.define(s=>new Pa(s,d)),zr.of(d)]}const cr=!Ve.ios,ps=q.r$.define({combine(d){return(0,q.BO)(d,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(s,a)=>Math.min(s,a),drawRangeCursor:(s,a)=>s||a})}});function Do(d={}){return[ps.of(d),gs,La,Os,lr.of(!0)]}function vn(d){return d.startState.facet(ps)!=d.state.facet(ps)}const gs=Fn({above:!0,markers(d){let{state:s}=d,a=s.facet(ps),f=[];for(let p of s.selection.ranges){let y=p==s.selection.main;if(p.empty?!y||cr:a.drawRangeCursor){let S=y?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",M=p.empty?p:q.jT.cursor(p.head,p.head>p.anchor?-1:1);for(let D of Yr.forRange(d,S,M))f.push(D)}}return f},update(d,s){d.transactions.some(f=>f.selection)&&(s.style.animationName=s.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let a=vn(d);return a&&ho(d.state,s),d.docChanged||d.selectionSet||a},mount(d,s){ho(s.state,d)},class:"cm-cursorLayer"});function ho(d,s){s.style.animationDuration=d.facet(ps).cursorBlinkRate+"ms"}const La=Fn({above:!1,markers(d){return d.state.selection.ranges.map(s=>s.empty?[]:Yr.forRange(d,"cm-selectionBackground",s)).reduce((s,a)=>s.concat(a))},update(d,s){return d.docChanged||d.selectionSet||d.viewportChanged||vn(d)},class:"cm-selectionLayer"}),Eo={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};cr&&(Eo[".cm-line"].caretColor="transparent !important");const Os=q.Wl.highest(Mi.theme(Eo)),Po=q.Py.define({map(d,s){return d==null?null:s.mapPos(d)}}),Jr=q.QQ.define({create(){return null},update(d,s){return d!=null&&(d=s.changes.mapPos(d)),s.effects.reduce((a,f)=>f.is(Po)?f.value:a,d)}}),sa=Xi.fromClass(class{constructor(d){this.view=d,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(d){var s;let a=d.state.field(Jr);a==null?this.cursor!=null&&((s=this.cursor)===null||s===void 0||s.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(d.startState.field(Jr)!=a||d.docChanged||d.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let d=this.view.state.field(Jr),s=d!=null&&this.view.coordsAtPos(d);if(!s)return null;let a=this.view.scrollDOM.getBoundingClientRect();return{left:s.left-a.left+this.view.scrollDOM.scrollLeft,top:s.top-a.top+this.view.scrollDOM.scrollTop,height:s.bottom-s.top}}drawCursor(d){this.cursor&&(d?(this.cursor.style.left=d.left+"px",this.cursor.style.top=d.top+"px",this.cursor.style.height=d.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(d){this.view.state.field(Jr)!=d&&this.view.dispatch({effects:Po.of(d)})}},{eventHandlers:{dragover(d){this.setDropPos(this.view.posAtCoords({x:d.clientX,y:d.clientY}))},dragleave(d){(d.target==this.view.contentDOM||!this.view.contentDOM.contains(d.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Lo(){return[Jr,sa]}function Qr(d,s,a,f,p){s.lastIndex=0;for(let y=d.iterRange(a,f),S=a,M;!y.next().done;S+=y.value.length)if(!y.lineBreak)for(;M=s.exec(y.value);)p(S+M.index,M)}function co(d,s){let a=d.visibleRanges;if(a.length==1&&a[0].from==d.viewport.from&&a[0].to==d.viewport.to)return a;let f=[];for(let{from:p,to:y}of a)p=Math.max(d.state.doc.lineAt(p).from,p-s),y=Math.min(d.state.doc.lineAt(y).to,y+s),f.length&&f[f.length-1].to>=p?f[f.length-1].to=y:f.push({from:p,to:y});return f}class Bo{constructor(s){const{regexp:a,decoration:f,decorate:p,boundary:y,maxLength:S=1e3}=s;if(!a.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=a,p)this.addMatch=(M,D,E,I)=>p(I,E,E+M[0].length,M,D);else if(typeof f=="function")this.addMatch=(M,D,E,I)=>{let $=f(M,D,E);$&&I(E,E+M[0].length,$)};else if(f)this.addMatch=(M,D,E,I)=>I(E,E+M[0].length,f);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=y,this.maxLength=S}createDeco(s){let a=new q.f_,f=a.add.bind(a);for(let{from:p,to:y}of co(s,this.maxLength))Qr(s.state.doc,this.regexp,p,y,(S,M)=>this.addMatch(M,s,S,f));return a.finish()}updateDeco(s,a){let f=1e9,p=-1;return s.docChanged&&s.changes.iterChanges((y,S,M,D)=>{D>s.view.viewport.from&&M<s.view.viewport.to&&(f=Math.min(M,f),p=Math.max(D,p))}),s.viewportChanged||p-f>1e3?this.createDeco(s.view):p>-1?this.updateRange(s.view,a.map(s.changes),f,p):a}updateRange(s,a,f,p){for(let y of s.visibleRanges){let S=Math.max(y.from,f),M=Math.min(y.to,p);if(M>S){let D=s.state.doc.lineAt(S),E=D.to<M?s.state.doc.lineAt(M):D,I=Math.max(y.from,D.from),$=Math.min(y.to,E.to);if(this.boundary){for(;S>D.from;S--)if(this.boundary.test(D.text[S-1-D.from])){I=S;break}for(;M<E.to;M++)if(this.boundary.test(E.text[M-E.from])){$=M;break}}let ne=[],le,me=(Te,Ae,We)=>ne.push(We.range(Te,Ae));if(D==E)for(this.regexp.lastIndex=I-D.from;(le=this.regexp.exec(D.text))&&le.index<$-D.from;)this.addMatch(le,s,le.index+D.from,me);else Qr(s.state.doc,this.regexp,I,$,(Te,Ae)=>this.addMatch(Ae,s,Te,me));a=a.update({filterFrom:I,filterTo:$,filter:(Te,Ae)=>Te<I||Ae>$,add:ne})}}return a}}const El=/x/.unicode!=null?"gu":"g",oa=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,El),No={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Kr=null;function ol(){var d;if(Kr==null&&typeof document!="undefined"&&document.body){let s=document.body.style;Kr=((d=s.tabSize)!==null&&d!==void 0?d:s.MozTabSize)!=null}return Kr||!1}const ll=q.r$.define({combine(d){let s=(0,q.BO)(d,{render:null,specialChars:oa,addSpecialChars:null});return(s.replaceTabs=!ol())&&(s.specialChars=new RegExp("	|"+s.specialChars.source,El)),s.addSpecialChars&&(s.specialChars=new RegExp(s.specialChars.source+"|"+s.addSpecialChars.source,El)),s}});function Ut(d={}){return[ll.of(d),Un()]}let ii=null;function Un(){return ii||(ii=Xi.fromClass(class{constructor(d){this.view=d,this.decorations=Ct.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(d.state.facet(ll)),this.decorations=this.decorator.createDeco(d)}makeDecorator(d){return new Bo({regexp:d.specialChars,decoration:(s,a,f)=>{let{doc:p}=a.state,y=(0,q.gm)(s[0],0);if(y==9){let S=p.lineAt(f),M=a.state.tabSize,D=(0,q.IS)(S.text,M,f-S.from);return Ct.replace({widget:new ms((M-D%M)*this.view.defaultCharacterWidth)})}return this.decorationCache[y]||(this.decorationCache[y]=Ct.replace({widget:new Ws(d,y)}))},boundary:d.replaceTabs?void 0:/[^]/})}update(d){let s=d.state.facet(ll);d.startState.facet(ll)!=s?(this.decorator=this.makeDecorator(s),this.decorations=this.decorator.createDeco(d.view)):this.decorations=this.decorator.updateDeco(d,this.decorations)}},{decorations:d=>d.decorations}))}const ni="\u2022";function Ii(d){return d>=32?ni:d==10?"\u2424":String.fromCharCode(9216+d)}class Ws extends Mn{constructor(s,a){super(),this.options=s,this.code=a}eq(s){return s.code==this.code}toDOM(s){let a=Ii(this.code),f=s.state.phrase("Control character")+" "+(No[this.code]||"0x"+this.code.toString(16)),p=this.options.render&&this.options.render(this.code,f,a);if(p)return p;let y=document.createElement("span");return y.textContent=a,y.title=f,y.setAttribute("aria-label",f),y.className="cm-specialChar",y}ignoreEvent(){return!1}}class ms extends Mn{constructor(s){super(),this.width=s}eq(s){return s.width==this.width}toDOM(){let s=document.createElement("span");return s.textContent="	",s.className="cm-tab",s.style.width=this.width+"px",s}ignoreEvent(){return!1}}const jn=null;function al(){return[jn,Ls.of(d=>{var s;return((s=d.plugin(jn))===null||s===void 0?void 0:s.attrs)||null})]}function Io(){return Ba}const Pl=Ct.line({class:"cm-activeLine"}),Ba=Xi.fromClass(class{constructor(d){this.decorations=this.getDeco(d)}update(d){(d.docChanged||d.selectionSet)&&(this.decorations=this.getDeco(d.view))}getDeco(d){let s=-1,a=[];for(let f of d.state.selection.ranges){let p=d.lineBlockAt(f.head);p.from>s&&(a.push(Pl.range(p.from)),s=p.from)}return Ct.set(a)}},{decorations:d=>d.decorations});class hl extends Mn{constructor(s){super(),this.content=s}toDOM(){let s=document.createElement("span");return s.className="cm-placeholder",s.style.pointerEvents="none",s.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?s.setAttribute("aria-label","placeholder "+this.content):s.setAttribute("aria-hidden","true"),s}ignoreEvent(){return!1}}function Ll(d){return Xi.fromClass(class{constructor(s){this.view=s,this.placeholder=Ct.set([Ct.widget({widget:new hl(d),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Ct.none:this.placeholder}},{decorations:s=>s.decorations})}const fo=2e3;function la(d,s,a){let f=Math.min(s.line,a.line),p=Math.max(s.line,a.line),y=[];if(s.off>fo||a.off>fo||s.col<0||a.col<0){let S=Math.min(s.off,a.off),M=Math.max(s.off,a.off);for(let D=f;D<=p;D++){let E=d.doc.line(D);E.length<=M&&y.push(q.jT.range(E.from+S,E.to+M))}}else{let S=Math.min(s.col,a.col),M=Math.max(s.col,a.col);for(let D=f;D<=p;D++){let E=d.doc.line(D),I=(0,q.Gz)(E.text,S,d.tabSize,!0);if(I<0)y.push(q.jT.cursor(E.to));else{let $=(0,q.Gz)(E.text,M,d.tabSize);y.push(q.jT.range(E.from+I,E.from+$))}}}return y}function Bl(d,s){let a=d.coordsAtPos(d.viewport.from);return a?Math.round(Math.abs((a.left-s)/d.defaultCharacterWidth)):-1}function Br(d,s){let a=d.posAtCoords({x:s.clientX,y:s.clientY},!1),f=d.state.doc.lineAt(a),p=a-f.from,y=p>fo?-1:p==f.length?Bl(d,s.clientX):(0,q.IS)(f.text,d.state.tabSize,a-f.from);return{line:f.number,col:y,off:p}}function aa(d,s){let a=Br(d,s),f=d.state.selection;return a?{update(p){if(p.docChanged){let y=p.changes.mapPos(p.startState.doc.line(a.line).from),S=p.state.doc.lineAt(y);a={line:S.number,col:a.col,off:Math.min(a.off,S.length)},f=f.map(p.changes)}},get(p,y,S){let M=Br(d,p);if(!M)return f;let D=la(d.state,a,M);return D.length?S?q.jT.create(D.concat(f.ranges)):q.jT.create(D):f}}:null}function Ph(d){let s=(d==null?void 0:d.eventFilter)||(a=>a.altKey&&a.button==0);return Mi.mouseSelectionStyle.of((a,f)=>s(f)?aa(a,f):null)}const Lh={Alt:[18,d=>d.altKey],Control:[17,d=>d.ctrlKey],Shift:[16,d=>d.shiftKey],Meta:[91,d=>d.metaKey]},Vf={style:"cursor: crosshair"};function Na(d={}){let[s,a]=Lh[d.key||"Alt"],f=Xi.fromClass(class{constructor(p){this.view=p,this.isDown=!1}set(p){this.isDown!=p&&(this.isDown=p,this.view.update([]))}},{eventHandlers:{keydown(p){this.set(p.keyCode==s||a(p))},keyup(p){(p.keyCode==s||!a(p))&&this.set(!1)},mousemove(p){this.set(a(p))}}});return[f,Mi.contentAttributes.of(p=>{var y;return!((y=p.plugin(f))===null||y===void 0)&&y.isDown?Vf:null})]}const vs="-10000px";class Ia{constructor(s,a,f){this.facet=a,this.createTooltipView=f,this.input=s.state.facet(a),this.tooltips=this.input.filter(p=>p),this.tooltipViews=this.tooltips.map(f)}update(s){var a;let f=s.state.facet(this.facet),p=f.filter(S=>S);if(f===this.input){for(let S of this.tooltipViews)S.update&&S.update(s);return!1}let y=[];for(let S=0;S<p.length;S++){let M=p[S],D=-1;if(M){for(let E=0;E<this.tooltips.length;E++){let I=this.tooltips[E];I&&I.create==M.create&&(D=E)}if(D<0)y[S]=this.createTooltipView(M);else{let E=y[S]=this.tooltipViews[D];E.update&&E.update(s)}}}for(let S of this.tooltipViews)y.indexOf(S)<0&&(S.dom.remove(),(a=S.destroy)===null||a===void 0||a.call(S));return this.input=f,this.tooltips=p,this.tooltipViews=y,!0}}function B(d={}){return cl.of(d)}function Nl(d){let{win:s}=d;return{top:0,left:0,bottom:s.innerHeight,right:s.innerWidth}}const cl=q.r$.define({combine:d=>{var s,a,f;return{position:Ve.ios?"absolute":((s=d.find(p=>p.position))===null||s===void 0?void 0:s.position)||"fixed",parent:((a=d.find(p=>p.parent))===null||a===void 0?void 0:a.parent)||null,tooltipSpace:((f=d.find(p=>p.tooltipSpace))===null||f===void 0?void 0:f.tooltipSpace)||Nl}}}),Nr=new WeakMap,ri=Xi.fromClass(class{constructor(d){this.view=d,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let s=d.state.facet(cl);this.position=s.position,this.parent=s.parent,this.classes=d.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Ia(d,_a,a=>this.createTooltip(a)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(a=>{Date.now()>this.lastTransaction-50&&a.length>0&&a[a.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),d.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let d of this.manager.tooltipViews)this.intersectionObserver.observe(d.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(d){d.transactions.length&&(this.lastTransaction=Date.now());let s=this.manager.update(d);s&&this.observeIntersection();let a=s||d.geometryChanged,f=d.state.facet(cl);if(f.position!=this.position){this.position=f.position;for(let p of this.manager.tooltipViews)p.dom.style.position=this.position;a=!0}if(f.parent!=this.parent){this.parent&&this.container.remove(),this.parent=f.parent,this.createContainer();for(let p of this.manager.tooltipViews)this.container.appendChild(p.dom);a=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);a&&this.maybeMeasure()}createTooltip(d){let s=d.create(this.view);if(s.dom.classList.add("cm-tooltip"),d.arrow&&!s.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let a=document.createElement("div");a.className="cm-tooltip-arrow",s.dom.appendChild(a)}return s.dom.style.position=this.position,s.dom.style.top=vs,this.container.appendChild(s.dom),s.mount&&s.mount(this.view),s}destroy(){var d,s;this.view.win.removeEventListener("resize",this.measureSoon);for(let a of this.manager.tooltipViews)a.dom.remove(),(d=a.destroy)===null||d===void 0||d.call(a);(s=this.intersectionObserver)===null||s===void 0||s.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let d=this.view.dom.getBoundingClientRect();return{editor:d,parent:this.parent?this.container.getBoundingClientRect():d,pos:this.manager.tooltips.map((s,a)=>{let f=this.manager.tooltipViews[a];return f.getCoords?f.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(cl).tooltipSpace(this.view)}}writeMeasure(d){var s;let{editor:a,space:f}=d,p=[];for(let y=0;y<this.manager.tooltips.length;y++){let S=this.manager.tooltips[y],M=this.manager.tooltipViews[y],{dom:D}=M,E=d.pos[y],I=d.size[y];if(!E||E.bottom<=Math.max(a.top,f.top)||E.top>=Math.min(a.bottom,f.bottom)||E.right<Math.max(a.left,f.left)-.1||E.left>Math.min(a.right,f.right)+.1){D.style.top=vs;continue}let $=S.arrow?M.dom.querySelector(".cm-tooltip-arrow"):null,ne=$?7:0,le=I.right-I.left,me=(s=Nr.get(M))!==null&&s!==void 0?s:I.bottom-I.top,Te=M.offset||Oc,Ae=this.view.textDirection==v.LTR,We=I.width>f.right-f.left?Ae?f.left:f.right-I.width:Ae?Math.min(E.left-($?14:0)+Te.x,f.right-le):Math.max(f.left,E.left-le+($?14:0)-Te.x),Wt=!!S.above;!S.strictSide&&(Wt?E.top-(I.bottom-I.top)-Te.y<f.top:E.bottom+(I.bottom-I.top)+Te.y>f.bottom)&&Wt==f.bottom-E.bottom>E.top-f.top&&(Wt=!Wt);let Kt=(Wt?E.top-f.top:f.bottom-E.bottom)-ne;if(Kt<me&&M.resize!==!1){if(Kt<this.view.defaultLineHeight){D.style.top=vs;continue}Nr.set(M,me),D.style.height=(me=Kt)+"px"}else D.style.height&&(D.style.height="");let Qt=Wt?E.top-me-ne-Te.y:E.bottom+ne+Te.y,Ei=We+le;if(M.overlap!==!0)for(let Fi of p)Fi.left<Ei&&Fi.right>We&&Fi.top<Qt+me&&Fi.bottom>Qt&&(Qt=Wt?Fi.top-me-2-ne:Fi.bottom+ne+2);this.position=="absolute"?(D.style.top=Qt-d.parent.top+"px",D.style.left=We-d.parent.left+"px"):(D.style.top=Qt+"px",D.style.left=We+"px"),$&&($.style.left=`${E.left+(Ae?Te.x:-Te.x)-(We+14-7)}px`),M.overlap!==!0&&p.push({left:We,top:Qt,right:Ei,bottom:Qt+me}),D.classList.toggle("cm-tooltip-above",Wt),D.classList.toggle("cm-tooltip-below",!Wt),M.positioned&&M.positioned(d.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let d of this.manager.tooltipViews)d.dom.style.top=vs}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),zf=Mi.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Oc={x:0,y:0},_a=q.r$.define({enables:[ri,zf]}),es=q.r$.define();class ha{constructor(s){this.view=s,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ia(s,es,a=>this.createHostedView(a))}static create(s){return new ha(s)}createHostedView(s){let a=s.create(this.view);return a.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(a.dom),this.mounted&&a.mount&&a.mount(this.view),a}mount(s){for(let a of this.manager.tooltipViews)a.mount&&a.mount(s);this.mounted=!0}positioned(s){for(let a of this.manager.tooltipViews)a.positioned&&a.positioned(s)}update(s){this.manager.update(s)}}const Bh=_a.compute([es],d=>{let s=d.facet(es).filter(a=>a);return s.length===0?null:{pos:Math.min(...s.map(a=>a.pos)),end:Math.max(...s.filter(a=>a.end!=null).map(a=>a.end)),create:ha.create,above:s[0].above,arrow:s.some(a=>a.arrow)}});class Nh{constructor(s,a,f,p,y){this.view=s,this.source=a,this.field=f,this.setHover=p,this.hoverTime=y,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:s.dom,time:0},this.checkHover=this.checkHover.bind(this),s.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),s.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let s=Date.now()-this.lastMove.time;s<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-s):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:s}=this,a=this.view.contentDOM.contains(s.target)?this.view.posAtCoords(s):null;if(a==null)return;let f=this.view.coordsAtPos(a);if(f==null||s.y<f.top||s.y>f.bottom||s.x<f.left-this.view.defaultCharacterWidth||s.x>f.right+this.view.defaultCharacterWidth)return;let p=this.view.bidiSpans(this.view.state.doc.lineAt(a)).find(M=>M.from<=a&&M.to>=a),y=p&&p.dir==v.RTL?-1:1,S=this.source(this.view,a,s.x<f.left?-y:y);if(S!=null&&S.then){let M=this.pending={pos:a};S.then(D=>{this.pending==M&&(this.pending=null,D&&this.view.dispatch({effects:this.setHover.of(D)}))},D=>Kn(this.view.state,D,"hover tooltip"))}else S&&this.view.dispatch({effects:this.setHover.of(S)})}mousemove(s){var a;this.lastMove={x:s.clientX,y:s.clientY,target:s.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let f=this.active;if(f&&!Ha(this.lastMove.target)||this.pending){let{pos:p}=f||this.pending,y=(a=f==null?void 0:f.end)!==null&&a!==void 0?a:p;(p==y?this.view.posAtCoords(this.lastMove)!=p:!Ih(this.view,p,y,s.clientX,s.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(s){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Ha(s.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Ha(d){for(let s=d;s;s=s.parentNode)if(s.nodeType==1&&s.classList.contains("cm-tooltip"))return!0;return!1}function Ih(d,s,a,f,p,y){let S=document.createRange(),M=d.domAtPos(s),D=d.domAtPos(a);S.setEnd(D.node,D.offset),S.setStart(M.node,M.offset);let E=S.getClientRects();S.detach();for(let I=0;I<E.length;I++){let $=E[I];if(Math.max($.top-p,p-$.bottom,$.left-f,f-$.right)<=y)return!0}return!1}function Fs(d,s={}){let a=q.Py.define(),f=q.QQ.define({create(){return null},update(p,y){if(p&&(s.hideOnChange&&(y.docChanged||y.selection)||s.hideOn&&s.hideOn(y,p)))return null;if(p&&y.docChanged){let S=y.changes.mapPos(p.pos,-1,q.gc.TrackDel);if(S==null)return null;let M=Object.assign(Object.create(null),p);M.pos=S,p.end!=null&&(M.end=y.changes.mapPos(p.end)),p=M}for(let S of y.effects)S.is(a)&&(p=S.value),S.is(Rc)&&(p=null);return p},provide:p=>es.from(p)});return[f,Xi.define(p=>new Nh(p,d,f,a,s.hoverTime||300)),Bh]}function Kf(d,s){let a=d.plugin(ri);if(!a)return null;let f=a.manager.tooltips.indexOf(s);return f<0?null:a.manager.tooltipViews[f]}function $f(d){return d.facet(es).some(s=>s)}const Rc=q.Py.define(),Zf=null;function Uf(d){var s;(s=d.plugin(ri))===null||s===void 0||s.maybeMeasure()}const ts=q.r$.define({combine(d){let s,a;for(let f of d)s=s||f.topContainer,a=a||f.bottomContainer;return{topContainer:s,bottomContainer:a}}});function Dc(d){return d?[ts.of(d)]:[]}function _h(d,s){let a=d.plugin(Wa),f=a?a.specs.indexOf(s):-1;return f>-1?a.panels[f]:null}const Wa=Xi.fromClass(class{constructor(d){this.input=d.state.facet(Vs),this.specs=this.input.filter(a=>a),this.panels=this.specs.map(a=>a(d));let s=d.state.facet(ts);this.top=new ca(d,!0,s.topContainer),this.bottom=new ca(d,!1,s.bottomContainer),this.top.sync(this.panels.filter(a=>a.top)),this.bottom.sync(this.panels.filter(a=>!a.top));for(let a of this.panels)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}update(d){let s=d.state.facet(ts);this.top.container!=s.topContainer&&(this.top.sync([]),this.top=new ca(d.view,!0,s.topContainer)),this.bottom.container!=s.bottomContainer&&(this.bottom.sync([]),this.bottom=new ca(d.view,!1,s.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let a=d.state.facet(Vs);if(a!=this.input){let f=a.filter(D=>D),p=[],y=[],S=[],M=[];for(let D of f){let E=this.specs.indexOf(D),I;E<0?(I=D(d.view),M.push(I)):(I=this.panels[E],I.update&&I.update(d)),p.push(I),(I.top?y:S).push(I)}this.specs=f,this.panels=p,this.top.sync(y),this.bottom.sync(S);for(let D of M)D.dom.classList.add("cm-panel"),D.mount&&D.mount()}else for(let f of this.panels)f.update&&f.update(d)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:d=>Mi.scrollMargins.of(s=>{let a=s.plugin(d);return a&&{top:a.top.scrollMargin(),bottom:a.bottom.scrollMargin()}})});class ca{constructor(s,a,f){this.view=s,this.top=a,this.container=f,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(s){for(let a of this.panels)a.destroy&&s.indexOf(a)<0&&a.destroy();this.panels=s,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let a=this.container||this.view.dom;a.insertBefore(this.dom,this.top?a.firstChild:null)}let s=this.dom.firstChild;for(let a of this.panels)if(a.dom.parentNode==this.dom){for(;s!=a.dom;)s=Hh(s);s=s.nextSibling}else this.dom.insertBefore(a.dom,s);for(;s;)s=Hh(s)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let s of this.classes.split(" "))s&&this.container.classList.remove(s);for(let s of(this.classes=this.view.themeClasses).split(" "))s&&this.container.classList.add(s)}}}function Hh(d){let s=d.nextSibling;return d.remove(),s}const Vs=q.r$.define({enables:Wa});class zs extends q.uU{compare(s){return this==s||this.constructor==s.constructor&&this.eq(s)}eq(s){return!1}destroy(s){}}zs.prototype.elementClass="",zs.prototype.toDOM=void 0,zs.prototype.mapMode=q.gc.TrackBefore,zs.prototype.startSide=zs.prototype.endSide=-1,zs.prototype.point=!0;const Ks=q.r$.define(),Ir={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>q.Xs.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},fl=q.r$.define();function Fa(d){return[Va(),fl.of(Object.assign(Object.assign({},Ir),d))]}const fa=q.r$.define({combine:d=>d.some(s=>s)});function Va(d){let s=[Wh];return d&&d.fixed===!1&&s.push(fa.of(!0)),s}const Wh=Xi.fromClass(class{constructor(d){this.view=d,this.prevViewport=d.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=d.state.facet(fl).map(s=>new Fh(d,s));for(let s of this.gutters)this.dom.appendChild(s.dom);this.fixed=!d.state.facet(fa),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),d.scrollDOM.insertBefore(this.dom,d.contentDOM)}update(d){if(this.updateGutters(d)){let s=this.prevViewport,a=d.view.viewport,f=Math.min(s.to,a.to)-Math.max(s.from,a.from);this.syncGutters(f<(a.to-a.from)*.8)}d.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(fa)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=d.view.viewport}syncGutters(d){let s=this.dom.nextSibling;d&&this.dom.remove();let a=q.Xs.iter(this.view.state.facet(Ks),this.view.viewport.from),f=[],p=this.gutters.map(y=>new jf(y,this.view.viewport,-this.view.documentPadding.top));for(let y of this.view.viewportLineBlocks){let S;if(Array.isArray(y.type)){for(let M of y.type)if(M.type==qt.Text){S=M;break}}else S=y.type==qt.Text?y:void 0;if(S){f.length&&(f=[]),Ka(a,f,y.from);for(let M of p)M.line(this.view,S,f)}}for(let y of p)y.finish();d&&this.view.scrollDOM.insertBefore(this.dom,s)}updateGutters(d){let s=d.startState.facet(fl),a=d.state.facet(fl),f=d.docChanged||d.heightChanged||d.viewportChanged||!q.Xs.eq(d.startState.facet(Ks),d.state.facet(Ks),d.view.viewport.from,d.view.viewport.to);if(s==a)for(let p of this.gutters)p.update(d)&&(f=!0);else{f=!0;let p=[];for(let y of a){let S=s.indexOf(y);S<0?p.push(new Fh(this.view,y)):(this.gutters[S].update(d),p.push(this.gutters[S]))}for(let y of this.gutters)y.dom.remove(),p.indexOf(y)<0&&y.destroy();for(let y of p)this.dom.appendChild(y.dom);this.gutters=p}return f}destroy(){for(let d of this.gutters)d.destroy();this.dom.remove()}},{provide:d=>Mi.scrollMargins.of(s=>{let a=s.plugin(d);return!a||a.gutters.length==0||!a.fixed?null:s.textDirection==v.LTR?{left:a.dom.offsetWidth}:{right:a.dom.offsetWidth}})});function za(d){return Array.isArray(d)?d:[d]}function Ka(d,s,a){for(;d.value&&d.from<=a;)d.from==a&&s.push(d.value),d.next()}class jf{constructor(s,a,f){this.gutter=s,this.height=f,this.i=0,this.cursor=q.Xs.iter(s.markers,a.from)}line(s,a,f){let p=[];Ka(this.cursor,p,a.from),f.length&&(p=p.concat(f));let y=this.gutter.config.lineMarker(s,a,p);y&&p.unshift(y);let S=this.gutter;if(p.length==0&&!S.config.renderEmptyElements)return;let M=a.top-this.height;if(this.i==S.elements.length){let D=new ua(s,a.height,M,p);S.elements.push(D),S.dom.appendChild(D.dom)}else S.elements[this.i].update(s,a.height,M,p);this.height=a.bottom,this.i++}finish(){let s=this.gutter;for(;s.elements.length>this.i;){let a=s.elements.pop();s.dom.removeChild(a.dom),a.destroy()}}}class Fh{constructor(s,a){this.view=s,this.config=a,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let f in a.domEventHandlers)this.dom.addEventListener(f,p=>{let y=p.target,S;if(y!=this.dom&&this.dom.contains(y)){for(;y.parentNode!=this.dom;)y=y.parentNode;let D=y.getBoundingClientRect();S=(D.top+D.bottom)/2}else S=p.clientY;let M=s.lineBlockAtHeight(S-s.documentTop);a.domEventHandlers[f](s,M,p)&&p.preventDefault()});this.markers=za(a.markers(s)),a.initialSpacer&&(this.spacer=new ua(s,0,0,[a.initialSpacer(s)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(s){let a=this.markers;if(this.markers=za(this.config.markers(s.view)),this.spacer&&this.config.updateSpacer){let p=this.config.updateSpacer(this.spacer.markers[0],s);p!=this.spacer.markers[0]&&this.spacer.update(s.view,0,0,[p])}let f=s.view.viewport;return!q.Xs.eq(this.markers,a,f.from,f.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(s):!1)}destroy(){for(let s of this.elements)s.destroy()}}class ua{constructor(s,a,f,p){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(s,a,f,p)}update(s,a,f,p){this.height!=a&&(this.dom.style.height=(this.height=a)+"px"),this.above!=f&&(this.dom.style.marginTop=(this.above=f)?f+"px":""),da(this.markers,p)||this.setMarkers(s,p)}setMarkers(s,a){let f="cm-gutterElement",p=this.dom.firstChild;for(let y=0,S=0;;){let M=S,D=y<a.length?a[y++]:null,E=!1;if(D){let I=D.elementClass;I&&(f+=" "+I);for(let $=S;$<this.markers.length;$++)if(this.markers[$].compare(D)){M=$,E=!0;break}}else M=this.markers.length;for(;S<M;){let I=this.markers[S++];if(I.toDOM){I.destroy(p);let $=p.nextSibling;p.remove(),p=$}}if(!D)break;D.toDOM&&(E?p=p.nextSibling:this.dom.insertBefore(D.toDOM(s),p)),E&&S++}this.dom.className=f,this.markers=a}destroy(){this.setMarkers(null,[])}}function da(d,s){if(d.length!=s.length)return!1;for(let a=0;a<d.length;a++)if(!d[a].compare(s[a]))return!1;return!0}const pa=q.r$.define(),ul=q.r$.define({combine(d){return(0,q.BO)(d,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(s,a){let f=Object.assign({},s);for(let p in a){let y=f[p],S=a[p];f[p]=y?(M,D,E)=>y(M,D,E)||S(M,D,E):S}return f}})}});class _o extends zs{constructor(s){super(),this.number=s}eq(s){return this.number==s.number}toDOM(){return document.createTextNode(this.number)}}function ga(d,s){return d.state.facet(ul).formatNumber(s,d.state)}const $s=fl.compute([ul],d=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(s){return s.state.facet(pa)},lineMarker(s,a,f){return f.some(p=>p.toDOM)?null:new _o(ga(s,s.state.doc.lineAt(a.from).number))},lineMarkerChange:s=>s.startState.facet(ul)!=s.state.facet(ul),initialSpacer(s){return new _o(ga(s,Zs(s.state.doc.lines)))},updateSpacer(s,a){let f=ga(a.view,Zs(a.view.state.doc.lines));return f==s.number?s:new _o(f)},domEventHandlers:d.facet(ul).domEventHandlers}));function $a(d={}){return[ul.of(d),Va(),$s]}function Zs(d){let s=9;for(;s<d;)s=s*10+9;return s}const is=new class extends zs{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Ec=Ks.compute(["selection"],d=>{let s=[],a=-1;for(let f of d.selection.ranges){let p=d.doc.lineAt(f.head).from;p>a&&(a=p,s.push(is.range(p)))}return q.Xs.of(s)});function Vh(){return Ec}const zh=new Map;function Il(d){let s=zh.get(d);return s||zh.set(d,s=Ct.mark({attributes:d==="	"?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":d.replace(/ /g,"\xB7")}})),s}function Us(d){return Xi.define(s=>({decorations:d.createDeco(s),update(a){this.decorations=d.updateDeco(a,this.decorations)}}),{decorations:s=>s.decorations})}const Kh=Us(new Bo({regexp:/\t| +/g,decoration:d=>Il(d[0]),boundary:/\S/}));function Pc(){return Kh}const dl=Us(new Bo({regexp:/\s+$/g,decoration:Ct.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function qf(){return dl}const Za={HeightMap:wi,HeightOracle:Qn,MeasuredHeights:Lt,QueryType:Pt,ChangedRange:Ln,computeOrder:st,moveVisually:fn}},28699:function(at,gi,Le){"use strict";Le.d(gi,{V:function(){return Y}});const q="\u037C",W=typeof Symbol=="undefined"?"__"+q:Symbol.for(q),je=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),k=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class Y{constructor(Ze,tt){this.rules=[];let{finish:fi}=tt||{};function Fe(ct){return/^@/.test(ct)?[ct]:ct.split(/,\s*/)}function Yt(ct,Ti,Se,nt){let ei=[],Jt=/^@(\w+)\b/.exec(ct[0]),jt=Jt&&Jt[1]=="keyframes";if(Jt&&Ti==null)return Se.push(ct[0]+";");for(let Bi in Ti){let _i=Ti[Bi];if(/&/.test(Bi))Yt(Bi.split(/,\s*/).map(kt=>ct.map(sn=>kt.replace(/&/,sn))).reduce((kt,sn)=>kt.concat(sn)),_i,Se);else if(_i&&typeof _i=="object"){if(!Jt)throw new RangeError("The value of a property ("+Bi+") should be a primitive value.");Yt(Fe(Bi),_i,ei,jt)}else _i!=null&&ei.push(Bi.replace(/_.*/,"").replace(/[A-Z]/g,kt=>"-"+kt.toLowerCase())+": "+_i+";")}(ei.length||jt)&&Se.push((fi&&!Jt&&!nt?ct.map(fi):ct).join(", ")+" {"+ei.join(" ")+"}")}for(let ct in Ze)Yt(Fe(ct),Ze[ct],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let Ze=k[W]||1;return k[W]=Ze+1,q+Ze.toString(36)}static mount(Ze,tt,fi){let Fe=Ze[je],Yt=fi&&fi.nonce;Fe?Yt&&Fe.setNonce(Yt):Fe=new Li(Ze,Yt),Fe.mount(Array.isArray(tt)?tt:[tt])}}let oi=new Map;class Li{constructor(Ze,tt){let fi=Ze.ownerDocument||Ze,Fe=fi.defaultView;if(!Ze.head&&Ze.adoptedStyleSheets&&Fe.CSSStyleSheet){let Yt=oi.get(fi);if(Yt)return Ze.adoptedStyleSheets=[Yt.sheet,...Ze.adoptedStyleSheets],Ze[je]=Yt;this.sheet=new Fe.CSSStyleSheet,Ze.adoptedStyleSheets=[this.sheet,...Ze.adoptedStyleSheets],oi.set(fi,this)}else{this.styleTag=fi.createElement("style"),tt&&this.styleTag.setAttribute("nonce",tt);let Yt=Ze.head||Ze;Yt.insertBefore(this.styleTag,Yt.firstChild)}this.modules=[],Ze[je]=this}mount(Ze){let tt=this.sheet,fi=0,Fe=0;for(let Yt=0;Yt<Ze.length;Yt++){let ct=Ze[Yt],Ti=this.modules.indexOf(ct);if(Ti<Fe&&Ti>-1&&(this.modules.splice(Ti,1),Fe--,Ti=-1),Ti==-1){if(this.modules.splice(Fe++,0,ct),tt)for(let Se=0;Se<ct.rules.length;Se++)tt.insertRule(ct.rules[Se],fi++)}else{for(;Fe<Ti;)fi+=this.modules[Fe++].rules.length;fi+=ct.rules.length,Fe++}}if(!tt){let Yt="";for(let ct=0;ct<this.modules.length;ct++)Yt+=this.modules[ct].getRules()+`
`;this.styleTag.textContent=Yt}}setNonce(Ze){this.styleTag&&this.styleTag.getAttribute("nonce")!=Ze&&this.styleTag.setAttribute("nonce",Ze)}}},81754:function(at,gi,Le){"use strict";Le.d(gi,{YG:function(){return Li},uY:function(){return W},ue:function(){return q}});for(var q={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},W={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},je=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),k=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Y=0;Y<10;Y++)q[48+Y]=q[96+Y]=String(Y);for(var Y=1;Y<=24;Y++)q[Y+111]="F"+Y;for(var Y=65;Y<=90;Y++)q[Y]=String.fromCharCode(Y+32),W[Y]=String.fromCharCode(Y);for(var oi in q)W.hasOwnProperty(oi)||(W[oi]=q[oi]);function Li(Be){var Ze=je&&Be.metaKey&&Be.shiftKey&&!Be.ctrlKey&&!Be.altKey||k&&Be.shiftKey&&Be.key&&Be.key.length==1||Be.key=="Unidentified",tt=!Ze&&Be.key||(Be.shiftKey?W:q)[Be.keyCode]||Be.key||"Unidentified";return tt=="Esc"&&(tt="Escape"),tt=="Del"&&(tt="Delete"),tt=="Left"&&(tt="ArrowLeft"),tt=="Up"&&(tt="ArrowUp"),tt=="Right"&&(tt="ArrowRight"),tt=="Down"&&(tt="ArrowDown"),tt}}}]);
